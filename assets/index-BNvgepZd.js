(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function bE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qv={exports:{}},Sc={},Yv={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),RE=Symbol.for("react.portal"),NE=Symbol.for("react.fragment"),AE=Symbol.for("react.strict_mode"),PE=Symbol.for("react.profiler"),OE=Symbol.for("react.provider"),DE=Symbol.for("react.context"),LE=Symbol.for("react.forward_ref"),VE=Symbol.for("react.suspense"),ME=Symbol.for("react.memo"),FE=Symbol.for("react.lazy"),Km=Symbol.iterator;function UE(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var Jv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xv=Object.assign,Zv={};function ks(t,e,n){this.props=t,this.context=e,this.refs=Zv,this.updater=n||Jv}ks.prototype.isReactComponent={};ks.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ks.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e_(){}e_.prototype=ks.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=Zv,this.updater=n||Jv}var Yh=Qh.prototype=new e_;Yh.constructor=Qh;Xv(Yh,ks.prototype);Yh.isPureReactComponent=!0;var Qm=Array.isArray,t_=Object.prototype.hasOwnProperty,Jh={current:null},n_={key:!0,ref:!0,__self:!0,__source:!0};function r_(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)t_.call(e,r)&&!n_.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:ra,type:t,key:s,ref:a,props:i,_owner:Jh.current}}function BE(t,e){return{$$typeof:ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ra}function $E(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ym=/\/+/g;function Du(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$E(""+t.key):e.toString(36)}function ul(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ra:case RE:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Du(a,0):r,Qm(i)?(n="",t!=null&&(n=t.replace(Ym,"$&/")+"/"),ul(i,e,n,"",function(d){return d})):i!=null&&(Xh(i)&&(i=BE(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ym,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Qm(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+Du(s,c);a+=ul(s,e,n,u,i)}else if(u=UE(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+Du(s,c++),a+=ul(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function La(t,e,n){if(t==null)return t;var r=[],i=0;return ul(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},dl={transition:null},WE={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:dl,ReactCurrentOwner:Jh};he.Children={map:La,forEach:function(t,e,n){La(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return La(t,function(){e++}),e},toArray:function(t){return La(t,function(e){return e})||[]},only:function(t){if(!Xh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=ks;he.Fragment=NE;he.Profiler=PE;he.PureComponent=Qh;he.StrictMode=AE;he.Suspense=VE;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xv({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Jh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)t_.call(e,u)&&!n_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ra,type:t.type,key:i,ref:s,props:r,_owner:a}};he.createContext=function(t){return t={$$typeof:DE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OE,_context:t},t.Consumer=t};he.createElement=r_;he.createFactory=function(t){var e=r_.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:LE,render:t}};he.isValidElement=Xh;he.lazy=function(t){return{$$typeof:FE,_payload:{_status:-1,_result:t},_init:zE}};he.memo=function(t,e){return{$$typeof:ME,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=dl.transition;dl.transition={};try{t()}finally{dl.transition=e}};he.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};he.useCallback=function(t,e){return Nt.current.useCallback(t,e)};he.useContext=function(t){return Nt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Nt.current.useEffect(t,e)};he.useId=function(){return Nt.current.useId()};he.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Nt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};he.useRef=function(t){return Nt.current.useRef(t)};he.useState=function(t){return Nt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Nt.current.useTransition()};he.version="18.2.0";Yv.exports=he;var b=Yv.exports;const qE=bE(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE=b,GE=Symbol.for("react.element"),KE=Symbol.for("react.fragment"),QE=Object.prototype.hasOwnProperty,YE=HE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JE={key:!0,ref:!0,__self:!0,__source:!0};function i_(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)QE.call(e,r)&&!JE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:GE,type:t,key:s,ref:a,props:i,_owner:YE.current}}Sc.Fragment=KE;Sc.jsx=i_;Sc.jsxs=i_;Qv.exports=Sc;var o=Qv.exports,Sd={},s_={exports:{}},Gt={},o_={exports:{}},a_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,B){var F=V.length;V.push(B);e:for(;0<F;){var ae=F-1>>>1,te=V[ae];if(0<i(te,B))V[ae]=B,V[F]=te,F=ae;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var B=V[0],F=V.pop();if(F!==B){V[0]=F;e:for(var ae=0,te=V.length,ve=te>>>1;ae<ve;){var Ze=2*(ae+1)-1,et=V[Ze],ce=Ze+1,Ve=V[ce];if(0>i(et,F))ce<te&&0>i(Ve,et)?(V[ae]=Ve,V[ce]=F,ae=ce):(V[ae]=et,V[Ze]=F,ae=Ze);else if(ce<te&&0>i(Ve,F))V[ae]=Ve,V[ce]=F,ae=ce;else break e}}return B}function i(V,B){var F=V.sortIndex-B.sortIndex;return F!==0?F:V.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,g=null,m=3,k=!1,I=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(V){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=V)r(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(d)}}function P(V){if(x=!1,j(V),!I)if(n(u)!==null)I=!0,Z(D);else{var B=n(d);B!==null&&W(P,B.startTime-V)}}function D(V,B){I=!1,x&&(x=!1,S(y),y=-1),k=!0;var F=m;try{for(j(B),g=n(u);g!==null&&(!(g.expirationTime>B)||V&&!v());){var ae=g.callback;if(typeof ae=="function"){g.callback=null,m=g.priorityLevel;var te=ae(g.expirationTime<=B);B=t.unstable_now(),typeof te=="function"?g.callback=te:g===n(u)&&r(u),j(B)}else r(u);g=n(u)}if(g!==null)var ve=!0;else{var Ze=n(d);Ze!==null&&W(P,Ze.startTime-B),ve=!1}return ve}finally{g=null,m=F,k=!1}}var A=!1,E=null,y=-1,w=5,C=-1;function v(){return!(t.unstable_now()-C<w)}function O(){if(E!==null){var V=t.unstable_now();C=V;var B=!0;try{B=E(!0,V)}finally{B?R():(A=!1,E=null)}}else A=!1}var R;if(typeof _=="function")R=function(){_(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,oe=q.port2;q.port1.onmessage=O,R=function(){oe.postMessage(null)}}else R=function(){N(O,0)};function Z(V){E=V,A||(A=!0,R())}function W(V,B){y=N(function(){V(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){I||k||(I=!0,Z(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var F=m;m=B;try{return V()}finally{m=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,B){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var F=m;m=V;try{return B()}finally{m=F}},t.unstable_scheduleCallback=function(V,B,F){var ae=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ae+F:ae):F=ae,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=F+te,V={id:h++,callback:B,priorityLevel:V,startTime:F,expirationTime:te,sortIndex:-1},F>ae?(V.sortIndex=F,e(d,V),n(u)===null&&V===n(d)&&(x?(S(y),y=-1):x=!0,W(P,F-ae))):(V.sortIndex=te,e(u,V),I||k||(I=!0,Z(D))),V},t.unstable_shouldYield=v,t.unstable_wrapCallback=function(V){var B=m;return function(){var F=m;m=B;try{return V.apply(this,arguments)}finally{m=F}}}})(a_);o_.exports=a_;var XE=o_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_=b,Ht=XE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c_=new Set,No={};function xi(t,e){ds(t,e),ds(t+"Capture",e)}function ds(t,e){for(No[t]=e,t=0;t<e.length;t++)c_.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,ZE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jm={},Xm={};function eS(t){return Td.call(Xm,t)?!0:Td.call(Jm,t)?!1:ZE.test(t)?Xm[t]=!0:(Jm[t]=!0,!1)}function tS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nS(t,e,n,r){if(e===null||typeof e>"u"||tS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ef);st[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ef);st[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ef);st[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function tf(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nS(e,n,i,r)&&(n=null),r||i===null?eS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=l_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Va=Symbol.for("react.element"),Ui=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),Id=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),d_=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),kd=Symbol.for("react.suspense_list"),sf=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),h_=Symbol.for("react.offscreen"),Zm=Symbol.iterator;function Js(t){return t===null||typeof t!="object"?null:(t=Zm&&t[Zm]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Lu;function lo(t){if(Lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lu=e&&e[1]||""}return`
`+Lu+t}var Vu=!1;function Mu(t,e){if(!t||Vu)return"";Vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lo(t):""}function rS(t){switch(t.tag){case 5:return lo(t.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return t=Mu(t.type,!1),t;case 11:return t=Mu(t.type.render,!1),t;case 1:return t=Mu(t.type,!0),t;default:return""}}function jd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Ui:return"Portal";case Id:return"Profiler";case nf:return"StrictMode";case Cd:return"Suspense";case kd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d_:return(t.displayName||"Context")+".Consumer";case u_:return(t._context.displayName||"Context")+".Provider";case rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sf:return e=t.displayName||null,e!==null?e:jd(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return jd(t(e))}catch{}}return null}function iS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jd(e);case 8:return e===nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sS(t){var e=f_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ma(t){t._valueTracker||(t._valueTracker=sS(t))}function p_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bd(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m_(t,e){e=e.checked,e!=null&&tf(t,"checked",e,!1)}function Rd(t,e){m_(t,e);var n=Ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nd(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nd(t,e,n){(e!=="number"||Ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var co=Array.isArray;function Zi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ad(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(co(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function g_(t,e){var n=Ar(e.value),r=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fa,v_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fa=Fa||document.createElement("div"),Fa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oS=["Webkit","ms","Moz","O"];Object.keys(yo).forEach(function(t){oS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yo[e]=yo[t]})});function __(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yo.hasOwnProperty(t)&&yo[t]?(""+e).trim():e+"px"}function x_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=__(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aS=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Od(t,e){if(e){if(aS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Dd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=null;function of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vd=null,es=null,ts=null;function ig(t){if(t=oa(t)){if(typeof Vd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=jc(e),Vd(t.stateNode,t.type,e))}}function w_(t){es?ts?ts.push(t):ts=[t]:es=t}function E_(){if(es){var t=es,e=ts;if(ts=es=null,ig(t),e)for(t=0;t<e.length;t++)ig(e[t])}}function S_(t,e){return t(e)}function T_(){}var Fu=!1;function I_(t,e,n){if(Fu)return t(e,n);Fu=!0;try{return S_(t,e,n)}finally{Fu=!1,(es!==null||ts!==null)&&(T_(),E_())}}function Po(t,e){var n=t.stateNode;if(n===null)return null;var r=jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Md=!1;if(zn)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){Md=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{Md=!1}function lS(t,e,n,r,i,s,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var vo=!1,Dl=null,Ll=!1,Fd=null,cS={onError:function(t){vo=!0,Dl=t}};function uS(t,e,n,r,i,s,a,c,u){vo=!1,Dl=null,lS.apply(cS,arguments)}function dS(t,e,n,r,i,s,a,c,u){if(uS.apply(this,arguments),vo){if(vo){var d=Dl;vo=!1,Dl=null}else throw Error(z(198));Ll||(Ll=!0,Fd=d)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function C_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sg(t){if(wi(t)!==t)throw Error(z(188))}function hS(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sg(i),t;if(s===r)return sg(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function k_(t){return t=hS(t),t!==null?j_(t):null}function j_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j_(t);if(e!==null)return e;t=t.sibling}return null}var b_=Ht.unstable_scheduleCallback,og=Ht.unstable_cancelCallback,fS=Ht.unstable_shouldYield,pS=Ht.unstable_requestPaint,Fe=Ht.unstable_now,mS=Ht.unstable_getCurrentPriorityLevel,af=Ht.unstable_ImmediatePriority,R_=Ht.unstable_UserBlockingPriority,Vl=Ht.unstable_NormalPriority,gS=Ht.unstable_LowPriority,N_=Ht.unstable_IdlePriority,Tc=null,En=null;function yS(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Tc,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:xS,vS=Math.log,_S=Math.LN2;function xS(t){return t>>>=0,t===0?32:31-(vS(t)/_S|0)|0}var Ua=64,Ba=4194304;function uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ml(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=uo(c):(s&=a,s!==0&&(r=uo(s)))}else a=n&~i,a!==0?r=uo(a):s!==0&&(r=uo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),i=1<<n,r|=t[n],e&=~i;return r}function wS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ES(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-hn(s),c=1<<a,u=i[a];u===-1?(!(c&n)||c&r)&&(i[a]=wS(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Ud(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A_(){var t=Ua;return Ua<<=1,!(Ua&4194240)&&(Ua=64),t}function Uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function SS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function P_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O_,cf,D_,L_,V_,Bd=!1,$a=[],vr=null,_r=null,xr=null,Oo=new Map,Do=new Map,lr=[],TS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ag(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Oo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function Zs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=oa(e),e!==null&&cf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function IS(t,e,n,r,i){switch(e){case"focusin":return vr=Zs(vr,t,e,n,r,i),!0;case"dragenter":return _r=Zs(_r,t,e,n,r,i),!0;case"mouseover":return xr=Zs(xr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Oo.set(s,Zs(Oo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Do.set(s,Zs(Do.get(s)||null,t,e,n,r,i)),!0}return!1}function M_(t){var e=ti(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=C_(n),e!==null){t.blockedOn=e,V_(t.priority,function(){D_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$d(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ld=r,n.target.dispatchEvent(r),Ld=null}else return e=oa(n),e!==null&&cf(e),t.blockedOn=n,!1;e.shift()}return!0}function lg(t,e,n){hl(t)&&n.delete(e)}function CS(){Bd=!1,vr!==null&&hl(vr)&&(vr=null),_r!==null&&hl(_r)&&(_r=null),xr!==null&&hl(xr)&&(xr=null),Oo.forEach(lg),Do.forEach(lg)}function eo(t,e){t.blockedOn===e&&(t.blockedOn=null,Bd||(Bd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,CS)))}function Lo(t){function e(i){return eo(i,t)}if(0<$a.length){eo($a[0],t);for(var n=1;n<$a.length;n++){var r=$a[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&eo(vr,t),_r!==null&&eo(_r,t),xr!==null&&eo(xr,t),Oo.forEach(e),Do.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)M_(n),n.blockedOn===null&&lr.shift()}var ns=Xn.ReactCurrentBatchConfig,Fl=!0;function kS(t,e,n,r){var i=_e,s=ns.transition;ns.transition=null;try{_e=1,uf(t,e,n,r)}finally{_e=i,ns.transition=s}}function jS(t,e,n,r){var i=_e,s=ns.transition;ns.transition=null;try{_e=4,uf(t,e,n,r)}finally{_e=i,ns.transition=s}}function uf(t,e,n,r){if(Fl){var i=$d(t,e,n,r);if(i===null)Yu(t,e,r,Ul,n),ag(t,r);else if(IS(i,t,e,n,r))r.stopPropagation();else if(ag(t,r),e&4&&-1<TS.indexOf(t)){for(;i!==null;){var s=oa(i);if(s!==null&&O_(s),s=$d(t,e,n,r),s===null&&Yu(t,e,r,Ul,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yu(t,e,r,null,n)}}var Ul=null;function $d(t,e,n,r){if(Ul=null,t=of(r),t=ti(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=C_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ul=t,null}function F_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mS()){case af:return 1;case R_:return 4;case Vl:case gS:return 16;case N_:return 536870912;default:return 16}default:return 16}}var pr=null,df=null,fl=null;function U_(){if(fl)return fl;var t,e=df,n=e.length,r,i="value"in pr?pr.value:pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return fl=i.slice(t,1<r?1-r:void 0)}function pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function za(){return!0}function cg(){return!1}function Kt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?za:cg,this.isPropagationStopped=cg,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),e}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=Kt(js),sa=Pe({},js,{view:0,detail:0}),bS=Kt(sa),Bu,$u,to,Ic=Pe({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==to&&(to&&t.type==="mousemove"?(Bu=t.screenX-to.screenX,$u=t.screenY-to.screenY):$u=Bu=0,to=t),Bu)},movementY:function(t){return"movementY"in t?t.movementY:$u}}),ug=Kt(Ic),RS=Pe({},Ic,{dataTransfer:0}),NS=Kt(RS),AS=Pe({},sa,{relatedTarget:0}),zu=Kt(AS),PS=Pe({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),OS=Kt(PS),DS=Pe({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LS=Kt(DS),VS=Pe({},js,{data:0}),dg=Kt(VS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function ff(){return BS}var $S=Pe({},sa,{key:function(t){if(t.key){var e=MS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(t){return t.type==="keypress"?pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zS=Kt($S),WS=Pe({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hg=Kt(WS),qS=Pe({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),HS=Kt(qS),GS=Pe({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),KS=Kt(GS),QS=Pe({},Ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=Kt(QS),JS=[9,13,27,32],pf=zn&&"CompositionEvent"in window,_o=null;zn&&"documentMode"in document&&(_o=document.documentMode);var XS=zn&&"TextEvent"in window&&!_o,B_=zn&&(!pf||_o&&8<_o&&11>=_o),fg=String.fromCharCode(32),pg=!1;function $_(t,e){switch(t){case"keyup":return JS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $i=!1;function ZS(t,e){switch(t){case"compositionend":return z_(e);case"keypress":return e.which!==32?null:(pg=!0,fg);case"textInput":return t=e.data,t===fg&&pg?null:t;default:return null}}function eT(t,e){if($i)return t==="compositionend"||!pf&&$_(t,e)?(t=U_(),fl=df=pr=null,$i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B_&&e.locale!=="ko"?null:e.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tT[t.type]:e==="textarea"}function W_(t,e,n,r){w_(r),e=Bl(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xo=null,Vo=null;function nT(t){t0(t,0)}function Cc(t){var e=qi(t);if(p_(e))return t}function rT(t,e){if(t==="change")return e}var q_=!1;if(zn){var Wu;if(zn){var qu="oninput"in document;if(!qu){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),qu=typeof gg.oninput=="function"}Wu=qu}else Wu=!1;q_=Wu&&(!document.documentMode||9<document.documentMode)}function yg(){xo&&(xo.detachEvent("onpropertychange",H_),Vo=xo=null)}function H_(t){if(t.propertyName==="value"&&Cc(Vo)){var e=[];W_(e,Vo,t,of(t)),I_(nT,e)}}function iT(t,e,n){t==="focusin"?(yg(),xo=e,Vo=n,xo.attachEvent("onpropertychange",H_)):t==="focusout"&&yg()}function sT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cc(Vo)}function oT(t,e){if(t==="click")return Cc(e)}function aT(t,e){if(t==="input"||t==="change")return Cc(e)}function lT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:lT;function Mo(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Td.call(e,i)||!pn(t[i],e[i]))return!1}return!0}function vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,e){var n=vg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vg(n)}}function G_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K_(){for(var t=window,e=Ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ol(t.document)}return e}function mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cT(t){var e=K_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G_(n.ownerDocument.documentElement,n)){if(r!==null&&mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_g(n,s);var a=_g(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uT=zn&&"documentMode"in document&&11>=document.documentMode,zi=null,zd=null,wo=null,Wd=!1;function xg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wd||zi==null||zi!==Ol(r)||(r=zi,"selectionStart"in r&&mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wo&&Mo(wo,r)||(wo=r,r=Bl(zd,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zi)))}function Wa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wi={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},Hu={},Q_={};zn&&(Q_=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function kc(t){if(Hu[t])return Hu[t];if(!Wi[t])return t;var e=Wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q_)return Hu[t]=e[n];return t}var Y_=kc("animationend"),J_=kc("animationiteration"),X_=kc("animationstart"),Z_=kc("transitionend"),e0=new Map,wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,e){e0.set(t,e),xi(e,[t])}for(var Gu=0;Gu<wg.length;Gu++){var Ku=wg[Gu],dT=Ku.toLowerCase(),hT=Ku[0].toUpperCase()+Ku.slice(1);Wr(dT,"on"+hT)}Wr(Y_,"onAnimationEnd");Wr(J_,"onAnimationIteration");Wr(X_,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(Z_,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function Eg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dS(r,e,void 0,t),t.currentTarget=null}function t0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;Eg(i,c,d),s=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;Eg(i,c,d),s=u}}}if(Ll)throw t=Fd,Ll=!1,Fd=null,t}function Ce(t,e){var n=e[Qd];n===void 0&&(n=e[Qd]=new Set);var r=t+"__bubble";n.has(r)||(n0(e,t,2,!1),n.add(r))}function Qu(t,e,n){var r=0;e&&(r|=4),n0(n,t,r,e)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[qa]){t[qa]=!0,c_.forEach(function(n){n!=="selectionchange"&&(fT.has(n)||Qu(n,!1,t),Qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qa]||(e[qa]=!0,Qu("selectionchange",!1,e))}}function n0(t,e,n,r){switch(F_(e)){case 1:var i=kS;break;case 4:i=jS;break;default:i=uf}n=i.bind(null,e,n,t),i=void 0,!Md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;c!==null;){if(a=ti(c),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}c=c.parentNode}}r=r.return}I_(function(){var d=s,h=of(n),g=[];e:{var m=e0.get(t);if(m!==void 0){var k=hf,I=t;switch(t){case"keypress":if(pl(n)===0)break e;case"keydown":case"keyup":k=zS;break;case"focusin":I="focus",k=zu;break;case"focusout":I="blur",k=zu;break;case"beforeblur":case"afterblur":k=zu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=NS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=HS;break;case Y_:case J_:case X_:k=OS;break;case Z_:k=KS;break;case"scroll":k=bS;break;case"wheel":k=YS;break;case"copy":case"cut":case"paste":k=LS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=hg}var x=(e&4)!==0,N=!x&&t==="scroll",S=x?m!==null?m+"Capture":null:m;x=[];for(var _=d,j;_!==null;){j=_;var P=j.stateNode;if(j.tag===5&&P!==null&&(j=P,S!==null&&(P=Po(_,S),P!=null&&x.push(Uo(_,P,j)))),N)break;_=_.return}0<x.length&&(m=new k(m,I,null,n,h),g.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",m&&n!==Ld&&(I=n.relatedTarget||n.fromElement)&&(ti(I)||I[Wn]))break e;if((k||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,k?(I=n.relatedTarget||n.toElement,k=d,I=I?ti(I):null,I!==null&&(N=wi(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(k=null,I=d),k!==I)){if(x=ug,P="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=hg,P="onPointerLeave",S="onPointerEnter",_="pointer"),N=k==null?m:qi(k),j=I==null?m:qi(I),m=new x(P,_+"leave",k,n,h),m.target=N,m.relatedTarget=j,P=null,ti(h)===d&&(x=new x(S,_+"enter",I,n,h),x.target=j,x.relatedTarget=N,P=x),N=P,k&&I)t:{for(x=k,S=I,_=0,j=x;j;j=Ni(j))_++;for(j=0,P=S;P;P=Ni(P))j++;for(;0<_-j;)x=Ni(x),_--;for(;0<j-_;)S=Ni(S),j--;for(;_--;){if(x===S||S!==null&&x===S.alternate)break t;x=Ni(x),S=Ni(S)}x=null}else x=null;k!==null&&Sg(g,m,k,x,!1),I!==null&&N!==null&&Sg(g,N,I,x,!0)}}e:{if(m=d?qi(d):window,k=m.nodeName&&m.nodeName.toLowerCase(),k==="select"||k==="input"&&m.type==="file")var D=rT;else if(mg(m))if(q_)D=aT;else{D=sT;var A=iT}else(k=m.nodeName)&&k.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=oT);if(D&&(D=D(t,d))){W_(g,D,n,h);break e}A&&A(t,m,d),t==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&Nd(m,"number",m.value)}switch(A=d?qi(d):window,t){case"focusin":(mg(A)||A.contentEditable==="true")&&(zi=A,zd=d,wo=null);break;case"focusout":wo=zd=zi=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,xg(g,n,h);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":xg(g,n,h)}var E;if(pf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $i?$_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(B_&&n.locale!=="ko"&&($i||y!=="onCompositionStart"?y==="onCompositionEnd"&&$i&&(E=U_()):(pr=h,df="value"in pr?pr.value:pr.textContent,$i=!0)),A=Bl(d,y),0<A.length&&(y=new dg(y,t,null,n,h),g.push({event:y,listeners:A}),E?y.data=E:(E=z_(n),E!==null&&(y.data=E)))),(E=XS?ZS(t,n):eT(t,n))&&(d=Bl(d,"onBeforeInput"),0<d.length&&(h=new dg("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:d}),h.data=E))}t0(g,e)})}function Uo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Po(t,n),s!=null&&r.unshift(Uo(t,s,i)),s=Po(t,e),s!=null&&r.push(Uo(t,s,i))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sg(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=Po(n,s),u!=null&&a.unshift(Uo(n,u,c))):i||(u=Po(n,s),u!=null&&a.push(Uo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var pT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(pT,`
`).replace(mT,"")}function Ha(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(z(425))}function $l(){}var qd=null,Hd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(t){return Ig.resolve(null).then(t).catch(vT)}:Kd;function vT(t){setTimeout(function(){throw t})}function Ju(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Lo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Lo(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bs=Math.random().toString(36).slice(2),xn="__reactFiber$"+bs,Bo="__reactProps$"+bs,Wn="__reactContainer$"+bs,Qd="__reactEvents$"+bs,_T="__reactListeners$"+bs,xT="__reactHandles$"+bs;function ti(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cg(t);t!==null;){if(n=t[xn])return n;t=Cg(t)}return e}t=n,n=t.parentNode}return null}function oa(t){return t=t[xn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function jc(t){return t[Bo]||null}var Yd=[],Hi=-1;function qr(t){return{current:t}}function ke(t){0>Hi||(t.current=Yd[Hi],Yd[Hi]=null,Hi--)}function Te(t,e){Hi++,Yd[Hi]=t.current,t.current=e}var Pr={},wt=qr(Pr),Mt=qr(!1),ui=Pr;function hs(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function zl(){ke(Mt),ke(wt)}function kg(t,e,n){if(wt.current!==Pr)throw Error(z(168));Te(wt,e),Te(Mt,n)}function r0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,iS(t)||"Unknown",i));return Pe({},n,r)}function Wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,ui=wt.current,Te(wt,t),Te(Mt,Mt.current),!0}function jg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=r0(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,ke(Mt),ke(wt),Te(wt,t)):ke(Mt),Te(Mt,n)}var Dn=null,bc=!1,Xu=!1;function i0(t){Dn===null?Dn=[t]:Dn.push(t)}function wT(t){bc=!0,i0(t)}function Hr(){if(!Xu&&Dn!==null){Xu=!0;var t=0,e=_e;try{var n=Dn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,bc=!1}catch(i){throw Dn!==null&&(Dn=Dn.slice(t+1)),b_(af,Hr),i}finally{_e=e,Xu=!1}}return null}var Gi=[],Ki=0,ql=null,Hl=0,Qt=[],Yt=0,di=null,Vn=1,Mn="";function Jr(t,e){Gi[Ki++]=Hl,Gi[Ki++]=ql,ql=t,Hl=e}function s0(t,e,n){Qt[Yt++]=Vn,Qt[Yt++]=Mn,Qt[Yt++]=di,di=t;var r=Vn;t=Mn;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Vn=1<<32-hn(e)+i|n<<i|r,Mn=s+t}else Vn=1<<s|n<<i|r,Mn=t}function gf(t){t.return!==null&&(Jr(t,1),s0(t,1,0))}function yf(t){for(;t===ql;)ql=Gi[--Ki],Gi[Ki]=null,Hl=Gi[--Ki],Gi[Ki]=null;for(;t===di;)di=Qt[--Yt],Qt[Yt]=null,Mn=Qt[--Yt],Qt[Yt]=null,Vn=Qt[--Yt],Qt[Yt]=null}var Wt=null,zt=null,je=!1,un=null;function o0(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,zt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:Vn,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,zt=null,!0):!1;default:return!1}}function Jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xd(t){if(je){var e=zt;if(e){var n=e;if(!bg(t,e)){if(Jd(t))throw Error(z(418));e=wr(n.nextSibling);var r=Wt;e&&bg(t,e)?o0(r,n):(t.flags=t.flags&-4097|2,je=!1,Wt=t)}}else{if(Jd(t))throw Error(z(418));t.flags=t.flags&-4097|2,je=!1,Wt=t}}}function Rg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Ga(t){if(t!==Wt)return!1;if(!je)return Rg(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=zt)){if(Jd(t))throw a0(),Error(z(418));for(;e;)o0(t,e),e=wr(e.nextSibling)}if(Rg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Wt?wr(t.stateNode.nextSibling):null;return!0}function a0(){for(var t=zt;t;)t=wr(t.nextSibling)}function fs(){zt=Wt=null,je=!1}function vf(t){un===null?un=[t]:un.push(t)}var ET=Xn.ReactCurrentBatchConfig;function ln(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Gl=qr(null),Kl=null,Qi=null,_f=null;function xf(){_f=Qi=Kl=null}function wf(t){var e=Gl.current;ke(Gl),t._currentValue=e}function Zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rs(t,e){Kl=t,_f=Qi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},Qi===null){if(Kl===null)throw Error(z(308));Qi=t,Kl.dependencies={lanes:0,firstContext:t}}else Qi=Qi.next=t;return e}var ni=null;function Ef(t){ni===null?ni=[t]:ni.push(t)}function l0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ef(e)):(n.next=i.next,i.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function Sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ef(r)):(e.next=i.next,i.next=e),r.interleaved=e,qn(t,n)}function ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}function Ng(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ql(t,e,n,r){var i=t.updateQueue;ar=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?s=d:a.next=d,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==a&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;a=0,h=d=u=null,c=s;do{var m=c.lane,k=c.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:k,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var I=t,x=c;switch(m=e,k=n,x.tag){case 1:if(I=x.payload,typeof I=="function"){g=I.call(k,g,m);break e}g=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=x.payload,m=typeof I=="function"?I.call(k,g,m):I,m==null)break e;g=Pe({},g,m);break e;case 2:ar=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[c]:m.push(c))}else k={eventTime:k,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=k,u=g):h=h.next=k,a|=m;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;m=c,c=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(u=g),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fi|=a,t.lanes=a,t.memoizedState=g}}function Ag(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var u0=new l_.Component().refs;function eh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rc={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=Tr(t),s=Bn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Er(t,s,i),e!==null&&(fn(e,t,i,r),ml(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=Tr(t),s=Bn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Er(t,s,i),e!==null&&(fn(e,t,i,r),ml(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=Tr(t),i=Bn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Er(t,i,r),e!==null&&(fn(e,t,r,n),ml(e,t,r))}};function Pg(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Mo(n,r)||!Mo(i,s):!0}function d0(t,e,n){var r=!1,i=Pr,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(i=Ft(e)?ui:wt.current,r=e.contextTypes,s=(r=r!=null)?hs(t,i):Pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rc.enqueueReplaceState(e,e.state,null)}function th(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=u0,Sf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=en(s):(s=Ft(e)?ui:wt.current,i.context=hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(eh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rc.enqueueReplaceState(i,i.state,null),Ql(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function no(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;c===u0&&(c=i.refs={}),a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ka(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dg(t){var e=t._init;return e(t._payload)}function h0(t){function e(S,_){if(t){var j=S.deletions;j===null?(S.deletions=[_],S.flags|=16):j.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function r(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function i(S,_){return S=Ir(S,_),S.index=0,S.sibling=null,S}function s(S,_,j){return S.index=j,t?(j=S.alternate,j!==null?(j=j.index,j<_?(S.flags|=2,_):j):(S.flags|=2,_)):(S.flags|=1048576,_)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,_,j,P){return _===null||_.tag!==6?(_=sd(j,S.mode,P),_.return=S,_):(_=i(_,j),_.return=S,_)}function u(S,_,j,P){var D=j.type;return D===Bi?h(S,_,j.props.children,P,j.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===or&&Dg(D)===_.type)?(P=i(_,j.props),P.ref=no(S,_,j),P.return=S,P):(P=wl(j.type,j.key,j.props,null,S.mode,P),P.ref=no(S,_,j),P.return=S,P)}function d(S,_,j,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==j.containerInfo||_.stateNode.implementation!==j.implementation?(_=od(j,S.mode,P),_.return=S,_):(_=i(_,j.children||[]),_.return=S,_)}function h(S,_,j,P,D){return _===null||_.tag!==7?(_=ai(j,S.mode,P,D),_.return=S,_):(_=i(_,j),_.return=S,_)}function g(S,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return _=sd(""+_,S.mode,j),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Va:return j=wl(_.type,_.key,_.props,null,S.mode,j),j.ref=no(S,null,_),j.return=S,j;case Ui:return _=od(_,S.mode,j),_.return=S,_;case or:var P=_._init;return g(S,P(_._payload),j)}if(co(_)||Js(_))return _=ai(_,S.mode,j,null),_.return=S,_;Ka(S,_)}return null}function m(S,_,j,P){var D=_!==null?_.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return D!==null?null:c(S,_,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Va:return j.key===D?u(S,_,j,P):null;case Ui:return j.key===D?d(S,_,j,P):null;case or:return D=j._init,m(S,_,D(j._payload),P)}if(co(j)||Js(j))return D!==null?null:h(S,_,j,P,null);Ka(S,j)}return null}function k(S,_,j,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(j)||null,c(_,S,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Va:return S=S.get(P.key===null?j:P.key)||null,u(_,S,P,D);case Ui:return S=S.get(P.key===null?j:P.key)||null,d(_,S,P,D);case or:var A=P._init;return k(S,_,j,A(P._payload),D)}if(co(P)||Js(P))return S=S.get(j)||null,h(_,S,P,D,null);Ka(_,P)}return null}function I(S,_,j,P){for(var D=null,A=null,E=_,y=_=0,w=null;E!==null&&y<j.length;y++){E.index>y?(w=E,E=null):w=E.sibling;var C=m(S,E,j[y],P);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(S,E),_=s(C,_,y),A===null?D=C:A.sibling=C,A=C,E=w}if(y===j.length)return n(S,E),je&&Jr(S,y),D;if(E===null){for(;y<j.length;y++)E=g(S,j[y],P),E!==null&&(_=s(E,_,y),A===null?D=E:A.sibling=E,A=E);return je&&Jr(S,y),D}for(E=r(S,E);y<j.length;y++)w=k(E,S,y,j[y],P),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),_=s(w,_,y),A===null?D=w:A.sibling=w,A=w);return t&&E.forEach(function(v){return e(S,v)}),je&&Jr(S,y),D}function x(S,_,j,P){var D=Js(j);if(typeof D!="function")throw Error(z(150));if(j=D.call(j),j==null)throw Error(z(151));for(var A=D=null,E=_,y=_=0,w=null,C=j.next();E!==null&&!C.done;y++,C=j.next()){E.index>y?(w=E,E=null):w=E.sibling;var v=m(S,E,C.value,P);if(v===null){E===null&&(E=w);break}t&&E&&v.alternate===null&&e(S,E),_=s(v,_,y),A===null?D=v:A.sibling=v,A=v,E=w}if(C.done)return n(S,E),je&&Jr(S,y),D;if(E===null){for(;!C.done;y++,C=j.next())C=g(S,C.value,P),C!==null&&(_=s(C,_,y),A===null?D=C:A.sibling=C,A=C);return je&&Jr(S,y),D}for(E=r(S,E);!C.done;y++,C=j.next())C=k(E,S,y,C.value,P),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?y:C.key),_=s(C,_,y),A===null?D=C:A.sibling=C,A=C);return t&&E.forEach(function(O){return e(S,O)}),je&&Jr(S,y),D}function N(S,_,j,P){if(typeof j=="object"&&j!==null&&j.type===Bi&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Va:e:{for(var D=j.key,A=_;A!==null;){if(A.key===D){if(D=j.type,D===Bi){if(A.tag===7){n(S,A.sibling),_=i(A,j.props.children),_.return=S,S=_;break e}}else if(A.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===or&&Dg(D)===A.type){n(S,A.sibling),_=i(A,j.props),_.ref=no(S,A,j),_.return=S,S=_;break e}n(S,A);break}else e(S,A);A=A.sibling}j.type===Bi?(_=ai(j.props.children,S.mode,P,j.key),_.return=S,S=_):(P=wl(j.type,j.key,j.props,null,S.mode,P),P.ref=no(S,_,j),P.return=S,S=P)}return a(S);case Ui:e:{for(A=j.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===j.containerInfo&&_.stateNode.implementation===j.implementation){n(S,_.sibling),_=i(_,j.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=od(j,S.mode,P),_.return=S,S=_}return a(S);case or:return A=j._init,N(S,_,A(j._payload),P)}if(co(j))return I(S,_,j,P);if(Js(j))return x(S,_,j,P);Ka(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,_!==null&&_.tag===6?(n(S,_.sibling),_=i(_,j),_.return=S,S=_):(n(S,_),_=sd(j,S.mode,P),_.return=S,S=_),a(S)):n(S,_)}return N}var ps=h0(!0),f0=h0(!1),aa={},Sn=qr(aa),$o=qr(aa),zo=qr(aa);function ri(t){if(t===aa)throw Error(z(174));return t}function Tf(t,e){switch(Te(zo,e),Te($o,t),Te(Sn,aa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pd(e,t)}ke(Sn),Te(Sn,e)}function ms(){ke(Sn),ke($o),ke(zo)}function p0(t){ri(zo.current);var e=ri(Sn.current),n=Pd(e,t.type);e!==n&&(Te($o,t),Te(Sn,n))}function If(t){$o.current===t&&(ke(Sn),ke($o))}var Re=qr(0);function Yl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zu=[];function Cf(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var gl=Xn.ReactCurrentDispatcher,ed=Xn.ReactCurrentBatchConfig,hi=0,Ne=null,We=null,Ke=null,Jl=!1,Eo=!1,Wo=0,ST=0;function dt(){throw Error(z(321))}function kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function jf(t,e,n,r,i,s){if(hi=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gl.current=t===null||t.memoizedState===null?kT:jT,t=n(r,i),Eo){s=0;do{if(Eo=!1,Wo=0,25<=s)throw Error(z(301));s+=1,Ke=We=null,e.updateQueue=null,gl.current=bT,t=n(r,i)}while(Eo)}if(gl.current=Xl,e=We!==null&&We.next!==null,hi=0,Ke=We=Ne=null,Jl=!1,e)throw Error(z(300));return t}function bf(){var t=Wo!==0;return Wo=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Ne.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function tn(){if(We===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ke===null?Ne.memoizedState:Ke.next;if(e!==null)Ke=e,We=t;else{if(t===null)throw Error(z(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ke===null?Ne.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function qo(t,e){return typeof e=="function"?e(t):e}function td(t){var e=tn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=a=null,u=null,d=s;do{var h=d.lane;if((hi&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=g,a=r):u=u.next=g,Ne.lanes|=h,fi|=h}d=d.next}while(d!==null&&d!==s);u===null?a=r:u.next=c,pn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,fi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nd(t){var e=tn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);pn(s,e.memoizedState)||(Vt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function m0(){}function g0(t,e){var n=Ne,r=tn(),i=e(),s=!pn(r.memoizedState,i);if(s&&(r.memoizedState=i,Vt=!0),r=r.queue,Rf(_0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Ho(9,v0.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(z(349));hi&30||y0(n,e,i)}return i}function y0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v0(t,e,n,r){e.value=n,e.getSnapshot=r,x0(e)&&w0(t)}function _0(t,e,n){return n(function(){x0(e)&&w0(t)})}function x0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function w0(t){var e=qn(t,1);e!==null&&fn(e,t,1,-1)}function Lg(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},e.queue=t,t=t.dispatch=CT.bind(null,Ne,t),[e.memoizedState,t]}function Ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function E0(){return tn().memoizedState}function yl(t,e,n,r){var i=vn();Ne.flags|=t,i.memoizedState=Ho(1|e,n,void 0,r===void 0?null:r)}function Nc(t,e,n,r){var i=tn();r=r===void 0?null:r;var s=void 0;if(We!==null){var a=We.memoizedState;if(s=a.destroy,r!==null&&kf(r,a.deps)){i.memoizedState=Ho(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=Ho(1|e,n,s,r)}function Vg(t,e){return yl(8390656,8,t,e)}function Rf(t,e){return Nc(2048,8,t,e)}function S0(t,e){return Nc(4,2,t,e)}function T0(t,e){return Nc(4,4,t,e)}function I0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function C0(t,e,n){return n=n!=null?n.concat([t]):null,Nc(4,4,I0.bind(null,e,t),n)}function Nf(){}function k0(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function j0(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function b0(t,e,n){return hi&21?(pn(n,e)||(n=A_(),Ne.lanes|=n,fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function TT(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=ed.transition;ed.transition={};try{t(!1),e()}finally{_e=n,ed.transition=r}}function R0(){return tn().memoizedState}function IT(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},N0(t))A0(e,n);else if(n=l0(t,e,n,r),n!==null){var i=Rt();fn(n,t,r,i),P0(n,e,r)}}function CT(t,e,n){var r=Tr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(N0(t))A0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,n);if(i.hasEagerState=!0,i.eagerState=c,pn(c,a)){var u=e.interleaved;u===null?(i.next=i,Ef(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=l0(t,e,i,r),n!==null&&(i=Rt(),fn(n,t,r,i),P0(n,e,r))}}function N0(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function A0(t,e){Eo=Jl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}var Xl={readContext:en,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},kT={readContext:en,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:Vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yl(4194308,4,I0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return yl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IT.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:Lg,useDebugValue:Nf,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=Lg(!1),e=t[0];return t=TT.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=vn();if(je){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Qe===null)throw Error(z(349));hi&30||y0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vg(_0.bind(null,r,s,t),[t]),r.flags|=2048,Ho(9,v0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vn(),e=Qe.identifierPrefix;if(je){var n=Mn,r=Vn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ST++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jT={readContext:en,useCallback:k0,useContext:en,useEffect:Rf,useImperativeHandle:C0,useInsertionEffect:S0,useLayoutEffect:T0,useMemo:j0,useReducer:td,useRef:E0,useState:function(){return td(qo)},useDebugValue:Nf,useDeferredValue:function(t){var e=tn();return b0(e,We.memoizedState,t)},useTransition:function(){var t=td(qo)[0],e=tn().memoizedState;return[t,e]},useMutableSource:m0,useSyncExternalStore:g0,useId:R0,unstable_isNewReconciler:!1},bT={readContext:en,useCallback:k0,useContext:en,useEffect:Rf,useImperativeHandle:C0,useInsertionEffect:S0,useLayoutEffect:T0,useMemo:j0,useReducer:nd,useRef:E0,useState:function(){return nd(qo)},useDebugValue:Nf,useDeferredValue:function(t){var e=tn();return We===null?e.memoizedState=t:b0(e,We.memoizedState,t)},useTransition:function(){var t=nd(qo)[0],e=tn().memoizedState;return[t,e]},useMutableSource:m0,useSyncExternalStore:g0,useId:R0,unstable_isNewReconciler:!1};function gs(t,e){try{var n="",r=e;do n+=rS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RT=typeof WeakMap=="function"?WeakMap:Map;function O0(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ec||(ec=!0,hh=r),nh(t,e)},n}function D0(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){nh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){nh(t,e),typeof r!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Mg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=WT.bind(null,t,e,n),e.then(t,t))}function Fg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ug(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var NT=Xn.ReactCurrentOwner,Vt=!1;function Ct(t,e,n,r){e.child=t===null?f0(e,null,n,r):ps(e,t.child,n,r)}function Bg(t,e,n,r,i){n=n.render;var s=e.ref;return rs(e,i),r=jf(t,e,n,r,s,i),n=bf(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hn(t,e,i)):(je&&n&&gf(e),e.flags|=1,Ct(t,e,r,i),e.child)}function $g(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ff(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,L0(t,e,s,r,i)):(t=wl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mo,n(a,r)&&t.ref===e.ref)return Hn(t,e,i)}return e.flags|=1,t=Ir(s,r),t.ref=e.ref,t.return=e,e.child=t}function L0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Mo(s,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,Hn(t,e,i)}return rh(t,e,n,r,i)}function V0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ji,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ji,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(Ji,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(Ji,$t),$t|=r;return Ct(t,e,i,n),e.child}function M0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rh(t,e,n,r,i){var s=Ft(n)?ui:wt.current;return s=hs(e,s),rs(e,i),n=jf(t,e,n,r,s,i),r=bf(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hn(t,e,i)):(je&&r&&gf(e),e.flags|=1,Ct(t,e,n,i),e.child)}function zg(t,e,n,r,i){if(Ft(n)){var s=!0;Wl(e)}else s=!1;if(rs(e,i),e.stateNode===null)vl(t,e),d0(e,n,r),th(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=en(d):(d=Ft(n)?ui:wt.current,d=hs(e,d));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Og(e,a,r,d),ar=!1;var m=e.memoizedState;a.state=m,Ql(e,r,a,i),u=e.memoizedState,c!==r||m!==u||Mt.current||ar?(typeof h=="function"&&(eh(e,n,h,r),u=e.memoizedState),(c=ar||Pg(e,n,c,r,m,u,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,c0(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:ln(e.type,c),a.props=d,g=e.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=Ft(n)?ui:wt.current,u=hs(e,u));var k=n.getDerivedStateFromProps;(h=typeof k=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==g||m!==u)&&Og(e,a,r,u),ar=!1,m=e.memoizedState,a.state=m,Ql(e,r,a,i);var I=e.memoizedState;c!==g||m!==I||Mt.current||ar?(typeof k=="function"&&(eh(e,n,k,r),I=e.memoizedState),(d=ar||Pg(e,n,d,r,m,I,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,I,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,I,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),a.props=r,a.state=I,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ih(t,e,n,r,s,i)}function ih(t,e,n,r,i,s){M0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&jg(e,n,!1),Hn(t,e,s);r=e.stateNode,NT.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ps(e,t.child,null,s),e.child=ps(e,null,c,s)):Ct(t,e,c,s),e.memoizedState=r.state,i&&jg(e,n,!0),e.child}function F0(t){var e=t.stateNode;e.pendingContext?kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kg(t,e.context,!1),Tf(t,e.containerInfo)}function Wg(t,e,n,r,i){return fs(),vf(i),e.flags|=256,Ct(t,e,n,r),e.child}var sh={dehydrated:null,treeContext:null,retryLane:0};function oh(t){return{baseLanes:t,cachePool:null,transitions:null}}function U0(t,e,n){var r=e.pendingProps,i=Re.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Re,i&1),t===null)return Xd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Oc(a,r,0,null),t=ai(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=oh(n),e.memoizedState=sh,t):Af(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return AT(t,e,a,r,c,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=Ir(c,s):(s=ai(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?oh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=sh,r}return s=t.child,t=s.sibling,r=Ir(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Af(t,e){return e=Oc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qa(t,e,n,r){return r!==null&&vf(r),ps(e,t.child,null,n),t=Af(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AT(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=rd(Error(z(422))),Qa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Oc({mode:"visible",children:r.children},i,0,null),s=ai(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ps(e,t.child,null,a),e.child.memoizedState=oh(a),e.memoizedState=sh,s);if(!(e.mode&1))return Qa(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(z(419)),r=rd(s,r,void 0),Qa(t,e,a,r)}if(c=(a&t.childLanes)!==0,Vt||c){if(r=Qe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qn(t,i),fn(r,t,i,-1))}return Mf(),r=rd(Error(z(421))),Qa(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,zt=wr(i.nextSibling),Wt=e,je=!0,un=null,t!==null&&(Qt[Yt++]=Vn,Qt[Yt++]=Mn,Qt[Yt++]=di,Vn=t.id,Mn=t.overflow,di=e),e=Af(e,r.children),e.flags|=4096,e)}function qg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zd(t.return,e,n)}function id(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function B0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ct(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,n,e);else if(t.tag===19)qg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),id(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}id(e,!0,n,null,s);break;case"together":id(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PT(t,e,n){switch(e.tag){case 3:F0(e),fs();break;case 5:p0(e);break;case 1:Ft(e.type)&&Wl(e);break;case 4:Tf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Gl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?U0(t,e,n):(Te(Re,Re.current&1),t=Hn(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return B0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,V0(t,e,n)}return Hn(t,e,n)}var $0,ah,z0,W0;$0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ah=function(){};z0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ri(Sn.current);var s=null;switch(n){case"input":i=bd(t,i),r=bd(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=Ad(t,i),r=Ad(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$l)}Od(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(No.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(No.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ce("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};W0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ro(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OT(t,e,n){var r=e.pendingProps;switch(yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Ft(e.type)&&zl(),ht(e),null;case 3:return r=e.stateNode,ms(),ke(Mt),ke(wt),Cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ga(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(mh(un),un=null))),ah(t,e),ht(e),null;case 5:If(e);var i=ri(zo.current);if(n=e.type,t!==null&&e.stateNode!=null)z0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ht(e),null}if(t=ri(Sn.current),Ga(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xn]=e,r[Bo]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<ho.length;i++)Ce(ho[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":eg(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":ng(r,s),Ce("invalid",r)}Od(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Ha(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Ha(r.textContent,c,t),i=["children",""+c]):No.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Ma(r),tg(r,s,!0);break;case"textarea":Ma(r),rg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$l)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[xn]=e,t[Bo]=r,$0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Dd(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<ho.length;i++)Ce(ho[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":eg(t,r),i=bd(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":ng(t,r),i=Ad(t,r),Ce("invalid",t);break;default:i=r}Od(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?x_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&v_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ao(t,u):typeof u=="number"&&Ao(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(No.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ce("scroll",t):u!=null&&tf(t,s,u,a))}switch(n){case"input":Ma(t),tg(t,r,!1);break;case"textarea":Ma(t),rg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ar(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)W0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ri(zo.current),ri(Sn.current),Ga(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ht(e),null;case 13:if(ke(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&zt!==null&&e.mode&1&&!(e.flags&128))a0(),fs(),e.flags|=98560,s=!1;else if(s=Ga(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[xn]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else un!==null&&(mh(un),un=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?qe===0&&(qe=3):Mf())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return ms(),ah(t,e),t===null&&Fo(e.stateNode.containerInfo),ht(e),null;case 10:return wf(e.type._context),ht(e),null;case 17:return Ft(e.type)&&zl(),ht(e),null;case 19:if(ke(Re),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)ro(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Yl(t),a!==null){for(e.flags|=128,ro(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>ys&&(e.flags|=128,r=!0,ro(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ro(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!je)return ht(e),null}else 2*Fe()-s.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,r=!0,ro(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Vf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function DT(t,e){switch(yf(e),e.tag){case 1:return Ft(e.type)&&zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),ke(Mt),ke(wt),Cf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return If(e),null;case 13:if(ke(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Re),null;case 4:return ms(),null;case 10:return wf(e.type._context),null;case 22:case 23:return Vf(),null;case 24:return null;default:return null}}var Ya=!1,yt=!1,LT=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function lh(t,e,n){try{n()}catch(r){De(t,e,r)}}var Hg=!1;function VT(t,e){if(qd=Fl,t=K_(),mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,h=0,g=t,m=null;t:for(;;){for(var k;g!==n||i!==0&&g.nodeType!==3||(c=a+i),g!==s||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(k=g.firstChild)!==null;)m=g,g=k;for(;;){if(g===t)break t;if(m===n&&++d===i&&(c=a),m===s&&++h===r&&(u=a),(k=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=k}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hd={focusedElem:t,selectionRange:n},Fl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var x=I.memoizedProps,N=I.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?x:ln(e.type,x),N);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){De(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return I=Hg,Hg=!1,I}function So(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lh(e,n,s)}i=i.next}while(i!==r)}}function Ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function q0(t){var e=t.alternate;e!==null&&(t.alternate=null,q0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[Bo],delete e[Qd],delete e[_T],delete e[xT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function H0(t){return t.tag===5||t.tag===3||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$l));else if(r!==4&&(t=t.child,t!==null))for(uh(t,e,n),t=t.sibling;t!==null;)uh(t,e,n),t=t.sibling}function dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dh(t,e,n),t=t.sibling;t!==null;)dh(t,e,n),t=t.sibling}var nt=null,cn=!1;function ir(t,e,n){for(n=n.child;n!==null;)G0(t,e,n),n=n.sibling}function G0(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Tc,n)}catch{}switch(n.tag){case 5:yt||Yi(n,e);case 6:var r=nt,i=cn;nt=null,ir(t,e,n),nt=r,cn=i,nt!==null&&(cn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(cn?(t=nt,n=n.stateNode,t.nodeType===8?Ju(t.parentNode,n):t.nodeType===1&&Ju(t,n),Lo(t)):Ju(nt,n.stateNode));break;case 4:r=nt,i=cn,nt=n.stateNode.containerInfo,cn=!0,ir(t,e,n),nt=r,cn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&lh(n,e,a),i=i.next}while(i!==r)}ir(t,e,n);break;case 1:if(!yt&&(Yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){De(n,e,c)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,ir(t,e,n),yt=r):ir(t,e,n);break;default:ir(t,e,n)}}function Kg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LT),e.forEach(function(r){var i=HT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:nt=c.stateNode,cn=!1;break e;case 3:nt=c.stateNode.containerInfo,cn=!0;break e;case 4:nt=c.stateNode.containerInfo,cn=!0;break e}c=c.return}if(nt===null)throw Error(z(160));G0(s,a,i),nt=null,cn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){De(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K0(e,t),e=e.sibling}function K0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),yn(t),r&4){try{So(3,t,t.return),Ac(3,t)}catch(x){De(t,t.return,x)}try{So(5,t,t.return)}catch(x){De(t,t.return,x)}}break;case 1:an(e,t),yn(t),r&512&&n!==null&&Yi(n,n.return);break;case 5:if(an(e,t),yn(t),r&512&&n!==null&&Yi(n,n.return),t.flags&32){var i=t.stateNode;try{Ao(i,"")}catch(x){De(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&m_(i,s),Dd(c,a);var d=Dd(c,s);for(a=0;a<u.length;a+=2){var h=u[a],g=u[a+1];h==="style"?x_(i,g):h==="dangerouslySetInnerHTML"?v_(i,g):h==="children"?Ao(i,g):tf(i,h,g,d)}switch(c){case"input":Rd(i,s);break;case"textarea":g_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?Zi(i,!!s.multiple,k,!1):m!==!!s.multiple&&(s.defaultValue!=null?Zi(i,!!s.multiple,s.defaultValue,!0):Zi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bo]=s}catch(x){De(t,t.return,x)}}break;case 6:if(an(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){De(t,t.return,x)}}break;case 3:if(an(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lo(e.containerInfo)}catch(x){De(t,t.return,x)}break;case 4:an(e,t),yn(t);break;case 13:an(e,t),yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Df=Fe())),r&4&&Kg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(d=yt)||h,an(e,t),yt=d):an(e,t),yn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(g=Y=h;Y!==null;){switch(m=Y,k=m.child,m.tag){case 0:case 11:case 14:case 15:So(4,m,m.return);break;case 1:Yi(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(x){De(r,n,x)}}break;case 5:Yi(m,m.return);break;case 22:if(m.memoizedState!==null){Yg(g);continue}}k!==null?(k.return=m,Y=k):Yg(g)}h=h.sibling}e:for(h=null,g=t;;){if(g.tag===5){if(h===null){h=g;try{i=g.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=__("display",a))}catch(x){De(t,t.return,x)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(x){De(t,t.return,x)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:an(e,t),yn(t),r&4&&Kg(t);break;case 21:break;default:an(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(H0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ao(i,""),r.flags&=-33);var s=Gg(t);dh(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Gg(t);uh(t,c,a);break;default:throw Error(z(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MT(t,e,n){Y=t,Q0(t)}function Q0(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ya;if(!a){var c=i.alternate,u=c!==null&&c.memoizedState!==null||yt;c=Ya;var d=yt;if(Ya=a,(yt=u)&&!d)for(Y=i;Y!==null;)a=Y,u=a.child,a.tag===22&&a.memoizedState!==null?Jg(i):u!==null?(u.return=a,Y=u):Jg(i);for(;s!==null;)Y=s,Q0(s),s=s.sibling;Y=i,Ya=c,yt=d}Qg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):Qg(t)}}function Qg(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ag(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ag(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&Lo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||e.flags&512&&ch(e)}catch(m){De(e,e.return,m)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Yg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Jg(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ac(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){De(e,i,u)}}var s=e.return;try{ch(e)}catch(u){De(e,s,u)}break;case 5:var a=e.return;try{ch(e)}catch(u){De(e,a,u)}}}catch(u){De(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var FT=Math.ceil,Zl=Xn.ReactCurrentDispatcher,Pf=Xn.ReactCurrentOwner,Zt=Xn.ReactCurrentBatchConfig,ge=0,Qe=null,$e=null,it=0,$t=0,Ji=qr(0),qe=0,Go=null,fi=0,Pc=0,Of=0,To=null,Lt=null,Df=0,ys=1/0,On=null,ec=!1,hh=null,Sr=null,Ja=!1,mr=null,tc=0,Io=0,fh=null,_l=-1,xl=0;function Rt(){return ge&6?Fe():_l!==-1?_l:_l=Fe()}function Tr(t){return t.mode&1?ge&2&&it!==0?it&-it:ET.transition!==null?(xl===0&&(xl=A_()),xl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:F_(t.type)),t):1}function fn(t,e,n,r){if(50<Io)throw Io=0,fh=null,Error(z(185));ia(t,n,r),(!(ge&2)||t!==Qe)&&(t===Qe&&(!(ge&2)&&(Pc|=n),qe===4&&cr(t,it)),Ut(t,r),n===1&&ge===0&&!(e.mode&1)&&(ys=Fe()+500,bc&&Hr()))}function Ut(t,e){var n=t.callbackNode;ES(t,e);var r=Ml(t,t===Qe?it:0);if(r===0)n!==null&&og(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&og(n),e===1)t.tag===0?wT(Xg.bind(null,t)):i0(Xg.bind(null,t)),yT(function(){!(ge&6)&&Hr()}),n=null;else{switch(P_(r)){case 1:n=af;break;case 4:n=R_;break;case 16:n=Vl;break;case 536870912:n=N_;break;default:n=Vl}n=rx(n,Y0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y0(t,e){if(_l=-1,xl=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(is()&&t.callbackNode!==n)return null;var r=Ml(t,t===Qe?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nc(t,r);else{e=r;var i=ge;ge|=2;var s=X0();(Qe!==t||it!==e)&&(On=null,ys=Fe()+500,oi(t,e));do try{$T();break}catch(c){J0(t,c)}while(1);xf(),Zl.current=s,ge=i,$e!==null?e=0:(Qe=null,it=0,e=qe)}if(e!==0){if(e===2&&(i=Ud(t),i!==0&&(r=i,e=ph(t,i))),e===1)throw n=Go,oi(t,0),cr(t,r),Ut(t,Fe()),n;if(e===6)cr(t,r);else{if(i=t.current.alternate,!(r&30)&&!UT(i)&&(e=nc(t,r),e===2&&(s=Ud(t),s!==0&&(r=s,e=ph(t,s))),e===1))throw n=Go,oi(t,0),cr(t,r),Ut(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Xr(t,Lt,On);break;case 3:if(cr(t,r),(r&130023424)===r&&(e=Df+500-Fe(),10<e)){if(Ml(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kd(Xr.bind(null,t,Lt,On),e);break}Xr(t,Lt,On);break;case 4:if(cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-hn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FT(r/1960))-r,10<r){t.timeoutHandle=Kd(Xr.bind(null,t,Lt,On),r);break}Xr(t,Lt,On);break;case 5:Xr(t,Lt,On);break;default:throw Error(z(329))}}}return Ut(t,Fe()),t.callbackNode===n?Y0.bind(null,t):null}function ph(t,e){var n=To;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=nc(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&mh(e)),t}function mh(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function UT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~Of,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(ge&6)throw Error(z(327));is();var e=Ml(t,0);if(!(e&1))return Ut(t,Fe()),null;var n=nc(t,e);if(t.tag!==0&&n===2){var r=Ud(t);r!==0&&(e=r,n=ph(t,r))}if(n===1)throw n=Go,oi(t,0),cr(t,e),Ut(t,Fe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,Lt,On),Ut(t,Fe()),null}function Lf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(ys=Fe()+500,bc&&Hr())}}function pi(t){mr!==null&&mr.tag===0&&!(ge&6)&&is();var e=ge;ge|=1;var n=Zt.transition,r=_e;try{if(Zt.transition=null,_e=1,t)return t()}finally{_e=r,Zt.transition=n,ge=e,!(ge&6)&&Hr()}}function Vf(){$t=Ji.current,ke(Ji)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gT(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zl();break;case 3:ms(),ke(Mt),ke(wt),Cf();break;case 5:If(r);break;case 4:ms();break;case 13:ke(Re);break;case 19:ke(Re);break;case 10:wf(r.type._context);break;case 22:case 23:Vf()}n=n.return}if(Qe=t,$e=t=Ir(t.current,null),it=$t=e,qe=0,Go=null,Of=Pc=fi=0,Lt=To=null,ni!==null){for(e=0;e<ni.length;e++)if(n=ni[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ni=null}return t}function J0(t,e){do{var n=$e;try{if(xf(),gl.current=Xl,Jl){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Jl=!1}if(hi=0,Ke=We=Ne=null,Eo=!1,Wo=0,Pf.current=null,n===null||n.return===null){qe=1,Go=e,$e=null;break}e:{var s=t,a=n.return,c=n,u=e;if(e=it,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var k=Fg(a);if(k!==null){k.flags&=-257,Ug(k,a,c,s,e),k.mode&1&&Mg(s,d,e),e=k,u=d;var I=e.updateQueue;if(I===null){var x=new Set;x.add(u),e.updateQueue=x}else I.add(u);break e}else{if(!(e&1)){Mg(s,d,e),Mf();break e}u=Error(z(426))}}else if(je&&c.mode&1){var N=Fg(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Ug(N,a,c,s,e),vf(gs(u,c));break e}}s=u=gs(u,c),qe!==4&&(qe=2),To===null?To=[s]:To.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=O0(s,u,e);Ng(s,S);break e;case 1:c=u;var _=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Sr===null||!Sr.has(j)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=D0(s,c,e);Ng(s,P);break e}}s=s.return}while(s!==null)}ex(n)}catch(D){e=D,$e===n&&n!==null&&($e=n=n.return);continue}break}while(1)}function X0(){var t=Zl.current;return Zl.current=Xl,t===null?Xl:t}function Mf(){(qe===0||qe===3||qe===2)&&(qe=4),Qe===null||!(fi&268435455)&&!(Pc&268435455)||cr(Qe,it)}function nc(t,e){var n=ge;ge|=2;var r=X0();(Qe!==t||it!==e)&&(On=null,oi(t,e));do try{BT();break}catch(i){J0(t,i)}while(1);if(xf(),ge=n,Zl.current=r,$e!==null)throw Error(z(261));return Qe=null,it=0,qe}function BT(){for(;$e!==null;)Z0($e)}function $T(){for(;$e!==null&&!fS();)Z0($e)}function Z0(t){var e=nx(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?ex(t):$e=e,Pf.current=null}function ex(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DT(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,$e=null;return}}else if(n=OT(n,e,$t),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);qe===0&&(qe=5)}function Xr(t,e,n){var r=_e,i=Zt.transition;try{Zt.transition=null,_e=1,zT(t,e,n,r)}finally{Zt.transition=i,_e=r}return null}function zT(t,e,n,r){do is();while(mr!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SS(t,s),t===Qe&&($e=Qe=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ja||(Ja=!0,rx(Vl,function(){return is(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var a=_e;_e=1;var c=ge;ge|=4,Pf.current=null,VT(t,n),K0(n,t),cT(Hd),Fl=!!qd,Hd=qd=null,t.current=n,MT(n),pS(),ge=c,_e=a,Zt.transition=s}else t.current=n;if(Ja&&(Ja=!1,mr=t,tc=i),s=t.pendingLanes,s===0&&(Sr=null),yS(n.stateNode),Ut(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ec)throw ec=!1,t=hh,hh=null,t;return tc&1&&t.tag!==0&&is(),s=t.pendingLanes,s&1?t===fh?Io++:(Io=0,fh=t):Io=0,Hr(),null}function is(){if(mr!==null){var t=P_(tc),e=Zt.transition,n=_e;try{if(Zt.transition=null,_e=16>t?16:t,mr===null)var r=!1;else{if(t=mr,mr=null,tc=0,ge&6)throw Error(z(331));var i=ge;for(ge|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Y=d;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:So(8,h,s)}var g=h.child;if(g!==null)g.return=h,Y=g;else for(;Y!==null;){h=Y;var m=h.sibling,k=h.return;if(q0(h),h===d){Y=null;break}if(m!==null){m.return=k,Y=m;break}Y=k}}}var I=s.alternate;if(I!==null){var x=I.child;if(x!==null){I.child=null;do{var N=x.sibling;x.sibling=null,x=N}while(x!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:So(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,Y=S;break e}Y=s.return}}var _=t.current;for(Y=_;Y!==null;){a=Y;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,Y=j;else e:for(a=_;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ac(9,c)}}catch(D){De(c,c.return,D)}if(c===a){Y=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,Y=P;break e}Y=c.return}}if(ge=i,Hr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Tc,t)}catch{}r=!0}return r}finally{_e=n,Zt.transition=e}}return!1}function Zg(t,e,n){e=gs(n,e),e=O0(t,e,1),t=Er(t,e,1),e=Rt(),t!==null&&(ia(t,1,e),Ut(t,e))}function De(t,e,n){if(t.tag===3)Zg(t,t,n);else for(;e!==null;){if(e.tag===3){Zg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=gs(n,t),t=D0(e,t,1),e=Er(e,t,1),t=Rt(),e!==null&&(ia(e,1,t),Ut(e,t));break}}e=e.return}}function WT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(it&n)===n&&(qe===4||qe===3&&(it&130023424)===it&&500>Fe()-Df?oi(t,0):Of|=n),Ut(t,e)}function tx(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var n=Rt();t=qn(t,e),t!==null&&(ia(t,e,n),Ut(t,n))}function qT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tx(t,n)}function HT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),tx(t,n)}var nx;nx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,PT(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,je&&e.flags&1048576&&s0(e,Hl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vl(t,e),t=e.pendingProps;var i=hs(e,wt.current);rs(e,n),i=jf(null,e,r,t,i,n);var s=bf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,Wl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sf(e),i.updater=Rc,e.stateNode=i,i._reactInternals=e,th(e,r,t,n),e=ih(null,e,r,!0,s,n)):(e.tag=0,je&&s&&gf(e),Ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KT(r),t=ln(r,t),i){case 0:e=rh(null,e,r,t,n);break e;case 1:e=zg(null,e,r,t,n);break e;case 11:e=Bg(null,e,r,t,n);break e;case 14:e=$g(null,e,r,ln(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),rh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),zg(t,e,r,i,n);case 3:e:{if(F0(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,c0(t,e),Ql(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gs(Error(z(423)),e),e=Wg(t,e,r,n,i);break e}else if(r!==i){i=gs(Error(z(424)),e),e=Wg(t,e,r,n,i);break e}else for(zt=wr(e.stateNode.containerInfo.firstChild),Wt=e,je=!0,un=null,n=f0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===i){e=Hn(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return p0(e),t===null&&Xd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Gd(r,i)?a=null:s!==null&&Gd(r,s)&&(e.flags|=32),M0(t,e),Ct(t,e,a,n),e.child;case 6:return t===null&&Xd(e),null;case 13:return U0(t,e,n);case 4:return Tf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ps(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Bg(t,e,r,i,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Te(Gl,r._currentValue),r._currentValue=a,s!==null)if(pn(s.value,a)){if(s.children===i.children&&!Mt.current){e=Hn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Bn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Zd(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Zd(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rs(e,n),i=en(i),r=r(i),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),$g(t,e,r,i,n);case 15:return L0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),vl(t,e),e.tag=1,Ft(r)?(t=!0,Wl(e)):t=!1,rs(e,n),d0(e,r,i),th(e,r,i,n),ih(null,e,r,!0,t,n);case 19:return B0(t,e,n);case 22:return V0(t,e,n)}throw Error(z(156,e.tag))};function rx(t,e){return b_(t,e)}function GT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new GT(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KT(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rf)return 11;if(t===sf)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Ff(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Bi:return ai(n.children,i,s,e);case nf:a=8,i|=8;break;case Id:return t=Xt(12,n,e,i|2),t.elementType=Id,t.lanes=s,t;case Cd:return t=Xt(13,n,e,i),t.elementType=Cd,t.lanes=s,t;case kd:return t=Xt(19,n,e,i),t.elementType=kd,t.lanes=s,t;case h_:return Oc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u_:a=10;break e;case d_:a=9;break e;case rf:a=11;break e;case sf:a=14;break e;case or:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Xt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ai(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function Oc(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=h_,t.lanes=n,t.stateNode={isHidden:!1},t}function sd(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function od(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uf(t,e,n,r,i,s,a,c,u){return t=new QT(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sf(s),t}function YT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ix(t){if(!t)return Pr;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ft(n))return r0(t,n,e)}return e}function sx(t,e,n,r,i,s,a,c,u){return t=Uf(n,r,!0,t,i,s,a,c,u),t.context=ix(null),n=t.current,r=Rt(),i=Tr(n),s=Bn(r,i),s.callback=e??null,Er(n,s,i),t.current.lanes=i,ia(t,i,r),Ut(t,r),t}function Dc(t,e,n,r){var i=e.current,s=Rt(),a=Tr(i);return n=ix(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Er(i,e,a),t!==null&&(fn(t,i,a,s),ml(t,i,a)),a}function rc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ey(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bf(t,e){ey(t,e),(t=t.alternate)&&ey(t,e)}function JT(){return null}var ox=typeof reportError=="function"?reportError:function(t){console.error(t)};function $f(t){this._internalRoot=t}Lc.prototype.render=$f.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Dc(t,e,null,null)};Lc.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){Dc(null,t,null,null)}),e[Wn]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=L_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&M_(t)}};function zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ty(){}function XT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=rc(a);s.call(d)}}var a=sx(e,r,t,0,null,!1,!1,"",ty);return t._reactRootContainer=a,t[Wn]=a.current,Fo(t.nodeType===8?t.parentNode:t),pi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=rc(u);c.call(d)}}var u=Uf(t,0,!1,null,null,!1,!1,"",ty);return t._reactRootContainer=u,t[Wn]=u.current,Fo(t.nodeType===8?t.parentNode:t),pi(function(){Dc(e,u,n,r)}),u}function Mc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var u=rc(a);c.call(u)}}Dc(e,a,t,i)}else a=XT(n,e,t,i,r);return rc(a)}O_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uo(e.pendingLanes);n!==0&&(lf(e,n|1),Ut(e,Fe()),!(ge&6)&&(ys=Fe()+500,Hr()))}break;case 13:pi(function(){var r=qn(t,1);if(r!==null){var i=Rt();fn(r,t,1,i)}}),Bf(t,1)}};cf=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=Rt();fn(e,t,134217728,n)}Bf(t,134217728)}};D_=function(t){if(t.tag===13){var e=Tr(t),n=qn(t,e);if(n!==null){var r=Rt();fn(n,t,e,r)}Bf(t,e)}};L_=function(){return _e};V_=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Vd=function(t,e,n){switch(e){case"input":if(Rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jc(r);if(!i)throw Error(z(90));p_(r),Rd(r,i)}}}break;case"textarea":g_(t,n);break;case"select":e=n.value,e!=null&&Zi(t,!!n.multiple,e,!1)}};S_=Lf;T_=pi;var ZT={usingClientEntryPoint:!1,Events:[oa,qi,jc,w_,E_,Lf]},io={findFiberByHostInstance:ti,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},eI={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k_(t),t===null?null:t.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{Tc=Xa.inject(eI),En=Xa}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZT;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zf(e))throw Error(z(200));return YT(t,e,null,n)};Gt.createRoot=function(t,e){if(!zf(t))throw Error(z(299));var n=!1,r="",i=ox;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uf(t,1,!1,null,null,n,!1,r,i),t[Wn]=e.current,Fo(t.nodeType===8?t.parentNode:t),new $f(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=k_(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return pi(t)};Gt.hydrate=function(t,e,n){if(!Vc(e))throw Error(z(200));return Mc(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!zf(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=ox;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=sx(e,null,t,1,n??null,i,!1,s,a),t[Wn]=e.current,Fo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lc(e)};Gt.render=function(t,e,n){if(!Vc(e))throw Error(z(200));return Mc(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!Vc(t))throw Error(z(40));return t._reactRootContainer?(pi(function(){Mc(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};Gt.unstable_batchedUpdates=Lf;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Mc(t,e,n,!1,r)};Gt.version="18.2.0-next-9e3b772b8-20220608";function ax(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ax)}catch(t){console.error(t)}}ax(),s_.exports=Gt;var tI=s_.exports,ny=tI;Sd.createRoot=ny.createRoot,Sd.hydrateRoot=ny.hydrateRoot;const nI="modulepreload",rI=function(t){return"/"+t},ry={},iI=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=rI(s),s in ry)return;ry[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const g=i[h];if(g.href===s&&(!a||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":nI,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((h,g)=>{d.addEventListener("load",h),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.parse=dI;Wf.serialize=hI;const sI=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,oI=/^[\u0021-\u003A\u003C-\u007E]*$/,aI=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,lI=/^[\u0020-\u003A\u003D-\u007E]*$/,cI=Object.prototype.toString,uI=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function dI(t,e){const n=new uI,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||fI;let s=0;do{const a=t.indexOf("=",s);if(a===-1)break;const c=t.indexOf(";",s),u=c===-1?r:c;if(a>u){s=t.lastIndexOf(";",a-1)+1;continue}const d=iy(t,s,a),h=sy(t,a,d),g=t.slice(d,h);if(n[g]===void 0){let m=iy(t,a+1,u),k=sy(t,u,m);const I=i(t.slice(m,k));n[g]=I}s=u+1}while(s<r);return n}function iy(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function sy(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function hI(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!sI.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!oI.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!aI.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!lI.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!pI(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function fI(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function pI(t){return cI.call(t)==="[object Date]"}var oy="popstate";function mI(t={}){function e(i,s){let{pathname:a="/",search:c="",hash:u=""}=Ei(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),gh("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let a=i.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof s=="string"?s:Ko(s))}function r(i,s){nn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return yI(e,n,r,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gI(){return Math.random().toString(36).substring(2,10)}function ay(t,e){return{usr:t.state,key:t.key,idx:e}}function gh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ei(e):e,state:n,key:e&&e.key||r||gI()}}function Ko({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ei(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function yI(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function g(){c="POP";let N=h(),S=N==null?null:N-d;d=N,u&&u({action:c,location:x.location,delta:S})}function m(N,S){c="PUSH";let _=gh(x.location,N,S);n&&n(_,N),d=h()+1;let j=ay(_,d),P=x.createHref(_);try{a.pushState(j,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(P)}s&&u&&u({action:c,location:x.location,delta:1})}function k(N,S){c="REPLACE";let _=gh(x.location,N,S);n&&n(_,N),d=h();let j=ay(_,d),P=x.createHref(_);a.replaceState(j,"",P),s&&u&&u({action:c,location:x.location,delta:0})}function I(N){return vI(N)}let x={get action(){return c},get location(){return t(i,a)},listen(N){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(oy,g),u=N,()=>{i.removeEventListener(oy,g),u=null}},createHref(N){return e(i,N)},createURL:I,encodeLocation(N){let S=I(N);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:k,go(N){return a.go(N)}};return x}function vI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ko(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function lx(t,e,n="/"){return _I(t,e,n,!1)}function _I(t,e,n,r){let i=typeof e=="string"?Ei(e):e,s=Gn(i.pathname||"/",n);if(s==null)return null;let a=cx(t);xI(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=NI(s);c=bI(a[u],d,r)}return c}function cx(t,e=[],n=[],r=""){let i=(s,a,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(be(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=$n([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(be(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),cx(s.children,e,h,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:kI(d,s.index),routesMeta:h})};return t.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let u of ux(s.path))i(s,a,u)}),e}function ux(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=ux(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function xI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var wI=/^:[\w-]+$/,EI=3,SI=2,TI=1,II=10,CI=-2,ly=t=>t==="*";function kI(t,e){let n=t.split("/"),r=n.length;return n.some(ly)&&(r+=CI),e&&(r+=SI),n.filter(i=>!ly(i)).reduce((i,s)=>i+(wI.test(s)?EI:s===""?TI:II),r)}function jI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bI(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",g=ic({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=ic({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:$n([s,g.pathname]),pathnameBase:DI($n([s,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(s=$n([s,g.pathnameBase]))}return a}function ic(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:g},m)=>{if(h==="*"){let I=c[m]||"";a=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const k=c[m];return g&&!k?d[h]=void 0:d[h]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function RI(t,e=!1,n=!0){nn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function NI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Gn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function AI(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ei(t):t;return{pathname:n?n.startsWith("/")?n:PI(n,e):e,search:LI(r),hash:VI(i)}}function PI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ad(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qf(t){let e=OI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Hf(t,e,n,r=!1){let i;typeof t=="string"?i=Ei(t):(i={...t},be(!i.pathname||!i.pathname.includes("?"),ad("?","pathname","search",i)),be(!i.pathname||!i.pathname.includes("#"),ad("#","pathname","hash",i)),be(!i.search||!i.search.includes("#"),ad("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=AI(i,c),d=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var $n=t=>t.join("/").replace(/\/\/+/g,"/"),DI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var dx=["POST","PUT","PATCH","DELETE"];new Set(dx);var FI=["GET",...dx];new Set(FI);var Rs=b.createContext(null);Rs.displayName="DataRouter";var Fc=b.createContext(null);Fc.displayName="DataRouterState";var hx=b.createContext({isTransitioning:!1});hx.displayName="ViewTransition";var UI=b.createContext(new Map);UI.displayName="Fetchers";var BI=b.createContext(null);BI.displayName="Await";var gn=b.createContext(null);gn.displayName="Navigation";var la=b.createContext(null);la.displayName="Location";var rn=b.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var Gf=b.createContext(null);Gf.displayName="RouteError";function $I(t,{relative:e}={}){be(Ns(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(gn),{hash:i,pathname:s,search:a}=ca(t,{relative:e}),c=s;return n!=="/"&&(c=s==="/"?n:$n([n,s])),r.createHref({pathname:c,search:a,hash:i})}function Ns(){return b.useContext(la)!=null}function Zn(){return be(Ns(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(la).location}var fx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function px(t){b.useContext(gn).static||b.useLayoutEffect(t)}function xe(){let{isDataRoute:t}=b.useContext(rn);return t?rC():zI()}function zI(){be(Ns(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Rs),{basename:e,navigator:n}=b.useContext(gn),{matches:r}=b.useContext(rn),{pathname:i}=Zn(),s=JSON.stringify(qf(r)),a=b.useRef(!1);return px(()=>{a.current=!0}),b.useCallback((u,d={})=>{if(nn(a.current,fx),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=Hf(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$n([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,s,i,t])}var WI=b.createContext(null);function qI(t){let e=b.useContext(rn).outlet;return e&&b.createElement(WI.Provider,{value:t},e)}function Kf(){let{matches:t}=b.useContext(rn),e=t[t.length-1];return e?e.params:{}}function ca(t,{relative:e}={}){let{matches:n}=b.useContext(rn),{pathname:r}=Zn(),i=JSON.stringify(qf(n));return b.useMemo(()=>Hf(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function HI(t,e){return mx(t,e)}function mx(t,e,n,r){var _;be(Ns(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=b.useContext(gn),{matches:a}=b.useContext(rn),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let j=g&&g.path||"";gx(d,!g||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let m=Zn(),k;if(e){let j=typeof e=="string"?Ei(e):e;be(h==="/"||((_=j.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${j.pathname}" was given in the \`location\` prop.`),k=j}else k=m;let I=k.pathname||"/",x=I;if(h!=="/"){let j=h.replace(/^\//,"").split("/");x="/"+I.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=!s&&n&&n.matches&&n.matches.length>0?n.matches:lx(t,{pathname:x});nn(g||N!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),nn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=JI(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:$n([h,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:$n([h,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,n,r);return e&&S?b.createElement(la.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},S):S}function GI(){let t=nC(),e=MI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,a)}var KI=b.createElement(GI,null),QI=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?b.createElement(rn.Provider,{value:this.props.routeContext},b.createElement(Gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YI({routeContext:t,match:e,children:n}){let r=b.useContext(Rs);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(rn.Provider,{value:t},n)}function JI(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);be(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:g}=n,m=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let g,m=!1,k=null,I=null;n&&(g=s&&d.route.id?s[d.route.id]:void 0,k=d.route.errorElement||KI,a&&(c<0&&h===0?(gx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,I=null):c===h&&(m=!0,I=d.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,h+1)),N=()=>{let S;return g?S=k:m?S=I:d.route.Component?S=b.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,b.createElement(YI,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(QI,{location:n.location,revalidation:n.revalidation,component:k,error:g,children:N(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):N()},null)}function Qf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XI(t){let e=b.useContext(Rs);return be(e,Qf(t)),e}function ZI(t){let e=b.useContext(Fc);return be(e,Qf(t)),e}function eC(t){let e=b.useContext(rn);return be(e,Qf(t)),e}function Yf(t){let e=eC(t),n=e.matches[e.matches.length-1];return be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function tC(){return Yf("useRouteId")}function nC(){var r;let t=b.useContext(Gf),e=ZI("useRouteError"),n=Yf("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function rC(){let{router:t}=XI("useNavigate"),e=Yf("useNavigate"),n=b.useRef(!1);return px(()=>{n.current=!0}),b.useCallback(async(i,s={})=>{nn(n.current,fx),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var cy={};function gx(t,e,n){!e&&!cy[t]&&(cy[t]=!0,nn(!1,n))}b.memo(iC);function iC({routes:t,future:e,state:n}){return mx(t,void 0,n,e)}function El({to:t,replace:e,state:n,relative:r}){be(Ns(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=b.useContext(gn);nn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=b.useContext(rn),{pathname:a}=Zn(),c=xe(),u=Hf(t,qf(s),a,r==="path"),d=JSON.stringify(u);return b.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function sC(t){return qI(t.context)}function ue(t){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oC({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){be(!Ns(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=Ei(n));let{pathname:u="/",search:d="",hash:h="",state:g=null,key:m="default"}=n,k=b.useMemo(()=>{let I=Gn(u,a);return I==null?null:{location:{pathname:I,search:d,hash:h,state:g,key:m},navigationType:r}},[a,u,d,h,g,m,r]);return nn(k!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:b.createElement(gn.Provider,{value:c},b.createElement(la.Provider,{children:e,value:k}))}function aC({children:t,location:e}){return HI(yh(t),e)}function yh(t,e=[]){let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,yh(r.props.children,s));return}be(r.type===ue,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=yh(r.props.children,s)),n.push(a)}),n}var Sl="get",Tl="application/x-www-form-urlencoded";function Uc(t){return t!=null&&typeof t.tagName=="string"}function lC(t){return Uc(t)&&t.tagName.toLowerCase()==="button"}function cC(t){return Uc(t)&&t.tagName.toLowerCase()==="form"}function uC(t){return Uc(t)&&t.tagName.toLowerCase()==="input"}function dC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hC(t,e){return t.button===0&&(!e||e==="_self")&&!dC(t)}var Za=null;function fC(){if(Za===null)try{new FormData(document.createElement("form"),0),Za=!1}catch{Za=!0}return Za}var pC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ld(t){return t!=null&&!pC.has(t)?(nn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tl}"`),null):t}function mC(t,e){let n,r,i,s,a;if(cC(t)){let c=t.getAttribute("action");r=c?Gn(c,e):null,n=t.getAttribute("method")||Sl,i=ld(t.getAttribute("enctype"))||Tl,s=new FormData(t)}else if(lC(t)||uC(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Gn(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Sl,i=ld(t.getAttribute("formenctype"))||ld(c.getAttribute("enctype"))||Tl,s=new FormData(c,t),!fC()){let{name:d,type:h,value:g}=t;if(h==="image"){let m=d?`${d}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else d&&s.append(d,g)}}else{if(Uc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sl,r=null,i=Tl,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function Jf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function gC(t,e){if(t.id in e)return e[t.id];try{let n=await iI(()=>import(t.module),__vite__mapDeps([]));return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yC(t){return t!=null&&typeof t.page=="string"}function vC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _C(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await gC(s,n);return a.links?a.links():[]}return[]}));return SC(r.flat(1).filter(vC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function uy(t,e,n,r,i,s){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):s==="data"?e.filter((u,d)=>{var g;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function xC(t,e,{includeHydrateFallback:n}={}){return wC(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function wC(t){return[...new Set(t)]}function EC(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function SC(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!yC(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let c=JSON.stringify(EC(s));return n.has(c)||(n.add(c),i.push({key:c,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var TC=new Set([100,101,204,205]);function IC(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Gn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function yx(){let t=b.useContext(Rs);return Jf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function CC(){let t=b.useContext(Fc);return Jf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Xf=b.createContext(void 0);Xf.displayName="FrameworkContext";function vx(){let t=b.useContext(Xf);return Jf(t,"You must render this element inside a <HydratedRouter> element"),t}function kC(t,e){let n=b.useContext(Xf),[r,i]=b.useState(!1),[s,a]=b.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,m=b.useRef(null);b.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let x=S=>{S.forEach(_=>{a(_.isIntersecting)})},N=new IntersectionObserver(x,{threshold:.5});return m.current&&N.observe(m.current),()=>{N.disconnect()}}},[t]),b.useEffect(()=>{if(r){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[r]);let k=()=>{i(!0)},I=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:so(c,k),onBlur:so(u,I),onMouseEnter:so(d,k),onMouseLeave:so(h,I),onTouchStart:so(g,k)}]:[!1,m,{}]}function so(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jC({page:t,...e}){let{router:n}=yx(),r=b.useMemo(()=>lx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(RC,{page:t,matches:r,...e}):null}function bC(t){let{manifest:e,routeModules:n}=vx(),[r,i]=b.useState([]);return b.useEffect(()=>{let s=!1;return _C(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function RC({page:t,matches:e,...n}){let r=Zn(),{manifest:i,routeModules:s}=vx(),{basename:a}=yx(),{loaderData:c,matches:u}=CC(),d=b.useMemo(()=>uy(t,e,u,i,r,"data"),[t,e,u,i,r]),h=b.useMemo(()=>uy(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,x=!1;if(e.forEach(S=>{var j;let _=i.routes[S.route.id];!_||!_.hasLoader||(!d.some(P=>P.route.id===S.route.id)&&S.route.id in c&&((j=s[S.route.id])!=null&&j.shouldRevalidate)||_.hasClientLoader?x=!0:I.add(S.route.id))}),I.size===0)return[];let N=IC(t,a);return x&&I.size>0&&N.searchParams.set("_routes",e.filter(S=>I.has(S.route.id)).map(S=>S.route.id).join(",")),[N.pathname+N.search]},[a,c,r,i,d,e,t,s]),m=b.useMemo(()=>xC(h,i),[h,i]),k=bC(h);return b.createElement(b.Fragment,null,g.map(I=>b.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),m.map(I=>b.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),k.map(({key:I,link:x})=>b.createElement("link",{key:I,...x})))}function NC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var _x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_x&&(window.__reactRouterVersion="7.6.0")}catch{}function AC({basename:t,children:e,window:n}){let r=b.useRef();r.current==null&&(r.current=mI({window:n,v5Compat:!0}));let i=r.current,[s,a]=b.useState({action:i.action,location:i.location}),c=b.useCallback(u=>{b.startTransition(()=>a(u))},[a]);return b.useLayoutEffect(()=>i.listen(c),[i,c]),b.createElement(oC,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g,...m},k){let{basename:I}=b.useContext(gn),x=typeof d=="string"&&xx.test(d),N,S=!1;if(typeof d=="string"&&x&&(N=d,_x))try{let w=new URL(window.location.href),C=d.startsWith("//")?new URL(w.protocol+d):new URL(d),v=Gn(C.pathname,I);C.origin===w.origin&&v!=null?d=v+C.search+C.hash:S=!0}catch{nn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=$I(d,{relative:i}),[j,P,D]=kC(r,m),A=LC(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g});function E(w){e&&e(w),w.defaultPrevented||A(w)}let y=b.createElement("a",{...m,...D,href:N||_,onClick:S||s?e:E,ref:NC(k,P),target:u,"data-discover":!x&&n==="render"?"true":void 0});return j&&!x?b.createElement(b.Fragment,null,y,b.createElement(jC,{page:_})):y});Le.displayName="Link";var PC=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:c,children:u,...d},h){let g=ca(a,{relative:d.relative}),m=Zn(),k=b.useContext(Fc),{navigator:I,basename:x}=b.useContext(gn),N=k!=null&&BC(g)&&c===!0,S=I.encodeLocation?I.encodeLocation(g).pathname:g.pathname,_=m.pathname,j=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(_=_.toLowerCase(),j=j?j.toLowerCase():null,S=S.toLowerCase()),j&&x&&(j=Gn(j,x)||j);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=_===S||!i&&_.startsWith(S)&&_.charAt(P)==="/",A=j!=null&&(j===S||!i&&j.startsWith(S)&&j.charAt(S.length)==="/"),E={isActive:D,isPending:A,isTransitioning:N},y=D?e:void 0,w;typeof r=="function"?w=r(E):w=[r,D?"active":null,A?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(E):s;return b.createElement(Le,{...d,"aria-current":y,className:w,ref:h,style:C,to:a,viewTransition:c},typeof u=="function"?u(E):u)});PC.displayName="NavLink";var OC=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=Sl,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,...m},k)=>{let I=FC(),x=UC(c,{relative:d}),N=a.toLowerCase()==="get"?"get":"post",S=typeof c=="string"&&xx.test(c),_=j=>{if(u&&u(j),j.defaultPrevented)return;j.preventDefault();let P=j.nativeEvent.submitter,D=(P==null?void 0:P.getAttribute("formmethod"))||a;I(P||j.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:g})};return b.createElement("form",{ref:k,method:N,action:x,onSubmit:r?u:_,...m,"data-discover":!S&&t==="render"?"true":void 0})});OC.displayName="Form";function DC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wx(t){let e=b.useContext(Rs);return be(e,DC(t)),e}function LC(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let c=xe(),u=Zn(),d=ca(t,{relative:s});return b.useCallback(h=>{if(hC(h,e)){h.preventDefault();let g=n!==void 0?n:Ko(u)===Ko(d);c(t,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[u,c,d,n,r,e,t,i,s,a])}var VC=0,MC=()=>`__${String(++VC)}__`;function FC(){let{router:t}=wx("useSubmit"),{basename:e}=b.useContext(gn),n=tC();return b.useCallback(async(r,i={})=>{let{action:s,method:a,encType:c,formData:u,body:d}=mC(r,e);if(i.navigate===!1){let h=i.fetcherKey||MC();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function UC(t,{relative:e}={}){let{basename:n}=b.useContext(gn),r=b.useContext(rn);be(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ca(t||".",{relative:e})},a=Zn();if(t==null){s.search=a.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:$n([n,s.pathname])),Ko(s)}function BC(t,e={}){let n=b.useContext(hx);be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wx("useViewTransitionState"),i=ca(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Gn(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Gn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ic(i.pathname,a)!=null||ic(i.pathname,s)!=null}[...TC];const dy={documents:{total:4,completed:0,items:[{id:"doc1",title:"就業規則",completed:!1,completedAt:null},{id:"doc2",title:"リモートワーク規定",completed:!1,completedAt:null},{id:"doc3",title:"秘密保持契約書",completed:!1,completedAt:null},{id:"doc4",title:"個人情報の取り扱いに関する同意書",completed:!1,completedAt:null}]},items:{total:9,completed:0,items:[{id:"item1",title:"健康診断個人票",completed:!1,completedAt:null},{id:"item2",title:"健康診断の領収書",completed:!1,completedAt:null},{id:"item3",title:"パスポート・在留カード",completed:!1,completedAt:null},{id:"item4",title:"年金手帳",completed:!1,completedAt:null},{id:"item5",title:"雇用保険被保険者証",completed:!1,completedAt:null},{id:"item6",title:"扶養控除等申請書",completed:!1,completedAt:null},{id:"item7",title:"源泉徴収票",completed:!1,completedAt:null},{id:"item8",title:"住民税の特別徴収にかかる異動届",completed:!1,completedAt:null},{id:"item9",title:"その他必要書類",completed:!1,completedAt:null}]},messages:{total:3,completed:0,items:[{id:"msg1",title:"原田 一郎からのメッセージ",completed:!1,completedAt:null},{id:"msg2",title:"野村 育子からのメッセージ",completed:!1,completedAt:null},{id:"msg3",title:"小林 美樹からのメッセージ",completed:!1,completedAt:null}]}},hy="onboarding_progress",Ex=b.createContext(),$C=({children:t})=>{const[e,n]=b.useState(()=>{const c=localStorage.getItem(hy);return c?JSON.parse(c):dy});b.useEffect(()=>{localStorage.setItem(hy,JSON.stringify(e))},[e]);const r=(c,u)=>{const d=new Date,h=d.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),g=d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),m=`${h} ${g}`;n(k=>{const I=k[c].items.map(N=>N.id===u?{...N,completed:!0,completedAt:m}:N),x=I.filter(N=>N.completed).length;return{...k,[c]:{...k[c],items:I,completed:x}}})},i=c=>{const u=new Date,d=u.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),h=u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),g=`${d} ${h}`;n(m=>{const k=m[c].items.map(I=>I.completed?I:{...I,completed:!0,completedAt:g});return{...m,[c]:{...m[c],items:k,completed:m[c].total}}})},s=()=>{n(dy)},a=()=>{const c=Object.values(e).reduce((d,h)=>d+h.total,0),u=Object.values(e).reduce((d,h)=>d+h.completed,0);return c>0?Math.round(u/c*100):0};return o.jsx(Ex.Provider,{value:{progress:e,markItemCompleted:r,markCategoryCompleted:i,resetProgress:s,calculateTotalProgress:a},children:t})},Bc=()=>{const t=b.useContext(Ex);if(!t)throw new Error("useProgress must be used within a ProgressProvider");return t},zC=()=>{};var fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Tx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,g=(s&3)<<4|c>>4;let m=(c&15)<<2|d>>6,k=d&63;u||(k=64,a||(m=64)),r.push(n[h],n[g],n[m],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new qC;const m=s<<2|c>>4;if(r.push(m),d!==64){const k=c<<4&240|d>>2;if(r.push(k),g!==64){const I=d<<6&192|g;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HC=function(t){const e=Sx(t);return Tx.encodeByteArray(e,!0)},sc=function(t){return HC(t).replace(/\./g,"")},Ix=function(t){try{return Tx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=()=>GC().__FIREBASE_DEFAULTS__,QC=()=>{if(typeof process>"u"||typeof fy>"u")return;const t=fy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ix(t[1]);return e&&JSON.parse(e)},$c=()=>{try{return zC()||KC()||QC()||YC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Cx=t=>{var e,n;return(n=(e=$c())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kx=t=>{const e=Cx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jx=()=>{var t;return(t=$c())===null||t===void 0?void 0:t.config},bx=t=>{var e;return(e=$c())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){return t.endsWith(".cloudworkstations.dev")}async function Zf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[sc(JSON.stringify(n)),sc(JSON.stringify(a)),c].join(".")}const Co={};function XC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Co))Co[e]?t.emulator.push(e):t.prod.push(e);return t}function ZC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let py=!1;function ep(t,e){if(typeof window>"u"||typeof document>"u"||!Si(window.location.host)||Co[t]===e||Co[t]||py)return;Co[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=XC().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,k){m.setAttribute("width","24"),m.setAttribute("id",k),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{py=!0,a()},m}function h(m,k){m.setAttribute("id",k),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=ZC(r),k=n("text"),I=document.getElementById(k)||document.createElement("span"),x=n("learnmore"),N=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),_=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const j=m.element;c(j),h(N,x);const P=d();u(_,S),j.append(_,I,N,P),document.body.appendChild(j)}s?(I.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ek(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function tk(){var t;const e=(t=$c())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ik(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sk(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ok(){return!tk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ak(){try{return typeof indexedDB=="object"}catch{return!1}}function lk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="FirebaseError";class bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ck,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?uk(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new bn(i,c,r)}}function uk(t,e){return t.replace(dk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dk=/\{\$([^}]+)}/g;function hk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(my(s)&&my(a)){if(!mi(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function my(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fk(t,e){const n=new pk(t,e);return n.subscribe.bind(n)}class pk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cd),i.error===void 0&&(i.error=cd),i.complete===void 0&&(i.complete=cd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vk(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yk(t){return t===Zr?void 0:t}function vk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const xk={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},wk=de.INFO,Ek={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},Sk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Ek[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(e){this.name=e,this._logLevel=wk,this._logHandler=Sk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Tk=(t,e)=>e.some(n=>t instanceof n);let gy,yy;function Ik(){return gy||(gy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ck(){return yy||(yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nx=new WeakMap,vh=new WeakMap,Ax=new WeakMap,ud=new WeakMap,np=new WeakMap;function kk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Cr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Nx.set(n,t)}).catch(()=>{}),np.set(e,t),e}function jk(t){if(vh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});vh.set(t,e)}let _h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ax.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bk(t){_h=t(_h)}function Rk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dd(this),e,...n);return Ax.set(r,e.sort?e.sort():[e]),Cr(r)}:Ck().includes(t)?function(...e){return t.apply(dd(this),e),Cr(Nx.get(this))}:function(...e){return Cr(t.apply(dd(this),e))}}function Nk(t){return typeof t=="function"?Rk(t):(t instanceof IDBTransaction&&jk(t),Tk(t,Ik())?new Proxy(t,_h):t)}function Cr(t){if(t instanceof IDBRequest)return kk(t);if(ud.has(t))return ud.get(t);const e=Nk(t);return e!==t&&(ud.set(t,e),np.set(e,t)),e}const dd=t=>np.get(t);function Ak(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=Cr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Cr(a.result),u.oldVersion,u.newVersion,Cr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Pk=["get","getKey","getAll","getAllKeys","count"],Ok=["put","add","delete","clear"],hd=new Map;function vy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hd.get(e))return hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Pk.includes(n)))return;const s=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return hd.set(e,s),s}bk(t=>({...t,get:(e,n,r)=>vy(e,n)||t.get(e,n,r),has:(e,n)=>!!vy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Lk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xh="@firebase/app",_y="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new tp("@firebase/app"),Vk="@firebase/app-compat",Mk="@firebase/analytics-compat",Fk="@firebase/analytics",Uk="@firebase/app-check-compat",Bk="@firebase/app-check",$k="@firebase/auth",zk="@firebase/auth-compat",Wk="@firebase/database",qk="@firebase/data-connect",Hk="@firebase/database-compat",Gk="@firebase/functions",Kk="@firebase/functions-compat",Qk="@firebase/installations",Yk="@firebase/installations-compat",Jk="@firebase/messaging",Xk="@firebase/messaging-compat",Zk="@firebase/performance",ej="@firebase/performance-compat",tj="@firebase/remote-config",nj="@firebase/remote-config-compat",rj="@firebase/storage",ij="@firebase/storage-compat",sj="@firebase/firestore",oj="@firebase/ai",aj="@firebase/firestore-compat",lj="firebase",cj="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="[DEFAULT]",uj={[xh]:"fire-core",[Vk]:"fire-core-compat",[Fk]:"fire-analytics",[Mk]:"fire-analytics-compat",[Bk]:"fire-app-check",[Uk]:"fire-app-check-compat",[$k]:"fire-auth",[zk]:"fire-auth-compat",[Wk]:"fire-rtdb",[qk]:"fire-data-connect",[Hk]:"fire-rtdb-compat",[Gk]:"fire-fn",[Kk]:"fire-fn-compat",[Qk]:"fire-iid",[Yk]:"fire-iid-compat",[Jk]:"fire-fcm",[Xk]:"fire-fcm-compat",[Zk]:"fire-perf",[ej]:"fire-perf-compat",[tj]:"fire-rc",[nj]:"fire-rc-compat",[rj]:"fire-gcs",[ij]:"fire-gcs-compat",[sj]:"fire-fst",[aj]:"fire-fst-compat",[oj]:"fire-vertex","fire-js":"fire-js",[lj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,dj=new Map,Eh=new Map;function xy(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gi(t){const e=t.name;if(Eh.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Eh.set(e,t);for(const n of oc.values())xy(n,t);for(const n of dj.values())xy(n,t);return!0}function zc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new ua("app","Firebase",hj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=cj;function Sh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw kr.create("bad-app-name",{appName:String(i)});if(n||(n=jx()),!n)throw kr.create("no-options");const s=oc.get(i);if(s){if(mi(n,s.options)&&mi(r,s.config))return s;throw kr.create("duplicate-app",{appName:i})}const a=new _k(i);for(const u of Eh.values())a.addComponent(u);const c=new fj(n,r,a);return oc.set(i,c),c}function rp(t=wh){const e=oc.get(t);if(!e&&t===wh&&jx())return Sh();if(!e)throw kr.create("no-app",{appName:t});return e}function Tn(t,e,n){var r;let i=(r=uj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(c.join(" "));return}gi(new Or(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="firebase-heartbeat-database",mj=1,Qo="firebase-heartbeat-store";let fd=null;function Px(){return fd||(fd=Ak(pj,mj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),fd}async function gj(t){try{const n=(await Px()).transaction(Qo),r=await n.objectStore(Qo).get(Ox(t));return await n.done,r}catch(e){if(e instanceof bn)Kn.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function wy(t,e){try{const r=(await Px()).transaction(Qo,"readwrite");await r.objectStore(Qo).put(e,Ox(t)),await r.done}catch(n){if(n instanceof bn)Kn.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function Ox(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=1024,vj=30;class _j{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ey();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>vj){const a=Ej(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ey(),{heartbeatsToSend:r,unsentEntries:i}=xj(this._heartbeatsCache.heartbeats),s=sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Kn.warn(n),""}}}function Ey(){return new Date().toISOString().substring(0,10)}function xj(t,e=yj){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Sy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ak()?lk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Sy(t){return sc(JSON.stringify({version:2,heartbeats:t})).length}function Ej(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t){gi(new Or("platform-logger",e=>new Dk(e),"PRIVATE")),gi(new Or("heartbeat",e=>new _j(e),"PRIVATE")),Tn(xh,_y,t),Tn(xh,_y,"esm2017"),Tn("fire-js","")}Sj("");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,Dx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function w(){}w.prototype=y.prototype,E.D=y.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(C,v,O){for(var R=Array(arguments.length-2),q=2;q<arguments.length;q++)R[q-2]=arguments[q];return y.prototype[v].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,w){w||(w=0);var C=Array(16);if(typeof y=="string")for(var v=0;16>v;++v)C[v]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(v=0;16>v;++v)C[v]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=E.g[0],w=E.g[1],v=E.g[2];var O=E.g[3],R=y+(O^w&(v^O))+C[0]+3614090360&4294967295;y=w+(R<<7&4294967295|R>>>25),R=O+(v^y&(w^v))+C[1]+3905402710&4294967295,O=y+(R<<12&4294967295|R>>>20),R=v+(w^O&(y^w))+C[2]+606105819&4294967295,v=O+(R<<17&4294967295|R>>>15),R=w+(y^v&(O^y))+C[3]+3250441966&4294967295,w=v+(R<<22&4294967295|R>>>10),R=y+(O^w&(v^O))+C[4]+4118548399&4294967295,y=w+(R<<7&4294967295|R>>>25),R=O+(v^y&(w^v))+C[5]+1200080426&4294967295,O=y+(R<<12&4294967295|R>>>20),R=v+(w^O&(y^w))+C[6]+2821735955&4294967295,v=O+(R<<17&4294967295|R>>>15),R=w+(y^v&(O^y))+C[7]+4249261313&4294967295,w=v+(R<<22&4294967295|R>>>10),R=y+(O^w&(v^O))+C[8]+1770035416&4294967295,y=w+(R<<7&4294967295|R>>>25),R=O+(v^y&(w^v))+C[9]+2336552879&4294967295,O=y+(R<<12&4294967295|R>>>20),R=v+(w^O&(y^w))+C[10]+4294925233&4294967295,v=O+(R<<17&4294967295|R>>>15),R=w+(y^v&(O^y))+C[11]+2304563134&4294967295,w=v+(R<<22&4294967295|R>>>10),R=y+(O^w&(v^O))+C[12]+1804603682&4294967295,y=w+(R<<7&4294967295|R>>>25),R=O+(v^y&(w^v))+C[13]+4254626195&4294967295,O=y+(R<<12&4294967295|R>>>20),R=v+(w^O&(y^w))+C[14]+2792965006&4294967295,v=O+(R<<17&4294967295|R>>>15),R=w+(y^v&(O^y))+C[15]+1236535329&4294967295,w=v+(R<<22&4294967295|R>>>10),R=y+(v^O&(w^v))+C[1]+4129170786&4294967295,y=w+(R<<5&4294967295|R>>>27),R=O+(w^v&(y^w))+C[6]+3225465664&4294967295,O=y+(R<<9&4294967295|R>>>23),R=v+(y^w&(O^y))+C[11]+643717713&4294967295,v=O+(R<<14&4294967295|R>>>18),R=w+(O^y&(v^O))+C[0]+3921069994&4294967295,w=v+(R<<20&4294967295|R>>>12),R=y+(v^O&(w^v))+C[5]+3593408605&4294967295,y=w+(R<<5&4294967295|R>>>27),R=O+(w^v&(y^w))+C[10]+38016083&4294967295,O=y+(R<<9&4294967295|R>>>23),R=v+(y^w&(O^y))+C[15]+3634488961&4294967295,v=O+(R<<14&4294967295|R>>>18),R=w+(O^y&(v^O))+C[4]+3889429448&4294967295,w=v+(R<<20&4294967295|R>>>12),R=y+(v^O&(w^v))+C[9]+568446438&4294967295,y=w+(R<<5&4294967295|R>>>27),R=O+(w^v&(y^w))+C[14]+3275163606&4294967295,O=y+(R<<9&4294967295|R>>>23),R=v+(y^w&(O^y))+C[3]+4107603335&4294967295,v=O+(R<<14&4294967295|R>>>18),R=w+(O^y&(v^O))+C[8]+1163531501&4294967295,w=v+(R<<20&4294967295|R>>>12),R=y+(v^O&(w^v))+C[13]+2850285829&4294967295,y=w+(R<<5&4294967295|R>>>27),R=O+(w^v&(y^w))+C[2]+4243563512&4294967295,O=y+(R<<9&4294967295|R>>>23),R=v+(y^w&(O^y))+C[7]+1735328473&4294967295,v=O+(R<<14&4294967295|R>>>18),R=w+(O^y&(v^O))+C[12]+2368359562&4294967295,w=v+(R<<20&4294967295|R>>>12),R=y+(w^v^O)+C[5]+4294588738&4294967295,y=w+(R<<4&4294967295|R>>>28),R=O+(y^w^v)+C[8]+2272392833&4294967295,O=y+(R<<11&4294967295|R>>>21),R=v+(O^y^w)+C[11]+1839030562&4294967295,v=O+(R<<16&4294967295|R>>>16),R=w+(v^O^y)+C[14]+4259657740&4294967295,w=v+(R<<23&4294967295|R>>>9),R=y+(w^v^O)+C[1]+2763975236&4294967295,y=w+(R<<4&4294967295|R>>>28),R=O+(y^w^v)+C[4]+1272893353&4294967295,O=y+(R<<11&4294967295|R>>>21),R=v+(O^y^w)+C[7]+4139469664&4294967295,v=O+(R<<16&4294967295|R>>>16),R=w+(v^O^y)+C[10]+3200236656&4294967295,w=v+(R<<23&4294967295|R>>>9),R=y+(w^v^O)+C[13]+681279174&4294967295,y=w+(R<<4&4294967295|R>>>28),R=O+(y^w^v)+C[0]+3936430074&4294967295,O=y+(R<<11&4294967295|R>>>21),R=v+(O^y^w)+C[3]+3572445317&4294967295,v=O+(R<<16&4294967295|R>>>16),R=w+(v^O^y)+C[6]+76029189&4294967295,w=v+(R<<23&4294967295|R>>>9),R=y+(w^v^O)+C[9]+3654602809&4294967295,y=w+(R<<4&4294967295|R>>>28),R=O+(y^w^v)+C[12]+3873151461&4294967295,O=y+(R<<11&4294967295|R>>>21),R=v+(O^y^w)+C[15]+530742520&4294967295,v=O+(R<<16&4294967295|R>>>16),R=w+(v^O^y)+C[2]+3299628645&4294967295,w=v+(R<<23&4294967295|R>>>9),R=y+(v^(w|~O))+C[0]+4096336452&4294967295,y=w+(R<<6&4294967295|R>>>26),R=O+(w^(y|~v))+C[7]+1126891415&4294967295,O=y+(R<<10&4294967295|R>>>22),R=v+(y^(O|~w))+C[14]+2878612391&4294967295,v=O+(R<<15&4294967295|R>>>17),R=w+(O^(v|~y))+C[5]+4237533241&4294967295,w=v+(R<<21&4294967295|R>>>11),R=y+(v^(w|~O))+C[12]+1700485571&4294967295,y=w+(R<<6&4294967295|R>>>26),R=O+(w^(y|~v))+C[3]+2399980690&4294967295,O=y+(R<<10&4294967295|R>>>22),R=v+(y^(O|~w))+C[10]+4293915773&4294967295,v=O+(R<<15&4294967295|R>>>17),R=w+(O^(v|~y))+C[1]+2240044497&4294967295,w=v+(R<<21&4294967295|R>>>11),R=y+(v^(w|~O))+C[8]+1873313359&4294967295,y=w+(R<<6&4294967295|R>>>26),R=O+(w^(y|~v))+C[15]+4264355552&4294967295,O=y+(R<<10&4294967295|R>>>22),R=v+(y^(O|~w))+C[6]+2734768916&4294967295,v=O+(R<<15&4294967295|R>>>17),R=w+(O^(v|~y))+C[13]+1309151649&4294967295,w=v+(R<<21&4294967295|R>>>11),R=y+(v^(w|~O))+C[4]+4149444226&4294967295,y=w+(R<<6&4294967295|R>>>26),R=O+(w^(y|~v))+C[11]+3174756917&4294967295,O=y+(R<<10&4294967295|R>>>22),R=v+(y^(O|~w))+C[2]+718787259&4294967295,v=O+(R<<15&4294967295|R>>>17),R=w+(O^(v|~y))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(v+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+v&4294967295,E.g[3]=E.g[3]+O&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var w=y-this.blockSize,C=this.B,v=this.h,O=0;O<y;){if(v==0)for(;O<=w;)i(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<y;)if(C[v++]=E.charCodeAt(O++),v==this.blockSize){i(this,C),v=0;break}}else for(;O<y;)if(C[v++]=E[O++],v==this.blockSize){i(this,C),v=0;break}}this.h=v,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var w=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=w&255,w/=256;for(this.u(E),E=Array(16),y=w=0;4>y;++y)for(var C=0;32>C;C+=8)E[w++]=this.g[y]>>>C&255;return E};function s(E,y){var w=c;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=y(E)}function a(E,y){this.h=y;for(var w=[],C=!0,v=E.length-1;0<=v;v--){var O=E[v]|0;C&&O==y||(w[v]=O,C=!1)}this.g=w}var c={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return N(d(-E));for(var y=[],w=1,C=0;E>=w;C++)y[C]=E/w|0,w*=4294967296;return new a(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(y,8)),C=g,v=0;v<E.length;v+=8){var O=Math.min(8,E.length-v),R=parseInt(E.substring(v,v+O),y);8>O?(O=d(Math.pow(y,O)),C=C.j(O).add(d(R))):(C=C.j(w),C=C.add(d(R)))}return C}var g=u(0),m=u(1),k=u(16777216);t=a.prototype,t.m=function(){if(x(this))return-N(this).m();for(var E=0,y=1,w=0;w<this.g.length;w++){var C=this.i(w);E+=(0<=C?C:4294967296+C)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(x(this))return"-"+N(this).toString(E);for(var y=d(Math.pow(E,6)),w=this,C="";;){var v=P(w,y).g;w=S(w,v.j(y));var O=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=v,I(w))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=S(this,E),x(E)?-1:I(E)?0:1};function N(E){for(var y=E.g.length,w=[],C=0;C<y;C++)w[C]=~E.g[C];return new a(w,~E.h).add(m)}t.abs=function(){return x(this)?N(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],C=0,v=0;v<=y;v++){var O=C+(this.i(v)&65535)+(E.i(v)&65535),R=(O>>>16)+(this.i(v)>>>16)+(E.i(v)>>>16);C=R>>>16,O&=65535,R&=65535,w[v]=R<<16|O}return new a(w,w[w.length-1]&-2147483648?-1:0)};function S(E,y){return E.add(N(y))}t.j=function(E){if(I(this)||I(E))return g;if(x(this))return x(E)?N(this).j(N(E)):N(N(this).j(E));if(x(E))return N(this.j(N(E)));if(0>this.l(k)&&0>E.l(k))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,w=[],C=0;C<2*y;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var v=0;v<E.g.length;v++){var O=this.i(C)>>>16,R=this.i(C)&65535,q=E.i(v)>>>16,oe=E.i(v)&65535;w[2*C+2*v]+=R*oe,_(w,2*C+2*v),w[2*C+2*v+1]+=O*oe,_(w,2*C+2*v+1),w[2*C+2*v+1]+=R*q,_(w,2*C+2*v+1),w[2*C+2*v+2]+=O*q,_(w,2*C+2*v+2)}for(C=0;C<y;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=y;C<2*y;C++)w[C]=0;return new a(w,0)};function _(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function j(E,y){this.g=E,this.h=y}function P(E,y){if(I(y))throw Error("division by zero");if(I(E))return new j(g,g);if(x(E))return y=P(N(E),y),new j(N(y.g),N(y.h));if(x(y))return y=P(E,N(y)),new j(N(y.g),y.h);if(30<E.g.length){if(x(E)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,C=y;0>=C.l(E);)w=D(w),C=D(C);var v=A(w,1),O=A(C,1);for(C=A(C,2),w=A(w,2);!I(C);){var R=O.add(C);0>=R.l(E)&&(v=v.add(w),O=R),C=A(C,1),w=A(w,1)}return y=S(E,v.j(y)),new j(v,y)}for(v=g;0<=E.l(y);){for(w=Math.max(1,Math.floor(E.m()/y.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=d(w),R=O.j(y);x(R)||0<R.l(E);)w-=C,O=d(w),R=O.j(y);I(O)&&(O=m),v=v.add(O),E=S(E,R)}return new j(v,E)}t.A=function(E){return P(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],C=0;C<y;C++)w[C]=this.i(C)&E.i(C);return new a(w,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],C=0;C<y;C++)w[C]=this.i(C)|E.i(C);return new a(w,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],C=0;C<y;C++)w[C]=this.i(C)^E.i(C);return new a(w,this.h^E.h)};function D(E){for(var y=E.g.length+1,w=[],C=0;C<y;C++)w[C]=E.i(C)<<1|E.i(C-1)>>>31;return new a(w,E.h)}function A(E,y){var w=y>>5;y%=32;for(var C=E.g.length-w,v=[],O=0;O<C;O++)v[O]=0<y?E.i(O+w)>>>y|E.i(O+w+1)<<32-y:E.i(O+w);return new a(v,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dx=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,jr=a}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lx,fo,Vx,Il,Th,Mx,Fx,Ux;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,p){return l==Array.prototype||l==Object.prototype||(l[f]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof el=="object"&&el];for(var f=0;f<l.length;++f){var p=l[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var p=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in p))break e;p=p[L]}l=l[l.length-1],T=p[l],f=f(T),f!=T&&f!=null&&e(p,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var p=0,T=!1,L={next:function(){if(!T&&p<l.length){var M=p++;return{value:f(M,l[M]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,p){return l.call.apply(l.bind,arguments)}function g(l,f,p){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function m(l,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,m.apply(null,arguments)}function k(l,f){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function I(l,f){function p(){}p.prototype=f.prototype,l.aa=f.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(T,L,M){for(var H=Array(arguments.length-2),we=2;we<arguments.length;we++)H[we-2]=arguments[we];return f.prototype[L].apply(T,H)}}function x(l){const f=l.length;if(0<f){const p=Array(f);for(let T=0;T<f;T++)p[T]=l[T];return p}return[]}function N(l,f){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(u(T)){const L=l.length||0,M=T.length||0;l.length=L+M;for(let H=0;H<M;H++)l[L+H]=T[H]}else l.push(T)}}class S{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(l){return/^[\s\xa0]*$/.test(l)}function j(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var D=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function A(l,f,p){for(const T in l)f.call(p,l[T],T,l)}function E(l,f){for(const p in l)f.call(void 0,l[p],p,l)}function y(l){const f={};for(const p in l)f[p]=l[p];return f}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let p,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(p in T)l[p]=T[p];for(let M=0;M<w.length;M++)p=w[M],Object.prototype.hasOwnProperty.call(T,p)&&(l[p]=T[p])}}function v(l){var f=1;l=l.split(":");const p=[];for(;0<f&&l.length;)p.push(l.shift()),f--;return l.length&&p.push(l.join(":")),p}function O(l){c.setTimeout(()=>{throw l},0)}function R(){var l=B;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class q{constructor(){this.h=this.g=null}add(f,p){const T=oe.get();T.set(f,p),this.h?this.h.next=T:this.g=T,this.h=T}}var oe=new S(()=>new Z,l=>l.reset());class Z{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let W,V=!1,B=new q,F=()=>{const l=c.Promise.resolve(void 0);W=()=>{l.then(ae)}};var ae=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(p){O(p)}var f=oe;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}V=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,f),c.removeEventListener("test",p,f)}catch{}return l}();function et(l,f){if(ve.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(D){e:{try{P(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else p=="mouseover"?f=l.fromElement:p=="mouseout"&&(f=l.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ce[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&et.aa.h.call(this)}}I(et,ve);var ce={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),sn=0;function Vs(l,f,p,T,L){this.listener=l,this.proxy=null,this.src=f,this.type=p,this.capture=!!T,this.ha=L,this.key=++sn,this.da=this.fa=!1}function va(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function _a(l){this.src=l,this.g={},this.h=0}_a.prototype.add=function(l,f,p,T,L){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var H=hu(l,f,T,L);return-1<H?(f=l[H],p||(f.fa=!1)):(f=new Vs(f,this.src,M,!!T,L),f.fa=p,l.push(f)),f};function du(l,f){var p=f.type;if(p in l.g){var T=l.g[p],L=Array.prototype.indexOf.call(T,f,void 0),M;(M=0<=L)&&Array.prototype.splice.call(T,L,1),M&&(va(f),l.g[p].length==0&&(delete l.g[p],l.h--))}}function hu(l,f,p,T){for(var L=0;L<l.length;++L){var M=l[L];if(!M.da&&M.listener==f&&M.capture==!!p&&M.ha==T)return L}return-1}var fu="closure_lm_"+(1e6*Math.random()|0),pu={};function Kp(l,f,p,T,L){if(T&&T.once)return Yp(l,f,p,T,L);if(Array.isArray(f)){for(var M=0;M<f.length;M++)Kp(l,f[M],p,T,L);return null}return p=vu(p),l&&l[Ve]?l.K(f,p,d(T)?!!T.capture:!!T,L):Qp(l,f,p,!1,T,L)}function Qp(l,f,p,T,L,M){if(!f)throw Error("Invalid event type");var H=d(L)?!!L.capture:!!L,we=gu(l);if(we||(l[fu]=we=new _a(l)),p=we.add(f,p,T,H,M),p.proxy)return p;if(T=tE(),p.proxy=T,T.src=l,T.listener=p,l.addEventListener)Ze||(L=H),L===void 0&&(L=!1),l.addEventListener(f.toString(),T,L);else if(l.attachEvent)l.attachEvent(Xp(f.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function tE(){function l(p){return f.call(l.src,l.listener,p)}const f=nE;return l}function Yp(l,f,p,T,L){if(Array.isArray(f)){for(var M=0;M<f.length;M++)Yp(l,f[M],p,T,L);return null}return p=vu(p),l&&l[Ve]?l.L(f,p,d(T)?!!T.capture:!!T,L):Qp(l,f,p,!0,T,L)}function Jp(l,f,p,T,L){if(Array.isArray(f))for(var M=0;M<f.length;M++)Jp(l,f[M],p,T,L);else T=d(T)?!!T.capture:!!T,p=vu(p),l&&l[Ve]?(l=l.i,f=String(f).toString(),f in l.g&&(M=l.g[f],p=hu(M,p,T,L),-1<p&&(va(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete l.g[f],l.h--)))):l&&(l=gu(l))&&(f=l.g[f.toString()],l=-1,f&&(l=hu(f,p,T,L)),(p=-1<l?f[l]:null)&&mu(p))}function mu(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Ve])du(f.i,l);else{var p=l.type,T=l.proxy;f.removeEventListener?f.removeEventListener(p,T,l.capture):f.detachEvent?f.detachEvent(Xp(p),T):f.addListener&&f.removeListener&&f.removeListener(T),(p=gu(f))?(du(p,l),p.h==0&&(p.src=null,f[fu]=null)):va(l)}}}function Xp(l){return l in pu?pu[l]:pu[l]="on"+l}function nE(l,f){if(l.da)l=!0;else{f=new et(f,this);var p=l.listener,T=l.ha||l.src;l.fa&&mu(l),l=p.call(T,f)}return l}function gu(l){return l=l[fu],l instanceof _a?l:null}var yu="__closure_events_fn_"+(1e9*Math.random()>>>0);function vu(l){return typeof l=="function"?l:(l[yu]||(l[yu]=function(f){return l.handleEvent(f)}),l[yu])}function lt(){te.call(this),this.i=new _a(this),this.M=this,this.F=null}I(lt,te),lt.prototype[Ve]=!0,lt.prototype.removeEventListener=function(l,f,p,T){Jp(this,l,f,p,T)};function St(l,f){var p,T=l.F;if(T)for(p=[];T;T=T.F)p.push(T);if(l=l.M,T=f.type||f,typeof f=="string")f=new ve(f,l);else if(f instanceof ve)f.target=f.target||l;else{var L=f;f=new ve(T,l),C(f,L)}if(L=!0,p)for(var M=p.length-1;0<=M;M--){var H=f.g=p[M];L=xa(H,T,!0,f)&&L}if(H=f.g=l,L=xa(H,T,!0,f)&&L,L=xa(H,T,!1,f)&&L,p)for(M=0;M<p.length;M++)H=f.g=p[M],L=xa(H,T,!1,f)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var p=l.g[f],T=0;T<p.length;T++)va(p[T]);delete l.g[f],l.h--}}this.F=null},lt.prototype.K=function(l,f,p,T){return this.i.add(String(l),f,!1,p,T)},lt.prototype.L=function(l,f,p,T){return this.i.add(String(l),f,!0,p,T)};function xa(l,f,p,T){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,M=0;M<f.length;++M){var H=f[M];if(H&&!H.da&&H.capture==p){var we=H.listener,tt=H.ha||H.src;H.fa&&du(l.i,H),L=we.call(tt,T)!==!1&&L}}return L&&!T.defaultPrevented}function Zp(l,f,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:c.setTimeout(l,f||0)}function em(l){l.g=Zp(()=>{l.g=null,l.i&&(l.i=!1,em(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class rE extends te{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:em(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(l){te.call(this),this.h=l,this.g={}}I(Ms,te);var tm=[];function nm(l){A(l.g,function(f,p){this.g.hasOwnProperty(p)&&mu(f)},l),l.g={}}Ms.prototype.N=function(){Ms.aa.N.call(this),nm(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _u=c.JSON.stringify,iE=c.JSON.parse,sE=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function xu(){}xu.prototype.h=null;function rm(l){return l.h||(l.h=l.i())}function im(){}var Fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wu(){ve.call(this,"d")}I(wu,ve);function Eu(){ve.call(this,"c")}I(Eu,ve);var Gr={},sm=null;function wa(){return sm=sm||new lt}Gr.La="serverreachability";function om(l){ve.call(this,Gr.La,l)}I(om,ve);function Us(l){const f=wa();St(f,new om(f))}Gr.STAT_EVENT="statevent";function am(l,f){ve.call(this,Gr.STAT_EVENT,l),this.stat=f}I(am,ve);function Tt(l){const f=wa();St(f,new am(f,l))}Gr.Ma="timingevent";function lm(l,f){ve.call(this,Gr.Ma,l),this.size=f}I(lm,ve);function Bs(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},f)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function oE(l,f,p,T,L,M){l.info(function(){if(l.g)if(M)for(var H="",we=M.split("&"),tt=0;tt<we.length;tt++){var ye=we[tt].split("=");if(1<ye.length){var ct=ye[0];ye=ye[1];var ut=ct.split("_");H=2<=ut.length&&ut[1]=="type"?H+(ct+"="+ye+"&"):H+(ct+"=redacted&")}}else H=null;else H=M;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+f+`
`+p+`
`+H})}function aE(l,f,p,T,L,M,H){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+f+`
`+p+`
`+M+" "+H})}function ki(l,f,p,T){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+cE(l,p)+(T?" "+T:"")})}function lE(l,f){l.info(function(){return"TIMEOUT: "+f})}$s.prototype.info=function(){};function cE(l,f){if(!l.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var T=p[l];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var H=1;H<L.length;H++)L[H]=""}}}}return _u(p)}catch{return f}}var Ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Su;function Sa(){}I(Sa,xu),Sa.prototype.g=function(){return new XMLHttpRequest},Sa.prototype.i=function(){return{}},Su=new Sa;function tr(l,f,p,T){this.j=l,this.i=f,this.l=p,this.R=T||1,this.U=new Ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new um}function um(){this.i=null,this.g="",this.h=!1}var dm={},Tu={};function Iu(l,f,p){l.L=1,l.v=ka(Rn(f)),l.m=p,l.P=!0,hm(l,null)}function hm(l,f){l.F=Date.now(),Ta(l),l.A=Rn(l.v);var p=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Cm(p.i,"t",T),l.C=0,p=l.j.J,l.h=new um,l.g=Wm(l.j,p?f:null,!l.m),0<l.O&&(l.M=new rE(m(l.Y,l,l.g),l.O)),f=l.U,p=l.g,T=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(tm[0]=L.toString()),L=tm);for(var M=0;M<L.length;M++){var H=Kp(p,L[M],T||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Us(),oE(l.i,l.u,l.A,l.l,l.R,l.m)}tr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Nn(l)==3?f.j():this.Y(l)},tr.prototype.Y=function(l){try{if(l==this.g)e:{const ut=Nn(this.g);var f=this.g.Ba();const Ri=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||ut!=4||f==7||(f==8||0>=Ri?Us(3):Us(2)),Cu(this);var p=this.g.Z();this.X=p;t:if(fm(this)){var T=Pm(this.g);l="";var L=T.length,M=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),zs(this);var H="";break t}this.h.i=new c.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(T[f],{stream:!(M&&f==L-1)});T.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,aE(this.i,this.u,this.A,this.l,this.R,ut,p),this.o){if(this.T&&!this.K){t:{if(this.g){var we,tt=this.g;if((we=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(we)){var ye=we;break t}}ye=null}if(p=ye)ki(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ku(this,p);else{this.o=!1,this.s=3,Tt(12),Kr(this),zs(this);break e}}if(this.P){p=!0;let on;for(;!this.J&&this.C<H.length;)if(on=uE(this,H),on==Tu){ut==4&&(this.s=4,Tt(14),p=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(on==dm){this.s=4,Tt(15),ki(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else ki(this.i,this.l,on,null),ku(this,on);if(fm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||H.length!=0||this.h.h||(this.s=1,Tt(16),p=!1),this.o=this.o&&p,!p)ki(this.i,this.l,H,"[Invalid Chunked Response]"),Kr(this),zs(this);else if(0<H.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Pu(ct),ct.M=!0,Tt(11))}}else ki(this.i,this.l,H,null),ku(this,H);ut==4&&Kr(this),this.o&&!this.J&&(ut==4?Um(this.j,this):(this.o=!1,Ta(this)))}else kE(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Kr(this),zs(this)}}}catch{}finally{}};function fm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function uE(l,f){var p=l.C,T=f.indexOf(`
`,p);return T==-1?Tu:(p=Number(f.substring(p,T)),isNaN(p)?dm:(T+=1,T+p>f.length?Tu:(f=f.slice(T,T+p),l.C=T+p,f)))}tr.prototype.cancel=function(){this.J=!0,Kr(this)};function Ta(l){l.S=Date.now()+l.I,pm(l,l.I)}function pm(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Bs(m(l.ba,l),f)}function Cu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}tr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(lE(this.i,this.A),this.L!=2&&(Us(),Tt(17)),Kr(this),this.s=2,zs(this)):pm(this,this.S-l)};function zs(l){l.j.G==0||l.J||Um(l.j,l)}function Kr(l){Cu(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,nm(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ku(l,f){try{var p=l.j;if(p.G!=0&&(p.g==l||ju(p.h,l))){if(!l.K&&ju(p.h,l)&&p.G==3){try{var T=p.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Pa(p),Na(p);else break e;Au(p),Tt(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=Bs(m(p.Za,p),6e3));if(1>=ym(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Yr(p,11)}else if((l.K||p.g==l)&&Pa(p),!_(f))for(L=p.Da.g.parse(f),f=0;f<L.length;f++){let ye=L[f];if(p.T=ye[0],ye=ye[1],p.G==2)if(ye[0]=="c"){p.K=ye[1],p.ia=ye[2];const ct=ye[3];ct!=null&&(p.la=ct,p.j.info("VER="+p.la));const ut=ye[4];ut!=null&&(p.Aa=ut,p.j.info("SVER="+p.Aa));const Ri=ye[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(T=1.5*Ri,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const on=l.g;if(on){const Da=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var M=T.h;M.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(bu(M,M.h),M.h=null))}if(T.D){const Ou=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(T.ya=Ou,Ie(T.I,T.D,Ou))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var H=l;if(T.qa=zm(T,T.J?T.ia:null,T.W),H.K){vm(T.h,H);var we=H,tt=T.L;tt&&(we.I=tt),we.B&&(Cu(we),Ta(we)),T.g=H}else Mm(T);0<p.i.length&&Aa(p)}else ye[0]!="stop"&&ye[0]!="close"||Yr(p,7);else p.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Yr(p,7):Nu(p):ye[0]!="noop"&&p.l&&p.l.ta(ye),p.v=0)}}Us(4)}catch{}}var dE=class{constructor(l,f){this.g=l,this.map=f}};function mm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ym(l){return l.h?1:l.g?l.g.size:0}function ju(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function bu(l,f){l.g?l.g.add(f):l.h=f}function vm(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}mm.prototype.cancel=function(){if(this.i=_m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function _m(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const p of l.g.values())f=f.concat(p.D);return f}return x(l.i)}function hE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],p=l.length,T=0;T<p;T++)f.push(l[T]);return f}f=[],p=0;for(T in l)f[p++]=l[T];return f}function fE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var p=0;p<l;p++)f.push(p);return f}f=[],p=0;for(const T in l)f[p++]=T;return f}}}function xm(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var p=fE(l),T=hE(l),L=T.length,M=0;M<L;M++)f.call(void 0,T[M],p&&p[M],l)}var wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pE(l,f){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var T=l[p].indexOf("="),L=null;if(0<=T){var M=l[p].substring(0,T);L=l[p].substring(T+1)}else M=l[p];f(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Qr){this.h=l.h,Ia(this,l.j),this.o=l.o,this.g=l.g,Ca(this,l.s),this.l=l.l;var f=l.i,p=new Hs;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),Em(this,p),this.m=l.m}else l&&(f=String(l).match(wm))?(this.h=!1,Ia(this,f[1]||"",!0),this.o=Ws(f[2]||""),this.g=Ws(f[3]||"",!0),Ca(this,f[4]),this.l=Ws(f[5]||"",!0),Em(this,f[6]||"",!0),this.m=Ws(f[7]||"")):(this.h=!1,this.i=new Hs(null,this.h))}Qr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(qs(f,Sm,!0),":");var p=this.g;return(p||f=="file")&&(l.push("//"),(f=this.o)&&l.push(qs(f,Sm,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(qs(p,p.charAt(0)=="/"?yE:gE,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",qs(p,_E)),l.join("")};function Rn(l){return new Qr(l)}function Ia(l,f,p){l.j=p?Ws(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Ca(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Em(l,f,p){f instanceof Hs?(l.i=f,xE(l.i,l.h)):(p||(f=qs(f,vE)),l.i=new Hs(f,l.h))}function Ie(l,f,p){l.i.set(f,p)}function ka(l){return Ie(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ws(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qs(l,f,p){return typeof l=="string"?(l=encodeURI(l).replace(f,mE),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function mE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Sm=/[#\/\?@]/g,gE=/[#\?:]/g,yE=/[#\?]/g,vE=/[#\?@]/g,_E=/#/g;function Hs(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function nr(l){l.g||(l.g=new Map,l.h=0,l.i&&pE(l.i,function(f,p){l.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Hs.prototype,t.add=function(l,f){nr(this),this.i=null,l=ji(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(f),this.h+=1,this};function Tm(l,f){nr(l),f=ji(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Im(l,f){return nr(l),f=ji(l,f),l.g.has(f)}t.forEach=function(l,f){nr(this),this.g.forEach(function(p,T){p.forEach(function(L){l.call(f,L,T,this)},this)},this)},t.na=function(){nr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let T=0;T<f.length;T++){const L=l[T];for(let M=0;M<L.length;M++)p.push(f[T])}return p},t.V=function(l){nr(this);let f=[];if(typeof l=="string")Im(this,l)&&(f=f.concat(this.g.get(ji(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)f=f.concat(l[p])}return f},t.set=function(l,f){return nr(this),this.i=null,l=ji(this,l),Im(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Cm(l,f,p){Tm(l,f),0<p.length&&(l.i=null,l.g.set(ji(l,f),x(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var T=f[p];const M=encodeURIComponent(String(T)),H=this.V(T);for(T=0;T<H.length;T++){var L=M;H[T]!==""&&(L+="="+encodeURIComponent(String(H[T]))),l.push(L)}}return this.i=l.join("&")};function ji(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function xE(l,f){f&&!l.j&&(nr(l),l.i=null,l.g.forEach(function(p,T){var L=T.toLowerCase();T!=L&&(Tm(this,T),Cm(this,L,p))},l)),l.j=f}function wE(l,f){const p=new $s;if(c.Image){const T=new Image;T.onload=k(rr,p,"TestLoadImage: loaded",!0,f,T),T.onerror=k(rr,p,"TestLoadImage: error",!1,f,T),T.onabort=k(rr,p,"TestLoadImage: abort",!1,f,T),T.ontimeout=k(rr,p,"TestLoadImage: timeout",!1,f,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else f(!1)}function EE(l,f){const p=new $s,T=new AbortController,L=setTimeout(()=>{T.abort(),rr(p,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:T.signal}).then(M=>{clearTimeout(L),M.ok?rr(p,"TestPingServer: ok",!0,f):rr(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),rr(p,"TestPingServer: error",!1,f)})}function rr(l,f,p,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(p)}catch{}}function SE(){this.g=new sE}function TE(l,f,p){const T=p||"";try{xm(l,function(L,M){let H=L;d(L)&&(H=_u(L)),f.push(T+M+"="+encodeURIComponent(H))})}catch(L){throw f.push(T+"type="+encodeURIComponent("_badmap")),L}}function ja(l){this.l=l.Ub||null,this.j=l.eb||!1}I(ja,xu),ja.prototype.g=function(){return new ba(this.l,this.j)},ja.prototype.i=function(l){return function(){return l}}({});function ba(l,f){lt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ba,lt),t=ba.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Ks(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||c).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;km(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function km(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Gs(this):Ks(this),this.readyState==3&&km(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Gs(this))},t.Qa=function(l){this.g&&(this.response=l,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ks(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=f.next();return l.join(`\r
`)};function Ks(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function jm(l){let f="";return A(l,function(p,T){f+=T,f+=":",f+=p,f+=`\r
`}),f}function Ru(l,f,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=jm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ie(l,f,p))}function Oe(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Oe,lt);var IE=/^https?$/i,CE=["POST","PUT"];t=Oe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Su.g(),this.v=this.o?rm(this.o):rm(Su),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(M){bm(this,M);return}if(l=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)p.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())p.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(CE,f,void 0))||T||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of p)this.g.setRequestHeader(M,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Am(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){bm(this,M)}};function bm(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Rm(l),Ra(l)}function Rm(l){l.A||(l.A=!0,St(l,"complete"),St(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,St(this,"complete"),St(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nm(this):this.bb())},t.bb=function(){Nm(this)};function Nm(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Nn(l)!=4||l.Z()!=2)){if(l.u&&Nn(l)==4)Zp(l.Ea,0,l);else if(St(l,"readystatechange"),Nn(l)==4){l.h=!1;try{const H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var T;if(T=H===0){var L=String(l.D).match(wm)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),T=!IE.test(L?L.toLowerCase():"")}p=T}if(p)St(l,"complete"),St(l,"success");else{l.m=6;try{var M=2<Nn(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",Rm(l)}}finally{Ra(l)}}}}function Ra(l,f){if(l.g){Am(l);const p=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||St(l,"ready");try{p.onreadystatechange=T}catch{}}}function Am(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Nn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),iE(f)}};function Pm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function kE(l){const f={};l=(l.g&&2<=Nn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(_(l[T]))continue;var p=v(l[T]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=f[L]||[];f[L]=M,M.push(p)}E(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(l,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||f}function Om(l){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,l),this.cb=Qs("retryDelaySeedMs",1e4,l),this.Wa=Qs("forwardChannelMaxRetries",2,l),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new mm(l&&l.concurrentRequestLimit),this.Da=new SE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Om.prototype,t.la=8,t.G=1,t.connect=function(l,f,p,T){Tt(0),this.W=l,this.H=f||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=zm(this,null,this.W),Aa(this)};function Nu(l){if(Dm(l),l.G==3){var f=l.U++,p=Rn(l.I);if(Ie(p,"SID",l.K),Ie(p,"RID",f),Ie(p,"TYPE","terminate"),Ys(l,p),f=new tr(l,l.j,f),f.L=2,f.v=ka(Rn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=f.v,p=!0),p||(f.g=Wm(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ta(f)}$m(l)}function Na(l){l.g&&(Pu(l),l.g.cancel(),l.g=null)}function Dm(l){Na(l),l.u&&(c.clearTimeout(l.u),l.u=null),Pa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Aa(l){if(!gm(l.h)&&!l.s){l.s=!0;var f=l.Ga;W||F(),V||(W(),V=!0),B.add(f,l),l.B=0}}function jE(l,f){return ym(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Bs(m(l.Ga,l,f),Bm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new tr(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Vm(this,L,f),p=Rn(this.I),Ie(p,"RID",l),Ie(p,"CVER",22),this.D&&Ie(p,"X-HTTP-Session-Id",this.D),Ys(this,p),M&&(this.O?f="headers="+encodeURIComponent(String(jm(M)))+"&"+f:this.m&&Ru(p,this.m,M)),bu(this.h,L),this.Ua&&Ie(p,"TYPE","init"),this.P?(Ie(p,"$req",f),Ie(p,"SID","null"),L.T=!0,Iu(L,p,null)):Iu(L,p,f),this.G=2}}else this.G==3&&(l?Lm(this,l):this.i.length==0||gm(this.h)||Lm(this))};function Lm(l,f){var p;f?p=f.l:p=l.U++;const T=Rn(l.I);Ie(T,"SID",l.K),Ie(T,"RID",p),Ie(T,"AID",l.T),Ys(l,T),l.m&&l.o&&Ru(T,l.m,l.o),p=new tr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Vm(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),bu(l.h,p),Iu(p,T,f)}function Ys(l,f){l.H&&A(l.H,function(p,T){Ie(f,T,p)}),l.l&&xm({},function(p,T){Ie(f,T,p)})}function Vm(l,f,p){p=Math.min(l.i.length,p);var T=l.l?m(l.l.Na,l.l,l):null;e:{var L=l.i;let M=-1;for(;;){const H=["count="+p];M==-1?0<p?(M=L[0].g,H.push("ofs="+M)):M=0:H.push("ofs="+M);let we=!0;for(let tt=0;tt<p;tt++){let ye=L[tt].g;const ct=L[tt].map;if(ye-=M,0>ye)M=Math.max(0,L[tt].g-100),we=!1;else try{TE(ct,H,"req"+ye+"_")}catch{T&&T(ct)}}if(we){T=H.join("&");break e}}}return l=l.i.splice(0,p),f.D=l,T}function Mm(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;W||F(),V||(W(),V=!0),B.add(f,l),l.v=0}}function Au(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Bs(m(l.Fa,l),Bm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Fm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Bs(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Na(this),Fm(this))};function Pu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Fm(l){l.g=new tr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Rn(l.qa);Ie(f,"RID","rpc"),Ie(f,"SID",l.K),Ie(f,"AID",l.T),Ie(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ie(f,"TO",l.ja),Ie(f,"TYPE","xmlhttp"),Ys(l,f),l.m&&l.o&&Ru(f,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=ka(Rn(f)),p.m=null,p.P=!0,hm(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Na(this),Au(this),Tt(19))};function Pa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Um(l,f){var p=null;if(l.g==f){Pa(l),Pu(l),l.g=null;var T=2}else if(ju(l.h,f))p=f.D,vm(l.h,f),T=1;else return;if(l.G!=0){if(f.o)if(T==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;T=wa(),St(T,new lm(T,p)),Aa(l)}else Mm(l);else if(L=f.s,L==3||L==0&&0<f.X||!(T==1&&jE(l,f)||T==2&&Au(l)))switch(p&&0<p.length&&(f=l.h,f.i=f.i.concat(p)),L){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function Bm(l,f){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*f}function Yr(l,f){if(l.j.info("Error code "+f),f==2){var p=m(l.fb,l),T=l.Xa;const L=!T;T=new Qr(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ia(T,"https"),ka(T),L?wE(T.toString(),p):EE(T.toString(),p)}else Tt(2);l.G=0,l.l&&l.l.sa(f),$m(l),Dm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function $m(l){if(l.G=0,l.ka=[],l.l){const f=_m(l.h);(f.length!=0||l.i.length!=0)&&(N(l.ka,f),N(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function zm(l,f,p){var T=p instanceof Qr?Rn(p):new Qr(p);if(T.g!="")f&&(T.g=f+"."+T.g),Ca(T,T.s);else{var L=c.location;T=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var M=new Qr(null);T&&Ia(M,T),f&&(M.g=f),L&&Ca(M,L),p&&(M.l=p),T=M}return p=l.D,f=l.ya,p&&f&&Ie(T,p,f),Ie(T,"VER",l.la),Ys(l,T),T}function Wm(l,f,p){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Oe(new ja({eb:p})):new Oe(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qm(){}t=qm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oa(){}Oa.prototype.g=function(l,f){return new Bt(l,f)};function Bt(l,f){lt.call(this),this.g=new Om(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!_(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new bi(this)}I(Bt,lt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Nu(this.g)},Bt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=_u(l),l=p);f.i.push(new dE(f.Ya++,l)),f.G==3&&Aa(f)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Bt.aa.N.call(this)};function Hm(l){wu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const p in f){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}I(Hm,wu);function Gm(){Eu.call(this),this.status=1}I(Gm,Eu);function bi(l){this.g=l}I(bi,qm),bi.prototype.ua=function(){St(this.g,"a")},bi.prototype.ta=function(l){St(this.g,new Hm(l))},bi.prototype.sa=function(l){St(this.g,new Gm)},bi.prototype.ra=function(){St(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Ux=function(){return new Oa},Fx=function(){return wa()},Mx=Gr,Th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Il=Ea,cm.COMPLETE="complete",Vx=cm,im.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",lt.prototype.listen=lt.prototype.K,fo=im,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,Lx=Oe}).apply(typeof el<"u"?el:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Cy="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let As="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new tp("@firebase/firestore");function Li(){return yi.logLevel}function Q(t,...e){if(yi.logLevel<=de.DEBUG){const n=e.map(ip);yi.debug(`Firestore (${As}): ${t}`,...n)}}function Qn(t,...e){if(yi.logLevel<=de.ERROR){const n=e.map(ip);yi.error(`Firestore (${As}): ${t}`,...n)}}function vs(t,...e){if(yi.logLevel<=de.WARN){const n=e.map(ip);yi.warn(`Firestore (${As}): ${t}`,...n)}}function ip(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Bx(t,r,n)}function Bx(t,e,n){let r=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qn(r),new Error(r)}function Ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Bx(e,i,r)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class Ij{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Cj{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new br;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new br,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new br)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new $x(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class kj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ky(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ky(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Rj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Ih(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return le(r,i);{const s=zx(),a=Nj(s.encode(jy(t,n)),s.encode(jy(e,n)));return a!==0?a:le(r,i)}}n+=r>65535?2:1}return le(t.length,e.length)}function jy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Nj(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function _s(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-62135596800,Ry=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ry);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<by)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-by;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ye(0,0))}static max(){return new ie(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="__name__";class _n{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=_n.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const r=_n.isNumericId(e),i=_n.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?_n.extractNumericId(e).compare(_n.extractNumericId(n)):Ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class Se extends _n{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const Aj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends _n{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return Aj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ny}static keyField(){return new _t([Ny])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Se.fromString(e))}static fromName(e){return new ee(Se.fromString(e).popFirst(5))}static empty(){return new ee(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function Pj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Dr(i,ee.empty(),e)}function Oj(t){return new Dr(t.readTime,t.key,Yo)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(ie.min(),ee.empty(),Yo)}static max(){return new Dr(ie.max(),ee.empty(),Yo)}}function Dj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==Lj)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(h=>{a[d]=h,++c,c===s&&r(a)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Mj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ps(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}qc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=-1;function Hc(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function Uj(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="";function Bj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ay(e)),e=$j(t.get(n),e);return Ay(e)}function $j(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case qx:n+="";break;default:n+=s}}return n}function Ay(t){return t+qx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rt.RED,this.left=i??rt.EMPTY,this.right=s??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new gr([])}unionWith(e){let n=new He(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Gx("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=zj.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="server_timestamp",Qx="__type__",Yx="__previous_value__",Jx="__local_write_time__";function Gc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Qx])===null||n===void 0?void 0:n.stringValue)===Kx}function Kc(t){const e=t.mapValue.fields[Yx];return Gc(e)?Kc(e):e}function Jo(t){const e=Lr(t.mapValue.fields[Jx].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n,r,i,s,a,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const lc="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||lc}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===lc}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__type__",Zx="__max__",nl={mapValue:{fields:{__type__:{stringValue:Zx}}}},ew="__vector__",cc="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gc(t)?4:Hj(t)?9007199254740991:qj(t)?10:11:se(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jo(t).isEqual(Jo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Lr(i.timestampValue),c=Lr(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vr(i.bytesValue).isEqual(Vr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Me(i.doubleValue),c=Me(s.doubleValue);return a===c?ac(a)===ac(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return _s(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Py(a)!==Py(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!jn(a[u],c[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function Zo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function xs(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,a){const c=Me(s.integerValue||s.doubleValue),u=Me(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Dy(t.timestampValue,e.timestampValue);case 4:return Dy(Jo(t),Jo(e));case 5:return Ih(t.stringValue,e.stringValue);case 6:return function(s,a){const c=Vr(s),u=Vr(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=le(c[d],u[d]);if(h!==0)return h}return le(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const c=le(Me(s.latitude),Me(a.latitude));return c!==0?c:le(Me(s.longitude),Me(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ly(t.arrayValue,e.arrayValue);case 10:return function(s,a){var c,u,d,h;const g=s.fields||{},m=a.fields||{},k=(c=g[cc])===null||c===void 0?void 0:c.arrayValue,I=(u=m[cc])===null||u===void 0?void 0:u.arrayValue,x=le(((d=k==null?void 0:k.values)===null||d===void 0?void 0:d.length)||0,((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Ly(k,I)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===nl.mapValue&&a===nl.mapValue)return 0;if(s===nl.mapValue)return 1;if(a===nl.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=Ih(u[g],h[g]);if(m!==0)return m;const k=xs(c[u[g]],d[h[g]]);if(k!==0)return k}return le(u.length,h.length)}(t.mapValue,e.mapValue);default:throw se(23264,{Pe:n})}}function Dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Lr(t),r=Lr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function Ly(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=xs(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function ws(t){return Ch(t)}function Ch(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ch(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Ch(n.fields[a])}`;return i+"}"}(t.mapValue):se(61005,{value:t})}function Cl(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kc(t);return e?16+Cl(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Cl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Os(r.fields,(s,a)=>{i+=s.length+Cl(a)}),i}(t.mapValue);default:throw se(13486,{value:t})}}function uc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kh(t){return!!t&&"integerValue"in t}function sp(t){return!!t&&"arrayValue"in t}function Vy(t){return!!t&&"nullValue"in t}function My(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pd(t){return!!t&&"mapValue"in t}function qj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xx])===null||n===void 0?void 0:n.stringValue)===ew}function ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ko(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ko(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Hj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Zx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ko(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=ko(a):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Os(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wn(ko(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new vt(e,0,ie.min(),ie.min(),ie.min(),wn.empty(),0)}static newFoundDocument(e,n,r,i){return new vt(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new vt(e,2,n,ie.min(),ie.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,ie.min(),ie.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.position=e,this.inclusive=n}}function Fy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(a.referenceValue),n.key):r=xs(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n="asc"){this.field=e,this.dir=n}}function Gj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class ze extends tw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Qj(e,n,r):n==="array-contains"?new Xj(e,r):n==="in"?new Zj(e,r):n==="not-in"?new eb(e,r):n==="array-contains-any"?new tb(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Yj(e,r):new Jj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xs(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(xs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends tw{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new mn(e,n)}matches(e){return nw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function nw(t){return t.op==="and"}function rw(t){return Kj(t)&&nw(t)}function Kj(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function jh(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(rw(t))return t.filters.map(e=>jh(e)).join(",");{const e=t.filters.map(n=>jh(n)).join(",");return`${t.op}(${e})`}}function iw(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&iw(a,i.filters[c]),!0):!1}(t,e):void se(19439)}function sw(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(sw).join(" ,")+"}"}(t):"Filter"}class Qj extends ze{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yj extends ze{constructor(e,n){super(e,"in",n),this.keys=ow("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Jj extends ze{constructor(e,n){super(e,"not-in",n),this.keys=ow("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ow(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class Xj extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sp(n)&&Zo(n.arrayValue,this.value)}}class Zj extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class eb extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zo(this.value.arrayValue,n)}}class tb extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.Ie=null}}function By(t,e=null,n=[],r=[],i=null,s=null,a=null){return new nb(t,e,n,r,i,s,a)}function op(t){const e=pe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.Ie=n}return e.Ie}function ap(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Gj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uy(t.startAt,e.startAt)&&Uy(t.endAt,e.endAt)}function bh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function rb(t,e,n,r,i,s,a,c){return new Ii(t,e,n,r,i,s,a,c)}function lp(t){return new Ii(t)}function $y(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cp(t){return t.collectionGroup!==null}function ss(t){const e=pe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new He(_t.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new ea(s,r))}),n.has(_t.keyField().canonicalString())||e.Ee.push(new ea(_t.keyField(),r))}return e.Ee}function In(t){const e=pe(t);return e.de||(e.de=ib(e,ss(t))),e.de}function ib(t,e){if(t.limitType==="F")return By(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ea(i.field,s)});const n=t.endAt?new Es(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Es(t.startAt.position,t.startAt.inclusive):null;return By(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rh(t,e){const n=t.filters.concat([e]);return new Ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dc(t,e,n){return new Ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qc(t,e){return ap(In(t),In(e))&&t.limitType===e.limitType}function aw(t){return`${op(In(t))}|lt:${t.limitType}`}function Vi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sw(i)).join(", ")}]`),Hc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ws(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ws(i)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Yc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ss(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){const d=Fy(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,ss(r),i)||r.endAt&&!function(a,c,u){const d=Fy(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,ss(r),i))}(t,e)}function sb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lw(t){return(e,n)=>{let r=!1;for(const i of ss(t)){const s=ob(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ob(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,a,c){const u=a.data.field(s),d=c.data.field(s);return u!==null&&d!==null?xs(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Hx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Ue(ee.comparator);function Fr(){return ab}const cw=new Ue(ee.comparator);function po(...t){let e=cw;for(const n of t)e=e.insert(n.key,n);return e}function lb(t){let e=cw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return jo()}function uw(){return jo()}function jo(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const cb=new He(ee.comparator);function me(...t){let e=cb;for(const n of t)e=e.add(n);return e}const ub=new He(le);function db(){return ub}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function dw(t){return{integerValue:""+t}}function hb(t,e){return Uj(e)?dw(e):up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this._=void 0}}function fb(t,e,n){return t instanceof Nh?function(i,s){const a={fields:{[Qx]:{stringValue:Kx},[Jx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gc(s)&&(s=Kc(s)),s&&(a.fields[Yx]=s),{mapValue:a}}(n,e):t instanceof hc?hw(t,e):t instanceof fc?fw(t,e):function(i,s){const a=mb(i,s),c=zy(a)+zy(i.Re);return kh(a)&&kh(i.Re)?dw(c):up(i.serializer,c)}(t,e)}function pb(t,e,n){return t instanceof hc?hw(t,e):t instanceof fc?fw(t,e):n}function mb(t,e){return t instanceof Ah?function(r){return kh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nh extends Jc{}class hc extends Jc{constructor(e){super(),this.elements=e}}function hw(t,e){const n=pw(e);for(const r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class fc extends Jc{constructor(e){super(),this.elements=e}}function fw(t,e){let n=pw(e);for(const r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}class Ah extends Jc{constructor(e,n){super(),this.serializer=e,this.Re=n}}function zy(t){return Me(t.integerValue||t.doubleValue)}function pw(t){return sp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gb(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hc&&i instanceof hc||r instanceof fc&&i instanceof fc?_s(r.elements,i.elements,jn):r instanceof Ah&&i instanceof Ah?jn(r.Re,i.Re):r instanceof Nh&&i instanceof Nh}(t.transform,e.transform)}class li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dp{}function mw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vb(t.key,li.none()):new hp(t.key,t.data,li.none());{const n=t.data,r=wn.empty();let i=new He(_t.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Xc(t.key,r,new gr(i.toArray()),li.none())}}function yb(t,e,n){t instanceof hp?function(i,s,a){const c=i.value.clone(),u=qy(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Xc?function(i,s,a){if(!kl(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=qy(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(gw(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function bo(t,e,n,r){return t instanceof hp?function(s,a,c,u){if(!kl(s.precondition,a))return c;const d=s.value.clone(),h=Hy(s.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xc?function(s,a,c,u){if(!kl(s.precondition,a))return c;const d=Hy(s.fieldTransforms,u,a),h=a.data;return h.setAll(gw(s)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,a,c){return kl(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function Wy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_s(r,i,(s,a)=>gb(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hp extends dp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xc extends dp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qy(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,pb(a,c,n[i]))}return r}function Hy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,fb(s,a,e))}return r}class vb extends dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yb(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uw();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const u=mw(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&_s(this.mutations,e.mutations,(n,r)=>Wy(n,r))&&_s(this.baseMutations,e.baseMutations,(n,r)=>Wy(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function yw(t){if(t===void 0)return Qn("GRPC error has no .code"),$.UNKNOWN;switch(t){case Be.OK:return $.OK;case Be.CANCELLED:return $.CANCELLED;case Be.UNKNOWN:return $.UNKNOWN;case Be.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Be.INTERNAL:return $.INTERNAL;case Be.UNAVAILABLE:return $.UNAVAILABLE;case Be.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Be.NOT_FOUND:return $.NOT_FOUND;case Be.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Be.ABORTED:return $.ABORTED;case Be.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Be.DATA_LOSS:return $.DATA_LOSS;default:return se(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new jr([4294967295,4294967295],0);function Gy(t){const e=zx().encode(t),n=new Dx;return n.update(e),new Uint8Array(n.digest())}function Ky(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jr([n,r],0),new jr([i,s],0)]}class fp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mo(`Invalid padding: ${n}`);if(r<0)throw new mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=jr.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(jr.fromNumber(r)));return i.compare(Eb)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Gy(e),[r,i]=Ky(n);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);if(!this.Se(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new fp(s,i,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.pe===0)return;const n=Gy(e),[r,i]=Ky(n);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zc(ie.min(),i,new Ue(le),Fr(),me())}}class ha{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ha(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class vw{constructor(e,n){this.targetId=e,this.Ce=n}}class _w{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Qy{constructor(){this.Fe=0,this.Me=Yy(),this.xe=at.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=me(),n=me(),r=me();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se(38017,{changeType:s})}}),new ha(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Yy()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ae(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Sb{constructor(e){this.ze=e,this.je=new Map,this.He=Fr(),this.Je=rl(),this.Ye=rl(),this.Ze=new Ue(le)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const s=i.target;if(bh(s))if(r===0){const a=new ee(s.path);this.tt(n,a,vt.newNoDocument(a,ie.min()))}else Ae(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const c=this.ct(e),u=c?this.lt(c,e,a):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=Vr(r).toUint8Array()}catch(u){if(u instanceof Gx)return vs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new fp(a,i,s)}catch(u){return vs(u instanceof mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.ze.Pt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,s,null),i++)}),i}It(e){const n=new Map;this.je.forEach((s,a)=>{const c=this._t(a);if(c){if(s.current&&bh(c.target)){const u=new ee(c.target.path);this.Et(u).has(a)||this.dt(a,u)||this.tt(a,u,vt.newNoDocument(u,e))}s.Le&&(n.set(a,s.qe()),s.Qe())}});let r=me();this.Ye.forEach((s,a)=>{let c=!0;a.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new Zc(e,n,this.Ze,this.He,r);return this.He=Fr(),this.Je=rl(),this.Ye=rl(),this.Ze=new Ue(le),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Qy,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new He(le),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new He(le),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Qy),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function rl(){return new Ue(ee.comparator)}function Yy(){return new Ue(ee.comparator)}const Tb=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Ib=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Cb=(()=>({and:"AND",or:"OR"}))();class kb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ph(t,e){return t.useProto3Json||Hc(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function os(t){return Ae(!!t,49232),ie.fromTimestamp(function(n){const r=Lr(n);return new Ye(r.seconds,r.nanos)}(t))}function ww(t,e){return Dh(t,e).canonicalString()}function Dh(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ew(t){const e=Se.fromString(t);return Ae(kw(e),10190,{key:e.toString()}),e}function md(t,e){const n=Ew(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(Tw(n))}function Sw(t,e){return ww(t.databaseId,e)}function jb(t){const e=Ew(t);return e.length===4?Se.emptyPath():Tw(e)}function Jy(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tw(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ae(h===void 0||typeof h=="string",58123),at.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const h=d.code===void 0?$.UNKNOWN:yw(d.code);return new K(h,d.message||"")}(a);n=new _w(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=md(t,r.document.name),s=os(r.document.updateTime),a=r.document.createTime?os(r.document.createTime):ie.min(),c=new wn({mapValue:{fields:r.document.fields}}),u=vt.newFoundDocument(i,s,a,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new jl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=md(t,r.document),s=r.readTime?os(r.readTime):ie.min(),a=vt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new jl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=md(t,r.document),s=r.removedTargetIds||[];n=new jl([],s,i,null)}else{if(!("filter"in e))return se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new wb(i,s),c=r.targetId;n=new vw(c,a)}}return n}function Rb(t,e){return{documents:[Sw(t,e.path)]}}function Nb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sw(t,i);const s=function(d){if(d.length!==0)return Cw(mn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Mi(m.field),direction:Ob(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Ph(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:i}}function Ab(t){let e=jb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const m=Iw(g);return m instanceof mn&&rw(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(I){return new ea(Fi(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(g){let m;return m=typeof g=="object"?g.value:g,Hc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,k=g.values||[];return new Es(k,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,k=g.values||[];return new Es(k,m)}(n.endAt)),rb(e,i,a,s,c,"F",u,d)}function Pb(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Iw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fi(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fi(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fi(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fi(n.unaryFilter.field);return ze.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(Fi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>Iw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function Ob(t){return Tb[t]}function Db(t){return Ib[t]}function Lb(t){return Cb[t]}function Mi(t){return{fieldPath:t.canonicalString()}}function Fi(t){return _t.fromServerFormat(t.fieldPath)}function Cw(t){return t instanceof ze?function(n){if(n.op==="=="){if(My(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NAN"}};if(Vy(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(My(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NAN"}};if(Vy(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mi(n.field),op:Db(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(i=>Cw(i));return r.length===1?r[0]:{compositeFilter:{op:Lb(n.op),filters:r}}}(t):se(54877,{filter:t})}function kw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,i,s=ie.min(),a=ie.min(),c=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.wt=e}}function Mb(t){const e=Ab({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.Cn=new Ub}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Dr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Ub{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jw=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(jw,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ss(0)}static lr(){return new Ss(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="LruGarbageCollector",Bb=1048576;function ev([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class $b{constructor(e){this.Er=e,this.buffer=new He(ev),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ev(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Q(Zy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ps(n)?Q(Zy,"Ignoring IndexedDB error during garbage collection: ",n):await Wc(n)}await this.mr(3e5)})}}class Wb{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(qc.le);const r=new $b(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Xy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,s,a,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Li()<=de.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function qb(t,e){return new Wb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bo(r.mutation,i,gr.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=po();return s.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let s=Fr();const a=jo(),c=function(){return jo()}();return n.forEach((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Xc)?s=s.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),bo(h.mutation,d,h.mutation.getFieldMask(),Ye.now())):a.set(d.key,gr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>{var g;return c.set(d,new Gb(h,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=jo();let i=new Ue((a,c)=>a-c),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||gr.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(i.get(c.batchId)||me()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=uw();h.forEach(m=>{if(!s.has(m)){const k=mw(n.get(m),r.get(m));k!==null&&g.set(m,k),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(ii());let c=Yo,u=s;return a.next(d=>U.forEach(d,(h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,me())).next(h=>({batchId:c,changes:lb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=po();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=po();return this.indexManager.getCollectionParents(e,s).next(c=>U.forEach(c,u=>{const d=function(g,m){return new Ii(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,vt.newInvalidDocument(h)))});let c=po();return a.forEach((u,d)=>{const h=s.get(u);h!==void 0&&bo(h.mutation,d,gr.empty(),Ye.now()),Yc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return U.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:os(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:Mb(i.bundledQuery),readTime:os(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.overlays=new Ue(ee.comparator),this.Qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=ii(),s=n.length+1,a=new ee(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=ii(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=ii(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return U.resolve(c)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new xb(n,r));let s=this.Qr.get(n);s===void 0&&(s=me(),this.Qr.set(n,s)),this.Qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.$r=new He(Ge.Ur),this.Kr=new He(Ge.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ge(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ee(new Se([])),r=new Ge(n,e),i=new Ge(n,e+1),s=[];return this.Kr.forEachInRange([r,i],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ee(new Se([])),r=new Ge(n,e),i=new Ge(n,e+1);let s=me();return this.Kr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ge(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ee.comparator(e.key,n.key)||le(e.Zr,n.Zr)}static Wr(e,n){return le(e.Zr,n.Zr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new He(Ge.Ur)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _b(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.Xr=this.Xr.add(new Ge(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Fj:this.nr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],a=>{const c=this.ei(a.Zr);s.push(c)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(le);return n.forEach(i=>{const s=new Ge(i,0),a=new Ge(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],c=>{r=r.add(c.Zr)})}),U.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const a=new Ge(new ee(s),0);let c=new He(le);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Zr)),!0)},a),U.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return U.forEach(n.mutations,i=>{const s=new Ge(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Ge(n,0),i=this.Xr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.ii=e,this.docs=function(){return new Ue(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fr();const a=n.path,c=new ee(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Dj(Oj(h),r)<=0||(i.has(h.key)||Yc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se(9500)}si(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eR(this)}getSize(e){return U.resolve(this.size)}}class eR extends Hb{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.persistence=e,this.oi=new Ci(n=>op(n),ap),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this._i=0,this.ai=new pp,this.targetCount=0,this.ui=Ss.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),U.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ss(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Tr(n),U.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.oi.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.ci={},this.overlays={},this.li=new qc(0),this.hi=!1,this.hi=!0,this.Pi=new Jb,this.referenceDelegate=e(this),this.Ti=new tR(this),this.indexManager=new Fb,this.remoteDocumentCache=function(i){return new Zb(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Vb(n),this.Ei=new Qb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new Xb(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new nR(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,n){return U.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class nR extends Vj{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Vi=new pp,this.mi=null}static fi(e){return new mp(e)}get gi(){if(this.mi)return this.mi;throw se(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.gi,r=>{const i=ee.fromPath(r);return this.pi(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return U.or([()=>U.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class pc{constructor(e,n){this.persistence=e,this.yi=new Ci(r=>Bj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qb(this,n)}static fi(e,n){return new pc(e,n)}di(){}Ai(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return U.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,a=>this.Dr(e,a,n).next(c=>{c||(r++,s.removeEntry(a,ie.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cl(e.data.value)),n}Dr(e,n,r){return U.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ok()?8:Mj(Et())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ws(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Ss(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new rR;return this.bs(e,n,a).next(c=>{if(s.result=c,this.fs)return this.Ds(e,n,a,c.size)})}).next(()=>s.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(Li()<=de.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Vi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),U.resolve()):(Li()<=de.DEBUG&&Q("QueryEngine","Query:",Vi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Li()<=de.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Vi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):U.resolve())}ws(e,n){if($y(n))return U.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dc(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=me(...s);return this.ys.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,c);return this.Cs(n,d,a,u.readTime)?this.ws(e,dc(n,null,"F")):this.Fs(e,d,n,u)}))})))}Ss(e,n,r,i){return $y(n)||i.isEqual(ie.min())?U.resolve(null):this.ys.getDocuments(e,r).next(s=>{const a=this.vs(n,s);return this.Cs(n,a,r,i)?U.resolve(null):(Li()<=de.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vi(n)),this.Fs(e,a,n,Pj(i,Yo)).next(c=>c))})}vs(e,n){let r=new He(lw(e));return n.forEach((i,s)=>{Yc(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}bs(e,n,r){return Li()<=de.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Vi(n)),this.ys.getDocumentsMatchingQuery(e,n,Dr.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="LocalStore",sR=3e8;class oR{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Ue(le),this.Os=new Ci(s=>op(s),ap),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kb(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function aR(t,e,n,r){return new oR(t,e,n,r)}async function Rw(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let u=me();for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:a,addedBatchIds:c}))})})}function Nw(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function lR(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const c=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Ti.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.Ti.addMatchingKeys(s,h.addedDocuments,g)));let k=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?k=k.withResumeToken(at.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(h.resumeToken,r)),i=i.insert(g,k),function(x,N,S){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=sR?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,k,h)&&c.push(n.Ti.updateTargetData(s,k))});let u=Fr(),d=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(cR(s,a,e.documentUpdates).next(h=>{u=h.qs,d=h.Qs})),!r.isEqual(ie.min())){const h=n.Ti.getLastRemoteSnapshotVersion(s).next(g=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(h)}return U.waitFor(c).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.xs=i,s))}function cR(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Fr();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Q(yp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{qs:a,Qs:i}})}function uR(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ti.allocateTargetId(r).next(a=>(i=new yr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Lh(t,e,n){const r=pe(t),i=r.xs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ps(a))throw a;Q(yp,`Failed to update sequence numbers for target ${e}: ${a}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function tv(t,e,n){const r=pe(t);let i=ie.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const g=pe(u),m=g.Os.get(h);return m!==void 0?U.resolve(g.xs.get(m)):g.Ti.getTargetData(d,h)}(r,a,In(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,c.targetId).next(u=>{s=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,e,n?i:ie.min(),n?s:me())).next(c=>(dR(r,sb(e),c),{documents:c,$s:s})))}function dR(t,e,n){let r=t.Ns.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ns.set(e,r)}class nv{constructor(){this.activeTargetIds=db()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hR{constructor(){this.xo=new nv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new nv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="ConnectivityMonitor";class iv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Q(rv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Q(rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il=null;function Vh(){return il===null?il=function(){return 268435456+Math.round(2147483648*Math.random())}():il++,"0x"+il.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="RestConnection",pR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===lc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,s){const a=Vh(),c=this.jo(e,n.toUriEncodedString());Q(gd,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,s);const{host:d}=new URL(c),h=Si(d);return this.Jo(e,c,u,r,h).then(g=>(Q(gd,`Received RPC '${e}' ${a}: `,g),g),g=>{throw vs(gd,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g})}Yo(e,n,r,i,s,a){return this.zo(e,n,r,i,s)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,n){const r=pR[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class yR extends mR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=Vh();return new Promise((c,u)=>{const d=new Lx;d.setWithCredentials(!0),d.listenOnce(Vx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Il.NO_ERROR:const g=d.getResponseJson();Q(ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case Il.TIMEOUT:Q(ft,`RPC '${e}' ${a} timed out`),u(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:const m=d.getStatus();if(Q(ft,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let k=d.getResponseJson();Array.isArray(k)&&(k=k[0]);const I=k==null?void 0:k.error;if(I&&I.status&&I.message){const x=function(S){const _=S.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(_)>=0?_:$.UNKNOWN}(I.status);u(new K(x,I.message))}else u(new K($.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K($.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(ft,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Q(ft,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Vh(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ux(),c=Fx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Q(ft,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=a.createWebChannel(h,u);let m=!1,k=!1;const I=new gR({Zo:N=>{k?Q(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(Q(ft,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Q(ft,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},Xo:()=>g.close()}),x=(N,S,_)=>{N.listen(S,j=>{try{_(j)}catch(P){setTimeout(()=>{throw P},0)}})};return x(g,fo.EventType.OPEN,()=>{k||(Q(ft,`RPC '${e}' stream ${i} transport opened.`),I.__())}),x(g,fo.EventType.CLOSE,()=>{k||(k=!0,Q(ft,`RPC '${e}' stream ${i} transport closed`),I.u_())}),x(g,fo.EventType.ERROR,N=>{k||(k=!0,vs(ft,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),I.u_(new K($.UNAVAILABLE,"The operation could not be completed")))}),x(g,fo.EventType.MESSAGE,N=>{var S;if(!k){const _=N.data[0];Ae(!!_,16349);const j=_,P=(j==null?void 0:j.error)||((S=j[0])===null||S===void 0?void 0:S.error);if(P){Q(ft,`RPC '${e}' stream ${i} received error:`,P);const D=P.status;let A=function(w){const C=Be[w];if(C!==void 0)return yw(C)}(D),E=P.message;A===void 0&&(A=$.INTERNAL,E="Unknown error status: "+D+" with message "+P.message),k=!0,I.u_(new K(A,E)),g.close()}else Q(ft,`RPC '${e}' stream ${i} received:`,_),I.c_(_)}}),x(c,Mx.STAT_EVENT,N=>{N.stat===Th.PROXY?Q(ft,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Th.NOPROXY&&Q(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){return new kb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=i,this.d_=s,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="PersistentStream";class vR{constructor(e,n,r,i,s,a,c,u){this.xi=e,this.y_=r,this.w_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Aw(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===n&&this.K_(r,i)},r=>{e(()=>{const i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Q(sv,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(Q(sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _R extends vR{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=bb(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?os(a.readTime):ie.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=Jy(this.serializer),n.addTarget=function(s,a){let c;const u=a.target;if(c=bh(u)?{documents:Rb(s,u)}:{query:Nb(s,u).gt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=xw(s,a.resumeToken);const d=Ph(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ie.min())>0){c.readTime=Oh(s,a.snapshotVersion.toTimestamp());const d=Ph(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Pb(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=Jy(this.serializer),n.removeTarget=e,this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{}class wR extends xR{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,Dh(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K($.UNKNOWN,s.toString())})}Yo(e,n,r,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Yo(e,Dh(n,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K($.UNKNOWN,a.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class ER{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Qn(n),this.oa=!1):Q("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="RemoteStore";class SR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=s,this.Ea.No(a=>{r.enqueueAndForget(async()=>{pa(this)&&(Q(Ts,"Restarting streams for network reachability change."),await async function(u){const d=pe(u);d.Ta.add(4),await fa(d),d.da.set("Unknown"),d.Ta.delete(4),await tu(d)}(this))})}),this.da=new ER(r,i)}}async function tu(t){if(pa(t))for(const e of t.Ia)await e(!0)}async function fa(t){for(const e of t.Ia)await e(!1)}function Pw(t,e){const n=pe(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),wp(n)?xp(n):Ds(n).M_()&&_p(n,e))}function vp(t,e){const n=pe(t),r=Ds(n);n.Pa.delete(e),r.M_()&&Ow(n,e),n.Pa.size===0&&(r.M_()?r.N_():pa(n)&&n.da.set("Unknown"))}function _p(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ds(t).H_(e)}function Ow(t,e){t.Aa.Ke(e),Ds(t).J_(e)}function xp(t){t.Aa=new Sb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ds(t).start(),t.da._a()}function wp(t){return pa(t)&&!Ds(t).F_()&&t.Pa.size>0}function pa(t){return pe(t).Ta.size===0}function Dw(t){t.Aa=void 0}async function TR(t){t.da.set("Online")}async function IR(t){t.Pa.forEach((e,n)=>{_p(t,e)})}async function CR(t,e){Dw(t),wp(t)?(t.da.ca(e),xp(t)):t.da.set("Unknown")}async function kR(t,e,n){if(t.da.set("Online"),e instanceof _w&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.Pa.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.Pa.delete(c),i.Aa.removeTarget(c))}(t,e)}catch(r){Q(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ov(t,r)}else if(e instanceof jl?t.Aa.Xe(e):e instanceof vw?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(ie.min()))try{const r=await Nw(t.localStore);n.compareTo(r)>=0&&await function(s,a){const c=s.Aa.It(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Pa.get(d);h&&s.Pa.set(d,h.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const h=s.Pa.get(u);if(!h)return;s.Pa.set(u,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),Ow(s,u);const g=new yr(h.target,u,d,h.sequenceNumber);_p(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q(Ts,"Failed to raise snapshot:",r),await ov(t,r)}}async function ov(t,e,n){if(!Ps(e))throw e;t.Ta.add(1),await fa(t),t.da.set("Offline"),n||(n=()=>Nw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Ts,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await tu(t)})}async function av(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),Q(Ts,"RemoteStore received new credentials");const r=pa(n);n.Ta.add(3),await fa(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await tu(n)}async function jR(t,e){const n=pe(t);e?(n.Ta.delete(2),await tu(n)):e||(n.Ta.add(2),await fa(n),n.da.set("Unknown"))}function Ds(t){return t.Ra||(t.Ra=function(n,r,i){const s=pe(n);return s.ra(),new _R(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:TR.bind(null,t),n_:IR.bind(null,t),i_:CR.bind(null,t),j_:kR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),wp(t)?xp(t):t.da.set("Unknown")):(await t.Ra.stop(),Dw(t))})),t.Ra}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new Ep(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lw(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),Ps(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{static emptySet(e){return new as(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=po(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof as)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.ma=new Ue(ee.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):se(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class Is{constructor(e,n,r,i,s,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Is(e,n,as.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class RR{constructor(){this.queries=cv(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const i=pe(n),s=i.queries;i.queries=cv(),s.forEach((a,c)=>{for(const u of c.ya)u.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function cv(){return new Ci(t=>aw(t),Qc)}async function Vw(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.wa()&&e.Sa()&&(r=2):(s=new bR,r=e.Sa()?0:1);try{switch(r){case 0:s.pa=await n.onListen(i,!0);break;case 1:s.pa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=Lw(a,`Initialization of query '${Vi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.ya.push(e),e.Da(n.onlineState),s.pa&&e.va(s.pa)&&Sp(n)}async function Mw(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.ya.indexOf(e);a>=0&&(s.ya.splice(a,1),s.ya.length===0?i=e.Sa()?0:1:!s.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NR(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.ya)c.va(i)&&(r=!0);a.pa=i}}r&&Sp(n)}function AR(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.ya)s.onError(n);r.queries.delete(e)}function Sp(t){t.ba.forEach(e=>{e.next()})}var Mh,uv;(uv=Mh||(Mh={})).Ca="default",uv.Cache="cache";class Fw{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.key=e}}class Bw{constructor(e){this.key=e}}class PR{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=me(),this.mutatedKeys=me(),this.Ha=lw(e),this.Ja=new as(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new lv,i=n?n.Ja:this.Ja;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),k=Yc(this.query,g)?g:null,I=!!m&&this.mutatedKeys.has(m.key),x=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let N=!1;m&&k?m.data.isEqual(k.data)?I!==x&&(r.track({type:3,doc:k}),N=!0):this.eu(m,k)||(r.track({type:2,doc:k}),N=!0,(u&&this.Ha(k,u)>0||d&&this.Ha(k,d)<0)&&(c=!0)):!m&&k?(r.track({type:0,doc:k}),N=!0):m&&!k&&(r.track({type:1,doc:m}),N=!0,(u||d)&&(c=!0)),N&&(k?(a=a.add(k),s=x?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ja:a,Xa:r,Cs:c,mutatedKeys:s}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const a=e.Xa.ga();a.sort((h,g)=>function(k,I){const x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Vt:N})}};return x(k)-x(I)}(h.type,g.type)||this.Ha(h.doc,g.doc)),this.tu(r),i=i!=null&&i;const c=n&&!i?this.nu():[],u=this.ja.size===0&&this.current&&!i?1:0,d=u!==this.za;return this.za=u,a.length!==0||d?{snapshot:new Is(this.query,e.Ja,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:c}:{ru:c}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=me(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new Bw(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new Uw(r))}),n}su(e){this.Ga=e.$s,this.ja=me();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Is.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Tp="SyncEngine";class OR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DR{constructor(e){this.key=e,this._u=!1}}class LR{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.au={},this.uu=new Ci(c=>aw(c),Qc),this.cu=new Map,this.lu=new Set,this.hu=new Ue(ee.comparator),this.Pu=new Map,this.Tu=new pp,this.Iu={},this.Eu=new Map,this.du=Ss.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function VR(t,e,n=!0){const r=Hw(t);let i;const s=r.uu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await $w(r,e,n,!0),i}async function MR(t,e){const n=Hw(t);await $w(n,e,!0,!1)}async function $w(t,e,n,r){const i=await uR(t.localStore,In(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await FR(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Pw(t.remoteStore,i),c}async function FR(t,e,n,r,i){t.Ru=(g,m,k)=>async function(x,N,S,_){let j=N.view.Za(S);j.Cs&&(j=await tv(x.localStore,N.query,!1).then(({documents:E})=>N.view.Za(E,j)));const P=_&&_.targetChanges.get(N.targetId),D=_&&_.targetMismatches.get(N.targetId)!=null,A=N.view.applyChanges(j,x.isPrimaryClient,P,D);return hv(x,N.targetId,A.ru),A.snapshot}(t,g,m,k);const s=await tv(t.localStore,e,!0),a=new PR(e,s.$s),c=a.Za(s.documents),u=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(c,t.isPrimaryClient,u);hv(t,n,d.ru);const h=new OR(e,n,a);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),d.snapshot}async function UR(t,e,n){const r=pe(t),i=r.uu.get(e),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter(a=>!Qc(a,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vp(r.remoteStore,i.targetId),Fh(r,i.targetId)}).catch(Wc)):(Fh(r,i.targetId),await Lh(r.localStore,i.targetId,!0))}async function BR(t,e){const n=pe(t),r=n.uu.get(e),i=n.cu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vp(n.remoteStore,r.targetId))}async function zw(t,e){const n=pe(t);try{const r=await lR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Pu.get(s);a&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a._u=!0:i.modifiedDocuments.size>0?Ae(a._u,14607):i.removedDocuments.size>0&&(Ae(a._u,42227),a._u=!1))}),await qw(n,r,e)}catch(r){await Wc(r)}}function dv(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.uu.forEach((s,a)=>{const c=a.view.Da(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const u=pe(a);u.onlineState=c;let d=!1;u.queries.forEach((h,g)=>{for(const m of g.ya)m.Da(c)&&(d=!0)}),d&&Sp(u)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $R(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Pu.get(e),s=i&&i.key;if(s){let a=new Ue(ee.comparator);a=a.insert(s,vt.newNoDocument(s,ie.min()));const c=me().add(s),u=new Zc(ie.min(),new Map,new Ue(le),a,c);await zw(r,u),r.hu=r.hu.remove(s),r.Pu.delete(e),Ip(r)}else await Lh(r.localStore,e,!1).then(()=>Fh(r,e,n)).catch(Wc)}function Fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||Ww(t,r)})}function Ww(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(vp(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Ip(t))}function hv(t,e,n){for(const r of n)r instanceof Uw?(t.Tu.addReference(r.key,e),zR(t,r)):r instanceof Bw?(Q(Tp,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||Ww(t,r.key)):se(19791,{mu:r})}function zR(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(Q(Tp,"New document in limbo: "+n),t.lu.add(r),Ip(t))}function Ip(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new ee(Se.fromString(e)),r=t.du.next();t.Pu.set(r,new DR(n)),t.hu=t.hu.insert(n,r),Pw(t.remoteStore,new yr(In(lp(n.path)),r,"TargetPurposeLimboResolution",qc.le))}}async function qw(t,e,n){const r=pe(t),i=[],s=[],a=[];r.uu.isEmpty()||(r.uu.forEach((c,u)=>{a.push(r.Ru(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=gp.Rs(u.targetId,d);s.push(g)}}))}),await Promise.all(a),r.au.j_(i),await async function(u,d){const h=pe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,m=>U.forEach(m.ds,k=>h.persistence.referenceDelegate.addReference(g,m.targetId,k)).next(()=>U.forEach(m.As,k=>h.persistence.referenceDelegate.removeReference(g,m.targetId,k)))))}catch(g){if(!Ps(g))throw g;Q(yp,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const k=h.xs.get(m),I=k.snapshotVersion,x=k.withLastLimboFreeSnapshotVersion(I);h.xs=h.xs.insert(m,x)}}}(r.localStore,s))}async function WR(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){Q(Tp,"User change. New user:",e.toKey());const r=await Rw(n.localStore,e);n.currentUser=e,function(s,a){s.Eu.forEach(c=>{c.forEach(u=>{u.reject(new K($.CANCELLED,a))})}),s.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qw(n,r.ks)}}function qR(t,e){const n=pe(t),r=n.Pu.get(e);if(r&&r._u)return me().add(r.key);{let i=me();const s=n.cu.get(e);if(!s)return i;for(const a of s){const c=n.uu.get(a);i=i.unionWith(c.view.Ya)}return i}}function Hw(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$R.bind(null,e),e.au.j_=NR.bind(null,e.eventManager),e.au.Vu=AR.bind(null,e.eventManager),e}class mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eu(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return aR(this.persistence,new iR,e.initialUser,this.serializer)}yu(e){return new bw(mp.fi,this.serializer)}pu(e){return new hR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mc.provider={build:()=>new mc};class HR extends mc{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Ae(this.persistence.referenceDelegate instanceof pc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zb(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new bw(r=>pc.fi(r,n),this.serializer)}}class Uh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WR.bind(null,this.syncEngine),await jR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RR}()}createDatastore(e){const n=eu(e.databaseInfo.databaseId),r=function(s){return new yR(s)}(e.databaseInfo);return function(s,a,c,u){return new wR(s,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,c){return new SR(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>dv(this.syncEngine,n,0),function(){return iv.C()?new iv:new fR}())}createSyncEngine(e,n){return function(i,s,a,c,u,d,h){const g=new LR(i,s,a,c,u,d);return h&&(g.Au=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=pe(i);Q(Ts,"RemoteStore shutting down."),s.Ta.add(5),await fa(s),s.Ea.shutdown(),s.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uh.provider={build:()=>new Uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class GR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=Wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Q(Ur,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q(Ur,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Lw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vd(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Ur,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Rw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KR(t);Q(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>av(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>av(e.remoteStore,i)),t._onlineComponents=e}async function KR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Ur,"Using user provided OfflineComponentProvider");try{await vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;vs("Error using user provided cache. Falling back to memory cache: "+n),await vd(t,new mc)}}else Q(Ur,"Using default OfflineComponentProvider"),await vd(t,new HR(void 0));return t._offlineComponents}async function QR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Ur,"Using user provided OnlineComponentProvider"),await fv(t,t._uninitializedComponentsProvider._online)):(Q(Ur,"Using default OnlineComponentProvider"),await fv(t,new Uh))),t._onlineComponents}async function Kw(t){const e=await QR(t),n=e.eventManager;return n.onListen=VR.bind(null,e.syncEngine),n.onUnlisten=UR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BR.bind(null,e.syncEngine),n}function YR(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,c,u,d){const h=new Gw({next:m=>{h.Cu(),a.enqueueAndForget(()=>Mw(s,g));const k=m.docs.has(c);!k&&m.fromCache?d.reject(new K($.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&m.fromCache&&u&&u.source==="server"?d.reject(new K($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new Fw(lp(c.path),h,{includeMetadataChanges:!0,La:!0});return Vw(s,g)}(await Kw(t),t.asyncQueue,e,n,r)),r.promise}function JR(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,c,u,d){const h=new Gw({next:m=>{h.Cu(),a.enqueueAndForget(()=>Mw(s,g)),m.fromCache&&u.source==="server"?d.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new Fw(c,h,{includeMetadataChanges:!0,La:!0});return Vw(s,g)}(await Kw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XR(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mv(t){if(!ee.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gv(t){if(ee.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function ta(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nu(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZR(t,e){if(e<=0)throw new K($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firestore.googleapis.com",yv=!0;class vv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jw,this.ssl=yv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bb)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ru{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tj;switch(r.type){case"firstParty":return new jj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),pv.delete(n),r.terminate())}(this),Promise.resolve()}}function eN(t,e,n,r={}){var i;t=ta(t,ru);const s=Si(e),a=t._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Zf(`https://${u}`),ep("Firestore",!0)),a.host!==Jw&&a.host!==u&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:s,emulatorOptions:r});if(!mi(d,c)&&(t._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=gt.MOCK_USER;else{h=Rx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new gt(m)}t._authCredentials=new Ij(new $x(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new er(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class Rr extends er{constructor(e,n,r){super(e,n,lp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ee(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function Ot(t,e,...n){if(t=ot(t),Yw("collection","path",e),t instanceof ru){const r=Se.fromString(e,...n);return gv(r),new Rr(t,null,r)}{if(!(t instanceof qt||t instanceof Rr))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return gv(r),new Rr(t.firestore,null,r)}}function kt(t,e,...n){if(t=ot(t),arguments.length===1&&(e=Wx.newId()),Yw("doc","path",e),t instanceof ru){const r=Se.fromString(e,...n);return mv(r),new qt(t,null,new ee(r))}{if(!(t instanceof qt||t instanceof Rr))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return mv(r),new qt(t.firestore,t instanceof Rr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="AsyncQueue";class xv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Aw(this,"async_queue_retry"),this.ec=()=>{const r=yd();r&&Q(_v,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new br;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Ps(e))throw e;Q(_v,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Qn("INTERNAL UNHANDLED ERROR: ",wv(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const i=Ep.createAndSchedule(this,e,n,r,s=>this.oc(s));return this.Hu.push(i),i}nc(){this.Ju&&se(47125,{_c:wv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function wv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cp extends ru{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xv(e),this._firestoreClient=void 0,await e}}}function Bh(t,e){const n=typeof t=="object"?t:rp(),r=typeof t=="string"?t:e||lc,i=zc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=kx("firestore");s&&eN(i,...s)}return i}function Xw(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tN(t),t._firestoreClient}function tN(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,d,h){return new Wj(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Qw(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new GR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cs(at.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cs(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^__.*__$/;function t1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{hc:t})}}class bp{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return $h(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(t1(this.hc)&&nN.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class rN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eu(e)}gc(e,n,r,i=!1){return new bp({hc:e,methodName:n,fc:r,path:_t.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function n1(t){const e=t._freezeSettings(),n=eu(t._databaseId);return new rN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function r1(t,e,n,r=!1){return Rp(n,t.gc(r?4:3,e))}function Rp(t,e){if(i1(t=ot(t)))return sN("Unsupported field value:",e,t),iN(t,e);if(t instanceof e1)return function(r,i){if(!t1(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let u=Rp(c,i.Rc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:Oh(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,s)}}if(r instanceof kp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cs)return{bytesValue:xw(i.serializer,r._byteString)};if(r instanceof qt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Vc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ww(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jp)return function(a,c){return{mapValue:{fields:{[Xx]:{stringValue:ew},[cc]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Vc("VectorValues must only contain numeric values.");return up(c.serializer,d)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${nu(r)}`)}(t,e)}function iN(t,e){const n={};return Hx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(r,i)=>{const s=Rp(i,e.Ic(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function i1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof kp||t instanceof Cs||t instanceof qt||t instanceof e1||t instanceof jp)}function sN(t,e,n){if(!i1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=nu(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}const oN=new RegExp("[~\\*/\\[\\]]");function aN(t,e,n){if(e.search(oN)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zw(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $h(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new K($.INVALID_ARGUMENT,c+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lN extends Np{data(){return super.data()}}function iu(t,e){return typeof e=="string"?aN(t,e):e instanceof Zw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class su extends Ap{}function Ln(t,e,...n){let r=[];e instanceof Ap&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof Pp).length,c=s.filter(u=>u instanceof ou).length;if(a>1||a>0&&c>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ou extends su{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ou(e,n,r)}_apply(e){const n=this._parse(e);return s1(e._query,n),new er(e.firestore,e.converter,Rh(e._query,n))}_parse(e){const n=n1(e.firestore);return function(s,a,c,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Sv(g,h);const I=[];for(const x of g)I.push(Ev(u,s,x));m={arrayValue:{values:I}}}else m=Ev(u,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Sv(g,h),m=r1(c,a,g,h==="in"||h==="not-in");return ze.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function si(t,e,n){const r=e,i=iu("where",t);return ou._create(i,r,n)}class Pp extends Ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const c=s.getFlattenedFilters();for(const u of c)s1(a,u),a=Rh(a,u)}(e._query,n),new er(e.firestore,e.converter,Rh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Op extends su{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Op(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ea(s,a)}(e._query,this._field,this._direction);return new er(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Ii(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ei(t,e="asc"){const n=e,r=iu("orderBy",t);return Op._create(r,n)}class Dp extends su{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Dp(e,n,r)}_apply(e){return new er(e.firestore,e.converter,dc(e._query,this._limit,this._limitType))}}function Ai(t){return ZR("limit",t),Dp._create("limit",t,"F")}class Lp extends su{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Lp(e,n,r)}_apply(e){const n=uN(e,this.type,this._docOrFields,this._inclusive);return new er(e.firestore,e.converter,function(i,s){return new Ii(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function _d(...t){return Lp._create("startAfter",t,!1)}function uN(t,e,n,r){if(n[0]=ot(n[0]),n[0]instanceof Np)return function(s,a,c,u,d){if(!u)throw new K($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const h=[];for(const g of ss(s))if(g.field.isKeyField())h.push(uc(a,u.key));else{const m=u.data.field(g.field);if(Gc(m))throw new K($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const k=g.field.canonicalString();throw new K($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}h.push(m)}return new Es(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=n1(t.firestore);return function(a,c,u,d,h,g){const m=a.explicitOrderBy;if(h.length>m.length)throw new K($.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let I=0;I<h.length;I++){const x=h[I];if(m[I].field.isKeyField()){if(typeof x!="string")throw new K($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof x}`);if(!cp(a)&&x.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${x}' contains a slash.`);const N=a.path.child(Se.fromString(x));if(!ee.isDocumentKey(N))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const S=new ee(N);k.push(uc(c,S))}else{const N=r1(u,d,x);k.push(N)}}return new Es(k,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ev(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cp(e)&&n.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!ee.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uc(t,new ee(r))}if(n instanceof qt)return uc(t,n._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nu(n)}.`)}function Sv(t,e){if(!Array.isArray(t)||t.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s1(t,e){const n=function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dN{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Os(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[cc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Me(a.doubleValue));return new jp(s)}convertGeoPoint(e){return new kp(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);Ae(kw(r),9688,{name:e});const i=new Xo(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||Qn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class o1 extends Np{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(iu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bl extends o1{data(e={}){return super.data(e)}}class hN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new go(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bl(this._firestore,this._userDataWriter,r.key,r,new go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const u=new bl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new go(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new bl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new go(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:fN(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){t=ta(t,qt);const e=ta(t.firestore,Cp);return YR(Xw(e),t._key).then(n=>pN(e,t,n))}class a1 extends dN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Dt(t){t=ta(t,er);const e=ta(t.firestore,Cp),n=Xw(e),r=new a1(e);return cN(t._query),JR(n,t._query).then(i=>new hN(e,r,t,i))}function pN(t,e,n){const r=n.docs.get(e._key),i=new a1(t);return new o1(t,i,e._key,r,new go(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){As=i})(Ti),gi(new Or("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Cp(new Cj(r.getProvider("auth-internal")),new bj(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(d.options.projectId,h)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Tn(Iy,Cy,e),Tn(Iy,Cy,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebasestorage.googleapis.com",c1="storageBucket",mN=2*60*1e3,gN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe extends bn{constructor(e,n,r=0){super(xd(e),`Firebase Storage: ${n} (${xd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function xd(t){return"storage/"+t}function u1(){const t="An unknown error occurred, please check the error payload for server response.";return new Xe(Je.UNKNOWN,t)}function yN(t){return new Xe(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vN(t){return new Xe(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _N(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xe(Je.UNAUTHENTICATED,t)}function xN(){return new Xe(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wN(t){return new Xe(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EN(){return new Xe(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SN(){return new Xe(Je.CANCELED,"User canceled the upload/download.")}function TN(t){return new Xe(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function IN(t){return new Xe(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CN(){return new Xe(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+c1+"' property when initializing the app?")}function kN(){return new Xe(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zh(t){return new Xe(Je.INVALID_ARGUMENT,t)}function d1(){return new Xe(Je.APP_DELETED,"The Firebase app was deleted.")}function jN(t){return new Xe(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oo(t){throw new Xe(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bt.makeFromUrl(e,n)}catch{return new bt(e,"")}if(r.path==="")return r;throw IN(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",k=new RegExp(`^https?://${g}/${h}/b/${i}/o${m}`,"i"),I={bucket:1,path:3},x=n===l1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",S=new RegExp(`^https?://${x}/${i}/${N}`,"i"),j=[{regex:c,indices:u,postModify:s},{regex:k,indices:I,postModify:d},{regex:S,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<j.length;P++){const D=j[P],A=D.regex.exec(e);if(A){const E=A[D.indices.bucket];let y=A[D.indices.path];y||(y=""),r=new bt(E,y),D.postModify(r);break}}if(r==null)throw TN(e);return r}}class bN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){let r=1,i=null,s=null,a=!1,c=0;function u(){return c===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function g(N){i=setTimeout(()=>{i=null,t(k,u())},N)}function m(){s&&clearTimeout(s)}function k(N,...S){if(d){m();return}if(N){m(),h.call(null,N,...S);return}if(u()||a){m(),h.call(null,N,...S);return}r<64&&(r*=2);let j;c===1?(c=2,j=0):j=(r+Math.random())*1e3,g(j)}let I=!1;function x(N){I||(I=!0,m(),!d&&(i!==null?(N||(c=2),clearTimeout(i),g(0)):N||(c=1)))}return g(0),s=setTimeout(()=>{a=!0,x(!0)},n),x}function NN(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){return t!==void 0}function PN(t){return typeof t=="object"&&!Array.isArray(t)}function h1(t){return typeof t=="string"||t instanceof String}function Wh(t,e,n,r){if(r<e)throw zh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw zh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function f1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ci;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ci||(ci={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i,s,a,c,u,d,h,g,m=!0,k=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=m,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,x)=>{this.resolve_=I,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new sl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===ci.NO_ERROR,u=s.getStatus();if(!c||ON(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ci.ABORT;r(!1,new sl(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new sl(d,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());AN(u)?s(u):s()}catch(u){a(u)}else if(c!==null){const u=u1();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(i.canceled){const u=this.appDelete_?d1():SN();a(u)}else{const u=EN();a(u)}};this.canceled_?n(!1,new sl(!1,null,!0)):this.backoffId_=RN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function VN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UN(t,e,n,r,i,s,a=!0,c=!1){const u=f1(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return MN(h,e),LN(h,n),VN(h,s),FN(h,r),new DN(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){let e;try{e=JSON.parse(t)}catch{return null}return PN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $N(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function p1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){return e}class It{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||zN}}let ol=null;function WN(t){return!h1(t)||t.length<2?t:p1(t)}function qN(){if(ol)return ol;const t=[];t.push(new It("bucket")),t.push(new It("generation")),t.push(new It("metageneration")),t.push(new It("name","fullPath",!0));function e(s,a){return WN(a)}const n=new It("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new It("size");return i.xform=r,t.push(i),t.push(new It("timeCreated")),t.push(new It("updated")),t.push(new It("md5Hash",null,!0)),t.push(new It("cacheControl",null,!0)),t.push(new It("contentDisposition",null,!0)),t.push(new It("contentEncoding",null,!0)),t.push(new It("contentLanguage",null,!0)),t.push(new It("contentType",null,!0)),t.push(new It("metadata","customMetadata",!0)),ol=t,ol}function HN(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function GN(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return HN(r,t),r}function KN(t,e,n){const r=Mp(e);return r===null?null:GN(t,r,n)}function QN(t,e,n,r){const i=Mp(e);if(i===null||!h1(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(d=>{const h=t.bucket,g=t.fullPath,m="/b/"+a(h)+"/o/"+a(g),k=Vp(m,n,r),I=f1({alt:"media",token:d});return k+I})[0]}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="prefixes",Iv="items";function YN(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Tv])for(const i of n[Tv]){const s=i.replace(/\/$/,""),a=t._makeStorageReference(new bt(e,s));r.prefixes.push(a)}if(n[Iv])for(const i of n[Iv]){const s=t._makeStorageReference(new bt(e,i.name));r.items.push(s)}return r}function JN(t,e,n){const r=Mp(n);return r===null?null:YN(t,e,r)}class m1{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){if(!t)throw u1()}function XN(t,e){function n(r,i){const s=JN(t,e,i);return g1(s!==null),s}return n}function ZN(t,e){function n(r,i){const s=KN(t,i,e);return g1(s!==null),QN(s,i,t.host,t._protocol)}return n}function y1(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=xN():i=_N():n.getStatus()===402?i=vN(t.bucket):n.getStatus()===403?i=wN(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function eA(t){const e=y1(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=yN(t.path)),s.serverResponse=i.serverResponse,s}return n}function tA(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=e.bucketOnlyServerUrl(),c=Vp(a,t.host,t._protocol),u="GET",d=t.maxOperationRetryTime,h=new m1(c,u,XN(t,e.bucket),d);return h.urlParams=s,h.errorHandler=y1(e),h}function nA(t,e,n){const r=e.fullServerUrl(),i=Vp(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,c=new m1(i,s,ZN(t,n),a);return c.errorHandler=eA(e),c}class rA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw oo("cannot .send() more than once");if(Si(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw oo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iA extends rA{initXhr(){this.xhr_.responseType="text"}}function v1(){return new iA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this._service=e,n instanceof bt?this._location=n:this._location=bt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vi(e,n)}get root(){const e=new bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p1(this._location.path)}get storage(){return this._service}get parent(){const e=BN(this._location.path);if(e===null)return null;const n=new bt(this._location.bucket,e);return new vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jN(e)}}function sA(t){const e={prefixes:[],items:[]};return _1(t,e).then(()=>e)}async function _1(t,e,n){const i=await oA(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await _1(t,e,i.nextPageToken)}function oA(t,e){e!=null&&typeof e.maxResults=="number"&&Wh("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=tA(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,v1)}function aA(t){t._throwIfRoot("getDownloadURL");const e=nA(t.storage,t._location,qN());return t.storage.makeRequestWithTokens(e,v1).then(n=>{if(n===null)throw kN();return n})}function lA(t,e){const n=$N(t._location.path,e),r=new bt(t._location.bucket,n);return new vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){return/^[A-Za-z]+:\/\//.test(t)}function uA(t,e){return new vi(t,e)}function x1(t,e){if(t instanceof Fp){const n=t;if(n._bucket==null)throw CN();const r=new vi(n,n._bucket);return e!=null?x1(r,e):r}else return e!==void 0?lA(t,e):t}function dA(t,e){if(e&&cA(e)){if(t instanceof Fp)return uA(t,e);throw zh("To use ref(service, url), the first argument must be a Storage instance.")}else return x1(t,e)}function Cv(t,e){const n=e==null?void 0:e[c1];return n==null?null:bt.makeFromBucketSpec(n,t)}function hA(t,e,n,r={}){t.host=`${e}:${n}`;const i=Si(e);i&&(Zf(`https://${t.host}`),ep("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Rx(s,t.app.options.projectId))}class Fp{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=l1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mN,this._maxUploadRetryTime=gN,this._requests=new Set,i!=null?this._bucket=bt.makeFromBucketSpec(i,this._host):this._bucket=Cv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bt.makeFromBucketSpec(this._url,e):this._bucket=Cv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vi(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new bN(d1());{const a=UN(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const kv="@firebase/storage",jv="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="storage";function fA(t){return t=ot(t),sA(t)}function Br(t){return t=ot(t),aA(t)}function $r(t,e){return t=ot(t),dA(t,e)}function qh(t=rp(),e){t=ot(t);const r=zc(t,w1).getImmediate({identifier:e}),i=kx("storage");return i&&pA(r,...i),r}function pA(t,e,n,r={}){hA(t,e,n,r)}function mA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Fp(n,r,i,e,Ti)}function gA(){gi(new Or(w1,mA,"PUBLIC").setMultipleInstances(!0)),Tn(kv,jv,""),Tn(kv,jv,"esm2017")}gA();var yA="firebase",vA="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(yA,vA,"app");function Up(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function E1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _A=E1,S1=new ua("auth","Firebase",E1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new tp("@firebase/auth");function xA(t,...e){gc.logLevel<=de.WARN&&gc.warn(`Auth (${Ti}): ${t}`,...e)}function Rl(t,...e){gc.logLevel<=de.ERROR&&gc.error(`Auth (${Ti}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,...e){throw Bp(t,...e)}function Cn(t,...e){return Bp(t,...e)}function T1(t,e,n){const r=Object.assign(Object.assign({},_A()),{[e]:n});return new ua("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return T1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return S1.create(t,...e)}function re(t,e,...n){if(!t)throw Bp(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rl(e),new Error(e)}function Jn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wA(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wA()||rk()||"connection"in navigator)?navigator.onLine:!0}function SA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=ek()||ik()}get(){return EA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CA=new ma(3e4,6e4);function au(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ls(t,e,n,r,i={}){return C1(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=da(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return nk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Si(t.emulatorConfig.host)&&(d.credentials="include"),I1.fetch()(await j1(t,t.config.apiHost,n,c),d)})}async function C1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TA),e);try{const i=new kA(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw al(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw al(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw al(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw al(t,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw T1(t,h,d);Yn(t,h)}}catch(i){if(i instanceof bn)throw i;Yn(t,"network-request-failed",{message:String(i)})}}async function k1(t,e,n,r,i={}){const s=await Ls(t,e,n,r,i);return"mfaPendingCredential"in s&&Yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function j1(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?$p(t.config,i):`${t.config.apiScheme}://${i}`;return IA.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class kA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),CA.get())})}}function al(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e){return Ls(t,"POST","/v1/accounts:delete",e)}async function yc(t,e){return Ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bA(t,e=!1){const n=ot(t),r=await n.getIdToken(e),i=zp(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ro(wd(i.auth_time)),issuedAtTime:Ro(wd(i.iat)),expirationTime:Ro(wd(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wd(t){return Number(t)*1e3}function zp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rl("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ix(n);return i?JSON.parse(i):(Rl("Failed to decode base64 JWT payload"),null)}catch(i){return Rl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Rv(t){const e=zp(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bn&&RA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function RA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ro(this.lastLoginAt),this.creationTime=Ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await na(t,yc(n,{idToken:r}));re(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?b1(s.providerUserInfo):[],c=PA(t.providerData,a),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Gh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,g)}async function AA(t){const e=ot(t);await vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function b1(t){return t.map(e=>{var{providerId:n}=e,r=Up(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t,e){const n=await C1(t,{},async()=>{const r=da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await j1(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",I1.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DA(t,e){return Ls(t,"POST","/v2/accounts:revokeToken",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=Rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await OA(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new ls;return r&&(re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ls,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await na(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bA(this,e)}reload(){return AA(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jt(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await na(this,jA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,c,u,d,h;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,k=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,I=(a=n.photoURL)!==null&&a!==void 0?a:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:j,emailVerified:P,isAnonymous:D,providerData:A,stsTokenManager:E}=n;re(j&&E,e,"internal-error");const y=ls.fromJSON(this.name,E);re(typeof j=="string",e,"internal-error"),sr(g,e.name),sr(m,e.name),re(typeof P=="boolean",e,"internal-error"),re(typeof D=="boolean",e,"internal-error"),sr(k,e.name),sr(I,e.name),sr(x,e.name),sr(N,e.name),sr(S,e.name),sr(_,e.name);const w=new dn({uid:j,auth:e,email:m,emailVerified:P,displayName:g,isAnonymous:D,photoURL:I,phoneNumber:k,tenantId:x,stsTokenManager:y,createdAt:S,lastLoginAt:_});return A&&Array.isArray(A)&&(w.providerData=A.map(C=>Object.assign({},C))),N&&(w._redirectEventId=N),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new ls;i.updateFromServerResponse(n);const s=new dn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?b1(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new ls;c.updateFromIdToken(r);const u=new dn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Gh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function Un(t){Jn(t instanceof Function,"Expected a class definition");let e=Nv.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R1.type="NONE";const Av=R1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e,n){return`firebase:${t}:${e}:${n}`}class cs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yc(this.auth,{idToken:e}).catch(()=>{});return n?dn._fromGetAccountInfoResponse(this.auth,n,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cs(Un(Av),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Un(Av);const a=Nl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(a);if(h){let g;if(typeof h=="string"){const m=await yc(e,{idToken:h}).catch(()=>{});if(!m)break;g=await dn._fromGetAccountInfoResponse(e,m,h)}else g=dn._fromJSON(e,h);d!==s&&(c=g),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new cs(s,e,r):(s=u[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new cs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L1(e))return"Blackberry";if(V1(e))return"Webos";if(A1(e))return"Safari";if((e.includes("chrome/")||P1(e))&&!e.includes("edge/"))return"Chrome";if(D1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function N1(t=Et()){return/firefox\//i.test(t)}function A1(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P1(t=Et()){return/crios\//i.test(t)}function O1(t=Et()){return/iemobile/i.test(t)}function D1(t=Et()){return/android/i.test(t)}function L1(t=Et()){return/blackberry/i.test(t)}function V1(t=Et()){return/webos/i.test(t)}function Wp(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LA(t=Et()){var e;return Wp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VA(){return sk()&&document.documentMode===10}function M1(t=Et()){return Wp(t)||D1(t)||V1(t)||L1(t)||/windows phone/i.test(t)||O1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e=[]){let n;switch(t){case"Browser":n=Pv(Et());break;case"Worker":n=`${Pv(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ti}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const u=e(s);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e={}){return Ls(t,"GET","/v2/passwordPolicy",au(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=6;class BA{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:UA,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new MA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await cs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yc(this,{idToken:e}),r=await dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jt(this.app))return Promise.reject(Nr(this));const n=e?ot(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jt(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jt(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FA(this),n=new BA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await cs.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lu(t){return ot(t)}class Ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=fk(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zA(t){qp=t}function WA(t){return qp.loadJS(t)}function qA(){return qp.gapiScript}function HA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){const n=zc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(mi(s,e??{}))return i;Yn(i,"already-initialized")}return n.initialize({options:e})}function KA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function QA(t,e,n){const r=lu(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=U1(e),{host:a,port:c}=YA(e),u=c===null?"":`:${c}`,d={url:`${s}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(mi(d,r.config.emulator)&&mi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Si(a)?(Zf(`${s}//${a}${u}`),ep("Auth",!0)):i||JA()}function U1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YA(t){const e=U1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Dv(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Dv(a)}}}function Dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(t,e){return k1(t,"POST","/v1/accounts:signInWithIdp",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="http://localhost";class _i extends B1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Up(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new _i(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return us(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,us(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,us(e,n)}buildRequest(){const e={requestUri:XA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=da(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends $1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends ga{constructor(){super("facebook.com")}static credential(e){return _i._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _i._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ga{constructor(){super("github.com")}static credential(e){return _i._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ga{constructor(){super("twitter.com")}static credential(e,n){return _i._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e){return k1(t,"POST","/v1/accounts:signUp",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await dn._fromIdTokenResponse(e,r,i),a=Lv(r);return new zr({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lv(r);return new zr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t){var e;if(Jt(t.app))return Promise.reject(Nr(t));const n=lu(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new zr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ZA(n,{returnSecureToken:!0}),i=await zr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends bn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_c.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _c(e,n,r,i)}}function z1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_c._fromErrorAndOperation(t,s,e,r):s})}async function t2(t,e,n=!1){const r=await na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e,n=!1){const{auth:r}=t;if(Jt(r.app))return Promise.reject(Nr(r));const i="reauthenticate";try{const s=await na(t,z1(r,i,e,t),n);re(s.idToken,r,"internal-error");const a=zp(s.idToken);re(a,r,"internal-error");const{sub:c}=a;return re(t.uid===c,r,"user-mismatch"),zr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Yn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e,n=!1){if(Jt(t.app))return Promise.reject(Nr(t));const r="signIn",i=await z1(t,r,e),s=await zr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function i2(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function s2(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function o2(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=1e3,l2=10;class q1 extends W1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);VA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,l2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},a2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q1.type="LOCAL";const c2=q1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1 extends W1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}H1.type="SESSION";const G1=H1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new cu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(n.origin,s)),u=await u2(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const d=Hp("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function h2(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function f2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function m2(){return K1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebaseLocalStorageDb",g2=1,wc="firebaseLocalStorage",Y1="fbase_key";class ya{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uu(t,e){return t.transaction([wc],e?"readwrite":"readonly").objectStore(wc)}function y2(){const t=indexedDB.deleteDatabase(Q1);return new ya(t).toPromise()}function Kh(){const t=indexedDB.open(Q1,g2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wc,{keyPath:Y1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wc)?e(r):(r.close(),await y2(),e(await Kh()))})})}async function Vv(t,e,n){const r=uu(t,!0).put({[Y1]:e,value:n});return new ya(r).toPromise()}async function v2(t,e){const n=uu(t,!1).get(e),r=await new ya(n).toPromise();return r===void 0?null:r.value}function Mv(t,e){const n=uu(t,!0).delete(e);return new ya(n).toPromise()}const _2=800,x2=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>x2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cu._getInstance(m2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await f2(),!this.activeServiceWorker)return;this.sender=new d2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kh();return await Vv(e,xc,"1"),await Mv(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>v2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=uu(i,!1).getAll();return new ya(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const w2=J1;new ma(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e){return e?Un(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends B1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return us(e,this._buildIdpRequest())}_linkToIdToken(e,n){return us(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return us(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function S2(t){return r2(t.auth,new Gp(t),t.bypassAuthState)}function T2(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),n2(n,new Gp(t),t.bypassAuthState)}async function I2(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),t2(n,new Gp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S2;case"linkViaPopup":case"linkViaRedirect":return I2;case"reauthViaPopup":case"reauthViaRedirect":return T2;default:Yn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new ma(2e3,1e4);class Xi extends X1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Xi.currentPopupAction&&Xi.currentPopupAction.cancel(),Xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C2.get())};e()}}Xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="pendingRedirect",Al=new Map;class j2 extends X1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Al.get(this.auth._key());if(!e){try{const r=await b2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Al.set(this.auth._key(),e)}return this.bypassAuthState||Al.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b2(t,e){const n=A2(e),r=N2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function R2(t,e){Al.set(t._key(),e)}function N2(t){return Un(t._redirectPersistence)}function A2(t){return Nl(k2,t.config.apiKey,t.name)}async function P2(t,e,n=!1){if(Jt(t.app))return Promise.reject(Nr(t));const r=lu(t),i=E2(r,e),a=await new j2(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=10*60*1e3;class D2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Z1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,e={}){return Ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F2=/^https?/;async function U2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V2(t);for(const n of e)try{if(B2(n))return}catch{}Yn(t,"unauthorized-domain")}function B2(t){const e=Hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!F2.test(n))return!1;if(M2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new ma(3e4,6e4);function Uv(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function z2(t){return new Promise((e,n)=>{var r,i,s;function a(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(Cn(t,"network-request-failed"))},timeout:$2.get()})}if(!((i=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=kn().gapi)===null||s===void 0)&&s.load)a();else{const c=HA("iframefcb");return kn()[c]=()=>{gapi.load?a():n(Cn(t,"network-request-failed"))},WA(`${qA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Pl=null,e})}let Pl=null;function W2(t){return Pl=Pl||z2(t),Pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new ma(5e3,15e3),H2="__/auth/iframe",G2="emulator/auth/iframe",K2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y2(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$p(e,G2):`https://${t.config.authDomain}/${H2}`,r={apiKey:e.apiKey,appName:t.name,v:Ti},i=Q2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${da(r).slice(1)}`}async function J2(t){const e=await W2(t),n=kn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:Y2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Cn(t,"network-request-failed"),c=kn().setTimeout(()=>{s(a)},q2.get());function u(){kn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z2=500,eP=600,tP="_blank",nP="http://localhost";class Bv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rP(t,e,n,r=Z2,i=eP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},X2),{width:r.toString(),height:i.toString(),top:s,left:a}),d=Et().toLowerCase();n&&(c=P1(d)?tP:n),N1(d)&&(e=e||nP,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[k,I])=>`${m}${k}=${I},`,"");if(LA(d)&&c!=="_self")return iP(e||"",c),new Bv(null);const g=window.open(e||"",c,h);re(g,t,"popup-blocked");try{g.focus()}catch{}return new Bv(g)}function iP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="__/auth/handler",oP="emulator/auth/handler",aP=encodeURIComponent("fac");async function $v(t,e,n,r,i,s){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ti,eventId:i};if(e instanceof $1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",hk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries(s||{}))a[h]=g}if(e instanceof ga){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${aP}=${encodeURIComponent(u)}`:"";return`${lP(t)}?${da(c).slice(1)}${d}`}function lP({config:t}){return t.emulator?$p(t,oP):`https://${t.authDomain}/${sP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="webStorageSupport";class cP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G1,this._completeRedirectFn=P2,this._overrideRedirectResult=R2}async _openPopup(e,n,r,i){var s;Jn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await $v(e,n,r,Hh(),i);return rP(e,a,Hp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $v(e,n,r,Hh(),i);return h2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Jn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await J2(e),r=new D2(e);return n.register("authEvent",i=>(re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ed,{type:Ed},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ed];a!==void 0&&n(!!a),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=U2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M1()||A1()||Wp()}}const uP=cP;var zv="@firebase/auth",Wv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fP(t){gi(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},d=new $A(r,i,s,u);return KA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gi(new Or("auth-internal",e=>{const n=lu(e.getProvider("auth").getImmediate());return(r=>new dP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(zv,Wv,hP(t)),Tn(zv,Wv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=5*60,mP=bx("authIdTokenMaxAge")||pP;let qv=null;const gP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mP)return;const i=n==null?void 0:n.token;qv!==i&&(qv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Hv(t=rp()){const e=zc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GA(t,{popupRedirectResolver:uP,persistence:[w2,c2,G1]}),r=bx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=gP(s.toString());s2(n,a,()=>a(n.currentUser)),i2(n,c=>a(c))}}const i=Cx("auth");return i&&QA(n,`http://${i}`),n}function yP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Cn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",yP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fP("Browser");const Ec={apiKey:"AIzaSyDnW41I_neRyhZpON7BATvRMtBPSQmA9ds",authDomain:"iiwata-onboarding-demo01.firebaseapp.com",projectId:"iiwata-onboarding-demo01",storageBucket:"iiwata-onboarding-demo01.firebasestorage.app",messagingSenderId:"904336590646",appId:"1:904336590646:web:4ebc30b2e3efeb85da1597",measurementId:"G-BR5RKSR8TH"},eE=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("172.31.");let ao,ll,cl,Pi;const vP=()=>{try{return ao=Sh(Ec),console.log("Firebaseアプリ初期化成功"),Pi=Hv(ao),console.log("匿名認証を試みます"),e2(Pi).then(()=>{console.log("匿名認証に成功しました")}).catch(t=>{console.error("匿名認証に失敗しました:",t),console.warn("認証エラーが発生しましたが、アプリは継続して動作します")}),o2(Pi,t=>{t?console.log("認証状態: ログイン済み",t.uid):console.log("認証状態: 未ログイン")}),ll=Bh(ao),cl=qh(ao),{firebaseApp:ao,firebaseAuth:Pi,firestoreDB:ll,firebaseStorage:cl}}catch(t){if(t.code==="app/duplicate-app"){console.log("Firebaseはすでに初期化されています");try{const e=Sh(Ec,"secondary");return Pi=Hv(e),ll=Bh(e),cl=qh(e),{firebaseApp:e,firebaseAuth:Pi,firestoreDB:ll,firebaseStorage:cl}}catch(e){throw console.error("Secondary Firebase初期化エラー:",e),e}}else throw console.error("Firebase初期化エラー:",t),t}},{firebaseApp:o4,firebaseAuth:a4,firestoreDB:Ee,firebaseStorage:xt}=vP();console.log(`Firebase環境: ${eE?"開発環境":"本番環境"}`);console.log(`FirebaseプロジェクトID: ${Ec.projectId}`);console.log(`Firebaseストレージバケット: ${Ec.storageBucket}`);const _P=({userName:t,daysUntilJoining:e})=>{const[n,r]=b.useState([]),[i,s]=b.useState(!0),[a,c]=b.useState(null),u=new Date,d=180*24*60*60*1e3;b.useEffect(()=>{(async()=>{try{s(!0);const k=Ot(Ee,"employees"),I=Ln(k,si("status","==","active"),ei("join_date","desc")),x=await Dt(I),N=[];for(const S of x.docs){const _=S.data(),j=S.id;if(_.join_date){const P=new Date(_.join_date),D=u-P;if(D>=0&&D<=d){let A=null;try{const E=$r(xt,`employee-photos/${j}.png`);A=await Br(E)}catch(E){console.log(`社員 ${j} の写真が見つかりません:`,E),A="/images/default_emp_icon.png"}N.push({empNo:j,full_name_local:_.full_name_local,join_date:_.join_date,division_code:_.division_code,days_since_joining:Math.floor(D/864e5),photoURL:A})}}}N.sort((S,_)=>new Date(_.join_date)-new Date(S.join_date)),r(N),s(!1)}catch(k){console.error("新入社員データの取得エラー:",k),c("新入社員データの取得に失敗しました。"),s(!1)}})()},[]);const h=m=>{const k={COR:"コーポレート本部",ENG:"エンジニアリング部門",PRJ:"プロジェクト部門",SLS:"セールス部門",BRD:"取締役会"},I=m==null?void 0:m.split("-")[0];return k[I]||m},g=m=>new Date(m).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"});return o.jsxs("div",{className:"welcome-container",children:[o.jsx("header",{className:"welcome-header",children:o.jsxs("h1",{children:["ようこそ、",t,"さん！"]})}),o.jsxs("main",{className:"welcome-main",children:[o.jsxs("div",{className:"card welcome-card",children:[o.jsx("img",{src:"/images/welcome-team.png",alt:"ウェルカムイメージ",className:"welcome-img"}),o.jsx("h2",{children:"あなたの入社を心待ちにしています！"}),o.jsx("p",{children:"一緒に準備を進めましょう。"}),o.jsx(Le,{to:"/dashboard",children:o.jsx("button",{className:"welcome-button",children:"はじめる"})})]}),o.jsxs("div",{className:"card new-employees-card",children:[o.jsx("h2",{children:"最近入社した新しい仲間たち"}),i?o.jsx("p",{children:"読み込み中..."}):a?o.jsx("p",{className:"error-message",children:a}):o.jsx("div",{className:"new-employees-grid",children:n.map(m=>o.jsxs("div",{className:"employee-card",children:[o.jsx("img",{src:m.photoURL,alt:`${m.full_name_local}の写真`,className:"employee-photo",onError:k=>{k.target.src="/images/default_emp_icon.png"}}),o.jsxs("div",{className:"employee-info",children:[o.jsx("h3",{children:m.full_name_local}),o.jsx("p",{className:"employee-division",children:h(m.division_code)}),o.jsxs("p",{className:"employee-join-date",children:["入社日: ",g(m.join_date)]}),o.jsxs("p",{className:"employee-days",children:[m.days_since_joining,"日前に入社"]})]})]},m.empNo))})]})]}),o.jsxs("footer",{className:"welcome-footer",children:["入社日まであと ",o.jsx("strong",{children:e})," 日です！"]})]})},xP=`
  .welcome-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .welcome-header {
    text-align: center;
    margin-bottom: 30px;
  }
  
  .welcome-main {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }
  
  .card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
  }
  
  .welcome-card {
    text-align: center;
  }
  
  .welcome-img {
    max-width: 100%;
    height: auto;
    margin-bottom: 20px;
    border-radius: 8px;
  }
  
  .welcome-button {
    background: #4285F4;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 15px;
  }
  
  .welcome-button:hover {
    background: #3367D6;
  }
  
  .new-employees-card h2 {
    margin-bottom: 20px;
    text-align: center;
  }
  
  .new-employees-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
  }
  
  .employee-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    border-radius: 8px;
    background: #f9f9f9;
    transition: transform 0.2s;
  }
  
  .employee-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }
  
  .employee-photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 15px;
    border: 3px solid white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }
  
  .employee-info {
    text-align: center;
    width: 100%;
  }
  
  .employee-info h3 {
    margin: 0 0 5px;
    font-size: 16px;
  }
  
  .employee-division {
    color: #666;
    font-size: 14px;
    margin: 5px 0;
    background: #e9f0fe;
    padding: 3px 8px;
    border-radius: 12px;
    display: inline-block;
  }
  
  .employee-join-date {
    font-size: 12px;
    color: #666;
    margin: 5px 0;
  }
  
  .employee-days {
    font-size: 12px;
    color: #4285F4;
    font-weight: bold;
    margin: 5px 0;
  }
  
  .welcome-footer {
    text-align: center;
    margin-top: 30px;
    padding: 15px;
    background: #f5f5f5;
    border-radius: 8px;
  }
  
  .error-message {
    color: #F44336;
    text-align: center;
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.innerHTML=xP,document.head.appendChild(t)}const wP=({daysUntilJoining:t,toggleJoiningStatus:e})=>{const{progress:n,calculateTotalProgress:r,resetProgress:i}=Bc(),s=r(),[a,c]=b.useState(!1);b.useEffect(()=>{c(t<=0)},[t]);const u=()=>{window.confirm("進捗状況をリセットしますか？この操作は元に戻せません。")&&i()};return o.jsxs("div",{children:[o.jsx("header",{children:o.jsx("h1",{children:a?"オンボーディングダッシュボード":"入社準備ダッシュボード"})}),o.jsx("main",{children:a?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"デイリーチェックイン・チェックアウト"}),o.jsx("p",{children:"毎日の気分や状況を共有しましょう。"}),o.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"15px"},children:[o.jsx(Le,{to:"/morning-checkin",children:o.jsx("button",{style:{backgroundColor:"#4285f4"},children:"朝のチェックイン"})}),o.jsx(Le,{to:"/evening-checkout",children:o.jsx("button",{style:{backgroundColor:"#34a853"},children:"夕方のチェックアウト"})})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"週次サーベイ"}),o.jsx("p",{children:"週に一度、オンボーディングに関するフィードバックをお願いします。"}),o.jsx(Le,{to:"/weekly-survey",children:o.jsx("button",{style:{backgroundColor:"#673ab7"},children:"サーベイに回答する"})})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"人事への質問・お問い合わせ"}),o.jsx("p",{children:"気になることはお気軽にご質問ください。"}),o.jsx(Le,{to:"/question",children:o.jsx("button",{children:"質問する"})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card progress-overview",children:[o.jsx("h3",{children:"入社準備の進捗"}),o.jsx("div",{className:"progress-bar-container",children:o.jsx("div",{className:"progress-bar",style:{width:`${s}%`}})}),o.jsxs("div",{className:"progress-text",children:[s,"% 完了"]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"入社までにご確認頂くこと"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsxs("span",{children:["規定・書類の確認（",n.documents.completed,"/",n.documents.total,"件）"]}),o.jsx(Le,{to:"/documents",children:o.jsx("button",{className:"float-right",children:"＞"})})]}),o.jsxs("li",{children:[o.jsx("span",{children:"入社日に持参するもの"}),o.jsx(Le,{to:"/items",children:o.jsx("button",{className:"float-right",children:"＞"})})]}),o.jsxs("li",{children:[o.jsx("span",{children:"社員からのメッセージ"}),o.jsx(Le,{to:"/messages",children:o.jsx("button",{className:"float-right",children:"＞"})})]})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"人事への質問・お問い合わせ"}),o.jsx("p",{children:"気になることはお気軽にご質問ください。"}),o.jsx(Le,{to:"/question",children:o.jsx("button",{children:"質問する"})})]})]})}),o.jsxs("footer",{children:[a?o.jsx(o.Fragment,{children:"入社おめでとうございます！"}):o.jsxs(o.Fragment,{children:["入社日まであと ",o.jsx("strong",{children:t})," 日です！",s>0&&o.jsx("button",{className:"reset-button",onClick:u,title:"進捗状況をリセットします",children:"進捗をリセット"})]}),o.jsx("div",{style:{marginTop:"5px",textAlign:"right",paddingRight:"10px"},children:o.jsx("button",{onClick:e,style:{padding:"2px 4px",backgroundColor:"transparent",border:"1px solid rgba(221, 221, 221, 0.3)",borderRadius:"2px",cursor:"pointer",fontSize:"8px",color:"rgba(153, 153, 153, 0.5)",opacity:.5,boxShadow:"none",outline:"none"},children:"切替"})})]})]})},EP=({daysUntilJoining:t})=>{const[e,n]=b.useState(1),r=4,i=xe(),{progress:s,markItemCompleted:a,markCategoryCompleted:c}=Bc(),u=s.documents.items[e-1],d=u&&u.completed,h=[{title:"就業規則",content:"この会社で勤務するにあたっての基本的なルールや働き方のガイドラインについて記載されています。よく確認してください。",pdfUrl:"/documents/rule_general.pdf"},{title:"リモートワーク規定",content:"リモートワークに関するルールや実施方法について記載されています。よく確認してください。",pdfUrl:"/documents/rule_remotework.pdf"},{title:"秘密保持契約書",content:"会社の機密情報の取り扱いについて定めています。内容をよく理解した上で入社時に署名していただきます。",pdfUrl:"/documents/nda.pdf"},{title:"個人情報の取り扱いに関する同意書",content:"当社が収集する個人情報の種類、利用目的、管理方法などについて記載されています。内容をよく確認してください。",pdfUrl:"/documents/personalinfo_agreement.pdf"}],g=()=>{e<r?n(e+1):i("/dashboard")},m=()=>{e>1?n(e-1):i("/dashboard")};return o.jsxs("div",{children:[o.jsx("header",{children:o.jsxs("h1",{children:["規定・書類の確認 (",e,"/",r,")"]})}),o.jsxs("main",{children:[o.jsxs("div",{className:"nav",children:[o.jsx("button",{onClick:m,children:"戻る"}),o.jsx("button",{onClick:g,children:"次へ"})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:h[e-1].title}),o.jsx("p",{children:h[e-1].content}),o.jsx("div",{className:"pdf-viewer",children:o.jsx("object",{data:h[e-1].pdfUrl,type:"application/pdf",width:"100%",height:"500px",children:o.jsxs("p",{children:["PDFを表示できません。 ",o.jsx("a",{href:h[e-1].pdfUrl,target:"_blank",rel:"noopener noreferrer",children:"こちら"}),"から開いてください。"]})})})]}),d?o.jsxs("div",{className:"completed-status",children:[u.completedAt," に確認済み"]}):o.jsx("button",{className:"full-width",onClick:()=>{a("documents",`doc${e}`),g()},children:"確認しました"})]}),o.jsxs("footer",{children:["入社日まであと ",o.jsx("strong",{children:t})," 日です！"]})]})},SP=({daysUntilJoining:t})=>{const{progress:e,markCategoryCompleted:n}=Bc(),r=e.items.completed===e.items.total,i=r?e.items.items.find(a=>a.completed):null,s=[{title:"人事関係",items:["健康診断個人票","健康診断の領収書","パスポート・在留カード（外国人むけ）"]},{title:"給与関係",items:["年金手帳","雇用（失業保険）保険被保険者証","扶養控除等申請書","源泉徴収票","住民税の特別徴収にかかる異動届"]}];return o.jsxs("div",{children:[o.jsx("header",{children:o.jsx("h1",{children:"入社日に持参するもの"})}),o.jsxs("main",{children:[o.jsx("div",{className:"nav",children:o.jsx(Le,{to:"/dashboard",children:o.jsx("button",{children:"戻る"})})}),s.map((a,c)=>o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:a.title}),o.jsx("ol",{className:"items-list",children:a.items.map((u,d)=>o.jsx("li",{children:u},d))})]},c)),o.jsx("div",{className:"card",children:o.jsxs("p",{className:"note",children:[o.jsx("strong",{children:"注意事項："})," 上記の書類は入社日当日に必要となります。 忘れずに持参してください。書類に不備がある場合、手続きが遅れる可能性があります。"]})}),r?o.jsxs("div",{className:"completed-status",children:[i&&i.completedAt," に確認済み",o.jsx(Le,{to:"/dashboard",children:o.jsx("button",{className:"secondary-button mt-10",children:"ダッシュボードに戻る"})})]}):o.jsx(Le,{to:"/dashboard",children:o.jsx("button",{className:"full-width",onClick:()=>n("items"),children:"確認しました"})})]}),o.jsxs("footer",{children:["入社日まであと ",o.jsx("strong",{children:t})," 日です！"]})]})},TP=({daysUntilJoining:t})=>{const{progress:e,markItemCompleted:n,markCategoryCompleted:r}=Bc(),[i,s]=b.useState({}),[a,c]=b.useState({}),[u,d]=b.useState(null),h=[{name:"吉村 和夫",position:"第二技術三課 マネージャー",preview:"渡辺さん、いよいよですね。チーム全員で入社をお待ちしています！",full:"渡辺さん、いよいよですね。チーム全員で入社をお待ちしています！",image:"/images/1056.png",short:!0},{name:"西尾 道夫",position:"第二技術部 部長",preview:"渡辺さん、ご入社まで後少しですね。いかがお過ごしですか？...",full:"渡辺さん、ご入社まで後少しですね。いかがお過ごしですか？<br>面接で伺った、技術への興味を、ご入社後も持ち続けて頂いて、より幅広いエンジニアとして活躍して頂けることを楽しみにしています。<br>第二技術部全体で、ご入社を歓迎します！",image:"/images/1019.png",short:!1},{name:"鈴木 清",position:"エンジニアリング本部 本部長",preview:"渡辺さん、初めまして、鈴木と申します。...",full:"渡辺さん、初めまして、鈴木と申します。<br>エンジニアリング本部のメンバーとしてJoinいただけるのを心待ちにしています。<br>普段はフロアをうろうろしていますので、見かけたら気軽にお声かけくださいね！<br>私も、お見かけしたらお声かけしますので、逃げないでくださいね（笑）。<br><br>元気にご入社頂けるのを、楽しみにしています！",image:"/images/1032.png",short:!1}];b.useEffect(()=>{const S={};h.forEach((_,j)=>{S[j]={icon:"👍",text:"いいね！",active:!1}}),c(S)},[]);const g=S=>{s(_=>({..._,[S]:!_[S]})),n("messages",`msg${S+1}`)},m=(S,_)=>{_&&d(S)},k=()=>{d(null)},I=(S,_,j)=>{c(P=>({...P,[S]:{icon:_,text:j,active:!0}})),d(null),n("messages",`msg${S+1}`)},x=S=>{c(_=>({..._,[S]:{..._[S],active:!_[S].active}})),n("messages",`msg${S+1}`)},N=()=>{window.history.back()};return o.jsxs("div",{className:"messages-page",children:[o.jsx("div",{className:"header",children:"社員からのメッセージ"}),o.jsxs("div",{className:"content",children:[h.map((S,_)=>{var j,P,D;return o.jsxs("div",{className:`message-container ${i[_]?"expanded":""} ${S.short?"message-short":""}`,children:[o.jsxs("div",{className:"profile-section",children:[o.jsx("img",{src:S.image,alt:`${S.name}の写真`,className:"profile-image",onError:A=>{A.target.onerror=null,A.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Ccircle cx='30' cy='30' r='30' fill='%23ddd'/%3E%3Ccircle cx='30' cy='25' r='8' fill='%23999'/%3E%3Cpath d='M15 45c0-8 7-12 15-12s15 4 15 12' fill='%23999'/%3E%3C/svg%3E"}}),o.jsxs("div",{className:"profile-info",children:[o.jsx("div",{className:"name",children:S.name}),o.jsx("div",{className:"position",children:S.position}),o.jsxs("div",{className:"message-content",onClick:()=>g(_),children:[o.jsx("div",{className:"message-preview",style:{display:i[_]?"none":"block"},children:S.preview}),o.jsx("div",{className:"message-full",style:{display:i[_]?"block":"none"},dangerouslySetInnerHTML:{__html:S.full}})]}),o.jsxs("div",{className:"reaction-container",style:{display:i[_]||S.short?"block":"none"},children:[o.jsxs("button",{className:`like-button ${(j=a[_])!=null&&j.active?"liked":""}`,onClick:()=>x(_),onMouseEnter:()=>m(_,!0),onMouseLeave:()=>m(_,!1),children:[o.jsx("span",{className:"reaction-icon",children:(P=a[_])==null?void 0:P.icon}),o.jsx("span",{className:"reaction-text",children:(D=a[_])==null?void 0:D.text})]}),o.jsxs("div",{className:`reaction-popup ${u===_?"show":""}`,onMouseEnter:()=>d(_),onMouseLeave:k,children:[o.jsx("button",{className:"reaction-option",onClick:()=>I(_,"👍","いいね！"),title:"いいね",children:"👍"}),o.jsx("button",{className:"reaction-option",onClick:()=>I(_,"❤️","超いいね！"),title:"超いいね",children:"❤️"}),o.jsx("button",{className:"reaction-option",onClick:()=>I(_,"😊","うれしいね"),title:"うれしいね",children:"😊"}),o.jsx("button",{className:"reaction-option",onClick:()=>I(_,"😮","すごいね"),title:"すごいね",children:"😮"}),o.jsx("button",{className:"reaction-option",onClick:()=>I(_,"👏","おめでとう"),title:"おめでとう",children:"👏"})]})]})]})]}),o.jsx("div",{className:"expand-icon",onClick:()=>g(_),children:"＞"})]},_)}),o.jsx("button",{className:"back-button",onClick:N,children:"戻る"})]}),o.jsxs("div",{className:"footer",children:["入社日まであと ",o.jsx("strong",{children:t})," 日です！"]})]})},IP=({daysUntilJoining:t})=>{const[e,n]=b.useState(""),[r,i]=b.useState("form");xe();const s=[{name:"原田 一郎",position:"第一営業二課 マネージャー",image:"/images/1085.png"},{name:"野村 育子",position:"第一営業部 部長",image:"/images/1012.png"},{name:"小林 美樹",position:"営業本部 本部長",image:"/images/1057.png"}],a=g=>{g.preventDefault(),i("confirm")},c=()=>{i("complete")},u=()=>o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"感謝のメッセージを送る"}),o.jsx("p",{className:"note",children:"以下の方々全員にメッセージが送信されます："}),o.jsx("div",{className:"recipients-list",children:s.map((g,m)=>o.jsxs("div",{className:"recipient-item",children:[o.jsx("img",{src:g.image,alt:g.name,className:"recipient-avatar"}),o.jsxs("div",{children:[o.jsx("div",{className:"recipient-name",children:g.name}),o.jsx("div",{className:"recipient-position",children:g.position})]})]},m))}),o.jsxs("form",{onSubmit:a,children:[o.jsx("label",{htmlFor:"message",children:"メッセージ"}),o.jsx("textarea",{id:"message",rows:"5",placeholder:"感謝のメッセージを入力してください",value:e,onChange:g=>n(g.target.value),required:!0}),o.jsx("button",{type:"submit",className:"full-width",children:"確認する"})]})]}),d=()=>o.jsxs("div",{className:"card",children:[o.jsx("h3",{children:"メッセージの確認"}),o.jsxs("div",{className:"confirm-item",children:[o.jsx("strong",{children:"宛先："}),o.jsxs("p",{children:[s.map(g=>g.name).join("、")," 宛"]})]}),o.jsxs("div",{className:"confirm-item",children:[o.jsx("strong",{children:"メッセージ内容："}),o.jsx("p",{style:{whiteSpace:"pre-wrap"},children:e})]}),o.jsxs("div",{className:"button-group",children:[o.jsx("button",{onClick:()=>i("form"),className:"secondary-button",children:"戻る"}),o.jsx("button",{onClick:c,className:"primary-button",children:"送信する"})]})]}),h=()=>o.jsxs("div",{className:"card completion-card",children:[o.jsx("div",{className:"checkmark",children:"✓"}),o.jsx("h3",{children:"メッセージを送信しました"}),o.jsx("p",{children:"あなたの感謝の気持ちが伝わりました。"}),o.jsx(Le,{to:"/completion",children:o.jsx("button",{className:"full-width",children:"入社準備を完了する"})})]});return o.jsxs("div",{children:[o.jsx("header",{children:o.jsx("h1",{children:"感謝の返信"})}),o.jsxs("main",{children:[r==="form"&&u(),r==="confirm"&&d(),r==="complete"&&h()]}),o.jsxs("footer",{children:["入社日まであと ",o.jsx("strong",{children:t})," 日です！"]})]})},CP=({daysUntilJoining:t})=>{const[e,n]=b.useState(""),[r,i]=b.useState(""),[s,a]=b.useState("form"),c=xe(),u=I=>{I.preventDefault(),a("confirm")},d=()=>{a("complete")},h=()=>{c("/dashboard")},g=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card faq",children:[o.jsx("h4",{children:"よくある質問"}),o.jsxs("div",{className:"faq-item",children:[o.jsx("strong",{children:"Q."})," 服装はどのようなものが望ましいですか？",o.jsx("br",{}),o.jsx("strong",{children:"A."})," ビジネスカジュアルでお願いします。"]}),o.jsxs("div",{className:"faq-item",children:[o.jsx("strong",{children:"Q."})," 出社初日の持ち物はありますか？",o.jsx("br",{}),o.jsx("strong",{children:"A."})," 身分証明書と銀行口座情報をお持ちください。"]})]}),o.jsxs("form",{onSubmit:u,className:"card",children:[o.jsx("h4",{children:"質問フォーム"}),o.jsx("label",{htmlFor:"subject",children:"件名"}),o.jsx("input",{type:"text",id:"subject",placeholder:"件名を入力",value:e,onChange:I=>n(I.target.value),required:!0}),o.jsx("label",{htmlFor:"content",children:"質問内容"}),o.jsx("textarea",{id:"content",rows:"5",placeholder:"質問内容を入力",value:r,onChange:I=>i(I.target.value),required:!0}),o.jsx("button",{type:"submit",className:"full-width",children:"送信する"})]})]}),m=()=>o.jsxs("div",{className:"card",children:[o.jsx("h4",{children:"入力内容の確認"}),o.jsxs("div",{className:"confirm-item",children:[o.jsx("strong",{children:"件名："}),o.jsx("p",{children:e})]}),o.jsxs("div",{className:"confirm-item",children:[o.jsx("strong",{children:"質問内容："}),o.jsx("p",{style:{whiteSpace:"pre-wrap"},children:r})]}),o.jsxs("div",{className:"button-group",children:[o.jsx("button",{onClick:()=>a("form"),className:"secondary-button",children:"戻る"}),o.jsx("button",{onClick:d,className:"primary-button",children:"送信"})]})]}),k=()=>o.jsxs("div",{className:"card completion-card",children:[o.jsx("div",{className:"checkmark",children:"✓"}),o.jsx("h3",{children:"送信しました"}),o.jsx("p",{children:"質問を受け付けました。回答をお待ちください。"}),o.jsx("button",{onClick:h,className:"full-width",children:"ホームへ戻る"})]});return o.jsxs("div",{children:[o.jsx("header",{children:o.jsx("h1",{children:"人事への質問・お問い合わせ"})}),o.jsxs("main",{children:[s==="form"&&g(),s==="confirm"&&m(),s==="complete"&&k()]}),o.jsxs("footer",{children:["入社日まであと ",o.jsx("strong",{children:t})," 日です！"]})]})},kP=({daysUntilJoining:t})=>o.jsxs("div",{children:[o.jsx("header",{children:o.jsx("h1",{children:"入社準備完了！"})}),o.jsx("main",{children:o.jsxs("div",{className:"card completion-card",children:[o.jsx("div",{className:"checkmark",children:"✔︎"}),o.jsx("h2",{children:"全ての準備が整いました！"}),o.jsxs("p",{children:["入社日まであと",o.jsx("strong",{children:t}),"日です！",o.jsx("br",{}),"私たちも楽しみに待っています！"]}),o.jsx(Le,{to:"/dashboard",children:o.jsx("button",{className:"welcome-button",children:"ホームに戻る"})})]})}),o.jsx("footer",{children:"ご不明点はお気軽に人事までご連絡ください。"})]}),jP=()=>{const t=xe(),[e,n]=b.useState(1),[r,i]=b.useState(""),[s,a]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(""),[g,m]=b.useState(0);b.useEffect(()=>{if(g>0){const P=setTimeout(()=>m(g-1),1e3);return()=>clearTimeout(P)}},[g]);const k=P=>String(P).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),I=()=>"987654",x=(P,D)=>(console.log(`送信先: ${P}, OTP: ${D}`),!0),N=P=>{if(P.preventDefault(),h(""),!k(r)){h("正しいメールアドレスを入力してください"),i("");return}if(r.toLowerCase()!=="iiwata@gmail.com"){h("登録されていないメールアドレスです"),i("");return}const D=I();u(D),x(r,D),n(2),m(300)},S=P=>{P.preventDefault(),h(""),s===c?t("/welcome"):h("OTPが正しくありません。もう一度お試しください。")},_=()=>{if(g>0)return;const P=I();u(P),x(r,P),m(300),h("")},j=()=>{const P=Math.floor(g/60),D=g%60;return`${P}:${D<10?"0":""}${D}`};return o.jsx("div",{className:"container",children:o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h2",{children:"WellCo オンボーディング"})}),o.jsx("div",{className:"card-body",children:e===1?o.jsxs("form",{onSubmit:N,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("h3",{children:"メールアドレスを入力してください"}),o.jsx("p",{children:"登録されているメールアドレスにワンタイムパスワードを送信します。"}),o.jsx("input",{type:"email",value:r,onChange:P=>i(P.target.value),placeholder:"メールアドレス",required:!0,className:"form-control"})]}),d&&o.jsx("div",{className:"error-message",children:d}),o.jsx("button",{type:"submit",className:"btn btn-primary",children:"ワンタイムパスワードを送信"})]}):o.jsxs("form",{onSubmit:S,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("h3",{children:"ワンタイムパスワードを入力してください"}),o.jsxs("p",{children:[r," に6桁のワンタイムパスワードを送信しました。",o.jsx("br",{}),"メールに記載されたコードを入力してください。"]}),o.jsxs("p",{className:"demo-note",children:[o.jsx("strong",{children:"デモ用注意:"})," ワンタイムパスワードは ",o.jsx("strong",{children:"987654"})," です。"]}),o.jsx("input",{type:"text",value:s,onChange:P=>a(P.target.value),placeholder:"6桁のコード",maxLength:6,required:!0,className:"form-control otp-input"}),o.jsx("div",{className:"countdown",children:g>0?o.jsxs("span",{children:["有効期限: ",j()]}):o.jsx("span",{className:"expired",children:"有効期限が切れました"})})]}),d&&o.jsx("div",{className:"error-message",children:d}),o.jsxs("div",{className:"button-group",children:[o.jsx("button",{type:"button",onClick:()=>n(1),className:"btn btn-secondary",children:"戻る"}),o.jsx("button",{type:"button",onClick:_,className:`btn btn-outline ${g>0?"disabled":""}`,disabled:g>0,children:"再送信"}),o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g===0,children:"確認"})]})]})}),o.jsx("div",{className:"card-footer",children:o.jsx("p",{children:"© 2025 WellCo. All rights reserved."})})]})})},bP=()=>{const[t,e]=b.useState(null),[n,r]=b.useState(null),[i,s]=b.useState(""),a=xe(),c=h=>{e(h)},u=h=>{r(h)},d=()=>{if(!t||!n){s("回答されていません");return}s("");const h={type:"morning_checkin",mood:t,feeling:n,timestamp:new Date().toISOString()};console.log("朝のチェックインデータ:",h),localStorage.setItem("morningCheckin",JSON.stringify(h)),a("/morning-thanks")};return o.jsx("div",{className:"container",style:pt.container,children:o.jsxs("div",{className:"card",style:pt.card,children:[o.jsx("div",{className:"card-header",style:pt.cardHeader,children:"朝のチェックイン"}),o.jsxs("div",{className:"card-body",style:pt.cardBody,children:[o.jsx("div",{className:"question",style:pt.question,children:"今朝の気分は？"}),o.jsx("div",{className:"emoji-buttons",style:pt.emojiButtons,children:["😄","😊","😐","🙁","😣"].map(h=>o.jsx("button",{className:`emoji-button ${t===h?"selected":""}`,style:{...pt.emojiButton,...t===h?pt.selectedEmojiButton:{}},onClick:()=>c(h),children:h},h))}),o.jsx("div",{className:"question",style:pt.question,children:"今日最も当てはまるものは？"}),o.jsx("div",{className:"option-buttons",style:pt.optionButtons,children:["新しいことを学ぶことに期待している","同僚との交流を楽しみにしている","業務について少し不安がある"].map(h=>o.jsxs("button",{className:`option-button ${n===h?"selected":""}`,style:{...pt.optionButton,...n===h?pt.selectedOptionButton:{}},onClick:()=>u(h),children:[n===h?"☑️ ":"",o.jsx("span",{style:{fontWeight:n===h?"bold":"normal"},children:h})]},h))}),i&&o.jsx("div",{style:pt.errorMessage,children:i}),o.jsx("button",{className:"submit-button",style:pt.submitButton,onClick:d,children:"送信"})]}),o.jsx("div",{className:"footer",style:pt.footer,children:o.jsx("a",{href:"#",className:"nav-link",style:pt.navLink,onClick:h=>{h.preventDefault(),a("/evening-checkout")},children:"夕方のチェックアウトへ →"})})]})})},pt={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"30px"},question:{marginBottom:"25px",color:"#202124",fontSize:"18px",fontWeight:"500"},emojiButtons:{display:"flex",justifyContent:"space-between",marginBottom:"40px"},emojiButton:{width:"55px",height:"55px",borderRadius:"50%",border:"2px solid #4285f4",backgroundColor:"white",fontSize:"28px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",transition:"transform 0.2s, background-color 0.2s"},selectedEmojiButton:{backgroundColor:"#e8f0fe",transform:"scale(1.05)",borderWidth:"3px"},optionButtons:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"30px"},optionButton:{padding:"14px 16px",borderRadius:"20px",border:"1px solid #4285f4",textAlign:"left",cursor:"pointer",fontSize:"16px",color:"#4285f4",backgroundColor:"#f0f0f0",transition:"all 0.2s"},selectedOptionButton:{borderWidth:"3px"},submitButton:{display:"block",width:"160px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"18px",margin:"30px auto 0",cursor:"pointer",transition:"background-color 0.2s"},footer:{marginTop:"20px",textAlign:"center",paddingBottom:"20px"},navLink:{color:"#4285f4",textDecoration:"none",fontSize:"14px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},RP=()=>{const[t,e]=b.useState(5),[n,r]=b.useState(null),[i,s]=b.useState(""),a=xe();b.useEffect(()=>{try{const h=JSON.parse(localStorage.getItem("morningCheckin"));h&&h.mood&&console.log("今朝の気分:",h.mood)}catch(h){console.error("朝のデータの読み込みエラー:",h)}},[]);const c=h=>{e(h.target.value)},u=h=>{r(h)},d=()=>{if(!n){s("回答されていません");return}s("");const h={type:"evening_checkout",satisfaction:t,experience:n,timestamp:new Date().toISOString()};console.log("夕方のチェックアウトデータ:",h),localStorage.setItem("eveningCheckout",JSON.stringify(h)),a("/evening-thanks")};return o.jsx("div",{className:"container",style:mt.container,children:o.jsxs("div",{className:"card",style:mt.card,children:[o.jsx("div",{className:"card-header",style:mt.cardHeader,children:"夕方のチェックアウト"}),o.jsxs("div",{className:"card-body",style:mt.cardBody,children:[o.jsx("div",{className:"question",style:mt.question,children:"今日の充実度は？"}),o.jsxs("div",{className:"slider-container",style:mt.sliderContainer,children:[o.jsx("input",{type:"range",min:"1",max:"10",value:t,className:"slider",id:"satisfaction-slider",style:mt.slider,onChange:c}),o.jsxs("div",{className:"slider-labels",style:mt.sliderLabels,children:[o.jsx("span",{children:"あまり充実していなかった"}),o.jsx("span",{children:"非常に充実していた"})]})]}),o.jsx("div",{className:"question",style:mt.question,children:"今日最も当てはまることは？"}),o.jsx("div",{className:"option-buttons",style:mt.optionButtons,children:["新しいことを学べた","チームの一員と感じられた","サポートが必要だと感じた"].map(h=>o.jsxs("button",{className:`option-button ${n===h?"selected":""}`,style:{...mt.optionButton,...n===h?mt.selectedOptionButton:{}},onClick:()=>u(h),children:[n===h?"☑️ ":"",o.jsx("span",{style:{fontWeight:n===h?"bold":"normal"},children:h})]},h))}),i&&o.jsx("div",{style:mt.errorMessage,children:i}),o.jsx("button",{className:"submit-button",style:mt.submitButton,onClick:d,children:"送信"})]}),o.jsx("div",{className:"footer",style:mt.footer,children:o.jsx("a",{href:"#",className:"nav-link",style:mt.navLink,onClick:h=>{h.preventDefault(),a("/morning-checkin")},children:"← 朝のチェックインへ"})})]})})},mt={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"30px"},question:{marginBottom:"25px",color:"#202124",fontSize:"18px",fontWeight:"500"},sliderContainer:{marginBottom:"40px"},slider:{WebkitAppearance:"none",width:"100%",height:"8px",borderRadius:"4px",background:"#e0e0e0",outline:"none",marginBottom:"15px"},sliderLabels:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#5f6368"},optionButtons:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"30px"},optionButton:{padding:"14px 16px",borderRadius:"20px",border:"1px solid #34a853",textAlign:"left",cursor:"pointer",fontSize:"16px",color:"#34a853",backgroundColor:"#f0f0f0",transition:"all 0.2s"},selectedOptionButton:{borderWidth:"3px"},submitButton:{display:"block",width:"160px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"18px",margin:"30px auto 0",cursor:"pointer",transition:"background-color 0.2s"},footer:{marginTop:"20px",textAlign:"center",paddingBottom:"20px"},navLink:{color:"#34a853",textDecoration:"none",fontSize:"14px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},NP=()=>{const t=xe();return o.jsx("div",{className:"container",style:Oi.container,children:o.jsxs("div",{className:"card",style:Oi.card,children:[o.jsx("div",{className:"card-header",style:Oi.cardHeader,children:"朝のチェックイン"}),o.jsxs("div",{className:"card-body",style:Oi.cardBody,children:[o.jsxs("div",{className:"thank-you-message",style:Oi.thankYouMessage,children:["回答ありがとうございます。",o.jsx("br",{}),"今日も良い１日にしていきましょう！"]}),o.jsx("button",{className:"close-button",style:Oi.backButton,onClick:()=>t("/dashboard"),children:"閉じる"})]})]})})},Oi={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"40px 30px",display:"flex",flexDirection:"column",alignItems:"center"},thankYouMessage:{fontSize:"20px",fontWeight:"500",color:"#4285f4",textAlign:"center",marginBottom:"40px",lineHeight:"1.6"},backButton:{display:"block",width:"200px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},AP=()=>{const t=xe();return o.jsx("div",{className:"container",style:Di.container,children:o.jsxs("div",{className:"card",style:Di.card,children:[o.jsx("div",{className:"card-header",style:Di.cardHeader,children:"夕方のチェックアウト"}),o.jsxs("div",{className:"card-body",style:Di.cardBody,children:[o.jsxs("div",{className:"thank-you-message",style:Di.thankYouMessage,children:["回答ありがとうございます。",o.jsx("br",{}),"今日もお疲れ様でした！"]}),o.jsx("button",{className:"close-button",style:Di.backButton,onClick:()=>t("/dashboard"),children:"閉じる"})]})]})})},Di={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"40px 30px",display:"flex",flexDirection:"column",alignItems:"center"},thankYouMessage:{fontSize:"20px",fontWeight:"500",color:"#34a853",textAlign:"center",marginBottom:"40px",lineHeight:"1.6"},backButton:{display:"block",width:"200px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},PP=()=>{const t=xe(),[e,n]=b.useState(1),r=8,[i,s]=b.useState(null),[a,c]=b.useState(null),[u,d]=b.useState(null),[h,g]=b.useState(null),[m,k]=b.useState(""),[I,x]=b.useState(null),[N,S]=b.useState(null),[_,j]=b.useState(""),[P,D]=b.useState(""),[A,E]=b.useState(""),y=Math.round(e/r*100),w=()=>{if(e===1&&i===null){E("回答を選択してください");return}if(e===2&&a===null){E("回答を選択してください");return}if(e===3&&u===null){E("回答を選択してください");return}if(e===4&&h===null){E("回答を選択してください");return}if(e===4&&h==="yes"&&m===""){E("学びの種類を選択してください");return}if(e===5&&I===null){E("回答を選択してください");return}if(e===6&&N===null){E("回答を選択してください");return}E(""),e<r&&n(e+1)},C=()=>{e>1&&(n(e-1),E(""))},v=()=>{const q={overallSatisfaction:i,taskClarity:a,managerSupport:u,newLearning:h,learningType:h==="yes"?m:null,concernLevel:I,selfPerformance:N,memorableEvent:_,otherComments:P,timestamp:new Date().toISOString(),weekNumber:O()};console.log("Weekly Survey Data:",q);const oe=JSON.parse(localStorage.getItem("weeklySurveys")||"[]");oe.push(q),localStorage.setItem("weeklySurveys",JSON.stringify(oe)),t("/weekly-survey-thanks")},O=()=>{const q=new Date,oe=new Date(q.getFullYear(),0,1);return Math.ceil(((q.getTime()-oe.getTime())/864e5+oe.getDay()+1)/7)},R=()=>{switch(e){case 1:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"今週のオンボーディング全体の満足度を教えてください"}),o.jsx("div",{style:G.likertContainer,children:[1,2,3,4,5].map(q=>o.jsxs("div",{style:{...G.likertOption,...i===q?G.selectedLikertOption:{}},onClick:()=>s(q),children:[o.jsx("div",{style:G.likertNumber,children:q}),o.jsx("div",{style:G.likertLabel,children:q===1?"非常に不満":q===2?"不満":q===3?"どちらともいえない":q===4?"満足":"非常に満足"})]},q))})]});case 2:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"今週取り組んだ業務内容は明確でしたか？"}),o.jsx("div",{style:G.likertContainer,children:[1,2,3,4,5].map(q=>o.jsxs("div",{style:{...G.likertOption,...a===q?G.selectedLikertOption:{}},onClick:()=>c(q),children:[o.jsx("div",{style:G.likertNumber,children:q}),o.jsx("div",{style:G.likertLabel,children:q===1?"全く不明確":q===2?"不明確":q===3?"どちらともいえない":q===4?"明確":"非常に明確"})]},q))})]});case 3:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"マネージャー／メンターからのサポートを実感できましたか？"}),o.jsx("div",{style:G.likertContainer,children:[1,2,3,4,5].map(q=>o.jsxs("div",{style:{...G.likertOption,...u===q?G.selectedLikertOption:{}},onClick:()=>d(q),children:[o.jsx("div",{style:G.likertNumber,children:q}),o.jsx("div",{style:G.likertLabel,children:q===1?"全く感じない":q===2?"あまり感じない":q===3?"どちらともいえない":q===4?"感じる":"非常に感じる"})]},q))})]});case 4:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"今週、新しく学んだこと・得た気づきはありますか？"}),o.jsxs("div",{style:G.binaryOptions,children:[o.jsx("div",{style:{...G.binaryOption,...h==="yes"?G.selectedBinaryOption:{}},onClick:()=>g("yes"),children:"有"}),o.jsx("div",{style:{...G.binaryOption,...h==="no"?G.selectedBinaryOption:{}},onClick:()=>g("no"),children:"無"})]}),h==="yes"&&o.jsxs("div",{style:G.dropdownContainer,children:[o.jsx("label",{style:G.dropdownLabel,children:"どのような学びでしたか？"}),o.jsxs("select",{style:G.dropdown,value:m,onChange:q=>k(q.target.value),children:[o.jsx("option",{value:"",children:"選択してください"}),o.jsx("option",{value:"knowledge",children:"知識"}),o.jsx("option",{value:"skill",children:"スキル"}),o.jsx("option",{value:"organization",children:"組織理解"}),o.jsx("option",{value:"other",children:"その他"})]})]})]});case 5:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"今週の業務や職場環境に対して、どの程度不安やモヤモヤを感じましたか？"}),o.jsxs("div",{style:G.emojiContainer,children:[o.jsxs("div",{style:{...G.emojiOption,...I==="none"?G.selectedEmojiOption:{}},onClick:()=>x("none"),children:[o.jsx("div",{style:G.emoji,children:"😃"}),o.jsx("div",{style:G.emojiLabel,children:"問題なし"})]}),o.jsxs("div",{style:{...G.emojiOption,...I==="slight"?G.selectedEmojiOption:{}},onClick:()=>x("slight"),children:[o.jsx("div",{style:G.emoji,children:"😐"}),o.jsx("div",{style:G.emojiLabel,children:"やや気になる"})]}),o.jsxs("div",{style:{...G.emojiOption,...I==="moderate"?G.selectedEmojiOption:{}},onClick:()=>x("moderate"),children:[o.jsx("div",{style:G.emoji,children:"😟"}),o.jsx("div",{style:G.emojiLabel,children:"かなり気になる"})]}),o.jsxs("div",{style:{...G.emojiOption,...I==="severe"?G.selectedEmojiOption:{}},onClick:()=>x("severe"),children:[o.jsx("div",{style:G.emoji,children:"😰"}),o.jsx("div",{style:G.emojiLabel,children:"非常に不安"})]}),o.jsxs("div",{style:{...G.emojiOption,...I==="unknown"?G.selectedEmojiOption:{}},onClick:()=>x("unknown"),children:[o.jsx("div",{style:G.emoji,children:"❓"}),o.jsx("div",{style:G.emojiLabel,children:"どちらともいえない・その他"})]})]})]});case 6:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"あなた自身の1週間のパフォーマンスを自己評価してください"}),o.jsx("div",{style:G.likertContainer,children:[1,2,3,4,5].map(q=>o.jsxs("div",{style:{...G.likertOption,...N===q?G.selectedLikertOption:{}},onClick:()=>S(q),children:[o.jsx("div",{style:G.likertNumber,children:q}),o.jsx("div",{style:G.likertLabel,children:q===1?"全く発揮できなかった":q===2?"あまり発揮できなかった":q===3?"どちらともいえない":q===4?"発揮できた":"十分に発揮できた"})]},q))})]});case 7:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"今週、最も印象に残った出来事や課題は何ですか？（任意）"}),o.jsx("textarea",{style:G.textArea,value:_,onChange:q=>j(q.target.value),placeholder:"自由に記入してください",rows:5})]});case 8:return o.jsxs("div",{style:G.questionContainer,children:[o.jsx("h3",{style:G.questionTitle,children:"その他ご意見・ご要望、相談したいことがあればご記入ください。（任意）"}),o.jsx("textarea",{style:G.textArea,value:P,onChange:q=>D(q.target.value),placeholder:"自由に記入してください",rows:5})]});default:return null}};return o.jsx("div",{style:G.container,children:o.jsxs("div",{style:G.card,children:[o.jsxs("div",{style:G.header,children:[o.jsx("h2",{style:G.title,children:"週次サーベイ"}),o.jsxs("div",{style:G.weekInfo,children:["第",O(),"週"]})]}),o.jsxs("div",{style:G.progressContainer,children:[o.jsxs("div",{style:G.progressText,children:["質問 ",e," / ",r]}),o.jsx("div",{style:G.progressBarContainer,children:o.jsx("div",{style:{...G.progressBar,width:`${y}%`}})})]}),R(),A&&o.jsx("div",{style:G.errorMessage,children:A}),o.jsxs("div",{style:G.buttonContainer,children:[e>1&&o.jsx("button",{style:G.prevButton,onClick:C,children:"前へ"}),e<r?o.jsx("button",{style:G.nextButton,onClick:w,children:"次へ"}):o.jsx("button",{style:G.submitButton,onClick:v,children:"送信"})]})]})})},G={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"600px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},weekInfo:{fontSize:"16px",color:"#666",fontWeight:"500"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},binaryOptions:{display:"flex",justifyContent:"center",gap:"20px",marginBottom:"20px"},binaryOption:{padding:"15px 40px",backgroundColor:"#f0f0f0",borderRadius:"8px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease"},selectedBinaryOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},dropdownContainer:{marginTop:"20px"},dropdownLabel:{display:"block",marginBottom:"10px",fontSize:"16px",color:"#333"},dropdown:{width:"100%",padding:"12px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"#fff"},emojiContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},emojiOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedEmojiOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},emoji:{fontSize:"24px",marginBottom:"8px"},emojiLabel:{fontSize:"12px",color:"#666"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"space-between",marginTop:"30px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",marginLeft:"auto"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",marginLeft:"auto"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},OP=()=>{const t=xe();return o.jsx("div",{style:An.container,children:o.jsxs("div",{style:An.card,children:[o.jsx("div",{style:An.header,children:o.jsx("h2",{style:An.title,children:"週次サーベイ"})}),o.jsxs("div",{style:An.thankYouContainer,children:[o.jsx("div",{style:An.checkmark,children:"✓"}),o.jsx("h3",{style:An.thankYouTitle,children:"回答ありがとうございました"}),o.jsxs("p",{style:An.thankYouMessage,children:["いただいたフィードバックは、より良いオンボーディング体験のために活用させていただきます。",o.jsx("br",{}),"何か質問や懸念事項がある場合は、いつでもマネージャーやHR担当者にお問い合わせください。"]}),o.jsx("button",{style:An.closeButton,onClick:()=>t("/dashboard"),children:"閉じる"})]})]})})},An={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"600px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},thankYouContainer:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},checkmark:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#34a853",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"36px",marginBottom:"20px"},thankYouTitle:{fontSize:"22px",fontWeight:"500",color:"#333",marginBottom:"15px"},thankYouMessage:{fontSize:"16px",color:"#666",textAlign:"center",lineHeight:"1.6",marginBottom:"30px"},closeButton:{padding:"12px 40px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},DP=()=>{const t=xe(),[e,n]=b.useState(1),r=7,[i,s]=b.useState(null),[a,c]=b.useState(null),[u,d]=b.useState(null),[h,g]=b.useState(""),[m,k]=b.useState(""),[I,x]=b.useState(""),[N,S]=b.useState(""),[_,j]=b.useState(null),[P,D]=b.useState(""),A=Math.round(e/r*100),E=()=>{if(e===1&&i===null){D("回答を選択してください");return}if(e===2&&a===null){D("回答を選択してください");return}if(e===3&&u===null){D("回答を選択してください");return}if(e===5&&m===""){D("回答を選択してください");return}if(e===5&&m==="期待以下"&&I===""){D("具体的なギャップについて記入してください");return}if(e===7&&_===null){D("回答を選択してください");return}D(""),e<r&&n(e+1)},y=()=>{e>1&&(n(e-1),D(""))},w=()=>{const v={autonomy:i,relatedness:a,competence:u,managerFeedback:h,companyImpression:m,companyImpressionDetail:m==="期待以下"?I:"",onboardingFeedback:N,overallSatisfaction:_,timestamp:new Date().toISOString(),surveyType:"入社後1か月マンスリーサーベイ"};console.log("Monthly Survey Data (30 days):",v);const O=JSON.parse(localStorage.getItem("monthlySurveys")||"[]");O.push(v),localStorage.setItem("monthlySurveys",JSON.stringify(O)),t("/monthly-survey-thanks")},C=()=>{switch(e){case 1:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-1. 今の業務で、自分の判断で進められる範囲は十分だと感じますか？"}),o.jsx("div",{style:X.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...X.likertOption,...i===v?X.selectedLikertOption:{}},onClick:()=>s(v),children:[o.jsx("div",{style:X.likertNumber,children:v}),o.jsxs("div",{style:X.likertLabel,children:[v===1&&"まったく感じない",v===2&&"あまり感じない",v===3&&"どちらともいえない",v===4&&"やや感じる",v===5&&"十分感じる"]})]},v))})]});case 2:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-2. チームメンバーや先輩との関係・協力体制に満足していますか？"}),o.jsx("div",{style:X.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...X.likertOption,...a===v?X.selectedLikertOption:{}},onClick:()=>c(v),children:[o.jsx("div",{style:X.likertNumber,children:v}),o.jsxs("div",{style:X.likertLabel,children:[v===1&&"まったく満足していない",v===2&&"あまり満足していない",v===3&&"どちらともいえない",v===4&&"やや満足",v===5&&"非常に満足"]})]},v))})]});case 3:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-3. 必要なスキルや知識は、現状十分習得できていると感じますか？"}),o.jsx("div",{style:X.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...X.likertOption,...u===v?X.selectedLikertOption:{}},onClick:()=>d(v),children:[o.jsx("div",{style:X.likertNumber,children:v}),o.jsxs("div",{style:X.likertLabel,children:[v===1&&"全く自信がない",v===2&&"あまり自信がない",v===3&&"どちらともいえない",v===4&&"やや自信がある",v===5&&"自信を持っている"]})]},v))})]});case 4:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-4. 直属のマネージャーまたはメンターへのフィードバック（改善点や感謝したい点）があればご記入ください。"}),o.jsx("textarea",{style:X.textArea,placeholder:"自由にご記入ください（任意）",value:h,onChange:v=>g(v.target.value),rows:5})]});case 5:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-5. 入社前に抱いていた期待と、実際の会社・業務とのギャップはありますか？"}),o.jsx("div",{style:X.optionsContainer,children:["期待以上","期待通り","期待以下","わからない"].map(v=>o.jsx("div",{style:{...X.radioOption,...m===v?X.selectedRadioOption:{}},onClick:()=>k(v),children:v},v))}),m==="期待以下"&&o.jsxs("div",{style:X.conditionalInput,children:[o.jsx("label",{style:X.conditionalLabel,children:"具体的なギャップについて教えてください："}),o.jsx("textarea",{style:X.textArea,placeholder:"具体的に記入してください",value:I,onChange:v=>x(v.target.value),rows:4})]})]});case 6:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-6. 入社時のオリエンテーションや研修で、特に改善してほしいポイントはありますか？"}),o.jsx("textarea",{style:X.textArea,placeholder:"自由にご記入ください（任意）",value:N,onChange:v=>S(v.target.value),rows:5})]});case 7:return o.jsxs("div",{style:X.questionContainer,children:[o.jsx("h3",{style:X.questionTitle,children:"Q1-7. 1か月間を通じて、当社で働くことにどの程度満足していますか？"}),o.jsx("div",{style:X.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...X.likertOption,..._===v?X.selectedLikertOption:{}},onClick:()=>j(v),children:[o.jsx("div",{style:X.likertNumber,children:v}),o.jsxs("div",{style:X.likertLabel,children:[v===1&&"非常に不満",v===2&&"やや不満",v===3&&"どちらともいえない",v===4&&"やや満足",v===5&&"非常に満足"]})]},v))})]});default:return null}};return o.jsx("div",{style:X.container,children:o.jsxs("div",{style:X.card,children:[o.jsxs("div",{style:X.header,children:[o.jsx("h2",{style:X.title,children:"入社後1か月マンスリーサーベイ"}),o.jsx("p",{style:X.surveyInfo,children:"所要時間：5～7分"})]}),o.jsxs("div",{style:X.progressContainer,children:[o.jsxs("div",{style:X.progressText,children:["進捗状況: ",A,"%"]}),o.jsx("div",{style:X.progressBarContainer,children:o.jsx("div",{style:{...X.progressBar,width:`${A}%`}})})]}),P&&o.jsx("div",{style:X.errorMessage,children:P}),C(),o.jsx("div",{style:X.buttonContainer,children:o.jsxs("div",{style:X.buttonWrapper,children:[e>1&&o.jsx("button",{style:X.prevButton,onClick:y,children:"前へ"}),e<r?o.jsx("button",{style:X.nextButton,onClick:E,children:"次へ"}):o.jsx("button",{style:X.submitButton,onClick:w,children:"送信"})]})})]})})},X={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"800px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},surveyInfo:{fontSize:"16px",color:"#666",fontWeight:"500",marginTop:"8px"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},optionsContainer:{display:"flex",flexWrap:"wrap",gap:"15px",marginBottom:"20px"},radioOption:{flex:"1 0 45%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedRadioOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},conditionalInput:{marginTop:"20px",padding:"15px",backgroundColor:"#f9f9f9",borderRadius:"8px",borderLeft:"4px solid #4285f4"},conditionalLabel:{display:"block",marginBottom:"10px",fontWeight:"500",color:"#333"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"30px"},buttonWrapper:{display:"flex",justifyContent:"center",gap:"20px",width:"100%",maxWidth:"400px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},LP=()=>{const t=xe(),[e,n]=b.useState(1),r=7,[i,s]=b.useState(null),[a,c]=b.useState(null),[u,d]=b.useState(null),[h,g]=b.useState(null),[m,k]=b.useState(""),[I,x]=b.useState(null),[N,S]=b.useState(""),[_,j]=b.useState(""),P=Math.round(e/r*100),D=()=>{if(e===1&&i===null){j("回答を選択してください");return}if(e===2&&a===null){j("回答を選択してください");return}if(e===3&&u===null){j("回答を選択してください");return}if(e===4&&h===null){j("回答を選択してください");return}if(e===6&&I===null){j("回答を選択してください");return}j(""),e<r&&n(e+1)},A=()=>{e>1&&(n(e-1),j(""))},E=()=>{const w={autonomy:i,relatedness:a,competence:u,learningDevelopment:h,managerFeedback:m,companyImpression:I,onboardingFeedback:N,timestamp:new Date().toISOString(),surveyType:"入社後2か月マンスリーサーベイ"};console.log("Monthly Survey Data (60 days):",w);const C=JSON.parse(localStorage.getItem("monthlySurveys")||"[]");C.push(w),localStorage.setItem("monthlySurveys",JSON.stringify(C)),t("/monthly-survey-thanks")},y=()=>{switch(e){case 1:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-1. 業務において、自分で意思決定できる余地が明確に示されていますか？"}),o.jsx("div",{style:ne.likertContainer,children:[1,2,3,4,5].map(w=>o.jsxs("div",{style:{...ne.likertOption,...i===w?ne.selectedLikertOption:{}},onClick:()=>s(w),children:[o.jsx("div",{style:ne.likertNumber,children:w}),o.jsxs("div",{style:ne.likertLabel,children:[w===1&&"まったく示されていない",w===2&&"あまり示されていない",w===3&&"どちらともいえない",w===4&&"ある程度示されている",w===5&&"明確に示されている"]})]},w))})]});case 2:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-2. チーム外の他部署や関連部門とも適切にコミュニケーションがとれていますか？"}),o.jsx("div",{style:ne.likertContainer,children:[1,2,3,4,5].map(w=>o.jsxs("div",{style:{...ne.likertOption,...a===w?ne.selectedLikertOption:{}},onClick:()=>c(w),children:[o.jsx("div",{style:ne.likertNumber,children:w}),o.jsxs("div",{style:ne.likertLabel,children:[w===1&&"まったくとれていない",w===2&&"あまりとれていない",w===3&&"どちらともいえない",w===4&&"ある程度とれている",w===5&&"十分とれている"]})]},w))})]});case 3:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-3. この1か月で担当業務に対する自信はどの程度向上しましたか？"}),o.jsx("div",{style:ne.likertContainer,children:[1,2,3,4,5].map(w=>o.jsxs("div",{style:{...ne.likertOption,...u===w?ne.selectedLikertOption:{}},onClick:()=>d(w),children:[o.jsx("div",{style:ne.likertNumber,children:w}),o.jsxs("div",{style:ne.likertLabel,children:[w===1&&"まったく向上していない",w===2&&"あまり向上していない",w===3&&"どちらともいえない",w===4&&"やや向上した",w===5&&"大きく向上した"]})]},w))})]});case 4:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-4. 新たに受けた研修・トレーニングの効果はいかがでしたか？"}),o.jsx("div",{style:ne.optionsContainer,children:["非常に効果あり","効果あり","どちらともいえない","あまり効果なし","全く効果なし"].map(w=>o.jsx("div",{style:{...ne.radioOption,...h===w?ne.selectedRadioOption:{}},onClick:()=>g(w),children:w},w))})]});case 5:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-5. 最近の1on1やフィードバック機会で、特に良かった点・改善してほしい点は？"}),o.jsx("textarea",{style:ne.textArea,placeholder:"自由にご記入ください",value:m,onChange:w=>k(w.target.value),rows:5})]});case 6:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-6. 当社の文化・バリューは、自身の価値観に合っていると感じますか？"}),o.jsx("div",{style:ne.likertContainer,children:[1,2,3,4,5].map(w=>o.jsxs("div",{style:{...ne.likertOption,...I===w?ne.selectedLikertOption:{}},onClick:()=>x(w),children:[o.jsx("div",{style:ne.likertNumber,children:w}),o.jsxs("div",{style:ne.likertLabel,children:[w===1&&"まったく合っていない",w===2&&"あまり合っていない",w===3&&"どちらともいえない",w===4&&"やや合っている",w===5&&"非常に合っている"]})]},w))})]});case 7:return o.jsxs("div",{style:ne.questionContainer,children:[o.jsx("h3",{style:ne.questionTitle,children:"Q2-7. オンボーディング期間（1～2か月目）で、特に改善が必要だと思うポイントを教えてください。"}),o.jsx("textarea",{style:ne.textArea,placeholder:"自由にご記入ください（任意）",value:N,onChange:w=>S(w.target.value),rows:5})]});default:return null}};return o.jsx("div",{style:ne.container,children:o.jsxs("div",{style:ne.card,children:[o.jsxs("div",{style:ne.header,children:[o.jsx("h2",{style:ne.title,children:"入社後2か月マンスリーサーベイ"}),o.jsx("p",{style:ne.surveyInfo,children:"所要時間：5～8分"})]}),o.jsxs("div",{style:ne.progressContainer,children:[o.jsxs("div",{style:ne.progressText,children:["進捗状況: ",P,"%"]}),o.jsx("div",{style:ne.progressBarContainer,children:o.jsx("div",{style:{...ne.progressBar,width:`${P}%`}})})]}),_&&o.jsx("div",{style:ne.errorMessage,children:_}),y(),o.jsx("div",{style:ne.buttonContainer,children:o.jsxs("div",{style:ne.buttonWrapper,children:[e>1&&o.jsx("button",{style:ne.prevButton,onClick:A,children:"前へ"}),e<r?o.jsx("button",{style:ne.nextButton,onClick:D,children:"次へ"}):o.jsx("button",{style:ne.submitButton,onClick:E,children:"送信"})]})})]})})},ne={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"800px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},surveyInfo:{fontSize:"16px",color:"#666",fontWeight:"500",marginTop:"8px"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},optionsContainer:{display:"flex",flexDirection:"column",gap:"15px",marginBottom:"20px"},radioOption:{backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedRadioOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.02)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"30px"},buttonWrapper:{display:"flex",justifyContent:"center",gap:"20px",width:"100%",maxWidth:"400px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},VP=()=>{const t=xe(),[e,n]=b.useState(1),r=7,[i,s]=b.useState(null),[a,c]=b.useState(null),[u,d]=b.useState(null),[h,g]=b.useState(""),[m,k]=b.useState(""),[I,x]=b.useState(""),[N,S]=b.useState(null),[_,j]=b.useState(""),[P,D]=b.useState(""),A=Math.round(e/r*100),E=()=>{if(e===1&&i===null){D("回答を選択してください");return}if(e===2&&a===null){D("回答を選択してください");return}if(e===3&&u===null){D("回答を選択してください");return}if(e===4&&h===""){D("回答を選択してください");return}if(e===4&&h==="はい"&&m===""){D("詳細を記入してください");return}if(e===6&&N===null){D("回答を選択してください");return}D(""),e<r&&n(e+1)},y=()=>{e>1&&(n(e-1),D(""))},w=()=>{const v={autonomy:i,relatedness:a,competence:u,careerGrowth:h,careerGrowthDetail:h==="はい"?m:"",managerFeedback:I,companyImpression:N,onboardingFeedback:_,timestamp:new Date().toISOString(),surveyType:"入社後3か月マンスリーサーベイ"};console.log("Monthly Survey Data (90 days):",v);const O=JSON.parse(localStorage.getItem("monthlySurveys")||"[]");O.push(v),localStorage.setItem("monthlySurveys",JSON.stringify(O)),t("/monthly-survey-thanks")},C=()=>{switch(e){case 1:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-1. 自分の仕事に対して責任感を持ち、自律的に動けていると感じますか？"}),o.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...J.likertOption,...i===v?J.selectedLikertOption:{}},onClick:()=>s(v),children:[o.jsx("div",{style:J.likertNumber,children:v}),o.jsxs("div",{style:J.likertLabel,children:[v===1&&"まったく感じない",v===2&&"あまり感じない",v===3&&"どちらともいえない",v===4&&"やや感じる",v===5&&"強く感じる"]})]},v))})]});case 2:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-2. 会社全体や他部署とのつながりを感じられていますか？"}),o.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...J.likertOption,...a===v?J.selectedLikertOption:{}},onClick:()=>c(v),children:[o.jsx("div",{style:J.likertNumber,children:v}),o.jsxs("div",{style:J.likertLabel,children:[v===1&&"まったく感じない",v===2&&"あまり感じない",v===3&&"どちらともいえない",v===4&&"やや感じる",v===5&&"強く感じる"]})]},v))})]});case 3:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-3. これまでの1～3か月で、自身の成長や成果に自信を持てていますか？"}),o.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...J.likertOption,...u===v?J.selectedLikertOption:{}},onClick:()=>d(v),children:[o.jsx("div",{style:J.likertNumber,children:v}),o.jsxs("div",{style:J.likertLabel,children:[v===1&&"まったく自信がない",v===2&&"あまり自信がない",v===3&&"どちらともいえない",v===4&&"やや自信がある",v===5&&"強く自信がある"]})]},v))})]});case 4:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-4. 今後のキャリア（1年後、3年後）について、マネージャーと具体的に話しましたか？"}),o.jsxs("div",{style:J.binaryOptions,children:[o.jsx("div",{style:{...J.binaryOption,...h==="はい"?J.selectedBinaryOption:{}},onClick:()=>g("はい"),children:"はい"}),o.jsx("div",{style:{...J.binaryOption,...h==="いいえ"?J.selectedBinaryOption:{}},onClick:()=>g("いいえ"),children:"いいえ"})]}),h==="はい"&&o.jsxs("div",{style:J.conditionalInput,children:[o.jsx("label",{style:J.conditionalLabel,children:"話し合った内容を簡単に要約してください："}),o.jsx("textarea",{style:J.textArea,placeholder:"キャリアについて話し合った内容を簡潔に記入してください",value:m,onChange:v=>k(v.target.value),rows:4})]})]});case 5:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-5. マネージャー／メンターのサポートで、特に有効だった点と、今後期待したい点を教えてください。"}),o.jsx("textarea",{style:J.textArea,placeholder:"自由にご記入ください",value:I,onChange:v=>x(v.target.value),rows:5})]});case 6:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-6. 当社で今後長く働きたいと思えますか？"}),o.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(v=>o.jsxs("div",{style:{...J.likertOption,...N===v?J.selectedLikertOption:{}},onClick:()=>S(v),children:[o.jsx("div",{style:J.likertNumber,children:v}),o.jsxs("div",{style:J.likertLabel,children:[v===1&&"全く思わない",v===2&&"あまり思わない",v===3&&"どちらともいえない",v===4&&"やや思う",v===5&&"強く思う"]})]},v))})]});case 7:return o.jsxs("div",{style:J.questionContainer,children:[o.jsx("h3",{style:J.questionTitle,children:"Q3-7. 入社時～3か月のオンボーディング体験全体を振り返り、最も改善してほしい点を教えてください。"}),o.jsx("textarea",{style:J.textArea,placeholder:"自由にご記入ください（任意）",value:_,onChange:v=>j(v.target.value),rows:5})]});default:return null}};return o.jsx("div",{style:J.container,children:o.jsxs("div",{style:J.card,children:[o.jsxs("div",{style:J.header,children:[o.jsx("h2",{style:J.title,children:"入社後3か月マンスリーサーベイ"}),o.jsx("p",{style:J.surveyInfo,children:"所要時間：6～8分"})]}),o.jsxs("div",{style:J.progressContainer,children:[o.jsxs("div",{style:J.progressText,children:["進捗状況: ",A,"%"]}),o.jsx("div",{style:J.progressBarContainer,children:o.jsx("div",{style:{...J.progressBar,width:`${A}%`}})})]}),P&&o.jsx("div",{style:J.errorMessage,children:P}),C(),o.jsx("div",{style:J.buttonContainer,children:o.jsxs("div",{style:J.buttonWrapper,children:[e>1&&o.jsx("button",{style:J.prevButton,onClick:y,children:"前へ"}),e<r?o.jsx("button",{style:J.nextButton,onClick:E,children:"次へ"}):o.jsx("button",{style:J.submitButton,onClick:w,children:"送信"})]})})]})})},J={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"800px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},surveyInfo:{fontSize:"16px",color:"#666",fontWeight:"500",marginTop:"8px"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},binaryOptions:{display:"flex",justifyContent:"center",gap:"20px",marginBottom:"20px"},binaryOption:{padding:"15px 40px",backgroundColor:"#f0f0f0",borderRadius:"8px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease"},selectedBinaryOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},conditionalInput:{marginTop:"20px",padding:"15px",backgroundColor:"#f9f9f9",borderRadius:"8px",borderLeft:"4px solid #4285f4"},conditionalLabel:{display:"block",marginBottom:"10px",fontWeight:"500",color:"#333"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"30px"},buttonWrapper:{display:"flex",justifyContent:"center",gap:"20px",width:"100%",maxWidth:"400px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},MP=()=>{const t=xe();return o.jsx("div",{style:Pn.container,children:o.jsxs("div",{style:Pn.card,children:[o.jsx("div",{style:Pn.header,children:o.jsx("h2",{style:Pn.title,children:"マンスリーサーベイ"})}),o.jsxs("div",{style:Pn.thankYouContainer,children:[o.jsx("div",{style:Pn.checkmark,children:"✓"}),o.jsx("h3",{style:Pn.thankYouTitle,children:"回答ありがとうございました"}),o.jsxs("p",{style:Pn.thankYouMessage,children:["いただいたフィードバックは、より良いオンボーディング体験と職場環境の改善のために活用させていただきます。",o.jsx("br",{}),"何か質問や懸念事項がある場合は、いつでもマネージャーやHR担当者にお問い合わせください。"]}),o.jsx("button",{style:Pn.closeButton,onClick:()=>t("/dashboard"),children:"ダッシュボードに戻る"})]})]})})},Pn={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"600px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},thankYouContainer:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},checkmark:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#34a853",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"36px",marginBottom:"20px"},thankYouTitle:{fontSize:"22px",fontWeight:"500",color:"#333",marginBottom:"15px"},thankYouMessage:{fontSize:"16px",color:"#666",textAlign:"center",lineHeight:"1.6",marginBottom:"30px"},closeButton:{padding:"12px 40px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},FP=()=>{const[t,e]=b.useState("テスト未実行"),[n,r]=b.useState("テスト未実行"),[i,s]=b.useState([]),[a,c]=b.useState([]),[u,d]=b.useState(null),h=async()=>{try{e("テスト中..."),d(null);const m=[],k=["employees","employee_profiles","new_hire","organizations"];for(const I of k)try{const x=Ot(Ee,I),N=await Dt(x);m.push({name:I,count:N.size,exists:N.size>0,error:null}),console.log(`コレクション ${I}: ${N.size}件のドキュメントが見つかりました`)}catch(x){console.error(`コレクション ${I} の取得エラー:`,x),m.push({name:I,count:0,exists:!1,error:x.message})}s(m),e("テスト完了")}catch(m){console.error("Firestoreテストエラー:",m),d(m.message),e("テスト失敗")}},g=async()=>{try{r("テスト中..."),d(null);const m=["/","employee-photos/"],k=[];for(const I of m)try{const x=$r(xt,I),N=await fA(x);console.log(`フォルダ ${I}: ${N.items.length}個のファイルが見つかりました`);const S=[];for(let _=0;_<Math.min(5,N.items.length);_++)try{const j=await Br(N.items[_]);S.push({name:N.items[_].name,url:j,error:null})}catch(j){S.push({name:N.items[_].name,url:null,error:j.message})}k.push({folder:I,count:N.items.length,exists:N.items.length>0,files:S,error:null})}catch(x){console.error(`フォルダ ${I} の取得エラー:`,x),k.push({folder:I,count:0,exists:!1,files:[],error:x.message})}c(k),r("テスト完了")}catch(m){console.error("Storageテストエラー:",m),d(m.message),r("テスト失敗")}};return o.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h1",{children:"Firebase 接続テスト"}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsx("h2",{children:"Firestore テスト"}),o.jsxs("div",{children:[o.jsx("button",{onClick:h,style:{padding:"8px 16px",marginRight:"10px"},children:"Firestoreテスト実行"}),o.jsxs("span",{children:["ステータス: ",t]})]}),i.length>0&&o.jsxs("div",{style:{marginTop:"15px"},children:[o.jsx("h3",{children:"コレクション一覧"}),o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"コレクション名"}),o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"ドキュメント数"}),o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"存在"}),o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"エラー"})]})}),o.jsx("tbody",{children:i.map((m,k)=>o.jsxs("tr",{children:[o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:m.name}),o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:m.count}),o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:m.exists?"✅":"❌"}),o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",color:"red"},children:m.error})]},k))})]})]})]}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsx("h2",{children:"Storage テスト"}),o.jsxs("div",{children:[o.jsx("button",{onClick:g,style:{padding:"8px 16px",marginRight:"10px"},children:"Storageテスト実行"}),o.jsxs("span",{children:["ステータス: ",n]})]}),a.length>0&&o.jsxs("div",{style:{marginTop:"15px"},children:[o.jsx("h3",{children:"ファイル一覧"}),a.map((m,k)=>o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsxs("h4",{children:["フォルダ: ",m.folder]}),o.jsxs("p",{children:["ファイル数: ",m.count," ",m.exists?"✅":"❌"]}),m.error&&o.jsxs("p",{style:{color:"red"},children:["エラー: ",m.error]}),m.files.length>0&&o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"ファイル名"}),o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"URL"}),o.jsx("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"エラー"})]})}),o.jsx("tbody",{children:m.files.map((I,x)=>o.jsxs("tr",{children:[o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:I.name}),o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:I.url?o.jsxs("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",children:[I.url.substring(0,50),"..."]}):"なし"}),o.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",color:"red"},children:I.error})]},x))})]})]},k))]})]}),u&&o.jsxs("div",{style:{color:"red",marginTop:"20px",padding:"10px",border:"1px solid red"},children:[o.jsx("h3",{children:"エラー発生"}),o.jsx("p",{children:u})]}),o.jsxs("div",{style:{marginTop:"30px"},children:[o.jsx("h2",{children:"Firebase 設定情報"}),o.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",overflow:"auto"},children:`プロジェクトID: ${xt.app.options.projectId}
ストレージバケット: ${xt.app.options.storageBucket}`})]})]})},UP=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[i,s]=b.useState(""),a=xe(),c=u=>{u.preventDefault(),t==="admin@example.com"&&n==="P@ssword1805"?(localStorage.setItem("adminLoggedIn","true"),a("/admin/dashboard")):s("メールアドレスまたはパスワードが正しくありません。")};return o.jsx("div",{className:"admin-container",children:o.jsxs("div",{className:"admin-login-card",children:[o.jsx("h2",{children:"人事管理システム"}),o.jsx("h3",{children:"ログイン"}),i&&o.jsx("div",{className:"admin-error",children:i}),o.jsxs("form",{onSubmit:c,children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"email",children:"メールアドレス"}),o.jsx("input",{type:"email",id:"email",value:t,onChange:u=>e(u.target.value),required:!0,placeholder:"例: admin@example.com"})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"password",children:"パスワード"}),o.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0,placeholder:"パスワードを入力"})]}),o.jsx("button",{type:"submit",className:"admin-button",children:"ログイン"})]})]})})},BP=()=>localStorage.getItem("adminLoggedIn")==="true",$P=()=>{const t=xe(),e=Zn();if(!BP())return o.jsx(El,{to:"/admin/login",replace:!0});const n=()=>{localStorage.removeItem("adminLoggedIn"),t("/admin/login")},r=i=>i==="/admin/directory"&&(e.pathname===i||e.pathname.startsWith("/admin/employee-detail"))||i==="/admin/employees"&&(e.pathname===i||e.pathname.startsWith("/admin/newhire/"))?!0:e.pathname===i;return o.jsxs("div",{className:"admin-container",children:[o.jsxs("div",{className:"admin-sidebar",children:[o.jsx("div",{className:"admin-sidebar-header",children:o.jsx("h2",{children:"WellCo オンボーディング"})}),o.jsxs("ul",{className:"admin-menu",children:[o.jsxs("li",{className:`admin-menu-item ${r("/admin/dashboard")?"active":""}`,onClick:()=>t("/admin/dashboard"),children:[o.jsx("i",{className:"fas fa-home"})," ダッシュボード"]}),o.jsxs("li",{className:`admin-menu-item ${r("/admin/employees")?"active":""}`,onClick:()=>t("/admin/employees"),children:[o.jsx("i",{className:"fas fa-users"})," 新入社員"]}),o.jsxs("li",{className:`admin-menu-item ${r("/admin/directory")?"active":""}`,onClick:()=>t("/admin/directory"),children:[o.jsx("i",{className:"fas fa-address-book"})," ディレクトリ"]}),o.jsxs("li",{className:`admin-menu-item ${r("/admin/journeys")?"active":""}`,onClick:()=>t("/admin/journeys"),children:[o.jsx("i",{className:"fas fa-road"})," オンボーディングジャーニー"]})]})]}),o.jsxs("div",{className:"admin-content",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{className:"admin-header-title",children:[e.pathname==="/admin/dashboard"&&"ダッシュボード",e.pathname==="/admin/employees"&&"新入社員管理",e.pathname==="/admin/directory"&&"社員ディレクトリ",e.pathname==="/admin/journeys"&&"オンボーディングジャーニー"]}),o.jsxs("div",{className:"admin-user-info",children:[o.jsx("span",{className:"admin-user-name",children:"管理者"}),o.jsx("button",{className:"admin-logout-button",onClick:n,children:"ログアウト"})]})]}),o.jsx(sC,{})]})]})},zP=()=>{const t=xe(),e={totalEmployees:12,completedOnboarding:5,inProgressOnboarding:7,upcomingJoiners:3},n=[{id:1,employee:"山田 太郎",action:"書類確認完了",date:"2025/05/19 08:30"},{id:2,employee:"佐藤 花子",action:"メッセージ返信",date:"2025/05/18 15:45"},{id:3,employee:"鈴木 一郎",action:"質問送信",date:"2025/05/18 10:20"},{id:4,employee:"田中 美咲",action:"アカウント作成",date:"2025/05/17 14:10"}],r=[{id:1632,name:"渡辺 悠希",department:"エンジニアリング部",riskScore:75,triggers:[{type:"日次",detail:"朝のネガティブ連続: emojiスコア ≤2 が連続3日"},{type:"週次",detail:"低評価設問: 全設問のうち3問が1～2評価"},{type:"月次",detail:"SDT低評価: 自律性で1評価"}],joinDate:"2025/02/01"},{id:1633,name:"中村 太陽",department:"エンジニアリング部",riskScore:55,triggers:[{type:"日次",detail:"不安／サポート必要選択: 「業務について不安がある」を3回/週"},{type:"週次",detail:"急激な低下: 前週平均スコアから△1.8点低下"}],joinDate:"2025/03/01"},{id:1634,name:"大原 孝之",department:"エンジニアリング部",riskScore:45,triggers:[{type:"週次",detail:"自由記述ネガティブ度: ネガティブキーワード出現率35%"},{type:"月次",detail:"定着意向低評価: 「長く働きたいと思わない」評価2"}],joinDate:"2025/04/01"}];return o.jsxs("div",{children:[o.jsxs("div",{className:"admin-dashboard-summary",children:[o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"新入社員数"}),o.jsx("div",{className:"admin-summary-number",children:e.totalEmployees})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"準備完了"}),o.jsx("div",{className:"admin-summary-number",children:e.completedOnboarding})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"準備中"}),o.jsx("div",{className:"admin-summary-number",children:e.inProgressOnboarding})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"入社予定者"}),o.jsx("div",{className:"admin-summary-number",children:e.upcomingJoiners})]})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{className:"admin-card-title",children:"最近の活動"}),o.jsxs("table",{className:"admin-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"社員名"}),o.jsx("th",{children:"アクション"}),o.jsx("th",{children:"日時"})]})}),o.jsx("tbody",{children:n.map(i=>o.jsxs("tr",{children:[o.jsx("td",{children:i.employee}),o.jsx("td",{children:i.action}),o.jsx("td",{children:i.date})]},i.id))})]})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{className:"admin-card-title",children:"サーベイアラート"}),o.jsx("div",{className:"care-needed-container",children:r.map(i=>o.jsxs("div",{className:`care-needed-card risk-${i.riskScore>=60?"high":i.riskScore>=40?"medium":"low"}`,children:[o.jsxs("div",{className:"care-needed-header",children:[o.jsx("div",{className:"care-needed-photo",children:o.jsx("img",{src:`/onboarding-demo01/images/${i.id}.png`,alt:i.name})}),o.jsxs("div",{className:"care-needed-info",children:[o.jsx("div",{className:"care-needed-name",children:i.name}),o.jsx("div",{className:"care-needed-department",children:i.department}),o.jsxs("div",{className:"care-needed-join-date",children:["入社日: ",i.joinDate]})]})]}),o.jsxs("div",{className:"care-needed-risk",children:[o.jsx("div",{className:"care-needed-risk-label",children:"リスクスコア"}),o.jsx("div",{className:"care-needed-risk-score",children:i.riskScore})]}),o.jsxs("div",{className:"care-needed-triggers",children:[o.jsx("div",{className:"care-needed-triggers-label",children:"トリガー"}),o.jsx("ul",{className:"care-needed-triggers-list",children:i.triggers.map((s,a)=>o.jsxs("li",{children:[o.jsx("span",{className:`trigger-type ${s.type}`,children:s.type}),o.jsx("span",{className:"trigger-detail",children:s.detail})]},a))})]}),o.jsxs("div",{className:"care-needed-actions",children:[o.jsx("button",{className:"care-action-button",onClick:()=>t(`/admin/employees/${i.id}`),children:"詳細"}),o.jsx("button",{className:"care-action-button",children:"連絡"}),o.jsx("button",{className:"care-action-button",children:"メモ"})]})]},i.id))})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{className:"admin-card-title",children:"クイックアクション"}),o.jsxs("div",{className:"admin-quick-actions",children:[o.jsx("button",{className:"admin-button",children:"新入社員を追加"}),o.jsx("button",{className:"admin-button",children:"メッセージを送信"}),o.jsx("button",{className:"admin-button",children:"書類テンプレートを編集"})]})]})]})},WP=()=>{const t=xe(),[e,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(null),[c,u]=b.useState(""),[d,h]=b.useState("all"),[g,m]=b.useState({});`${xt.app.options.storageBucket}`;const k=new Date,I=180*24*60*60*1e3,x=[{id:"E001",name:"渡辺 悠希",email:"y.watanabe@example.com",joiningDate:"2025/02/01",department:"エンジニアリング部",progress:75,status:"in-progress",days_since_joining:114},{id:"E002",name:"中村 太陽",email:"t.nakamura@example.com",joiningDate:"2025/03/01",department:"エンジニアリング部",progress:100,status:"completed",days_since_joining:85},{id:"E003",name:"大原 孝之",email:"t.ohara@example.com",joiningDate:"2025/04/01",department:"エンジニアリング部",progress:50,status:"in-progress",days_since_joining:54},{id:"E004",name:"藤田 健太",email:"k.fujita@example.com",joiningDate:"2025/04/01",department:"プロジェクト部",progress:25,status:"in-progress",days_since_joining:54},{id:"E005",name:"尾形 香織",email:"k.ogata@example.com",joiningDate:"2025/04/15",department:"営業部",progress:0,status:"not-started",days_since_joining:40},{id:"E006",name:"高橋 美咲",email:"m.takahashi@example.com",joiningDate:"2025/05/01",department:"コーポレート本部",progress:0,status:"not-started",days_since_joining:24},{id:"E007",name:"伊藤 光幸",email:"m.ito@example.com",joiningDate:"2025/05/15",department:"エンジニアリング部",progress:0,status:"not-started",days_since_joining:10}],N={E001:"/images/default_emp_icon.png",E002:"/images/default_emp_icon.png",E003:"/images/default_emp_icon.png",E004:"/images/default_emp_icon.png",E005:"/images/default_emp_icon.png",E006:"/images/default_emp_icon.png",E007:"/images/default_emp_icon.png"},S=async()=>{try{i(!0),a(null);const E=new Date(k.getTime()-I).toISOString().split("T")[0];console.log(`180日前の日付: ${E}`),console.log("Firestoreから組織データを取得します");const y=await Dt(Ot(Ee,"organizations")),w={};y.forEach(W=>{const V=W.data();w[W.id]=V.division_name_local||W.id}),console.log(`${Object.keys(w).length}件の組織データを取得しました`),console.log("Firestoreからnew_hireデータを取得します");const C=Ln(Ot(Ee,"new_hire"),si("status","in",["active","prejoin"])),v=await Dt(C);console.log(`${v.size}件のnew_hireデータを取得しました`);const O=[],R={},q=[],oe=await Dt(Ot(Ee,"employees")),Z={};oe.forEach(W=>{const V=W.data();V.emp_no&&(Z[V.emp_no]={email_addr:V.email_addr||"",division_code:V.division_code||"",full_name_alphabet:V.full_name_alphabet||""})}),console.log("employeesコレクションから取得したデータ:",Z),v.forEach(W=>{const V=W.data();if(V.emp_no){const B=Z[V.emp_no]||{};let F=V.join_date||B.join_date;if(console.log(`元の入社日情報 (${typeof F}):`,F),typeof F=="string")console.log(`文字列形式の入社日をそのまま使用: ${F}`);else if(F&&typeof F=="object"&&"seconds"in F&&"nanoseconds"in F){const ae=F;try{const te=new Date(F.seconds*1e3),ve=te.getFullYear(),Ze=String(te.getMonth()+1).padStart(2,"0"),et=String(te.getDate()).padStart(2,"0");F=`${ve}/${Ze}/${et}`,console.log(`Timestamp変換後の入社日: ${F}, 元の値:`,ae)}catch(te){console.error("Timestamp変換エラー:",te),F="不明"}}else F?(console.log("不明な形式の入社日:",F),F="不明"):(F="不明",console.log("入社日なし、'不明'を設定"));console.log(`社員ID ${V.emp_no} の入社日:`,F),q.push({emp_no:V.emp_no,full_name_local:V.full_name_local||"Unknown",full_name_alphabet:V.full_name_alphabet||B.full_name_alphabet||"",join_date:F,division_code:V.division_code||B.division_code||"",status:V.status||"active",email_addr:B.email_addr||""})}}),console.log(`${q.length}人の新入社員データを処理します`),q.sort((W,V)=>new Date(V.join_date)-new Date(W.join_date));for(const W of q){const V=W.emp_no;let B,F,ae=0;try{if(W.join_date)if(console.log(`入社日データタイプ: ${typeof W.join_date}`,W.join_date),typeof W.join_date=="string")console.log(`文字列形式の入社日をそのまま使用: ${W.join_date}`),B=W.join_date,F=W.join_date;else if(typeof W.join_date=="object"&&"seconds"in W.join_date&&"nanoseconds"in W.join_date){console.log("Timestamp形式の日付を処理:",W.join_date);try{const ce=new Date(W.join_date.seconds*1e3),Ve=ce.getFullYear(),sn=String(ce.getMonth()+1).padStart(2,"0"),Vs=String(ce.getDate()).padStart(2,"0");F=`${Ve}/${sn}/${Vs}`,B=F,console.log(`Timestampから変換した入社日: ${F}`)}catch(ce){console.error("Timestamp変換エラー:",ce),B="不明",F="不明"}}else if(W.join_date instanceof Date){console.log("Dateオブジェクトの日付を処理");try{const ce=W.join_date,Ve=ce.getFullYear(),sn=String(ce.getMonth()+1).padStart(2,"0"),Vs=String(ce.getDate()).padStart(2,"0");F=`${Ve}/${sn}/${Vs}`,B=F}catch(ce){console.error("Date変換エラー:",ce),B="不明",F="不明"}}else console.log("不明な形式の日付を処理:",W.join_date),B="不明",F="不明";else console.warn(`入社日が存在しません: ${W.emp_no}`),B="不明",F="不明";if(typeof B=="string")ae=0;else if(B instanceof Date){ae=Math.floor((k-B)/(1e3*60*60*24));const ce=B.getFullYear(),Ve=String(B.getMonth()+1).padStart(2,"0"),sn=String(B.getDate()).padStart(2,"0");F=`${ce}/${Ve}/${sn}`}else ae=0;console.log(`フォーマットされた入社日: ${F}`)}catch(ce){console.error("日付処理エラー:",ce),B="不明",F="不明",ae=0}const te=Math.min(100,Math.round(ae/180*100));let ve="not-started";te>=100?ve="completed":te>0&&(ve="in-progress");let Ze=W.full_name_local;W.full_name_alphabet&&W.full_name_alphabet.trim()!==""&&(Ze=`${W.full_name_local} (${W.full_name_alphabet})`);const et={id:V,name:Ze,email:W.email_addr||j(W.full_name_local),joiningDate:F,department:_(W.division_code,w),progress:te,status:ve,days_since_joining:ae};if(console.log("追加する従業員データ:",et),O.push(et),V)try{const ce=$r(xt,`employee-photos/${V}.png`);console.log("画像参照を作成:",ce),Br(ce).then(Ve=>{console.log(`画像取得成功: ${V}, URL: ${Ve}`),m(sn=>({...sn,[V]:Ve}))}).catch(Ve=>{console.warn(`画像取得失敗: ${V}`,Ve),m(sn=>({...sn,[V]:"/images/default_emp_icon.png"}))})}catch(ce){console.warn(`社員ID ${V} の写真取得エラー:`,ce),R[V]="/images/default_emp_icon.png"}}n(O),m(R),i(!1)}catch(A){console.error("Firestoreからのデータ取得エラー:",A),console.log("エラーが発生したため、モックデータを使用します"),n(x),m(N),a("Firestoreからのデータ取得に失敗しました。モックデータを表示しています。"),i(!1)}};b.useEffect(()=>{console.log("Firebase Storageバケット:",xt.app.options.storageBucket),console.log("FirebaseプロジェクトID:",xt.app.options.projectId),S()},[]);const _=(A,E)=>{if(!A)return"部門不明";if(console.log(`部門コード: ${A}`,E),E&&E[A])return E[A];const y={COR:"コーポレート本部",ENG:"エンジニアリング部",PRJ:"プロジェクト部",SLS:"営業部",BRD:"取締役会"};if(y[A])return y[A];const w=A.split("-")[0];return y[w]||`部門: ${A}`},j=A=>{if(!A)return"email@example.com";console.log(`メールアドレス生成: ${A}`);const E=A.split(" ");if(E.length>=2){let y=E[0],w=E[1];const C=y.charAt(0).toLowerCase();return/^[a-zA-Z]/.test(w)?`${C}.${w.toLowerCase()}@example.com`:`${C}.${w.length>0?w.charAt(0).toLowerCase():"x"}@example.com`}return`${A.replace(/\s+/g,".").toLowerCase().substring(0,8)}@example.com`},P=e.filter(A=>{const E=A.name.toLowerCase().includes(c.toLowerCase())||A.email.toLowerCase().includes(c.toLowerCase())||A.department.toLowerCase().includes(c.toLowerCase()),y=d==="all"||A.status===d;return E&&y}),D=A=>{switch(A){case"completed":return"完了";case"in-progress":return"進行中";case"not-started":return"未開始";default:return A}};return o.jsxs("div",{children:[o.jsxs("div",{className:"admin-toolbar",children:[o.jsx("div",{className:"admin-search",children:o.jsx("input",{type:"text",placeholder:"名前、メール、部署で検索...",value:c,onChange:A=>u(A.target.value)})}),o.jsx("div",{className:"admin-filter",children:o.jsxs("select",{value:d,onChange:A=>h(A.target.value),children:[o.jsx("option",{value:"all",children:"すべてのステータス"}),o.jsx("option",{value:"completed",children:"完了"}),o.jsx("option",{value:"in-progress",children:"進行中"}),o.jsx("option",{value:"not-started",children:"未開始"})]})}),o.jsx("button",{className:"admin-button",onClick:()=>t("/admin/add-employee"),children:"新入社員を追加"})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{className:"admin-card-title",children:"新入社員一覧 (入社後180日以内)"}),r?o.jsx("div",{className:"admin-loading",children:"データを読み込み中..."}):s?o.jsx("div",{className:"admin-error",children:s}):P.length===0?o.jsx("div",{className:"admin-empty",children:"該当する新入社員が見つかりません"}):o.jsxs("table",{className:"admin-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"氏名"}),o.jsx("th",{children:"メールアドレス"}),o.jsx("th",{children:"入社日"}),o.jsx("th",{children:"部署"}),o.jsx("th",{children:"進捗"}),o.jsx("th",{children:"ステータス"}),o.jsx("th",{children:"アクション"})]})}),o.jsx("tbody",{children:P.map(A=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{className:"employee-list-item",children:[o.jsx("div",{className:"employee-list-photo",children:o.jsx("img",{src:g[A.id]||"/images/default_emp_icon.png",alt:A.name,onLoad:E=>{console.log(`画像読み込み成功: ${A.id}`),console.log("読み込まれた画像ソース:",E.target.src)},onError:E=>{console.error(`画像読み込みエラー: ${A.id}`,E),console.log("元のソース:",E.target.src),E.target.src="/images/default_emp_icon.png",console.log("デフォルト画像に切り替え")},style:{width:"100%",height:"100%",objectFit:"cover"}})}),o.jsx("span",{children:A.name})]})}),o.jsx("td",{children:A.email}),o.jsx("td",{children:A.joiningDate}),o.jsx("td",{children:A.department}),o.jsx("td",{children:o.jsxs("div",{className:"admin-progress-bar-container",children:[o.jsx("div",{className:"admin-progress-bar",style:{width:`${A.progress}%`}}),o.jsxs("span",{children:[A.progress,"%"]})]})}),o.jsx("td",{children:o.jsx("span",{className:`status ${A.status}`,children:D(A.status)})}),o.jsx("td",{children:o.jsxs("div",{className:"admin-actions",children:[o.jsx("button",{className:"admin-action-button",onClick:()=>t(`/admin/newhire/${A.id}/info`),children:"詳細"}),o.jsx("button",{className:"admin-action-button",children:"編集"})]})})]},A.id))})]})]})]})},qP=()=>{const t=xe(),[e,n]=b.useState({lastName:"",firstName:"",localLastName:"",localFirstName:"",email:"",preferredLanguage:"ja",country:"Japan",timezone:"GMT+9 (Tokyo)",joiningDate:"",department:"Sales Department",team:"",sendWelcomeMessages:{manager:!0,director:!0,honbucho:!0}}),r=a=>{const{name:c,value:u,type:d,checked:h}=a.target;n(d==="checkbox"?{...e,sendWelcomeMessages:{...e.sendWelcomeMessages,[c]:h}}:{...e,[c]:u})},i=a=>{a.preventDefault(),console.log("送信されたデータ:",e),alert("新入社員の情報が登録されました"),t("/admin/employees")},s=()=>{alert("履歴書からデータを読み込んでいます..."),setTimeout(()=>{n({...e,lastName:"Tanaka",firstName:"Yuki",localLastName:"田中",localFirstName:"有希",email:"tanaka.yuki@example.com"}),alert("データの読み込みが完了しました")},1e3)};return o.jsxs("div",{className:"admin-add-employee",children:[o.jsx("h2",{className:"admin-page-title",children:"新入社員セットアップ（Global対応）"}),o.jsxs("form",{onSubmit:i,children:[o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"🌏 基本情報"}),o.jsx("button",{type:"button",className:"admin-button",onClick:s,style:{marginBottom:"15px"},children:"履歴書をアップロードしてAIで自動入力"}),o.jsxs("div",{className:"admin-form-row",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"lastName",children:"氏名（ローマ字）"}),o.jsx("input",{type:"text",id:"lastName",name:"lastName",placeholder:"姓",value:e.lastName,onChange:r,required:!0})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"firstName",children:" "}),o.jsx("input",{type:"text",id:"firstName",name:"firstName",placeholder:"名",value:e.firstName,onChange:r,required:!0})]})]}),o.jsxs("div",{className:"admin-form-row",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"localLastName",children:"氏名（現地表記・任意）"}),o.jsx("input",{type:"text",id:"localLastName",name:"localLastName",placeholder:"姓（現地表記）",value:e.localLastName,onChange:r})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"localFirstName",children:" "}),o.jsx("input",{type:"text",id:"localFirstName",name:"localFirstName",placeholder:"名（現地表記）",value:e.localFirstName,onChange:r})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"email",children:"メールアドレス"}),o.jsx("input",{type:"email",id:"email",name:"email",placeholder:"example@domain.com",value:e.email,onChange:r,required:!0})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"preferredLanguage",children:"希望言語"}),o.jsxs("select",{id:"preferredLanguage",name:"preferredLanguage",value:e.preferredLanguage,onChange:r,children:[o.jsx("option",{value:"en",children:"English"}),o.jsx("option",{value:"ja",children:"日本語"}),o.jsx("option",{value:"zh",children:"中文"})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"country",children:"勤務国"}),o.jsxs("select",{id:"country",name:"country",value:e.country,onChange:r,children:[o.jsx("option",{value:"Japan",children:"Japan"}),o.jsx("option",{value:"United States",children:"United States"}),o.jsx("option",{value:"China",children:"China"})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"timezone",children:"タイムゾーン"}),o.jsxs("select",{id:"timezone",name:"timezone",value:e.timezone,onChange:r,children:[o.jsx("option",{value:"GMT+9 (Tokyo)",children:"GMT+9 (Tokyo)"}),o.jsx("option",{value:"GMT-5 (New York)",children:"GMT-5 (New York)"}),o.jsx("option",{value:"GMT+8 (Beijing)",children:"GMT+8 (Beijing)"})]})]})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"📅 入社情報"}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"joiningDate",children:"入社予定日"}),o.jsx("input",{type:"date",id:"joiningDate",name:"joiningDate",value:e.joiningDate,onChange:r,required:!0})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"department",children:"配属部署"}),o.jsxs("select",{id:"department",name:"department",value:e.department,onChange:r,children:[o.jsx("option",{value:"Sales Department",children:"Sales Department"}),o.jsx("option",{value:"Marketing Department",children:"Marketing Department"}),o.jsx("option",{value:"Engineering Department",children:"Engineering Department"}),o.jsx("option",{value:"Human Resources",children:"Human Resources"})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{htmlFor:"team",children:"配属チーム（任意）"}),o.jsx("input",{type:"text",id:"team",name:"team",placeholder:"Team Name",value:e.team,onChange:r})]})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{children:"✉ ウェルカムメッセージ設定"}),o.jsxs("div",{className:"admin-checkbox-group",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"200px"},children:[o.jsx("label",{htmlFor:"manager",style:{whiteSpace:"nowrap"},children:"マネージャー"}),o.jsx("input",{type:"checkbox",id:"manager",name:"manager",checked:e.sendWelcomeMessages.manager,onChange:r})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"200px"},children:[o.jsx("label",{htmlFor:"director",style:{whiteSpace:"nowrap"},children:"部長"}),o.jsx("input",{type:"checkbox",id:"director",name:"director",checked:e.sendWelcomeMessages.director,onChange:r})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"200px"},children:[o.jsx("label",{htmlFor:"honbucho",style:{whiteSpace:"nowrap"},children:"本部長"}),o.jsx("input",{type:"checkbox",id:"honbucho",name:"honbucho",checked:e.sendWelcomeMessages.honbucho,onChange:r})]})]})]}),o.jsxs("div",{className:"admin-form-actions",children:[o.jsx("button",{type:"button",className:"admin-button-secondary",onClick:()=>t("/admin/employees"),style:{height:"40px",flex:"0 0 30%"},children:"キャンセル"}),o.jsx("button",{type:"submit",className:"admin-button",style:{height:"40px",flex:"0 0 70%"},children:"セットアップ完了＆通知を送信する"})]})]})]})},HP=({employeeId:t,activeTab:e})=>{const n=xe(),r={width:"180px",minWidth:"180px",flexShrink:0,backgroundColor:"white",color:"#333",padding:"20px 0",height:"100%",display:"flex",flexDirection:"column",position:"sticky",top:0,borderRight:"1px solid #eee"},i={padding:"15px 20px",cursor:"pointer",borderLeft:"4px solid transparent",fontSize:"16px",color:"#333"},s={...i,backgroundColor:"#f5f5f5",color:"#333",borderLeft:"4px solid #0a5275",fontWeight:"bold"},a={...i,display:"flex",alignItems:"center",marginBottom:"20px",color:"#0a5275"},c=u=>`/admin/newhire/${t}/${u}`;return o.jsxs("div",{style:r,children:[o.jsx("div",{style:a,onClick:()=>n("/admin/employees"),children:"← 一覧へ戻る"}),o.jsx(Le,{to:c("info"),style:{textDecoration:"none"},children:o.jsx("div",{style:e==="info"?s:i,children:"情報"})}),o.jsx(Le,{to:c("onboarding"),style:{textDecoration:"none"},children:o.jsx("div",{style:e==="onboarding"?s:i,children:"オンボーディング"})}),o.jsx(Le,{to:c("survey"),style:{textDecoration:"none"},children:o.jsx("div",{style:e==="survey"?s:i,children:"サーベイ"})}),o.jsx(Le,{to:c("1on1"),style:{textDecoration:"none"},children:o.jsx("div",{style:e==="1on1"?s:i,children:"1on1"})})]})},GP=({isOpen:t,onClose:e,managerId:n})=>{const[r,i]=b.useState(!0),[s,a]=b.useState(null),[c,u]=b.useState(null),[d,h]=b.useState("/images/default_emp_icon.png"),[g,m]=b.useState(null);b.useEffect(()=>{t&&n&&k(n)},[t,n]);const k=async x=>{i(!0),a(null);try{const N=Bh(),S=qh(),_=kt(N,"employees",x),j=await jt(_);if(!j.exists())throw new Error(`上司データが見つかりません: ${x}`);const P=j.data();if(u(P),P.division_code){const D=kt(N,"organizations",P.division_code),A=await jt(D);A.exists()&&m(A.data())}try{const D=$r(S,`employee-photos/${x}.png`),A=await Br(D);h(A)}catch(D){console.log("写真の取得に失敗しました:",D),h("/images/default_emp_icon.png")}i(!1)}catch(N){console.error("上司データの取得に失敗しました:",N),a(N.message),i(!1)}},I=x=>{x.target.className==="modal-overlay"&&e()};return t?o.jsx("div",{className:"modal-overlay",onClick:I,children:o.jsxs("div",{className:"modal-container",children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"上司情報"}),o.jsx("button",{className:"modal-close-button",onClick:e,children:"×"})]}),r?o.jsx("div",{className:"modal-body",children:o.jsx("div",{className:"modal-loading",children:"読み込み中..."})}):s?o.jsx("div",{className:"modal-body",children:o.jsx("div",{className:"modal-error",children:s})}):c?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"manager-profile",children:[o.jsx("div",{className:"manager-photo",children:o.jsx("img",{src:d,alt:c.full_name_local||`${c.last_name_local} ${c.first_name_local}`,onError:x=>{x.target.src="/images/default_emp_icon.png"}})}),o.jsxs("div",{className:"manager-info",children:[o.jsx("h3",{children:c.full_name_local||`${c.last_name_local} ${c.first_name_local}`}),c.full_name_alphabet&&o.jsx("div",{className:"manager-name-en",children:c.full_name_alphabet}),o.jsx("div",{className:"manager-position",children:c.position||"社員"}),o.jsx("div",{className:"manager-department",children:g?g.division_name_local:c.division_code})]})]}),o.jsx("div",{className:"manager-details",children:o.jsxs("div",{className:"info-section",children:[o.jsx("h4",{children:"基本情報"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"社員番号"}),o.jsx("div",{className:"info-value",children:c.emp_no||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"メール"}),o.jsx("div",{className:"info-value",children:c.email_addr||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"オフィス"}),o.jsx("div",{className:"info-value",children:c.office||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"雇用形態"}),o.jsx("div",{className:"info-value",children:c.employment_type||"-"})]})]})]})})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"modal-button",onClick:e,children:"閉じる"})})]}):o.jsx("div",{className:"modal-body",children:o.jsx("div",{className:"modal-error",children:"上司データが見つかりません"})})]})}):null},Gv=({employeeData:t,employeeProfile:e,employeeMaster:n,organization:r,photoUrl:i,loading:s,error:a})=>{const[c,u]=b.useState({}),[d,h]=b.useState(!1),[g,m]=b.useState(null),k=async()=>{try{const I=await fetch("/data/mbti_j.json");if(!I.ok)throw new Error(`MBTIデータの取得に失敗しました: ${I.status}`);const x=await I.json(),N={};x.forEach(S=>{N[S.mbti]=S.description}),u(N),console.log("MBTIデータを取得しました:",N)}catch(I){console.error("MBTIデータの取得中にエラーが発生しました:",I)}};return b.useEffect(()=>{k()},[]),s?o.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"50px"},children:o.jsx("p",{children:"データを読み込み中...しばらくお待ちください"})}):a?o.jsx("div",{className:"error-container",style:{textAlign:"center",padding:"50px",color:"red"},children:o.jsxs("p",{children:["エラーが発生しました: ",a]})}):t?o.jsxs("div",{className:"content-container",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"profile-photo",children:o.jsx("img",{src:i,alt:`${t.name}の写真`,onError:I=>{I.target.onerror=null,I.target.src="/images/default_emp_icon.png"},style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover"}})}),o.jsxs("div",{className:"profile-basic",children:[t.position&&o.jsx("div",{className:"employee-position",style:{fontSize:"14px",color:"#666",marginBottom:"4px"},children:t.position}),o.jsx("div",{className:"employee-name",style:{fontSize:"24px",fontWeight:"bold"},children:t.name||"名前なし"}),n&&n.full_name_alphabet&&o.jsx("div",{className:"employee-name-en",style:{fontSize:"14px",color:"#666"},children:n.full_name_alphabet}),o.jsx("div",{className:"employee-department",style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:r?r.division_name_local||r.division_name:t.department||"-"}),t.manager&&o.jsxs("div",{className:"employee-manager",style:{fontSize:"14px",color:"#666",marginTop:"4px",cursor:"pointer",textDecoration:"underline"},onClick:()=>{m(t.manager.id),h(!0)},title:"クリックして上司の詳細情報を表示",children:["マネージャー: ",t.manager.name,t.manager.name_alphabet&&` (${t.manager.name_alphabet})`]})]})]}),o.jsxs("div",{className:"content-grid",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"基本情報"}),o.jsx("div",{className:"card-content",children:o.jsxs("div",{className:"basic-info-grid",children:[o.jsxs("div",{className:"basic-info-left",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"氏名（現地表記）"}),o.jsx("div",{className:"info-value",children:t.name||"名前なし"})]}),n&&n.full_name_alphabet&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"氏名（アルファベット）"}),o.jsx("div",{className:"info-value",children:n.full_name_alphabet})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"社員番号"}),o.jsx("div",{className:"info-value",children:t.emp_no||"-"})]})]}),o.jsxs("div",{className:"basic-info-right",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"入社日"}),o.jsx("div",{className:"info-value",children:t.join_date?typeof t.join_date=="string"?t.join_date.match(/^\d{4}-\d{2}-\d{2}$/)?(()=>{try{const I=t.join_date.split("-"),x=I[0],N=parseInt(I[1],10),S=parseInt(I[2],10);return`${x}年${N}月${S}日`}catch{return t.join_date}})():t.join_date:typeof t.join_date=="object"&&"seconds"in t.join_date?(()=>new Date(t.join_date.seconds*1e3).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}))():t.join_date instanceof Date?t.join_date.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-":"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"メールアドレス"}),o.jsx("div",{className:"info-value",children:t.email||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"オフィス"}),o.jsx("div",{className:"info-value",children:n&&n.office?n.office:"-"})]})]})]})})]}),e&&o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"プロフィール"}),o.jsxs("div",{className:"card-content",children:[e.mbti&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"MBTI"}),o.jsx("div",{className:"info-value",children:o.jsxs("span",{className:"mbti-display",children:[e.mbti,o.jsx("div",{className:"mbti-tooltip",children:c[e.mbti]?o.jsxs(o.Fragment,{children:[o.jsx("strong",{children:e.mbti}),o.jsx("br",{}),c[e.mbti]]}):o.jsxs(o.Fragment,{children:["MBTIは性格タイプを示す指標です。",o.jsx("br",{}),e.mbti_description||"MBTIの詳細情報は登録されていません。"]})})]})})]}),e.profile&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"コメント"}),o.jsx("div",{className:"info-value comment-text",children:e.profile})]}),e.skills&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"スキル"}),o.jsx("div",{className:"info-value",children:e.skills})]}),e.interests&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"興味・関心"}),o.jsx("div",{className:"info-value",children:e.interests})]})]})]}),t.history&&t.history.length>0&&o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"履歴"}),o.jsx("div",{className:"card-content",children:o.jsx("div",{className:"employee-history",children:t.history.map((I,x)=>o.jsxs("div",{className:`history-item ${I.isCurrent?"current":""}`,children:[o.jsx("div",{className:"history-date",children:I.date}),o.jsx("div",{className:"history-description",children:I.description})]},x))})})]})]}),o.jsx(GP,{isOpen:d,onClose:()=>h(!1),managerId:g})]}):o.jsx("div",{className:"no-data-container",style:{textAlign:"center",padding:"50px"},children:o.jsx("p",{children:"従業員データが見つかりません"})})},KP=({employeeData:t})=>{const[e,n]=b.useState("summary"),r={id:1632,name:"渡辺 悠希",department:"エンジニアリング部",riskScore:75,triggers:[{type:"日次",detail:"朝のネガティブ連続: emojiスコア ≤2 が連続3日"},{type:"週次",detail:"低評価設問: 全設問のうち３問が１～２評価"},{type:"月次",detail:"SDT低評価: 自律性で１評価"}],joinDate:"2025/02/01"},i=[{date:"2025年6月10日",morning:{type:"朝のチェックイン",mood:2,feeling:"業務について少し不安がある"},evening:{type:"夕方のチェックアウト",satisfaction:4,experience:"サポートが必要だと感じた"}},{date:"2025年6月9日",morning:{type:"朝のチェックイン",mood:2,feeling:"業務について少し不安がある"},evening:{type:"夕方のチェックアウト",satisfaction:5,experience:"新しいことを学べた"}},{date:"2025年6月8日",morning:{type:"朝のチェックイン",mood:2,feeling:"業務について少し不安がある"},evening:{type:"夕方のチェックアウト",satisfaction:3,experience:"サポートが必要だと感じた"}}],s=[{date:"2025年6月5日",type:"週次サーベイ Week 9",workSatisfaction:2.5,teamCommunication:3,learningProgress:2,overallSatisfaction:2.5,comment:"チームとのコミュニケーションに課題を感じています。もう少しサポートがあると助かります。"},{date:"2025年5月29日",type:"週次サーベイ Week 8",workSatisfaction:3.5,teamCommunication:3.5,learningProgress:3,overallSatisfaction:3.3,comment:"先週よりは業務に慣れてきましたが、まだ自信が持てない部分があります。"},{date:"2025年5月22日",type:"週次サーベイ Week 7",workSatisfaction:3,teamCommunication:4,learningProgress:3.5,overallSatisfaction:3.5,comment:"チームの雰囲気は良く、サポートしてもらえていますが、業務の量が多く少し大変です。"}],a=[{date:"2025年6月1日",type:"入社60日サーベイ",autonomy:1,relatedness:3,competence:2,overallSatisfaction:2,comment:"自分で判断する機会が少なく、もっと補量を持ちたいと感じています。他部署とのコミュニケーションももっと必要だと感じます。"},{date:"2025年5月1日",type:"入社30日サーベイ",autonomy:2,relatedness:3,competence:3,overallSatisfaction:2.7,comment:"まだ業務に慣れていませんが、少しずつ理解できるようになってきました。マネージャーとの1on1は役立っていますが、もっと頑張りたいです。"}],c=[{date:"2025年6月1日",type:"入社60日サーベイ",overallSatisfaction:2,workEnvironment:2.5,jobContent:1.5,supportSystem:3,comment:"自分で判断する機会が少なく、もっと補量を持ちたいと感じています。他部署とのコミュニケーションももっと必要だと感じます。"}],u=x=>x===null?"":x>=4?"status-good":x>=3?"status-warning":"status-alert",d=x=>{n(x)},h={padding:"20px",backgroundColor:"#fff",borderRadius:"4px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",margin:"20px 0",height:"calc(100vh - 180px)",overflowY:"auto"},g={fontSize:"24px",fontWeight:"bold",marginBottom:"16px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"},m={display:"flex",borderBottom:"1px solid #eee",marginBottom:"20px"},k={padding:"10px 20px",cursor:"pointer",borderBottom:"3px solid transparent",color:"#666"},I={...k,borderBottom:"3px solid #0a5275",color:"#0a5275",fontWeight:"bold"};return o.jsxs("div",{className:"content-container",style:h,children:[o.jsx("h2",{style:g,children:"サーベイ回答履歴"}),o.jsxs("div",{style:m,children:[o.jsx("div",{style:e==="summary"?I:k,onClick:()=>d("summary"),children:"サマリー"}),o.jsx("div",{style:e==="daily"?I:k,onClick:()=>d("daily"),children:"日次"}),o.jsx("div",{style:e==="weekly"?I:k,onClick:()=>d("weekly"),children:"週次"}),o.jsx("div",{style:e==="monthly"?I:k,onClick:()=>d("monthly"),children:"月次"})]}),e==="summary"&&o.jsxs("div",{className:"survey-summary",children:[o.jsxs("div",{className:"alert-section",style:{backgroundColor:"#fff8f8",border:"1px solid #ffdddd",borderRadius:"4px",padding:"15px",marginBottom:"20px"},children:[o.jsx("h3",{style:{color:"#d32f2f",marginBottom:"10px"},children:"アラート情報"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[o.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"#d32f2f",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"bold",marginRight:"15px"},children:r.riskScore}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:(t==null?void 0:t.name)||r.name}),o.jsx("div",{style:{color:"#666",fontSize:"14px"},children:r.department}),o.jsxs("div",{style:{color:"#666",fontSize:"14px"},children:["入社日: ",r.joinDate]})]})]}),o.jsxs("div",{style:{marginTop:"10px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"トリガー:"}),o.jsx("ul",{style:{margin:"0",paddingLeft:"20px"},children:r.triggers.map((x,N)=>o.jsxs("li",{style:{marginBottom:"5px"},children:[o.jsxs("span",{style:{fontWeight:"bold"},children:[x.type,":"]})," ",x.detail]},N))})]})]}),o.jsxs("div",{className:"latest-survey",style:{marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"10px"},children:"最新サーベイ結果"}),o.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"15px",marginBottom:"10px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold"},children:c[0].type}),o.jsx("div",{style:{color:"#666",fontSize:"14px"},children:c[0].date})]}),o.jsxs("div",{style:{backgroundColor:u(c[0].overallSatisfaction)==="status-good"?"#e8f5e9":u(c[0].overallSatisfaction)==="status-warning"?"#fff8e1":"#ffebee",padding:"5px 10px",borderRadius:"4px",fontWeight:"bold",color:u(c[0].overallSatisfaction)==="status-good"?"#2e7d32":u(c[0].overallSatisfaction)==="status-warning"?"#f57f17":"#c62828"},children:["総合評価: ",c[0].overallSatisfaction.toFixed(1)]})]}),o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"仕事環境"}),o.jsx("span",{style:{fontWeight:"bold",color:u(c[0].workEnvironment)==="status-good"?"#2e7d32":u(c[0].workEnvironment)==="status-warning"?"#f57f17":"#c62828"},children:c[0].workEnvironment.toFixed(1)})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${c[0].workEnvironment/5*100}%`,backgroundColor:u(c[0].workEnvironment)==="status-good"?"#4caf50":u(c[0].workEnvironment)==="status-warning"?"#ffc107":"#f44336"}})})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"業務内容"}),o.jsx("span",{style:{fontWeight:"bold",color:u(c[0].jobContent)==="status-good"?"#2e7d32":u(c[0].jobContent)==="status-warning"?"#f57f17":"#c62828"},children:c[0].jobContent.toFixed(1)})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${c[0].jobContent/5*100}%`,backgroundColor:u(c[0].jobContent)==="status-good"?"#4caf50":u(c[0].jobContent)==="status-warning"?"#ffc107":"#f44336"}})})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"サポート体制"}),o.jsx("span",{style:{fontWeight:"bold",color:u(c[0].supportSystem)==="status-good"?"#2e7d32":u(c[0].supportSystem)==="status-warning"?"#f57f17":"#c62828"},children:c[0].supportSystem.toFixed(1)})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${c[0].supportSystem/5*100}%`,backgroundColor:u(c[0].supportSystem)==="status-good"?"#4caf50":u(c[0].supportSystem)==="status-warning"?"#ffc107":"#f44336"}})})]})]}),o.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"4px",border:"1px solid #e0e0e0"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"コメント:"}),o.jsx("div",{style:{fontSize:"14px"},children:c[0].comment})]})]})]}),o.jsxs("div",{className:"survey-stats",style:{marginBottom:"20px"},children:[o.jsx("h3",{style:{marginBottom:"10px"},children:"サーベイ統計"}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[o.jsxs("div",{style:{flex:"1",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",marginRight:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"日次サーベイ"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold"},children:i.length*2}),o.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"回答数"})]}),o.jsxs("div",{style:{flex:"1",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",marginRight:"10px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"週次サーベイ"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold"},children:s.length}),o.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"回答数"})]}),o.jsxs("div",{style:{flex:"1",backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"月次サーベイ"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold"},children:a.length}),o.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"回答数"})]})]})]})]}),e==="daily"&&o.jsxs("div",{className:"daily-survey",children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"日次サーベイ回答履歴"}),i.map((x,N)=>o.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"15px",marginBottom:"15px",border:"1px solid #e0e0e0"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"10px",borderBottom:"1px solid #e0e0e0",paddingBottom:"5px"},children:x.date}),o.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"4px",marginBottom:"10px",border:"1px solid #e0e0e0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[o.jsx("div",{style:{fontWeight:"bold"},children:x.morning.type}),o.jsxs("div",{style:{backgroundColor:x.morning.mood>=4?"#e8f5e9":x.morning.mood>=3?"#fff8e1":"#ffebee",padding:"2px 8px",borderRadius:"4px",fontSize:"14px",fontWeight:"bold",color:x.morning.mood>=4?"#2e7d32":x.morning.mood>=3?"#f57f17":"#c62828"},children:["気分: ",x.morning.mood,"/5"]})]}),o.jsx("div",{style:{fontSize:"14px",color:"#666"},children:x.morning.feeling})]}),o.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"4px",border:"1px solid #e0e0e0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[o.jsx("div",{style:{fontWeight:"bold"},children:x.evening.type}),o.jsxs("div",{style:{backgroundColor:x.evening.satisfaction>=4?"#e8f5e9":x.evening.satisfaction>=3?"#fff8e1":"#ffebee",padding:"2px 8px",borderRadius:"4px",fontSize:"14px",fontWeight:"bold",color:x.evening.satisfaction>=4?"#2e7d32":x.evening.satisfaction>=3?"#f57f17":"#c62828"},children:["満足度: ",x.evening.satisfaction,"/5"]})]}),o.jsx("div",{style:{fontSize:"14px",color:"#666"},children:x.evening.experience})]})]},N))]}),e==="weekly"&&o.jsxs("div",{className:"weekly-survey",children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"週次サーベイ回答履歴"}),s.map((x,N)=>o.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"15px",marginBottom:"15px",border:"1px solid #e0e0e0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold"},children:x.type}),o.jsx("div",{style:{color:"#666",fontSize:"14px"},children:x.date})]}),o.jsxs("div",{style:{backgroundColor:u(x.overallSatisfaction)==="status-good"?"#e8f5e9":u(x.overallSatisfaction)==="status-warning"?"#fff8e1":"#ffebee",padding:"5px 10px",borderRadius:"4px",fontWeight:"bold",color:u(x.overallSatisfaction)==="status-good"?"#2e7d32":u(x.overallSatisfaction)==="status-warning"?"#f57f17":"#c62828"},children:["総合評価: ",x.overallSatisfaction.toFixed(1)]})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"業務満足度"}),o.jsx("span",{style:{fontWeight:"bold",color:u(x.workSatisfaction)==="status-good"?"#2e7d32":u(x.workSatisfaction)==="status-warning"?"#f57f17":"#c62828"},children:x.workSatisfaction.toFixed(1)})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.workSatisfaction/5*100}%`,backgroundColor:u(x.workSatisfaction)==="status-good"?"#4caf50":u(x.workSatisfaction)==="status-warning"?"#ffc107":"#f44336"}})})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"チームコミュニケーション"}),o.jsx("span",{style:{fontWeight:"bold",color:u(x.teamCommunication)==="status-good"?"#2e7d32":u(x.teamCommunication)==="status-warning"?"#f57f17":"#c62828"},children:x.teamCommunication.toFixed(1)})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.teamCommunication/5*100}%`,backgroundColor:u(x.teamCommunication)==="status-good"?"#4caf50":u(x.teamCommunication)==="status-warning"?"#ffc107":"#f44336"}})})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"学習進捗"}),o.jsx("span",{style:{fontWeight:"bold",color:u(x.learningProgress)==="status-good"?"#2e7d32":u(x.learningProgress)==="status-warning"?"#f57f17":"#c62828"},children:x.learningProgress.toFixed(1)})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.learningProgress/5*100}%`,backgroundColor:u(x.learningProgress)==="status-good"?"#4caf50":u(x.learningProgress)==="status-warning"?"#ffc107":"#f44336"}})})]})]}),o.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"4px",border:"1px solid #e0e0e0"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"コメント:"}),o.jsx("div",{style:{fontSize:"14px"},children:x.comment})]})]},N))]}),e==="monthly"&&o.jsxs("div",{className:"monthly-survey",children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"月次サーベイ回答履歴"}),a.map((x,N)=>o.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"15px",marginBottom:"15px",border:"1px solid #e0e0e0"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold"},children:x.type}),o.jsx("div",{style:{color:"#666",fontSize:"14px"},children:x.date})]}),o.jsxs("div",{style:{backgroundColor:u(x.overallSatisfaction)==="status-good"?"#e8f5e9":u(x.overallSatisfaction)==="status-warning"?"#fff8e1":"#ffebee",padding:"5px 10px",borderRadius:"4px",fontWeight:"bold",color:u(x.overallSatisfaction)==="status-good"?"#2e7d32":u(x.overallSatisfaction)==="status-warning"?"#f57f17":"#c62828"},children:["総合評価: ",x.overallSatisfaction.toFixed(1)]})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"自律性 (Autonomy)"}),o.jsxs("span",{style:{fontWeight:"bold",color:u(x.autonomy)==="status-good"?"#2e7d32":u(x.autonomy)==="status-warning"?"#f57f17":"#c62828"},children:[x.autonomy,"/5"]})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.autonomy/5*100}%`,backgroundColor:u(x.autonomy)==="status-good"?"#4caf50":u(x.autonomy)==="status-warning"?"#ffc107":"#f44336"}})})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"関係性 (Relatedness)"}),o.jsxs("span",{style:{fontWeight:"bold",color:u(x.relatedness)==="status-good"?"#2e7d32":u(x.relatedness)==="status-warning"?"#f57f17":"#c62828"},children:[x.relatedness,"/5"]})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.relatedness/5*100}%`,backgroundColor:u(x.relatedness)==="status-good"?"#4caf50":u(x.relatedness)==="status-warning"?"#ffc107":"#f44336"}})})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3px"},children:[o.jsx("span",{children:"有能感 (Competence)"}),o.jsxs("span",{style:{fontWeight:"bold",color:u(x.competence)==="status-good"?"#2e7d32":u(x.competence)==="status-warning"?"#f57f17":"#c62828"},children:[x.competence,"/5"]})]}),o.jsx("div",{style:{height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${x.competence/5*100}%`,backgroundColor:u(x.competence)==="status-good"?"#4caf50":u(x.competence)==="status-warning"?"#ffc107":"#f44336"}})})]})]}),o.jsxs("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"4px",border:"1px solid #e0e0e0"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"コメント:"}),o.jsx("div",{style:{fontSize:"14px"},children:x.comment})]})]},N))]})]})},QP=({employeeData:t})=>{const e=[{id:1,date:"2025年6月15日",time:"14:00 - 15:00",status:"upcoming",location:"オンライン（Zoom）",participants:[{id:1632,name:"渡辺 悠希",position:"スタッフ",photo:"/images/default_emp_icon.png"},{id:1056,name:"吉村 和夫",position:"セクションマネージャー",photo:"/images/default_emp_icon.png"}],agenda:["前回からの進捗確認","現在の課題や困っていること","今後の目標設定","キャリアプランの相談"],notes:""},{id:2,date:"2025年5月30日",time:"10:00 - 11:00",status:"completed",location:"会議室A",participants:[{id:1632,name:"渡辺 悠希",position:"スタッフ",photo:"/images/default_emp_icon.png"},{id:1404,name:"森 隼人",position:"メンター",photo:"/images/default_emp_icon.png"}],agenda:["入社後の適応状況確認","現在の業務内容の確認","チーム内でのコミュニケーション"],notes:"渡辺さんは技術的な面では順調に成長しているが、チーム内でのコミュニケーションに不安を感じている様子。特に質問や相談をする際に踹躇している。メンターの森さんからは、同じ部署の先輩として気軽に相談できるようサポートしていくことを提案。次回までに小さなペアプログラミングの機会を設けることにした。",action_items:[{task:"ペアプログラミングセッションの実施",assignee:"森 隼人",due_date:"2025年6月5日"},{task:"チーム内勉強会への参加",assignee:"渡辺 悠希",due_date:"2025年6月10日"}]},{id:3,date:"2025年5月15日",time:"13:00 - 14:00",status:"completed",location:"オンライン（Zoom）",participants:[{id:1632,name:"渡辺 悠希",position:"スタッフ",photo:"/images/default_emp_icon.png"},{id:1056,name:"吉村 和夫",position:"セクションマネージャー",photo:"/images/default_emp_icon.png"}],agenda:["入社後の初回1on1","業務環境の確認","初期目標の設定"],notes:"入社後2週間が経過し、基本的な業務環境には慣れてきた様子。技術的なスキルは高いが、まだ社内の業務フローに不慣れな部分がある。今後は吉村マネージャーとの定期的な1on1を通じて、業務の進め方や疑問点を解消していくことを確認した。",action_items:[{task:"社内システムのアクセス権限確認",assignee:"吉村 和夫",due_date:"2025年5月20日",status:"completed"},{task:"開発環境のセットアップ完了",assignee:"渡辺 悠希",due_date:"2025年5月18日",status:"completed"}]}],n={padding:"20px",backgroundColor:"#fff",borderRadius:"4px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",margin:"20px 0",height:"calc(100vh - 180px)",overflowY:"auto"},r={fontSize:"24px",fontWeight:"bold",marginBottom:"16px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"},i={backgroundColor:"#f5f5f5",borderRadius:"4px",padding:"15px",marginBottom:"20px",border:"1px solid #e0e0e0"},s={...i,borderLeft:"4px solid #2196f3"},a={...i,borderLeft:"4px solid #4caf50"},c={display:"flex",justifyContent:"space-between",marginBottom:"15px",borderBottom:"1px solid #e0e0e0",paddingBottom:"10px"},u={display:"flex",alignItems:"center",marginBottom:"5px"},d={width:"30px",height:"30px",borderRadius:"50%",marginRight:"10px",objectFit:"cover"},h={marginBottom:"5px",paddingLeft:"15px",position:"relative"},g={position:"absolute",left:"0",top:"8px",width:"6px",height:"6px",backgroundColor:"#666",borderRadius:"50%"},m={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",backgroundColor:"#f9f9f9",borderRadius:"4px",marginBottom:"5px"},k={...m,backgroundColor:"#e8f5e9",textDecoration:"line-through"},I=x=>{if(x==="upcoming")return{backgroundColor:"#e3f2fd",color:"#0d47a1",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"};if(x==="completed")return{backgroundColor:"#e8f5e9",color:"#1b5e20",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"}};return o.jsxs("div",{className:"content-container",style:n,children:[o.jsx("h2",{style:r,children:"1on1履歴"}),o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"予定された1on1"}),e.filter(x=>x.status==="upcoming").map(x=>o.jsxs("div",{style:s,children:[o.jsxs("div",{style:c,children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"5px"},children:[x.date," ",x.time]}),o.jsxs("div",{style:{color:"#666",fontSize:"14px"},children:["場所: ",x.location]})]}),o.jsx("div",{style:I(x.status),children:"予定"})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"参加者:"}),x.participants.map((N,S)=>o.jsxs("div",{style:u,children:[o.jsx("img",{src:N.photo,alt:N.name,style:d,onError:_=>{_.target.onerror=null,_.target.src="/images/default_emp_icon.png"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold"},children:N.name}),o.jsx("div",{style:{fontSize:"12px",color:"#666"},children:N.position})]})]},S))]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"アジェンダ:"}),x.agenda.map((N,S)=>o.jsxs("div",{style:h,children:[o.jsx("div",{style:g}),N]},S))]})]},x.id))]}),o.jsxs("div",{children:[o.jsx("h3",{style:{marginBottom:"15px"},children:"過去の1on1"}),e.filter(x=>x.status==="completed").map(x=>o.jsxs("div",{style:a,children:[o.jsxs("div",{style:c,children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"5px"},children:[x.date," ",x.time]}),o.jsxs("div",{style:{color:"#666",fontSize:"14px"},children:["場所: ",x.location]})]}),o.jsx("div",{style:I(x.status),children:"完了"})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"参加者:"}),x.participants.map((N,S)=>o.jsxs("div",{style:u,children:[o.jsx("img",{src:N.photo,alt:N.name,style:d,onError:_=>{_.target.onerror=null,_.target.src="/images/default_emp_icon.png"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold"},children:N.name}),o.jsx("div",{style:{fontSize:"12px",color:"#666"},children:N.position})]})]},S))]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"アジェンダ:"}),x.agenda.map((N,S)=>o.jsxs("div",{style:h,children:[o.jsx("div",{style:g}),N]},S))]}),x.notes&&o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"メモ:"}),o.jsx("div",{style:{backgroundColor:"#ffffff",padding:"10px",borderRadius:"4px",border:"1px solid #e0e0e0",fontSize:"14px",lineHeight:"1.5"},children:x.notes})]}),x.action_items&&x.action_items.length>0&&o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"アクションアイテム:"}),x.action_items.map((N,S)=>o.jsxs("div",{style:N.status==="completed"?k:m,children:[o.jsxs("div",{children:[o.jsx("div",{children:N.task}),o.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["担当: ",N.assignee]})]}),o.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["期限: ",N.due_date]})]},S))]})]},x.id))]})]})},YP=({activeTab:t,employeeData:e,employeeProfile:n,employeeMaster:r,organization:i,photoUrl:s,loading:a,error:c})=>{const u={flex:1,padding:"20px",backgroundColor:"#fff",overflowY:"auto"},d=()=>{const g={width:"100%",height:"calc(100vh - 140px)",border:"none",overflow:"hidden"};return o.jsx("div",{style:{width:"100%",height:"100%"},children:o.jsx("iframe",{src:"/mockups/onboarding-journey-progress.html",title:"オンボーディング進捗",style:g})})},h=()=>{switch(t){case"info":return o.jsx(Gv,{employeeData:e,employeeProfile:n,employeeMaster:r,organization:i,photoUrl:s,loading:a,error:c});case"onboarding":return o.jsx(d,{});case"survey":return o.jsx(KP,{employeeData:e});case"1on1":return o.jsx(QP,{employeeData:e});default:return o.jsx(Gv,{employeeData:e,employeeProfile:n,employeeMaster:r,organization:i,photoUrl:s,loading:a,error:c})}};return o.jsx("div",{style:u,children:h()})},JP=()=>{const{id:t,tab:e="info"}=Kf();xe();const[n,r]=b.useState(e),[i,s]=b.useState(!0),[a,c]=b.useState(null),[u,d]=b.useState(null),[h,g]=b.useState("/images/default_emp_icon.png"),[m,k]=b.useState(null),[I,x]=b.useState(null),[N,S]=b.useState(null),_=async P=>{try{console.log("従業員データ取得開始:",P),s(!0),c(null);let D=null,A=null,E=null,y=null;const w=kt(Ee,"employee_profiles",P),C=await jt(w);C.exists()?(E=C.data(),console.log("プロフィールデータ取得成功:",E),k(E)):console.log(`プロフィールデータが見つかりません: ${P}`);const v=kt(Ee,"employees",P),O=await jt(v);O.exists()?(A=O.data(),console.log("従業員マスターデータ取得成功:",A),x(A)):console.log(`従業員マスターデータが見つかりません: ${P}`);const R=kt(Ee,"new_hire",P),q=await jt(R);q.exists()?(D=q.data(),console.log("新入社員データ取得成功:",D)):console.log(`新入社員データが見つかりません: ${P}`);const oe=(D==null?void 0:D.division_code)||(A==null?void 0:A.division_code);if(oe){const Z=kt(Ee,"organizations",oe),W=await jt(Z);W.exists()?(y=W.data(),console.log("組織データ取得成功:",y),S(y)):console.log(`組織データが見つかりません: ${oe}`)}try{const Z=(A==null?void 0:A.emp_no)||(D==null?void 0:D.emp_no)||P;if(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"))g(`/images/${Z}.png`),console.log("ローカル環境の写真URLを設定:",`/images/${Z}.png`);else try{const W=`https://firebasestorage.googleapis.com/v0/b/${xt.app.options.storageBucket}/o/`,V=`employee-photos%2F${Z}.png`,B=`${W}${V}?alt=media`;console.log("写真URLを設定:",B),g(B)}catch(W){console.log("写真が見つかりません。デフォルト画像を使用します:",W),g("/images/default_emp_icon.png")}}catch(Z){console.log("写真取得中にエラーが発生しました:",Z),g("/images/default_emp_icon.png")}if(D||A){const Z=F=>F?F.seconds?new Date(F.seconds*1e3).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):new Date(F).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"";let W=null;const V=(D==null?void 0:D.supervisor_emp_id)||(A==null?void 0:A.supervisor_emp_id);if(V)try{const F=kt(Ee,"employees",V),ae=await jt(F);if(ae.exists()){const te=ae.data();W={id:V,name:te.full_name_local||`${te.last_name_local} ${te.first_name_local}`,name_alphabet:te.full_name_alphabet,position:te.position||""},console.log("マネージャー情報を取得しました:",W)}else console.log(`マネージャーデータが見つかりません: ${V}`)}catch(F){console.error("マネージャーデータの取得に失敗しました:",F)}const B={id:P,name:(D==null?void 0:D.full_name_local)||(A==null?void 0:A.full_name_local)||`${(A==null?void 0:A.last_name_local)||""} ${(A==null?void 0:A.first_name_local)||""}`,emp_no:(D==null?void 0:D.emp_no)||(A==null?void 0:A.emp_no)||"",email:(A==null?void 0:A.email_addr)||(D==null?void 0:D.email)||(A==null?void 0:A.email)||"",department:(y==null?void 0:y.division_name_local)||(D==null?void 0:D.division_name)||(A==null?void 0:A.division_name)||"",position:(D==null?void 0:D.position)||(A==null?void 0:A.position)||"",join_date:(A==null?void 0:A.join_date)||(D==null?void 0:D.join_date)||"",manager:W};d(B)}else console.log("従業員データが見つかりません"),c("従業員データが見つかりません"),d({name:"大原 孝之",emp_no:"1634",email:"to1634@sonoeng.jp",department:"第二開発部",position:"エンジニア"});s(!1)}catch(D){console.error("従業員データの取得に失敗しました:",D),c(D.message||"データ取得エラー"),s(!1),d({name:"大原 孝之",emp_no:"1634",email:"to1634@sonoeng.jp",department:"第二開発部",position:"エンジニア"})}};b.useEffect(()=>{t&&(console.log("データ取得を開始します:",t),_(t))},[t]),b.useEffect(()=>{console.log("タブパラメータが変更されました:",e),r(e)},[e]);const j={display:"flex",minHeight:"calc(100vh - 120px)",height:"calc(100vh - 120px)",width:"100%",backgroundColor:"#f5f5f5",overflow:"hidden"};return o.jsxs("div",{style:j,children:[o.jsx(HP,{employeeId:t,activeTab:n}),o.jsx(YP,{activeTab:n,employeeData:u,employeeProfile:m,employeeMaster:I,organization:N,photoUrl:h,loading:i,error:a})]})},XP=()=>{const[t,e]=b.useState(!0),[n,r]=b.useState(null),[i,s]=b.useState(null),[a,c]=b.useState("/images/default_emp_icon.png"),[u,d]=b.useState(null),[h,g]=b.useState(null),[m,k]=b.useState(null),[I,x]=b.useState(null),[N,S]=b.useState({}),_=xe(),{id:j}=Kf(),P=async A=>{try{console.log("従業員データ取得開始:",A),e(!0),r(null);let E=null,y=null,w=null,C=null;const v=kt(Ee,"employee_profiles",A),O=await jt(v);O.exists()?(w=O.data(),console.log("プロフィールデータ取得成功:",w),d(w)):console.log(`プロフィールデータが見つかりません: ${A}`);const R=kt(Ee,"employees",A),q=await jt(R);q.exists()?(y=q.data(),console.log("従業員マスターデータ取得成功:",y),g(y)):console.log(`従業員マスターデータが見つかりません: ${A}`);const oe=kt(Ee,"new_hire",A),Z=await jt(oe);Z.exists()?(E=Z.data(),console.log("新入社員データ取得成功:",E)):console.log(`新入社員データが見つかりません: ${A}`);const W=(E==null?void 0:E.division_code)||(y==null?void 0:y.division_code);if(W){const V=kt(Ee,"organizations",W),B=await jt(V);B.exists()?(C=B.data(),console.log("組織データ取得成功:",C),k(C)):console.log(`組織データが見つかりません: ${W}`)}try{if(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"))c(`/images/${A}.png`),console.log("ローカル環境の写真URLを設定:",`/images/${A}.png`);else{const V=(y==null?void 0:y.emp_no)||(E==null?void 0:E.emp_no)||A,B=$r(xt,`employee-photos/${V}.png`);try{const F=await Br(B);console.log("従業員写真URL取得成功:",F),c(F)}catch(F){console.log("従業員写真の取得に失敗しました:",F)}}}catch(V){console.log("写真取得中にエラーが発生しました:",V)}if(E||y){const V=te=>te?te&&typeof te=="object"&&"seconds"in te?new Date(te.seconds*1e3).toISOString().split("T")[0]:String(te):"";let B=null;const F=(E==null?void 0:E.supervisor_emp_id)||(y==null?void 0:y.supervisor_emp_id);if(console.log("上司の社員番号:",F),F)try{const te=Ot(Ee,"employees"),ve=Ln(te,si("emp_no","==",F)),Ze=await Dt(ve);if(Ze.empty)console.log(`マネージャーデータが見つかりません: 社員番号 ${F}`);else{const et=Ze.docs[0],ce=et.data();B={id:et.id,name:ce.full_name_local||`${ce.last_name_local||""} ${ce.first_name_local||""}`,name_alphabet:ce.full_name_alphabet||"",emp_no:ce.emp_no||F},x(B),console.log("マネージャーデータ取得成功:",B)}}catch(te){console.error("マネージャーデータの取得に失敗しました:",te)}const ae={id:A,name:(E==null?void 0:E.full_name_local)||`${(E==null?void 0:E.last_name_local)||(y==null?void 0:y.last_name_local)||""} ${(E==null?void 0:E.first_name_local)||(y==null?void 0:y.first_name_local)||""}`,email:(E==null?void 0:E.email_addr)||(y==null?void 0:y.email_addr)||"",department:(E==null?void 0:E.division_code)||(y==null?void 0:y.division_code)||"",position:(E==null?void 0:E.position)||(y==null?void 0:y.position)||"",emp_no:(E==null?void 0:E.emp_no)||(y==null?void 0:y.emp_no)||A,join_date:V((E==null?void 0:E.join_date)||(y==null?void 0:y.join_date)),birth_date:V(y==null?void 0:y.birth_date),gender:(y==null?void 0:y.gender)||"",manager:B};s(ae)}else console.log("従業員データが見つかりません"),r("従業員データが見つかりません");e(!1)}catch(E){console.error("従業員データの取得に失敗しました:",E),r(E.message||"データ取得エラー"),e(!1)}},D=async()=>{try{const A=await fetch("/data/mbti_j.json");if(!A.ok)throw new Error(`MBTIデータの取得に失敗しました: ${A.status}`);const E=await A.json(),y={};E.forEach(w=>{y[w.mbti]=w.description}),S(y),console.log("MBTIデータを取得しました:",y)}catch(A){console.error("MBTIデータの取得中にエラーが発生しました:",A)}};return b.useEffect(()=>{j&&(console.log("データ取得を開始します:",j),P(j),D())},[j]),o.jsxs("div",{className:"main-container",children:[t&&o.jsx("div",{className:"admin-loading",children:o.jsx("p",{children:"データを読み込み中..."})}),n&&o.jsxs("div",{className:"admin-error-message",children:[o.jsxs("p",{children:["エラーが発生しました: ",n]}),o.jsx("button",{onClick:()=>_("/admin/employees"),children:"← 一覧に戻る"})]}),!t&&i&&!n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"profile-photo",children:o.jsx("img",{src:a,alt:`${i.name}の写真`,onError:A=>{A.target.onerror=null,A.target.src="/images/default_emp_icon.png"}})}),o.jsxs("div",{className:"profile-basic",children:[i.position&&o.jsx("div",{className:"employee-position",style:{fontSize:"14px",color:"#666",marginBottom:"4px"},children:i.position}),o.jsx("div",{className:"employee-name",children:i.name||"名前なし"}),h&&h.full_name_alphabet&&o.jsx("div",{className:"employee-name-en",children:h.full_name_alphabet}),o.jsx("div",{className:"employee-department",style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:m?m.division_name_local||m.division_name:i.department||"-"}),i.manager&&o.jsxs("div",{className:"employee-manager",style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:["マネージャー: ",o.jsxs(Le,{to:`/admin/employees/${i.manager.id}`,style:{color:"#1976d2",textDecoration:"none"},onMouseOver:A=>A.target.style.textDecoration="underline",onMouseOut:A=>A.target.style.textDecoration="none",children:[i.manager.name,i.manager.name_alphabet&&` (${i.manager.name_alphabet})`]})]})]})]}),o.jsxs("div",{className:"content-grid",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"基本情報"}),o.jsx("div",{className:"card-content",children:o.jsxs("div",{className:"basic-info-grid",children:[o.jsxs("div",{className:"basic-info-left",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"氏名（現地表記）"}),o.jsx("div",{className:"info-value",children:i.name||"名前なし"})]}),h&&h.full_name_alphabet&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"氏名（アルファベット）"}),o.jsx("div",{className:"info-value",children:h.full_name_alphabet})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"社員番号"}),o.jsx("div",{className:"info-value",children:i.emp_no||"-"})]})]}),o.jsxs("div",{className:"basic-info-right",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"入社日"}),o.jsx("div",{className:"info-value",children:i.join_date?new Date(i.join_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"メールアドレス"}),o.jsx("div",{className:"info-value",children:i.email||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"オフィス"}),o.jsx("div",{className:"info-value",children:h&&h.office?h.office:"-"})]})]})]})})]}),u&&u.qualifications&&o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"保有資格"}),o.jsx("div",{className:"card-content",children:o.jsx("div",{className:"qualifications-grid",children:u.qualifications.split(",").map((A,E)=>o.jsx("span",{className:"qualification-tag",children:A.trim()},E))})})]}),u&&o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"プロフィール"}),o.jsxs("div",{className:"card-content",children:[u.mbti&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"MBTI"}),o.jsx("div",{className:"info-value",children:o.jsxs("span",{className:"mbti-display",children:[u.mbti,o.jsx("div",{className:"mbti-tooltip",children:N[u.mbti]?o.jsxs(o.Fragment,{children:[o.jsx("strong",{children:u.mbti}),o.jsx("br",{}),N[u.mbti]]}):o.jsxs(o.Fragment,{children:["MBTIは性格タイプを示す指標です。",o.jsx("br",{}),u.mbti_description||"MBTIの詳細情報は登録されていません。"]})})]})})]}),u.profile&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"コメント"}),o.jsx("div",{className:"info-value comment-text",children:u.profile})]}),u.skills&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"スキル"}),o.jsx("div",{className:"info-value",children:u.skills})]}),u.interests&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"興味・関心"}),o.jsx("div",{className:"info-value",children:u.interests})]})]})]}),o.jsx("button",{className:"back-button",onClick:()=>_("/admin/employees"),children:"← 一覧に戻る"})]})]}),!1]})},ZP=()=>{const t=xe(),e={full_name_local:"山田 太郎",full_name_alphabet:"Taro Yamada",emp_no:"10001",join_date:"2020-04-01",email:"taro.yamada@example.com",division_name:"技術開発部",supervisor_name:"鈴木 一郎",mbti:"INTJ",profile_comment:"プログラミングとアウトドア活動が好きです。チームでの協力を大切にし、新しい技術の習得に意欲的です。休日は山登りやサイクリングを楽しんでいます。",photo_url:"/images/default_emp_icon.png"};return o.jsx("div",{className:"employee-detail-container",children:o.jsxs("div",{className:"employee-detail-card",children:[o.jsxs("div",{className:"employee-header",children:[o.jsx("div",{className:"employee-photo-container",children:o.jsx("img",{src:e.photo_url,alt:e.full_name_local,className:"employee-photo"})}),o.jsxs("div",{className:"employee-header-info",children:[o.jsx("h1",{children:e.full_name_local}),o.jsx("h2",{children:e.full_name_alphabet}),o.jsxs("div",{className:"employee-id",children:["社員番号: ",e.emp_no]})]})]}),o.jsxs("div",{className:"employee-section",children:[o.jsx("h3",{className:"section-title",children:"基本情報"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"氏名（現地表記）"}),o.jsx("div",{className:"info-value",children:e.full_name_local})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"氏名（アルファベット）"}),o.jsx("div",{className:"info-value",children:e.full_name_alphabet})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"社員番号"}),o.jsx("div",{className:"info-value",children:e.emp_no})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"入社日"}),o.jsx("div",{className:"info-value",children:e.join_date})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"メールアドレス"}),o.jsx("div",{className:"info-value",children:e.email})]})]})]}),o.jsxs("div",{className:"employee-section",children:[o.jsx("h3",{className:"section-title",children:"組織情報"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"部署名"}),o.jsx("div",{className:"info-value",children:e.division_name})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"上司"}),o.jsx("div",{className:"info-value",children:e.supervisor_name})]})]})]}),o.jsxs("div",{className:"employee-section",children:[o.jsx("h3",{className:"section-title",children:"プロフィール"}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("div",{className:"info-label",children:"MBTI"}),o.jsx("div",{className:"info-value",children:e.mbti})]}),o.jsxs("div",{className:"info-item full-width",children:[o.jsx("div",{className:"info-label",children:"自己紹介コメント"}),o.jsx("div",{className:"info-value profile-comment",children:e.profile_comment})]})]})]}),o.jsx("div",{className:"employee-actions",children:o.jsx("button",{className:"back-button",onClick:()=>t("/admin/employees"),children:"← 一覧に戻る"})})]})})},e4=()=>{const t={width:"100%",height:"calc(100vh - 60px)",border:"none",overflow:"hidden"};return o.jsx("div",{className:"journey-designer-container",style:{width:"100%",height:"100%"},children:o.jsx("iframe",{src:"/mockups/onboarding-journey-designer.html",title:"オンボーディングジャーニーデザイナー",style:t})})},t4=()=>{const t=xe(),[e,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(null),[c,u]=b.useState(""),[d,h]=b.useState({}),[g,m]=b.useState(!0),[k,I]=b.useState(null),[x,N]=b.useState(!1),S=b.useRef(),_=b.useCallback(C=>{x||(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(v=>{v[0].isIntersecting&&g&&A()},{threshold:.5}),C&&S.current.observe(C))},[x,g]);`${xt.app.options.storageBucket}`;const j=[{id:"E001",emp_no:"E001",name:"渡辺 悠希",email:"y.watanabe@example.com",department:"エンジニアリング部",position:"ソフトウェアエンジニア"},{id:"E002",emp_no:"E002",name:"中村 太陽",email:"t.nakamura@example.com",department:"エンジニアリング部",position:"シニアエンジニア"},{id:"E003",emp_no:"E003",name:"大原 孝之",email:"t.ohara@example.com",department:"エンジニアリング部",position:"プロジェクトマネージャー"},{id:"E004",emp_no:"E004",name:"藤田 健太",email:"k.fujita@example.com",department:"プロジェクト部",position:"プロジェクトリーダー"},{id:"E005",emp_no:"E005",name:"尾形 香織",email:"k.ogata@example.com",department:"営業部",position:"セールスマネージャー"}],P={E001:"/images/default_emp_icon.png",E002:"/images/default_emp_icon.png",E003:"/images/default_emp_icon.png",E004:"/images/default_emp_icon.png",E005:"/images/default_emp_icon.png"},D=async()=>{try{i(!0),a(null),console.log("Firestoreから組織データを取得します");const C=await Dt(Ot(Ee,"organizations")),v={};C.forEach(Z=>{const W=Z.data();v[Z.id]=W.division_name_local||Z.id}),console.log(`${Object.keys(v).length}件の組織データを取得しました`),console.log("Firestoreからemployeesデータを取得します");let O,R;try{O=Ln(Ot(Ee,"employees"),si("status","==","active"),ei("emp_no"),Ai(20)),R=await Dt(O),console.log(`${R.size}件のemployeesデータを取得しました`)}catch(Z){console.error("statusフィールドでのクエリエラー:",Z),console.log("退職者を除外するための別のフィルタリングで再試行");try{O=Ln(Ot(Ee,"employees"),si("retirement_date","==",null),ei("emp_no"),Ai(20)),R=await Dt(O),console.log(`退職日フィルタ: ${R.size}件のemployeesデータを取得しました`)}catch(W){console.error("退職日フィルタでのクエリエラー:",W),O=Ln(Ot(Ee,"employees"),ei("emp_no"),Ai(20)),R=await Dt(O),console.log(`フィルタなし: ${R.size}件のemployeesデータを取得しました`)}}R.size>0?I(R.docs[R.size-1]):m(!1);const q=[],oe={};R.forEach(Z=>{const W=Z.data();if(W.emp_no&&(console.log(`社員ID ${W.emp_no} の役職情報:`,{position:W.position,position_name_local:W.position_name_local}),q.push({id:Z.id,emp_no:W.emp_no,name:W.full_name_local||"Unknown",email:W.email_addr||y(W.full_name_local),department:E(W.division_code,v),position:W.position||W.position_name_local||""}),W.emp_no))try{const V=$r(xt,`employee-photos/${W.emp_no}.png`);console.log("画像参照を作成:",V),Br(V).then(B=>{console.log(`画像取得成功: ${W.emp_no}, URL: ${B}`),h(F=>({...F,[W.emp_no]:B}))}).catch(B=>{console.warn(`画像取得失敗: ${W.emp_no}`,B),h(F=>({...F,[W.emp_no]:"/images/default_emp_icon.png"}))})}catch(V){console.warn(`社員ID ${W.emp_no} の写真取得エラー:`,V),oe[W.emp_no]="/images/default_emp_icon.png"}}),n(q),h(Z=>({...Z,...oe})),i(!1)}catch(C){console.error("Firestoreからのデータ取得エラー:",C),console.log("エラーが発生したため、モックデータを使用します"),n(j),h(P),a("Firestoreからのデータ取得に失敗しました。モックデータを表示しています。"),i(!1),m(!1)}},A=async()=>{if(!(!g||x))try{N(!0);let C,v;try{C=Ln(Ot(Ee,"employees"),si("status","==","active"),ei("emp_no"),_d(k),Ai(10)),v=await Dt(C),console.log(`追加で${v.size}件のemployeesデータを取得しました`)}catch(oe){console.error("追加読み込み: statusフィールドでのクエリエラー:",oe),console.log("退職者を除外するための別のフィルタリングで再試行");try{C=Ln(Ot(Ee,"employees"),si("retirement_date","==",null),ei("emp_no"),_d(k),Ai(10)),v=await Dt(C),console.log(`退職日フィルタ: 追加で${v.size}件のemployeesデータを取得しました`)}catch(Z){console.error("退職日フィルタでのクエリエラー:",Z),C=Ln(Ot(Ee,"employees"),ei("emp_no"),_d(k),Ai(10)),v=await Dt(C),console.log(`フィルタなし: 追加で${v.size}件のemployeesデータを取得しました`)}}v.size>0?I(v.docs[v.size-1]):m(!1);const O=await Dt(Ot(Ee,"organizations")),R={};O.forEach(oe=>{const Z=oe.data();R[oe.id]=Z.division_name_local||oe.id});const q=[];v.forEach(oe=>{const Z=oe.data();if(Z.emp_no&&(console.log(`追加読み込み: 社員ID ${Z.emp_no} の役職情報:`,{position:Z.position,position_name_local:Z.position_name_local}),q.push({id:oe.id,emp_no:Z.emp_no,name:Z.full_name_local||"Unknown",email:Z.email_addr||y(Z.full_name_local),department:E(Z.division_code,R),position:Z.position||Z.position_name_local||""}),Z.emp_no))try{const W=$r(xt,`employee-photos/${Z.emp_no}.png`);Br(W).then(V=>{h(B=>({...B,[Z.emp_no]:V}))}).catch(V=>{h(B=>({...B,[Z.emp_no]:"/images/default_emp_icon.png"}))})}catch(W){console.warn(`社員ID ${Z.emp_no} の写真取得エラー:`,W)}}),n(oe=>[...oe,...q]),N(!1)}catch(C){console.error("追加データ取得エラー:",C),N(!1),m(!1)}};b.useEffect(()=>{console.log("Firebase Storageバケット:",xt.app.options.storageBucket),console.log("FirebaseプロジェクトID:",xt.app.options.projectId),D()},[]);const E=(C,v)=>{if(!C)return"部門不明";if(v&&v[C])return v[C];const O={COR:"コーポレート本部",ENG:"エンジニアリング部",PRJ:"プロジェクト部",SLS:"営業部",BRD:"取締役会"};if(O[C])return O[C];const R=C.split("-")[0];return O[R]||`部門: ${C}`},y=C=>{if(!C)return"email@example.com";const v=C.split(" ");if(v.length>=2){const O=v[0].charAt(0).toLowerCase(),R=v[1].toLowerCase();return`${O}.${R}@example.com`}return`${C.replace(/\s+/g,".").toLowerCase().substring(0,8)}@example.com`},w=e.filter(C=>C.name.toLowerCase().includes(c.toLowerCase())||C.email.toLowerCase().includes(c.toLowerCase())||C.department.toLowerCase().includes(c.toLowerCase())||C.position.toLowerCase().includes(c.toLowerCase())||C.emp_no.toLowerCase().includes(c.toLowerCase()));return o.jsxs("div",{children:[o.jsx("div",{className:"admin-toolbar",children:o.jsx("div",{className:"admin-search",children:o.jsx("input",{type:"text",placeholder:"社員番号、名前、メール、部署、役職で検索...",value:c,onChange:C=>u(C.target.value)})})}),o.jsxs("div",{className:"admin-card",children:[o.jsx("h3",{className:"admin-card-title",children:"社員ディレクトリ"}),r?o.jsx("div",{className:"admin-loading",children:"データを読み込み中..."}):s?o.jsx("div",{className:"admin-error",children:s}):w.length===0?o.jsx("div",{className:"admin-empty",children:"該当する社員が見つかりません"}):o.jsxs("table",{className:"admin-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"社員番号"}),o.jsx("th",{children:"氏名"}),o.jsx("th",{children:"部署"}),o.jsx("th",{children:"役職"}),o.jsx("th",{children:"メールアドレス"}),o.jsx("th",{children:"アクション"})]})}),o.jsx("tbody",{children:w.map((C,v)=>o.jsxs("tr",{ref:v===w.length-1?_:null,children:[o.jsx("td",{children:C.emp_no}),o.jsx("td",{children:o.jsxs("div",{className:"employee-list-item",children:[o.jsx("div",{className:"employee-list-photo",children:o.jsx("img",{src:d[C.emp_no]||"/images/default_emp_icon.png",alt:C.name,onError:O=>{O.target.src="/images/default_emp_icon.png"},style:{width:"100%",height:"100%",objectFit:"cover"}})}),o.jsx("span",{children:C.name})]})}),o.jsx("td",{children:C.department}),o.jsx("td",{children:C.position}),o.jsx("td",{children:C.email}),o.jsx("td",{children:o.jsx("div",{className:"admin-actions",children:o.jsx("button",{className:"admin-action-button",onClick:()=>t(`/admin/employee-detail/${C.emp_no}`),children:"詳細"})})})]},`${C.emp_no}_${v}`))})]}),x&&o.jsx("div",{className:"admin-loading-more",children:"さらにデータを読み込み中..."}),!g&&e.length>0&&o.jsx("div",{className:"admin-no-more-data",children:"すべての社員データを表示しました"})]})]})},n4=({employeeId:t,activeTab:e,onTabChange:n})=>{const r=xe(),i={width:"180px",minWidth:"180px",flexShrink:0,backgroundColor:"white",color:"#333",padding:"20px 0",height:"100%",display:"flex",flexDirection:"column",position:"sticky",top:0,borderRight:"1px solid #eee"},s={padding:"15px 20px",cursor:"pointer",borderLeft:"4px solid transparent",fontSize:"16px",color:"#333"},a={...s,backgroundColor:"#f5f5f5",color:"#333",borderLeft:"4px solid #0a5275",fontWeight:"bold"},c={...s,display:"flex",alignItems:"center",marginBottom:"20px",color:"#0a5275"},u=d=>`/admin/employee-detail/${t}/${d}`;return o.jsxs("div",{style:i,children:[o.jsx("div",{style:c,onClick:()=>r("/admin/directory"),children:"← 一覧へ戻る"}),o.jsx(Le,{to:u("info"),style:{textDecoration:"none"},children:o.jsx("div",{style:e==="info"?a:s,children:"情報"})})]})},r4=({employeeData:t,employeeProfile:e,employeeMaster:n,organization:r,photoUrl:i,loading:s,error:a})=>{const[c,u]=b.useState({}),d=async()=>{try{const h=await fetch("/data/mbti_j.json");if(!h.ok)throw new Error(`MBTIデータの取得に失敗しました: ${h.status}`);const g=await h.json(),m={};g.forEach(k=>{m[k.mbti]=k.description}),u(m),console.log("MBTIデータを取得しました:",m)}catch(h){console.error("MBTIデータの取得中にエラーが発生しました:",h)}};return b.useEffect(()=>{d()},[]),s?o.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"50px"},children:o.jsx("p",{children:"データを読み込み中...しばらくお待ちください"})}):a?o.jsx("div",{className:"error-container",style:{textAlign:"center",padding:"50px",color:"red"},children:o.jsxs("p",{children:["エラーが発生しました: ",a]})}):t?o.jsxs("div",{className:"content-container",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"profile-photo",children:o.jsx("img",{src:i,alt:`${t.name}の写真`,onError:h=>{h.target.onerror=null,h.target.src="/images/default_emp_icon.png"},style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover"}})}),o.jsxs("div",{className:"profile-basic",children:[o.jsx("div",{className:"staff-label",children:t.position||"Staff"}),o.jsx("div",{className:"employee-name",style:{fontSize:"24px",fontWeight:"bold"},children:t.name||"名前なし"}),t.name_en&&o.jsx("div",{className:"employee-name-en",style:{fontSize:"14px",color:"#666"},children:t.name_en}),o.jsx("div",{className:"employee-department",style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:r?r.division_name_local||r.division_name:t.department||"-"}),t.manager&&o.jsxs("div",{className:"employee-manager",style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:["マネージャー:",o.jsxs("a",{href:`#/admin/employee-detail/${t.manager.emp_no}`,style:{color:"#0a5275",textDecoration:"none",fontWeight:"bold",cursor:"pointer"},onClick:h=>{h.preventDefault(),window.location.hash=`#/admin/employee-detail/${t.manager.emp_no}`},children:[t.manager.name,t.manager.name_alphabet&&` (${t.manager.name_alphabet})`]})]})]})]}),o.jsxs("div",{className:"content-grid",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"基本情報"}),o.jsx("div",{className:"card-content",children:o.jsxs("div",{className:"basic-info-grid",children:[o.jsxs("div",{className:"basic-info-left",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"氏名（現地表記）"}),o.jsx("div",{className:"info-value",children:t.name||"名前なし"})]}),t.name_en&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"氏名（アルファベット）"}),o.jsx("div",{className:"info-value",children:t.name_en})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"社員番号"}),o.jsx("div",{className:"info-value",children:t.emp_no||"-"})]})]}),o.jsxs("div",{className:"basic-info-right",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"入社日"}),o.jsx("div",{className:"info-value",children:t.join_date?typeof t.join_date=="string"?t.join_date.match(/^\d{4}-\d{2}-\d{2}$/)?(()=>{try{const h=t.join_date.split("-"),g=h[0],m=parseInt(h[1],10),k=parseInt(h[2],10);return`${g}年${m}月${k}日`}catch{return t.join_date}})():t.join_date:typeof t.join_date=="object"&&"seconds"in t.join_date?(()=>new Date(t.join_date.seconds*1e3).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}))():t.join_date instanceof Date?t.join_date.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-":"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"メールアドレス"}),o.jsx("div",{className:"info-value",children:t.email||"-"})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"オフィス"}),o.jsx("div",{className:"info-value",children:t.office||"-"})]})]})]})})]}),e&&o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"プロフィール"}),o.jsxs("div",{className:"card-content",children:[e.mbti&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"MBTI"}),o.jsx("div",{className:"info-value",children:o.jsxs("span",{className:"mbti-display",children:[e.mbti,o.jsx("div",{className:"mbti-tooltip",children:c[e.mbti]?o.jsxs(o.Fragment,{children:[o.jsx("strong",{children:e.mbti}),o.jsx("br",{}),c[e.mbti]]}):o.jsxs(o.Fragment,{children:["MBTIは性格タイプを示す指標です。",o.jsx("br",{}),e.mbti_description||"MBTIの詳細情報は登録されていません。"]})})]})})]}),e.profile&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"コメント"}),o.jsx("div",{className:"info-value comment-text",children:e.profile})]}),e.skills&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"スキル"}),o.jsx("div",{className:"info-value",children:e.skills})]}),e.interests&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"興味・関心"}),o.jsx("div",{className:"info-value",children:e.interests})]}),e.birth_date&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"生年月日"}),o.jsx("div",{className:"info-value",children:typeof e.birth_date=="string"?e.birth_date:e.birth_date.seconds?new Date(e.birth_date.seconds*1e3).toLocaleDateString("ja-JP"):"-"})]}),e.hometown&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"出身地"}),o.jsx("div",{className:"info-value",children:e.hometown})]}),e.hobby&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"趣味"}),o.jsx("div",{className:"info-value",children:e.hobby})]}),e.specialty&&o.jsxs("div",{className:"info-row",children:[o.jsx("div",{className:"info-label",children:"得意分野"}),o.jsx("div",{className:"info-value",children:e.specialty})]})]})]}),t.history&&t.history.length>0&&o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-header",children:"履歴"}),o.jsx("div",{className:"card-content",children:o.jsx("div",{className:"employee-history",children:t.history.map((h,g)=>o.jsxs("div",{className:`history-item ${h.isCurrent?"current":""}`,children:[o.jsx("div",{className:"history-date",children:h.date}),o.jsx("div",{className:"history-description",children:h.description})]},g))})})]})]})]}):o.jsx("div",{className:"no-data-container",style:{textAlign:"center",padding:"50px"},children:o.jsx("p",{children:"従業員データが見つかりません"})})},Kv=()=>{const{id:t,tab:e="info"}=Kf(),n=xe(),[r,i]=b.useState(e),[s,a]=b.useState(!0),[c,u]=b.useState(null),[d,h]=b.useState(null),[g,m]=b.useState("/images/default_emp_icon.png"),[k,I]=b.useState(null),[x,N]=b.useState(null),[S,_]=b.useState(null),[j,P]=b.useState(null),D=y=>{i(y),n(`/admin/employee-detail/${t}/${y}`)},A=async y=>{a(!0),u(null);try{console.log("従業員データ取得開始:",y);const w=kt(Ee,"employees",y),C=await jt(w);if(C.exists()){const v=C.data();N(v),console.log("従業員マスターデータ:",v);let O=null;if(v.division_code)try{const V=kt(Ee,"organizations",v.division_code),B=await jt(V);B.exists()&&(O=B.data(),_(O),console.log("組織情報:",O))}catch(V){console.error("組織情報取得エラー:",V)}let R=null;try{const V=kt(Ee,"employee_profiles",y),B=await jt(V);B.exists()&&(R=B.data(),I(R),console.log("プロフィール情報:",R))}catch(V){console.error("プロフィール情報取得エラー:",V)}let q=null;const oe=v==null?void 0:v.supervisor_emp_id;if(console.log("マネージャーコード(supervisor_emp_id):",oe),oe)try{const V=kt(Ee,"employees",oe),B=await jt(V);if(B.exists()){const F=B.data();q={id:oe,name:F.full_name_local||`${F.last_name_local||""} ${F.first_name_local||""}`,name_alphabet:F.full_name_alphabet,position:F.position||"",emp_no:F.emp_no||oe},console.log("マネージャー情報を取得しました:",q),P(F)}else console.log(`マネージャーデータが見つかりません: ${oe}`),q={id:"1001",name:"浜辺 淳二",name_alphabet:"Junji Hamabe",position:"部長",emp_no:"1001"}}catch(V){console.error("マネージャーデータの取得に失敗しました:",V),q={id:"1001",name:"浜辺 淳二",name_alphabet:"Junji Hamabe",position:"部長",emp_no:"1001"}}else console.log("マネージャーコードが見つからないため、デフォルト情報を設定します"),q={id:"1001",name:"浜辺 淳二",name_alphabet:"Junji Hamabe",position:"部長",emp_no:"1001"};try{const V=(v==null?void 0:v.emp_no)||y;if(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"))try{const B=`/images/employee-photos/${V}.png`;console.log("写真URLを設定:",B),m(B)}catch(B){console.log("写真が見つかりません。デフォルト画像を使用します:",B),m("/images/default_emp_icon.png")}else try{const B=$r(xt,`employee-photos/${V}.png`),F=await Br(B);console.log("写真URLを設定:",F),m(F)}catch(B){console.log("写真が見つかりません。デフォルト画像を使用します:",B),m("/images/default_emp_icon.png")}}catch(V){console.log("写真取得中にエラーが発生しました:",V),m("/images/default_emp_icon.png")}const Z=V=>V?V.seconds?new Date(V.seconds*1e3).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):new Date(V).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"",W={id:y,emp_no:v.emp_no||y,name:v.full_name_local||"Unknown",name_en:v.full_name_alphabet||"",email:v.email_addr||"",department:(O==null?void 0:O.division_name_local)||v.division_code||"",position:v.position||v.position_name_local||"",join_date:Z(v.join_date)||"",status:v.status||"",phone:v.phone_no||"",office:v.office||"JP-NGY",profile:R||{},manager:q};h(W),console.log("従業員データ構築完了:",W)}else u("従業員データが見つかりませんでした");a(!1)}catch(w){console.error("従業員データ取得エラー:",w),u(`データ取得中にエラーが発生しました: ${w.message}`),a(!1)}};b.useEffect(()=>{t&&A(t)},[t]),b.useEffect(()=>{e!==r&&i(e)},[e]);const E={display:"flex",minHeight:"calc(100vh - 60px)",height:"calc(100vh - 60px)",width:"100%",backgroundColor:"#f5f5f5"};return o.jsxs("div",{style:E,children:[o.jsx(n4,{employeeId:t,activeTab:r,onTabChange:D}),o.jsx("div",{className:"admin-detail-content",style:{flex:1,overflowY:"auto",padding:"20px"},children:o.jsx(r4,{employeeData:d,employeeProfile:k,employeeMaster:x,organization:S,photoUrl:g,loading:s,error:c})})]})};function i4(){const[t,e]=b.useState("渡辺 悠希"),[n,r]=b.useState(7),i=()=>{r(s=>s>0?-1:7)};return o.jsx($C,{children:o.jsx(AC,{children:o.jsxs(aC,{children:[o.jsx(ue,{path:"/verify",element:o.jsx(jP,{})}),o.jsx(ue,{path:"/welcome",element:o.jsx(_P,{userName:t,daysUntilJoining:n})}),o.jsx(ue,{path:"/",element:o.jsx(El,{to:"/admin/login",replace:!0})}),o.jsx(ue,{path:"/dashboard",element:o.jsx(wP,{daysUntilJoining:n,toggleJoiningStatus:i})}),o.jsx(ue,{path:"/documents",element:o.jsx(EP,{daysUntilJoining:n})}),o.jsx(ue,{path:"/items",element:o.jsx(SP,{daysUntilJoining:n})}),o.jsx(ue,{path:"/messages",element:o.jsx(TP,{daysUntilJoining:n})}),o.jsx(ue,{path:"/thank-you",element:o.jsx(IP,{daysUntilJoining:n})}),o.jsx(ue,{path:"/question",element:o.jsx(CP,{daysUntilJoining:n})}),o.jsx(ue,{path:"/completion",element:o.jsx(kP,{daysUntilJoining:n})}),o.jsx(ue,{path:"/morning-checkin",element:o.jsx(bP,{})}),o.jsx(ue,{path:"/evening-checkout",element:o.jsx(RP,{})}),o.jsx(ue,{path:"/morning-thanks",element:o.jsx(NP,{})}),o.jsx(ue,{path:"/evening-thanks",element:o.jsx(AP,{})}),o.jsx(ue,{path:"/weekly-survey",element:o.jsx(PP,{})}),o.jsx(ue,{path:"/weekly-survey-thanks",element:o.jsx(OP,{})}),o.jsx(ue,{path:"/monthly-survey-30",element:o.jsx(DP,{})}),o.jsx(ue,{path:"/monthly-survey-60",element:o.jsx(LP,{})}),o.jsx(ue,{path:"/monthly-survey-90",element:o.jsx(VP,{})}),o.jsx(ue,{path:"/monthly-survey-thanks",element:o.jsx(MP,{})}),o.jsx(ue,{path:"/firebase-test",element:o.jsx(FP,{})}),o.jsx(ue,{path:"/admin/login",element:o.jsx(UP,{})}),o.jsxs(ue,{path:"/admin",element:o.jsx($P,{}),children:[o.jsx(ue,{index:!0,element:o.jsx(El,{to:"/admin/dashboard",replace:!0})}),o.jsx(ue,{path:"dashboard",element:o.jsx(zP,{})}),o.jsx(ue,{path:"employees",element:o.jsx(WP,{})}),o.jsx(ue,{path:"employees/:id",element:o.jsx(XP,{})}),o.jsx(ue,{path:"newhire/:id/:tab",element:o.jsx(JP,{})}),o.jsx(ue,{path:"employee-modern/:id",element:o.jsx(ZP,{})}),o.jsx(ue,{path:"add-employee",element:o.jsx(qP,{})}),o.jsx(ue,{path:"journeys",element:o.jsx(e4,{})}),o.jsx(ue,{path:"directory",element:o.jsx(t4,{})}),o.jsx(ue,{path:"employee-detail/:id/:tab",element:o.jsx(Kv,{})}),o.jsx(ue,{path:"employee-detail/:id",element:o.jsx(Kv,{})})]}),o.jsx(ue,{path:"*",element:o.jsx(El,{to:"/admin/login",replace:!0})})]})})})}Sd.createRoot(document.getElementById("root")).render(o.jsx(qE.StrictMode,{children:o.jsx(i4,{})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
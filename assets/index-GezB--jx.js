(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bv={exports:{}},xc={},Pv={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),pE=Symbol.for("react.portal"),mE=Symbol.for("react.fragment"),gE=Symbol.for("react.strict_mode"),yE=Symbol.for("react.profiler"),vE=Symbol.for("react.provider"),_E=Symbol.for("react.context"),xE=Symbol.for("react.forward_ref"),wE=Symbol.for("react.suspense"),EE=Symbol.for("react.memo"),TE=Symbol.for("react.lazy"),jm=Symbol.iterator;function SE(t){return t===null||typeof t!="object"?null:(t=jm&&t[jm]||t["@@iterator"],typeof t=="function"?t:null)}var Dv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ov=Object.assign,Lv={};function ws(t,e,n){this.props=t,this.context=e,this.refs=Lv,this.updater=n||Dv}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vv(){}Vv.prototype=ws.prototype;function Mh(t,e,n){this.props=t,this.context=e,this.refs=Lv,this.updater=n||Dv}var Fh=Mh.prototype=new Vv;Fh.constructor=Mh;Ov(Fh,ws.prototype);Fh.isPureReactComponent=!0;var bm=Array.isArray,Mv=Object.prototype.hasOwnProperty,Uh={current:null},Fv={key:!0,ref:!0,__self:!0,__source:!0};function Uv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Mv.call(e,r)&&!Fv.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:ta,type:t,key:s,ref:o,props:i,_owner:Uh.current}}function CE(t,e){return{$$typeof:ta,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ta}function IE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pm=/\/+/g;function ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IE(""+t.key):e.toString(36)}function ol(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ta:case pE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ku(o,0):r,bm(i)?(n="",t!=null&&(n=t.replace(Pm,"$&/")+"/"),ol(i,e,n,"",function(d){return d})):i!=null&&(Bh(i)&&(i=CE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bm(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+ku(s,c);o+=ol(s,e,n,u,i)}else if(u=SE(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+ku(s,c++),o+=ol(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],i=0;return ol(t,r,"","",function(s){return e.call(n,s,i++)}),r}function kE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},al={transition:null},RE={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:al,ReactCurrentOwner:Uh};le.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!Bh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=ws;le.Fragment=mE;le.Profiler=yE;le.PureComponent=Mh;le.StrictMode=gE;le.Suspense=wE;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RE;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ov({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Uh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Mv.call(e,u)&&!Fv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ta,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:_E,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vE,_context:t},t.Consumer=t};le.createElement=Uv;le.createFactory=function(t){var e=Uv.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:xE,render:t}};le.isValidElement=Bh;le.lazy=function(t){return{$$typeof:TE,_payload:{_status:-1,_result:t},_init:kE}};le.memo=function(t,e){return{$$typeof:EE,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=al.transition;al.transition={};try{t()}finally{al.transition=e}};le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};le.useCallback=function(t,e){return Ct.current.useCallback(t,e)};le.useContext=function(t){return Ct.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};le.useEffect=function(t,e){return Ct.current.useEffect(t,e)};le.useId=function(){return Ct.current.useId()};le.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Ct.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};le.useRef=function(t){return Ct.current.useRef(t)};le.useState=function(t){return Ct.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Ct.current.useTransition()};le.version="18.2.0";Pv.exports=le;var N=Pv.exports;const NE=fE(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE=N,jE=Symbol.for("react.element"),bE=Symbol.for("react.fragment"),PE=Object.prototype.hasOwnProperty,DE=AE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OE={key:!0,ref:!0,__self:!0,__source:!0};function Bv(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PE.call(e,r)&&!OE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jE,type:t,key:s,ref:o,props:i,_owner:DE.current}}xc.Fragment=bE;xc.jsx=Bv;xc.jsxs=Bv;bv.exports=xc;var a=bv.exports,pd={},$v={exports:{}},Bt={},zv={exports:{}},qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var se=Z-1>>>1,te=B[se];if(0<i(te,Y))B[se]=Y,B[Z]=te,Z=se;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var se=0,te=B.length,ie=te>>>1;se<ie;){var ce=2*(se+1)-1,nt=B[ce],rt=ce+1,kt=B[rt];if(0>i(nt,Z))rt<te&&0>i(kt,nt)?(B[se]=kt,B[rt]=Z,se=rt):(B[se]=nt,B[ce]=Z,se=ce);else if(rt<te&&0>i(kt,Z))B[se]=kt,B[rt]=Z,se=rt;else break e}}return Y}function i(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,g=null,m=3,I=!1,C=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function j(B){if(A=!1,S(B),!C)if(n(u)!==null)C=!0,Qe(D);else{var Y=n(d);Y!==null&&ue(j,Y.startTime-B)}}function D(B,Y){C=!1,A&&(A=!1,T(y),y=-1),I=!0;var Z=m;try{for(S(Y),g=n(u);g!==null&&(!(g.expirationTime>Y)||B&&!E());){var se=g.callback;if(typeof se=="function"){g.callback=null,m=g.priorityLevel;var te=se(g.expirationTime<=Y);Y=t.unstable_now(),typeof te=="function"?g.callback=te:g===n(u)&&r(u),S(Y)}else r(u);g=n(u)}if(g!==null)var ie=!0;else{var ce=n(d);ce!==null&&ue(j,ce.startTime-Y),ie=!1}return ie}finally{g=null,m=Z,I=!1}}var O=!1,v=null,y=-1,_=5,k=-1;function E(){return!(t.unstable_now()-k<_)}function P(){if(v!==null){var B=t.unstable_now();k=B;var Y=!0;try{Y=v(!0,B)}finally{Y?R():(O=!1,v=null)}}else O=!1}var R;if(typeof x=="function")R=function(){x(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Ie=G.port2;G.port1.onmessage=P,R=function(){Ie.postMessage(null)}}else R=function(){b(P,0)};function Qe(B){v=B,O||(O=!0,R())}function ue(B,Y){y=b(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||I||(C=!0,Qe(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var Z=m;m=Y;try{return B()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=m;m=B;try{return Y()}finally{m=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var se=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?se+Z:se):Z=se,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Z+te,B={id:f++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:te,sortIndex:-1},Z>se?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(A?(T(y),y=-1):A=!0,ue(j,Z-se))):(B.sortIndex=te,e(u,B),C||I||(C=!0,Qe(D))),B},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(B){var Y=m;return function(){var Z=m;m=Y;try{return B.apply(this,arguments)}finally{m=Z}}}})(qv);zv.exports=qv;var LE=zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv=N,Ut=LE;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wv=new Set,No={};function mi(t,e){os(t,e),os(t+"Capture",e)}function os(t,e){for(No[t]=e,t=0;t<e.length;t++)Wv.add(e[t])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=Object.prototype.hasOwnProperty,VE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dm={},Om={};function ME(t){return md.call(Om,t)?!0:md.call(Dm,t)?!1:VE.test(t)?Om[t]=!0:(Dm[t]=!0,!1)}function FE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UE(t,e,n,r){if(e===null||typeof e>"u"||FE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,zh);et[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,zh);et[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,zh);et[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function qh(t,e,n,r){var i=et.hasOwnProperty(e)?et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UE(e,n,i,r)&&(n=null),r||i===null?ME(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wn=Hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),Li=Symbol.for("react.portal"),Vi=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),gd=Symbol.for("react.profiler"),Gv=Symbol.for("react.provider"),Kv=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),yd=Symbol.for("react.suspense"),vd=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),Qv=Symbol.for("react.offscreen"),Lm=Symbol.iterator;function Ws(t){return t===null||typeof t!="object"?null:(t=Lm&&t[Lm]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Ru;function ro(t){if(Ru===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ru=e&&e[1]||""}return`
`+Ru+t}var Nu=!1;function Au(t,e){if(!t||Nu)return"";Nu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Nu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ro(t):""}function BE(t){switch(t.tag){case 5:return ro(t.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 2:case 15:return t=Au(t.type,!1),t;case 11:return t=Au(t.type.render,!1),t;case 1:return t=Au(t.type,!0),t;default:return""}}function _d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vi:return"Fragment";case Li:return"Portal";case gd:return"Profiler";case Hh:return"StrictMode";case yd:return"Suspense";case vd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kv:return(t.displayName||"Context")+".Consumer";case Gv:return(t._context.displayName||"Context")+".Provider";case Wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gh:return e=t.displayName||null,e!==null?e:_d(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return _d(t(e))}catch{}}return null}function $E(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _d(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zE(t){var e=Jv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Da(t){t._valueTracker||(t._valueTracker=zE(t))}function Yv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xd(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xv(t,e){e=e.checked,e!=null&&qh(t,"checked",e,!1)}function wd(t,e){Xv(t,e);var n=Nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ed(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ed(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ed(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var io=Array.isArray;function Qi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Td(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(io(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function Zv(t,e){var n=Nr(e.value),r=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,t_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qE=["Webkit","ms","Moz","O"];Object.keys(ho).forEach(function(t){qE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ho[e]=ho[t]})});function n_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ho.hasOwnProperty(t)&&ho[t]?(""+e).trim():e+"px"}function r_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=n_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var HE=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cd(t,e){if(e){if(HE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Id(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=null;function Kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rd=null,Ji=null,Yi=null;function Bm(t){if(t=ia(t)){if(typeof Rd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Cc(e),Rd(t.stateNode,t.type,e))}}function i_(t){Ji?Yi?Yi.push(t):Yi=[t]:Ji=t}function s_(){if(Ji){var t=Ji,e=Yi;if(Yi=Ji=null,Bm(t),e)for(t=0;t<e.length;t++)Bm(e[t])}}function o_(t,e){return t(e)}function a_(){}var ju=!1;function l_(t,e,n){if(ju)return t(e,n);ju=!0;try{return o_(t,e,n)}finally{ju=!1,(Ji!==null||Yi!==null)&&(a_(),s_())}}function jo(t,e){var n=t.stateNode;if(n===null)return null;var r=Cc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Nd=!1;if(Vn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Nd=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Nd=!1}function WE(t,e,n,r,i,s,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var fo=!1,jl=null,bl=!1,Ad=null,GE={onError:function(t){fo=!0,jl=t}};function KE(t,e,n,r,i,s,o,c,u){fo=!1,jl=null,WE.apply(GE,arguments)}function QE(t,e,n,r,i,s,o,c,u){if(KE.apply(this,arguments),fo){if(fo){var d=jl;fo=!1,jl=null}else throw Error(F(198));bl||(bl=!0,Ad=d)}}function gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $m(t){if(gi(t)!==t)throw Error(F(188))}function JE(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $m(i),t;if(s===r)return $m(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function u_(t){return t=JE(t),t!==null?d_(t):null}function d_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d_(t);if(e!==null)return e;t=t.sibling}return null}var h_=Ut.unstable_scheduleCallback,zm=Ut.unstable_cancelCallback,YE=Ut.unstable_shouldYield,XE=Ut.unstable_requestPaint,Oe=Ut.unstable_now,ZE=Ut.unstable_getCurrentPriorityLevel,Qh=Ut.unstable_ImmediatePriority,f_=Ut.unstable_UserBlockingPriority,Pl=Ut.unstable_NormalPriority,eT=Ut.unstable_LowPriority,p_=Ut.unstable_IdlePriority,wc=null,gn=null;function tT(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(wc,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:iT,nT=Math.log,rT=Math.LN2;function iT(t){return t>>>=0,t===0?32:31-(nT(t)/rT|0)|0}var La=64,Va=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=so(c):(s&=o,s!==0&&(r=so(s)))}else o=n&~i,o!==0?r=so(o):s!==0&&(r=so(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),i=1<<n,r|=t[n],e&=~i;return r}function sT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sn(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=sT(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m_(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function bu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function na(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function aT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Jh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function g_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y_,Yh,v_,__,x_,bd=!1,Ma=[],mr=null,gr=null,yr=null,bo=new Map,Po=new Map,sr=[],lT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qm(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function Ks(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ia(e),e!==null&&Yh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cT(t,e,n,r,i){switch(e){case"focusin":return mr=Ks(mr,t,e,n,r,i),!0;case"dragenter":return gr=Ks(gr,t,e,n,r,i),!0;case"mouseover":return yr=Ks(yr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bo.set(s,Ks(bo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Po.set(s,Ks(Po.get(s)||null,t,e,n,r,i)),!0}return!1}function w_(t){var e=Yr(t.target);if(e!==null){var n=gi(e);if(n!==null){if(e=n.tag,e===13){if(e=c_(n),e!==null){t.blockedOn=e,x_(t.priority,function(){v_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ll(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);kd=r,n.target.dispatchEvent(r),kd=null}else return e=ia(n),e!==null&&Yh(e),t.blockedOn=n,!1;e.shift()}return!0}function Hm(t,e,n){ll(t)&&n.delete(e)}function uT(){bd=!1,mr!==null&&ll(mr)&&(mr=null),gr!==null&&ll(gr)&&(gr=null),yr!==null&&ll(yr)&&(yr=null),bo.forEach(Hm),Po.forEach(Hm)}function Qs(t,e){t.blockedOn===e&&(t.blockedOn=null,bd||(bd=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,uT)))}function Do(t){function e(i){return Qs(i,t)}if(0<Ma.length){Qs(Ma[0],t);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mr!==null&&Qs(mr,t),gr!==null&&Qs(gr,t),yr!==null&&Qs(yr,t),bo.forEach(e),Po.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)w_(n),n.blockedOn===null&&sr.shift()}var Xi=Wn.ReactCurrentBatchConfig,Ol=!0;function dT(t,e,n,r){var i=ye,s=Xi.transition;Xi.transition=null;try{ye=1,Xh(t,e,n,r)}finally{ye=i,Xi.transition=s}}function hT(t,e,n,r){var i=ye,s=Xi.transition;Xi.transition=null;try{ye=4,Xh(t,e,n,r)}finally{ye=i,Xi.transition=s}}function Xh(t,e,n,r){if(Ol){var i=Pd(t,e,n,r);if(i===null)$u(t,e,r,Ll,n),qm(t,r);else if(cT(i,t,e,n,r))r.stopPropagation();else if(qm(t,r),e&4&&-1<lT.indexOf(t)){for(;i!==null;){var s=ia(i);if(s!==null&&y_(s),s=Pd(t,e,n,r),s===null&&$u(t,e,r,Ll,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $u(t,e,r,null,n)}}var Ll=null;function Pd(t,e,n,r){if(Ll=null,t=Kh(r),t=Yr(t),t!==null)if(e=gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ll=t,null}function E_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZE()){case Qh:return 1;case f_:return 4;case Pl:case eT:return 16;case p_:return 536870912;default:return 16}default:return 16}}var dr=null,Zh=null,cl=null;function T_(){if(cl)return cl;var t,e=Zh,n=e.length,r,i="value"in dr?dr.value:dr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return cl=i.slice(t,1<r?1-r:void 0)}function ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fa(){return!0}function Wm(){return!1}function $t(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fa:Wm,this.isPropagationStopped=Wm,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),e}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=$t(Es),ra=Ae({},Es,{view:0,detail:0}),fT=$t(ra),Pu,Du,Js,Ec=Ae({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(Pu=t.screenX-Js.screenX,Du=t.screenY-Js.screenY):Du=Pu=0,Js=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:Du}}),Gm=$t(Ec),pT=Ae({},Ec,{dataTransfer:0}),mT=$t(pT),gT=Ae({},ra,{relatedTarget:0}),Ou=$t(gT),yT=Ae({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),vT=$t(yT),_T=Ae({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xT=$t(_T),wT=Ae({},Es,{data:0}),Km=$t(wT),ET={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ST={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ST[t])?!!e[t]:!1}function tf(){return CT}var IT=Ae({},ra,{key:function(t){if(t.key){var e=ET[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tf,charCode:function(t){return t.type==="keypress"?ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kT=$t(IT),RT=Ae({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qm=$t(RT),NT=Ae({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tf}),AT=$t(NT),jT=Ae({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=$t(jT),PT=Ae({},Ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DT=$t(PT),OT=[9,13,27,32],nf=Vn&&"CompositionEvent"in window,po=null;Vn&&"documentMode"in document&&(po=document.documentMode);var LT=Vn&&"TextEvent"in window&&!po,S_=Vn&&(!nf||po&&8<po&&11>=po),Jm=String.fromCharCode(32),Ym=!1;function C_(t,e){switch(t){case"keyup":return OT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mi=!1;function VT(t,e){switch(t){case"compositionend":return I_(e);case"keypress":return e.which!==32?null:(Ym=!0,Jm);case"textInput":return t=e.data,t===Jm&&Ym?null:t;default:return null}}function MT(t,e){if(Mi)return t==="compositionend"||!nf&&C_(t,e)?(t=T_(),cl=Zh=dr=null,Mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S_&&e.locale!=="ko"?null:e.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FT[t.type]:e==="textarea"}function k_(t,e,n,r){i_(r),e=Vl(e,"onChange"),0<e.length&&(n=new ef("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mo=null,Oo=null;function UT(t){M_(t,0)}function Tc(t){var e=Bi(t);if(Yv(e))return t}function BT(t,e){if(t==="change")return e}var R_=!1;if(Vn){var Lu;if(Vn){var Vu="oninput"in document;if(!Vu){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),Vu=typeof Zm.oninput=="function"}Lu=Vu}else Lu=!1;R_=Lu&&(!document.documentMode||9<document.documentMode)}function eg(){mo&&(mo.detachEvent("onpropertychange",N_),Oo=mo=null)}function N_(t){if(t.propertyName==="value"&&Tc(Oo)){var e=[];k_(e,Oo,t,Kh(t)),l_(UT,e)}}function $T(t,e,n){t==="focusin"?(eg(),mo=e,Oo=n,mo.attachEvent("onpropertychange",N_)):t==="focusout"&&eg()}function zT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tc(Oo)}function qT(t,e){if(t==="click")return Tc(e)}function HT(t,e){if(t==="input"||t==="change")return Tc(e)}function WT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:WT;function Lo(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!md.call(e,i)||!an(t[i],e[i]))return!1}return!0}function tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ng(t,e){var n=tg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tg(n)}}function A_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j_(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GT(t){var e=j_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&A_(n.ownerDocument.documentElement,n)){if(r!==null&&rf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ng(n,s);var o=ng(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KT=Vn&&"documentMode"in document&&11>=document.documentMode,Fi=null,Dd=null,go=null,Od=!1;function rg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Od||Fi==null||Fi!==Al(r)||(r=Fi,"selectionStart"in r&&rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),go&&Lo(go,r)||(go=r,r=Vl(Dd,"onSelect"),0<r.length&&(e=new ef("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fi)))}function Ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ui={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},Mu={},b_={};Vn&&(b_=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Sc(t){if(Mu[t])return Mu[t];if(!Ui[t])return t;var e=Ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b_)return Mu[t]=e[n];return t}var P_=Sc("animationend"),D_=Sc("animationiteration"),O_=Sc("animationstart"),L_=Sc("transitionend"),V_=new Map,ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){V_.set(t,e),mi(e,[t])}for(var Fu=0;Fu<ig.length;Fu++){var Uu=ig[Fu],QT=Uu.toLowerCase(),JT=Uu[0].toUpperCase()+Uu.slice(1);Fr(QT,"on"+JT)}Fr(P_,"onAnimationEnd");Fr(D_,"onAnimationIteration");Fr(O_,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(L_,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YT=new Set("cancel close invalid load scroll toggle".split(" ").concat(oo));function sg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QE(r,e,void 0,t),t.currentTarget=null}function M_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;sg(i,c,d),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;sg(i,c,d),s=u}}}if(bl)throw t=Ad,bl=!1,Ad=null,t}function we(t,e){var n=e[Ud];n===void 0&&(n=e[Ud]=new Set);var r=t+"__bubble";n.has(r)||(F_(e,t,2,!1),n.add(r))}function Bu(t,e,n){var r=0;e&&(r|=4),F_(n,t,r,e)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Vo(t){if(!t[Ba]){t[Ba]=!0,Wv.forEach(function(n){n!=="selectionchange"&&(YT.has(n)||Bu(n,!1,t),Bu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ba]||(e[Ba]=!0,Bu("selectionchange",!1,e))}}function F_(t,e,n,r){switch(E_(e)){case 1:var i=dT;break;case 4:i=hT;break;default:i=Xh}n=i.bind(null,e,n,t),i=void 0,!Nd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $u(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Yr(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}l_(function(){var d=s,f=Kh(n),g=[];e:{var m=V_.get(t);if(m!==void 0){var I=ef,C=t;switch(t){case"keypress":if(ul(n)===0)break e;case"keydown":case"keyup":I=kT;break;case"focusin":C="focus",I=Ou;break;case"focusout":C="blur",I=Ou;break;case"beforeblur":case"afterblur":I=Ou;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=mT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=AT;break;case P_:case D_:case O_:I=vT;break;case L_:I=bT;break;case"scroll":I=fT;break;case"wheel":I=DT;break;case"copy":case"cut":case"paste":I=xT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Qm}var A=(e&4)!==0,b=!A&&t==="scroll",T=A?m!==null?m+"Capture":null:m;A=[];for(var x=d,S;x!==null;){S=x;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,T!==null&&(j=jo(x,T),j!=null&&A.push(Mo(x,j,S)))),b)break;x=x.return}0<A.length&&(m=new I(m,C,null,n,f),g.push({event:m,listeners:A}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",m&&n!==kd&&(C=n.relatedTarget||n.fromElement)&&(Yr(C)||C[Mn]))break e;if((I||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,I?(C=n.relatedTarget||n.toElement,I=d,C=C?Yr(C):null,C!==null&&(b=gi(C),C!==b||C.tag!==5&&C.tag!==6)&&(C=null)):(I=null,C=d),I!==C)){if(A=Gm,j="onMouseLeave",T="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(A=Qm,j="onPointerLeave",T="onPointerEnter",x="pointer"),b=I==null?m:Bi(I),S=C==null?m:Bi(C),m=new A(j,x+"leave",I,n,f),m.target=b,m.relatedTarget=S,j=null,Yr(f)===d&&(A=new A(T,x+"enter",C,n,f),A.target=S,A.relatedTarget=b,j=A),b=j,I&&C)t:{for(A=I,T=C,x=0,S=A;S;S=Ii(S))x++;for(S=0,j=T;j;j=Ii(j))S++;for(;0<x-S;)A=Ii(A),x--;for(;0<S-x;)T=Ii(T),S--;for(;x--;){if(A===T||T!==null&&A===T.alternate)break t;A=Ii(A),T=Ii(T)}A=null}else A=null;I!==null&&og(g,m,I,A,!1),C!==null&&b!==null&&og(g,b,C,A,!0)}}e:{if(m=d?Bi(d):window,I=m.nodeName&&m.nodeName.toLowerCase(),I==="select"||I==="input"&&m.type==="file")var D=BT;else if(Xm(m))if(R_)D=HT;else{D=zT;var O=$T}else(I=m.nodeName)&&I.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=qT);if(D&&(D=D(t,d))){k_(g,D,n,f);break e}O&&O(t,m,d),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Ed(m,"number",m.value)}switch(O=d?Bi(d):window,t){case"focusin":(Xm(O)||O.contentEditable==="true")&&(Fi=O,Dd=d,go=null);break;case"focusout":go=Dd=Fi=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,rg(g,n,f);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":rg(g,n,f)}var v;if(nf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Mi?C_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(S_&&n.locale!=="ko"&&(Mi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Mi&&(v=T_()):(dr=f,Zh="value"in dr?dr.value:dr.textContent,Mi=!0)),O=Vl(d,y),0<O.length&&(y=new Km(y,t,null,n,f),g.push({event:y,listeners:O}),v?y.data=v:(v=I_(n),v!==null&&(y.data=v)))),(v=LT?VT(t,n):MT(t,n))&&(d=Vl(d,"onBeforeInput"),0<d.length&&(f=new Km("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=v))}M_(g,e)})}function Mo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=jo(t,n),s!=null&&r.unshift(Mo(t,s,i)),s=jo(t,e),s!=null&&r.push(Mo(t,s,i))),t=t.return}return r}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function og(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=jo(n,s),u!=null&&o.unshift(Mo(n,u,c))):i||(u=jo(n,s),u!=null&&o.push(Mo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XT=/\r\n?/g,ZT=/\u0000|\uFFFD/g;function ag(t){return(typeof t=="string"?t:""+t).replace(XT,`
`).replace(ZT,"")}function $a(t,e,n){if(e=ag(e),ag(t)!==e&&n)throw Error(F(425))}function Ml(){}var Ld=null,Vd=null;function Md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(t){return lg.resolve(null).then(t).catch(nS)}:Fd;function nS(t){setTimeout(function(){throw t})}function zu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Do(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Do(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),pn="__reactFiber$"+Ts,Fo="__reactProps$"+Ts,Mn="__reactContainer$"+Ts,Ud="__reactEvents$"+Ts,rS="__reactListeners$"+Ts,iS="__reactHandles$"+Ts;function Yr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cg(t);t!==null;){if(n=t[pn])return n;t=cg(t)}return e}t=n,n=t.parentNode}return null}function ia(t){return t=t[pn]||t[Mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Cc(t){return t[Fo]||null}var Bd=[],$i=-1;function Ur(t){return{current:t}}function Te(t){0>$i||(t.current=Bd[$i],Bd[$i]=null,$i--)}function _e(t,e){$i++,Bd[$i]=t.current,t.current=e}var Ar={},yt=Ur(Ar),jt=Ur(!1),si=Ar;function as(t,e){var n=t.type.contextTypes;if(!n)return Ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bt(t){return t=t.childContextTypes,t!=null}function Fl(){Te(jt),Te(yt)}function ug(t,e,n){if(yt.current!==Ar)throw Error(F(168));_e(yt,e),_e(jt,n)}function U_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,$E(t)||"Unknown",i));return Ae({},n,r)}function Ul(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,si=yt.current,_e(yt,t),_e(jt,jt.current),!0}function dg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=U_(t,e,si),r.__reactInternalMemoizedMergedChildContext=t,Te(jt),Te(yt),_e(yt,t)):Te(jt),_e(jt,n)}var An=null,Ic=!1,qu=!1;function B_(t){An===null?An=[t]:An.push(t)}function sS(t){Ic=!0,B_(t)}function Br(){if(!qu&&An!==null){qu=!0;var t=0,e=ye;try{var n=An;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}An=null,Ic=!1}catch(i){throw An!==null&&(An=An.slice(t+1)),h_(Qh,Br),i}finally{ye=e,qu=!1}}return null}var zi=[],qi=0,Bl=null,$l=0,zt=[],qt=0,oi=null,jn=1,bn="";function Kr(t,e){zi[qi++]=$l,zi[qi++]=Bl,Bl=t,$l=e}function $_(t,e,n){zt[qt++]=jn,zt[qt++]=bn,zt[qt++]=oi,oi=t;var r=jn;t=bn;var i=32-sn(r)-1;r&=~(1<<i),n+=1;var s=32-sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,jn=1<<32-sn(e)+i|n<<i|r,bn=s+t}else jn=1<<s|n<<i|r,bn=t}function sf(t){t.return!==null&&(Kr(t,1),$_(t,1,0))}function of(t){for(;t===Bl;)Bl=zi[--qi],zi[qi]=null,$l=zi[--qi],zi[qi]=null;for(;t===oi;)oi=zt[--qt],zt[qt]=null,bn=zt[--qt],zt[qt]=null,jn=zt[--qt],zt[qt]=null}var Mt=null,Lt=null,Se=!1,nn=null;function z_(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oi!==null?{id:jn,overflow:bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Lt=null,!0):!1;default:return!1}}function $d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zd(t){if(Se){var e=Lt;if(e){var n=e;if(!hg(t,e)){if($d(t))throw Error(F(418));e=vr(n.nextSibling);var r=Mt;e&&hg(t,e)?z_(r,n):(t.flags=t.flags&-4097|2,Se=!1,Mt=t)}}else{if($d(t))throw Error(F(418));t.flags=t.flags&-4097|2,Se=!1,Mt=t}}}function fg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function za(t){if(t!==Mt)return!1;if(!Se)return fg(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Md(t.type,t.memoizedProps)),e&&(e=Lt)){if($d(t))throw q_(),Error(F(418));for(;e;)z_(t,e),e=vr(e.nextSibling)}if(fg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Mt?vr(t.stateNode.nextSibling):null;return!0}function q_(){for(var t=Lt;t;)t=vr(t.nextSibling)}function ls(){Lt=Mt=null,Se=!1}function af(t){nn===null?nn=[t]:nn.push(t)}var oS=Wn.ReactCurrentBatchConfig;function en(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zl=Ur(null),ql=null,Hi=null,lf=null;function cf(){lf=Hi=ql=null}function uf(t){var e=zl.current;Te(zl),t._currentValue=e}function qd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zi(t,e){ql=t,lf=Hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(lf!==t)if(t={context:t,memoizedValue:e,next:null},Hi===null){if(ql===null)throw Error(F(308));Hi=t,ql.dependencies={lanes:0,firstContext:t}}else Hi=Hi.next=t;return e}var Xr=null;function df(t){Xr===null?Xr=[t]:Xr.push(t)}function H_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,df(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fn(t,r)}function Fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function hf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fn(t,n)}return i=r.interleaved,i===null?(e.next=e,df(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fn(t,n)}function dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jh(t,n)}}function pg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hl(t,e,n,r){var i=t.updateQueue;rr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,f=d=u=null,c=s;do{var m=c.lane,I=c.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,A=c;switch(m=e,I=n,A.tag){case 1:if(C=A.payload,typeof C=="function"){g=C.call(I,g,m);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=A.payload,m=typeof C=="function"?C.call(I,g,m):C,m==null)break e;g=Ae({},g,m);break e;case 2:rr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[c]:m.push(c))}else I={eventTime:I,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=I,u=g):f=f.next=I,o|=m;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;m=c,c=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(f===null&&(u=g),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);li|=o,t.lanes=o,t.memoizedState=g}}function mg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var G_=new Hv.Component().refs;function Hd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kc={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=wr(t),s=On(r,i);s.payload=e,n!=null&&(s.callback=n),e=_r(t,s,i),e!==null&&(on(e,t,i,r),dl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=wr(t),s=On(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_r(t,s,i),e!==null&&(on(e,t,i,r),dl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=wr(t),i=On(n,r);i.tag=2,e!=null&&(i.callback=e),e=_r(t,i,r),e!==null&&(on(e,t,r,n),dl(e,t,r))}};function gg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Lo(n,r)||!Lo(i,s):!0}function K_(t,e,n){var r=!1,i=Ar,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(i=bt(e)?si:yt.current,r=e.contextTypes,s=(r=r!=null)?as(t,i):Ar),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kc.enqueueReplaceState(e,e.state,null)}function Wd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=G_,hf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kt(s):(s=bt(e)?si:yt.current,i.context=as(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kc.enqueueReplaceState(i,i.state,null),Hl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;c===G_&&(c=i.refs={}),o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function qa(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vg(t){var e=t._init;return e(t._payload)}function Q_(t){function e(T,x){if(t){var S=T.deletions;S===null?(T.deletions=[x],T.flags|=16):S.push(x)}}function n(T,x){if(!t)return null;for(;x!==null;)e(T,x),x=x.sibling;return null}function r(T,x){for(T=new Map;x!==null;)x.key!==null?T.set(x.key,x):T.set(x.index,x),x=x.sibling;return T}function i(T,x){return T=Er(T,x),T.index=0,T.sibling=null,T}function s(T,x,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<x?(T.flags|=2,x):S):(T.flags|=2,x)):(T.flags|=1048576,x)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function c(T,x,S,j){return x===null||x.tag!==6?(x=Yu(S,T.mode,j),x.return=T,x):(x=i(x,S),x.return=T,x)}function u(T,x,S,j){var D=S.type;return D===Vi?f(T,x,S.props.children,j,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===nr&&vg(D)===x.type)?(j=i(x,S.props),j.ref=Ys(T,x,S),j.return=T,j):(j=yl(S.type,S.key,S.props,null,T.mode,j),j.ref=Ys(T,x,S),j.return=T,j)}function d(T,x,S,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Xu(S,T.mode,j),x.return=T,x):(x=i(x,S.children||[]),x.return=T,x)}function f(T,x,S,j,D){return x===null||x.tag!==7?(x=ni(S,T.mode,j,D),x.return=T,x):(x=i(x,S),x.return=T,x)}function g(T,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Yu(""+x,T.mode,S),x.return=T,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Pa:return S=yl(x.type,x.key,x.props,null,T.mode,S),S.ref=Ys(T,null,x),S.return=T,S;case Li:return x=Xu(x,T.mode,S),x.return=T,x;case nr:var j=x._init;return g(T,j(x._payload),S)}if(io(x)||Ws(x))return x=ni(x,T.mode,S,null),x.return=T,x;qa(T,x)}return null}function m(T,x,S,j){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:c(T,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pa:return S.key===D?u(T,x,S,j):null;case Li:return S.key===D?d(T,x,S,j):null;case nr:return D=S._init,m(T,x,D(S._payload),j)}if(io(S)||Ws(S))return D!==null?null:f(T,x,S,j,null);qa(T,S)}return null}function I(T,x,S,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(S)||null,c(x,T,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Pa:return T=T.get(j.key===null?S:j.key)||null,u(x,T,j,D);case Li:return T=T.get(j.key===null?S:j.key)||null,d(x,T,j,D);case nr:var O=j._init;return I(T,x,S,O(j._payload),D)}if(io(j)||Ws(j))return T=T.get(S)||null,f(x,T,j,D,null);qa(x,j)}return null}function C(T,x,S,j){for(var D=null,O=null,v=x,y=x=0,_=null;v!==null&&y<S.length;y++){v.index>y?(_=v,v=null):_=v.sibling;var k=m(T,v,S[y],j);if(k===null){v===null&&(v=_);break}t&&v&&k.alternate===null&&e(T,v),x=s(k,x,y),O===null?D=k:O.sibling=k,O=k,v=_}if(y===S.length)return n(T,v),Se&&Kr(T,y),D;if(v===null){for(;y<S.length;y++)v=g(T,S[y],j),v!==null&&(x=s(v,x,y),O===null?D=v:O.sibling=v,O=v);return Se&&Kr(T,y),D}for(v=r(T,v);y<S.length;y++)_=I(v,T,y,S[y],j),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?y:_.key),x=s(_,x,y),O===null?D=_:O.sibling=_,O=_);return t&&v.forEach(function(E){return e(T,E)}),Se&&Kr(T,y),D}function A(T,x,S,j){var D=Ws(S);if(typeof D!="function")throw Error(F(150));if(S=D.call(S),S==null)throw Error(F(151));for(var O=D=null,v=x,y=x=0,_=null,k=S.next();v!==null&&!k.done;y++,k=S.next()){v.index>y?(_=v,v=null):_=v.sibling;var E=m(T,v,k.value,j);if(E===null){v===null&&(v=_);break}t&&v&&E.alternate===null&&e(T,v),x=s(E,x,y),O===null?D=E:O.sibling=E,O=E,v=_}if(k.done)return n(T,v),Se&&Kr(T,y),D;if(v===null){for(;!k.done;y++,k=S.next())k=g(T,k.value,j),k!==null&&(x=s(k,x,y),O===null?D=k:O.sibling=k,O=k);return Se&&Kr(T,y),D}for(v=r(T,v);!k.done;y++,k=S.next())k=I(v,T,y,k.value,j),k!==null&&(t&&k.alternate!==null&&v.delete(k.key===null?y:k.key),x=s(k,x,y),O===null?D=k:O.sibling=k,O=k);return t&&v.forEach(function(P){return e(T,P)}),Se&&Kr(T,y),D}function b(T,x,S,j){if(typeof S=="object"&&S!==null&&S.type===Vi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Pa:e:{for(var D=S.key,O=x;O!==null;){if(O.key===D){if(D=S.type,D===Vi){if(O.tag===7){n(T,O.sibling),x=i(O,S.props.children),x.return=T,T=x;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===nr&&vg(D)===O.type){n(T,O.sibling),x=i(O,S.props),x.ref=Ys(T,O,S),x.return=T,T=x;break e}n(T,O);break}else e(T,O);O=O.sibling}S.type===Vi?(x=ni(S.props.children,T.mode,j,S.key),x.return=T,T=x):(j=yl(S.type,S.key,S.props,null,T.mode,j),j.ref=Ys(T,x,S),j.return=T,T=j)}return o(T);case Li:e:{for(O=S.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(T,x.sibling),x=i(x,S.children||[]),x.return=T,T=x;break e}else{n(T,x);break}else e(T,x);x=x.sibling}x=Xu(S,T.mode,j),x.return=T,T=x}return o(T);case nr:return O=S._init,b(T,x,O(S._payload),j)}if(io(S))return C(T,x,S,j);if(Ws(S))return A(T,x,S,j);qa(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(T,x.sibling),x=i(x,S),x.return=T,T=x):(n(T,x),x=Yu(S,T.mode,j),x.return=T,T=x),o(T)):n(T,x)}return b}var cs=Q_(!0),J_=Q_(!1),sa={},yn=Ur(sa),Uo=Ur(sa),Bo=Ur(sa);function Zr(t){if(t===sa)throw Error(F(174));return t}function ff(t,e){switch(_e(Bo,e),_e(Uo,t),_e(yn,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sd(e,t)}Te(yn),_e(yn,e)}function us(){Te(yn),Te(Uo),Te(Bo)}function Y_(t){Zr(Bo.current);var e=Zr(yn.current),n=Sd(e,t.type);e!==n&&(_e(Uo,t),_e(yn,n))}function pf(t){Uo.current===t&&(Te(yn),Te(Uo))}var ke=Ur(0);function Wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hu=[];function mf(){for(var t=0;t<Hu.length;t++)Hu[t]._workInProgressVersionPrimary=null;Hu.length=0}var hl=Wn.ReactCurrentDispatcher,Wu=Wn.ReactCurrentBatchConfig,ai=0,Re=null,Ue=null,qe=null,Gl=!1,yo=!1,$o=0,aS=0;function at(){throw Error(F(321))}function gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function yf(t,e,n,r,i,s){if(ai=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hl.current=t===null||t.memoizedState===null?dS:hS,t=n(r,i),yo){s=0;do{if(yo=!1,$o=0,25<=s)throw Error(F(301));s+=1,qe=Ue=null,e.updateQueue=null,hl.current=fS,t=n(r,i)}while(yo)}if(hl.current=Kl,e=Ue!==null&&Ue.next!==null,ai=0,qe=Ue=Re=null,Gl=!1,e)throw Error(F(300));return t}function vf(){var t=$o!==0;return $o=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Re.memoizedState=qe=t:qe=qe.next=t,qe}function Qt(){if(Ue===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=qe===null?Re.memoizedState:qe.next;if(e!==null)qe=e,Ue=t;else{if(t===null)throw Error(F(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},qe===null?Re.memoizedState=qe=t:qe=qe.next=t}return qe}function zo(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,d=s;do{var f=d.lane;if((ai&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,Re.lanes|=f,li|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=c,an(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,li|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ku(t){var e=Qt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);an(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function X_(){}function Z_(t,e){var n=Re,r=Qt(),i=e(),s=!an(r.memoizedState,i);if(s&&(r.memoizedState=i,At=!0),r=r.queue,_f(n0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,qo(9,t0.bind(null,n,r,i,e),void 0,null),He===null)throw Error(F(349));ai&30||e0(n,e,i)}return i}function e0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function t0(t,e,n,r){e.value=n,e.getSnapshot=r,r0(e)&&i0(t)}function n0(t,e,n){return n(function(){r0(e)&&i0(t)})}function r0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function i0(t){var e=Fn(t,1);e!==null&&on(e,t,1,-1)}function _g(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},e.queue=t,t=t.dispatch=uS.bind(null,Re,t),[e.memoizedState,t]}function qo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s0(){return Qt().memoizedState}function fl(t,e,n,r){var i=dn();Re.flags|=t,i.memoizedState=qo(1|e,n,void 0,r===void 0?null:r)}function Rc(t,e,n,r){var i=Qt();r=r===void 0?null:r;var s=void 0;if(Ue!==null){var o=Ue.memoizedState;if(s=o.destroy,r!==null&&gf(r,o.deps)){i.memoizedState=qo(e,n,s,r);return}}Re.flags|=t,i.memoizedState=qo(1|e,n,s,r)}function xg(t,e){return fl(8390656,8,t,e)}function _f(t,e){return Rc(2048,8,t,e)}function o0(t,e){return Rc(4,2,t,e)}function a0(t,e){return Rc(4,4,t,e)}function l0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function c0(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4,4,l0.bind(null,e,t),n)}function xf(){}function u0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function d0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function h0(t,e,n){return ai&21?(an(n,e)||(n=m_(),Re.lanes|=n,li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function lS(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Wu.transition;Wu.transition={};try{t(!1),e()}finally{ye=n,Wu.transition=r}}function f0(){return Qt().memoizedState}function cS(t,e,n){var r=wr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},p0(t))m0(e,n);else if(n=H_(t,e,n,r),n!==null){var i=Tt();on(n,t,r,i),g0(n,e,r)}}function uS(t,e,n){var r=wr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(p0(t))m0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,an(c,o)){var u=e.interleaved;u===null?(i.next=i,df(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=H_(t,e,i,r),n!==null&&(i=Tt(),on(n,t,r,i),g0(n,e,r))}}function p0(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function m0(t,e){yo=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function g0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jh(t,n)}}var Kl={readContext:Kt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},dS={readContext:Kt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:xg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fl(4194308,4,l0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fl(4194308,4,t,e)},useInsertionEffect:function(t,e){return fl(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cS.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:_g,useDebugValue:xf,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=_g(!1),e=t[0];return t=lS.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=dn();if(Se){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),He===null)throw Error(F(349));ai&30||e0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xg(n0.bind(null,r,s,t),[t]),r.flags|=2048,qo(9,t0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dn(),e=He.identifierPrefix;if(Se){var n=bn,r=jn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hS={readContext:Kt,useCallback:u0,useContext:Kt,useEffect:_f,useImperativeHandle:c0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:d0,useReducer:Gu,useRef:s0,useState:function(){return Gu(zo)},useDebugValue:xf,useDeferredValue:function(t){var e=Qt();return h0(e,Ue.memoizedState,t)},useTransition:function(){var t=Gu(zo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:X_,useSyncExternalStore:Z_,useId:f0,unstable_isNewReconciler:!1},fS={readContext:Kt,useCallback:u0,useContext:Kt,useEffect:_f,useImperativeHandle:c0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:d0,useReducer:Ku,useRef:s0,useState:function(){return Ku(zo)},useDebugValue:xf,useDeferredValue:function(t){var e=Qt();return Ue===null?e.memoizedState=t:h0(e,Ue.memoizedState,t)},useTransition:function(){var t=Ku(zo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:X_,useSyncExternalStore:Z_,useId:f0,unstable_isNewReconciler:!1};function ds(t,e){try{var n="",r=e;do n+=BE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pS=typeof WeakMap=="function"?WeakMap:Map;function y0(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jl||(Jl=!0,rh=r),Gd(t,e)},n}function v0(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gd(t,e),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=RS.bind(null,t,e,n),e.then(t,t))}function Eg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var mS=Wn.ReactCurrentOwner,At=!1;function Et(t,e,n,r){e.child=t===null?J_(e,null,n,r):cs(e,t.child,n,r)}function Sg(t,e,n,r,i){n=n.render;var s=e.ref;return Zi(e,i),r=yf(t,e,n,r,s,i),n=vf(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Un(t,e,i)):(Se&&n&&sf(e),e.flags|=1,Et(t,e,r,i),e.child)}function Cg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_0(t,e,s,r,i)):(t=yl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Lo,n(o,r)&&t.ref===e.ref)return Un(t,e,i)}return e.flags|=1,t=Er(s,r),t.ref=e.ref,t.return=e,e.child=t}function _0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Lo(s,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Un(t,e,i)}return Kd(t,e,n,r,i)}function x0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Gi,Ot),Ot|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Gi,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(Gi,Ot),Ot|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(Gi,Ot),Ot|=r;return Et(t,e,i,n),e.child}function w0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kd(t,e,n,r,i){var s=bt(n)?si:yt.current;return s=as(e,s),Zi(e,i),n=yf(t,e,n,r,s,i),r=vf(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Un(t,e,i)):(Se&&r&&sf(e),e.flags|=1,Et(t,e,n,i),e.child)}function Ig(t,e,n,r,i){if(bt(n)){var s=!0;Ul(e)}else s=!1;if(Zi(e,i),e.stateNode===null)pl(t,e),K_(e,n,r),Wd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=bt(n)?si:yt.current,d=as(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&yg(e,o,r,d),rr=!1;var m=e.memoizedState;o.state=m,Hl(e,r,o,i),u=e.memoizedState,c!==r||m!==u||jt.current||rr?(typeof f=="function"&&(Hd(e,n,f,r),u=e.memoizedState),(c=rr||gg(e,n,c,r,m,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,W_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:en(e.type,c),o.props=d,g=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=bt(n)?si:yt.current,u=as(e,u));var I=n.getDerivedStateFromProps;(f=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||m!==u)&&yg(e,o,r,u),rr=!1,m=e.memoizedState,o.state=m,Hl(e,r,o,i);var C=e.memoizedState;c!==g||m!==C||jt.current||rr?(typeof I=="function"&&(Hd(e,n,I,r),C=e.memoizedState),(d=rr||gg(e,n,d,r,m,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Qd(t,e,n,r,s,i)}function Qd(t,e,n,r,i,s){w0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&dg(e,n,!1),Un(t,e,s);r=e.stateNode,mS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cs(e,t.child,null,s),e.child=cs(e,null,c,s)):Et(t,e,c,s),e.memoizedState=r.state,i&&dg(e,n,!0),e.child}function E0(t){var e=t.stateNode;e.pendingContext?ug(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ug(t,e.context,!1),ff(t,e.containerInfo)}function kg(t,e,n,r,i){return ls(),af(i),e.flags|=256,Et(t,e,n,r),e.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function T0(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(ke,i&1),t===null)return zd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=jc(o,r,0,null),t=ni(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yd(n),e.memoizedState=Jd,t):wf(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return gS(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Er(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=Er(c,s):(s=ni(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jd,r}return s=t.child,t=s.sibling,r=Er(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wf(t,e){return e=jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ha(t,e,n,r){return r!==null&&af(r),cs(e,t.child,null,n),t=wf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qu(Error(F(422))),Ha(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=jc({mode:"visible",children:r.children},i,0,null),s=ni(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cs(e,t.child,null,o),e.child.memoizedState=Yd(o),e.memoizedState=Jd,s);if(!(e.mode&1))return Ha(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(F(419)),r=Qu(s,r,void 0),Ha(t,e,o,r)}if(c=(o&t.childLanes)!==0,At||c){if(r=He,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fn(t,i),on(r,t,i,-1))}return kf(),r=Qu(Error(F(421))),Ha(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lt=vr(i.nextSibling),Mt=e,Se=!0,nn=null,t!==null&&(zt[qt++]=jn,zt[qt++]=bn,zt[qt++]=oi,jn=t.id,bn=t.overflow,oi=e),e=wf(e,r.children),e.flags|=4096,e)}function Rg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qd(t.return,e,n)}function Ju(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function S0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Et(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rg(t,n,e);else if(t.tag===19)Rg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ju(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ju(e,!0,n,null,s);break;case"together":Ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yS(t,e,n){switch(e.tag){case 3:E0(e),ls();break;case 5:Y_(e);break;case 1:bt(e.type)&&Ul(e);break;case 4:ff(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?T0(t,e,n):(_e(ke,ke.current&1),t=Un(t,e,n),t!==null?t.sibling:null);_e(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return S0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,x0(t,e,n)}return Un(t,e,n)}var C0,Xd,I0,k0;C0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xd=function(){};I0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zr(yn.current);var s=null;switch(n){case"input":i=xd(t,i),r=xd(t,r),s=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),s=[];break;case"textarea":i=Td(t,i),r=Td(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ml)}Cd(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(No.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(No.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&we("scroll",t),s||c===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};k0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xs(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vS(t,e,n){var r=e.pendingProps;switch(of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return bt(e.type)&&Fl(),lt(e),null;case 3:return r=e.stateNode,us(),Te(jt),Te(yt),mf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(za(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(oh(nn),nn=null))),Xd(t,e),lt(e),null;case 5:pf(e);var i=Zr(Bo.current);if(n=e.type,t!==null&&e.stateNode!=null)I0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return lt(e),null}if(t=Zr(yn.current),za(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pn]=e,r[Fo]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<oo.length;i++)we(oo[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Vm(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":Fm(r,s),we("invalid",r)}Cd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&$a(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&$a(r.textContent,c,t),i=["children",""+c]):No.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":Da(r),Mm(r,s,!0);break;case"textarea":Da(r),Um(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ml)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[Fo]=r,C0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Id(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<oo.length;i++)we(oo[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":Vm(t,r),i=xd(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),we("invalid",t);break;case"textarea":Fm(t,r),i=Td(t,r),we("invalid",t);break;default:i=r}Cd(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?r_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&t_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ao(t,u):typeof u=="number"&&Ao(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(No.hasOwnProperty(s)?u!=null&&s==="onScroll"&&we("scroll",t):u!=null&&qh(t,s,u,o))}switch(n){case"input":Da(t),Mm(t,r,!1);break;case"textarea":Da(t),Um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)k0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Zr(Bo.current),Zr(yn.current),za(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(s=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:$a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return lt(e),null;case 13:if(Te(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Lt!==null&&e.mode&1&&!(e.flags&128))q_(),ls(),e.flags|=98560,s=!1;else if(s=za(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[pn]=e}else ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),s=!1}else nn!==null&&(oh(nn),nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Be===0&&(Be=3):kf())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return us(),Xd(t,e),t===null&&Vo(e.stateNode.containerInfo),lt(e),null;case 10:return uf(e.type._context),lt(e),null;case 17:return bt(e.type)&&Fl(),lt(e),null;case 19:if(Te(ke),s=e.memoizedState,s===null)return lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xs(s,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wl(t),o!==null){for(e.flags|=128,Xs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>hs&&(e.flags|=128,r=!0,Xs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Se)return lt(e),null}else 2*Oe()-s.renderingStartTime>hs&&n!==1073741824&&(e.flags|=128,r=!0,Xs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=ke.current,_e(ke,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return If(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function _S(t,e){switch(of(e),e.tag){case 1:return bt(e.type)&&Fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return us(),Te(jt),Te(yt),mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(Te(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(ke),null;case 4:return us(),null;case 10:return uf(e.type._context),null;case 22:case 23:return If(),null;case 24:return null;default:return null}}var Wa=!1,pt=!1,xS=typeof WeakSet=="function"?WeakSet:Set,H=null;function Wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Zd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Ng=!1;function wS(t,e){if(Ld=Ol,t=j_(),rf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,g=t,m=null;t:for(;;){for(var I;g!==n||i!==0&&g.nodeType!==3||(c=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(I=g.firstChild)!==null;)m=g,g=I;for(;;){if(g===t)break t;if(m===n&&++d===i&&(c=o),m===s&&++f===r&&(u=o),(I=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=I}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:t,selectionRange:n},Ol=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var A=C.memoizedProps,b=C.memoizedState,T=e.stateNode,x=T.getSnapshotBeforeUpdate(e.elementType===e.type?A:en(e.type,A),b);T.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(j){Pe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return C=Ng,Ng=!1,C}function vo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zd(e,n,s)}i=i.next}while(i!==r)}}function Nc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function eh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function R0(t){var e=t.alternate;e!==null&&(t.alternate=null,R0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Fo],delete e[Ud],delete e[rS],delete e[iS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N0(t){return t.tag===5||t.tag===3||t.tag===4}function Ag(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ml));else if(r!==4&&(t=t.child,t!==null))for(th(t,e,n),t=t.sibling;t!==null;)th(t,e,n),t=t.sibling}function nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nh(t,e,n),t=t.sibling;t!==null;)nh(t,e,n),t=t.sibling}var Ye=null,tn=!1;function er(t,e,n){for(n=n.child;n!==null;)A0(t,e,n),n=n.sibling}function A0(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(wc,n)}catch{}switch(n.tag){case 5:pt||Wi(n,e);case 6:var r=Ye,i=tn;Ye=null,er(t,e,n),Ye=r,tn=i,Ye!==null&&(tn?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(tn?(t=Ye,n=n.stateNode,t.nodeType===8?zu(t.parentNode,n):t.nodeType===1&&zu(t,n),Do(t)):zu(Ye,n.stateNode));break;case 4:r=Ye,i=tn,Ye=n.stateNode.containerInfo,tn=!0,er(t,e,n),Ye=r,tn=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zd(n,e,o),i=i.next}while(i!==r)}er(t,e,n);break;case 1:if(!pt&&(Wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Pe(n,e,c)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,er(t,e,n),pt=r):er(t,e,n);break;default:er(t,e,n)}}function jg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xS),e.forEach(function(r){var i=AS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ye=c.stateNode,tn=!1;break e;case 3:Ye=c.stateNode.containerInfo,tn=!0;break e;case 4:Ye=c.stateNode.containerInfo,tn=!0;break e}c=c.return}if(Ye===null)throw Error(F(160));A0(s,o,i),Ye=null,tn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Pe(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)j0(e,t),e=e.sibling}function j0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),un(t),r&4){try{vo(3,t,t.return),Nc(3,t)}catch(A){Pe(t,t.return,A)}try{vo(5,t,t.return)}catch(A){Pe(t,t.return,A)}}break;case 1:Zt(e,t),un(t),r&512&&n!==null&&Wi(n,n.return);break;case 5:if(Zt(e,t),un(t),r&512&&n!==null&&Wi(n,n.return),t.flags&32){var i=t.stateNode;try{Ao(i,"")}catch(A){Pe(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&Xv(i,s),Id(c,o);var d=Id(c,s);for(o=0;o<u.length;o+=2){var f=u[o],g=u[o+1];f==="style"?r_(i,g):f==="dangerouslySetInnerHTML"?t_(i,g):f==="children"?Ao(i,g):qh(i,f,g,d)}switch(c){case"input":wd(i,s);break;case"textarea":Zv(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var I=s.value;I!=null?Qi(i,!!s.multiple,I,!1):m!==!!s.multiple&&(s.defaultValue!=null?Qi(i,!!s.multiple,s.defaultValue,!0):Qi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fo]=s}catch(A){Pe(t,t.return,A)}}break;case 6:if(Zt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Pe(t,t.return,A)}}break;case 3:if(Zt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Do(e.containerInfo)}catch(A){Pe(t,t.return,A)}break;case 4:Zt(e,t),un(t);break;case 13:Zt(e,t),un(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Sf=Oe())),r&4&&jg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(d=pt)||f,Zt(e,t),pt=d):Zt(e,t),un(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(g=H=f;H!==null;){switch(m=H,I=m.child,m.tag){case 0:case 11:case 14:case 15:vo(4,m,m.return);break;case 1:Wi(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(A){Pe(r,n,A)}}break;case 5:Wi(m,m.return);break;case 22:if(m.memoizedState!==null){Pg(g);continue}}I!==null?(I.return=m,H=I):Pg(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=n_("display",o))}catch(A){Pe(t,t.return,A)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(A){Pe(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Zt(e,t),un(t),r&4&&jg(t);break;case 21:break;default:Zt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ao(i,""),r.flags&=-33);var s=Ag(t);nh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Ag(t);th(t,c,o);break;default:throw Error(F(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ES(t,e,n){H=t,b0(t)}function b0(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wa;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||pt;c=Wa;var d=pt;if(Wa=o,(pt=u)&&!d)for(H=i;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Dg(i):u!==null?(u.return=o,H=u):Dg(i);for(;s!==null;)H=s,b0(s),s=s.sibling;H=i,Wa=c,pt=d}bg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):bg(t)}}function bg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Nc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Do(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}pt||e.flags&512&&eh(e)}catch(m){Pe(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Pg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Dg(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nc(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pe(e,i,u)}}var s=e.return;try{eh(e)}catch(u){Pe(e,s,u)}break;case 5:var o=e.return;try{eh(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){H=null;break}var c=e.sibling;if(c!==null){c.return=e.return,H=c;break}H=e.return}}var TS=Math.ceil,Ql=Wn.ReactCurrentDispatcher,Ef=Wn.ReactCurrentOwner,Gt=Wn.ReactCurrentBatchConfig,pe=0,He=null,Me=null,Ze=0,Ot=0,Gi=Ur(0),Be=0,Ho=null,li=0,Ac=0,Tf=0,_o=null,Nt=null,Sf=0,hs=1/0,Nn=null,Jl=!1,rh=null,xr=null,Ga=!1,hr=null,Yl=0,xo=0,ih=null,ml=-1,gl=0;function Tt(){return pe&6?Oe():ml!==-1?ml:ml=Oe()}function wr(t){return t.mode&1?pe&2&&Ze!==0?Ze&-Ze:oS.transition!==null?(gl===0&&(gl=m_()),gl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:E_(t.type)),t):1}function on(t,e,n,r){if(50<xo)throw xo=0,ih=null,Error(F(185));na(t,n,r),(!(pe&2)||t!==He)&&(t===He&&(!(pe&2)&&(Ac|=n),Be===4&&or(t,Ze)),Pt(t,r),n===1&&pe===0&&!(e.mode&1)&&(hs=Oe()+500,Ic&&Br()))}function Pt(t,e){var n=t.callbackNode;oT(t,e);var r=Dl(t,t===He?Ze:0);if(r===0)n!==null&&zm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zm(n),e===1)t.tag===0?sS(Og.bind(null,t)):B_(Og.bind(null,t)),tS(function(){!(pe&6)&&Br()}),n=null;else{switch(g_(r)){case 1:n=Qh;break;case 4:n=f_;break;case 16:n=Pl;break;case 536870912:n=p_;break;default:n=Pl}n=U0(n,P0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function P0(t,e){if(ml=-1,gl=0,pe&6)throw Error(F(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var r=Dl(t,t===He?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xl(t,r);else{e=r;var i=pe;pe|=2;var s=O0();(He!==t||Ze!==e)&&(Nn=null,hs=Oe()+500,ti(t,e));do try{IS();break}catch(c){D0(t,c)}while(1);cf(),Ql.current=s,pe=i,Me!==null?e=0:(He=null,Ze=0,e=Be)}if(e!==0){if(e===2&&(i=jd(t),i!==0&&(r=i,e=sh(t,i))),e===1)throw n=Ho,ti(t,0),or(t,r),Pt(t,Oe()),n;if(e===6)or(t,r);else{if(i=t.current.alternate,!(r&30)&&!SS(i)&&(e=Xl(t,r),e===2&&(s=jd(t),s!==0&&(r=s,e=sh(t,s))),e===1))throw n=Ho,ti(t,0),or(t,r),Pt(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Qr(t,Nt,Nn);break;case 3:if(or(t,r),(r&130023424)===r&&(e=Sf+500-Oe(),10<e)){if(Dl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fd(Qr.bind(null,t,Nt,Nn),e);break}Qr(t,Nt,Nn);break;case 4:if(or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TS(r/1960))-r,10<r){t.timeoutHandle=Fd(Qr.bind(null,t,Nt,Nn),r);break}Qr(t,Nt,Nn);break;case 5:Qr(t,Nt,Nn);break;default:throw Error(F(329))}}}return Pt(t,Oe()),t.callbackNode===n?P0.bind(null,t):null}function sh(t,e){var n=_o;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=Xl(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&oh(e)),t}function oh(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function SS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~Tf,e&=~Ac,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Og(t){if(pe&6)throw Error(F(327));es();var e=Dl(t,0);if(!(e&1))return Pt(t,Oe()),null;var n=Xl(t,e);if(t.tag!==0&&n===2){var r=jd(t);r!==0&&(e=r,n=sh(t,r))}if(n===1)throw n=Ho,ti(t,0),or(t,e),Pt(t,Oe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qr(t,Nt,Nn),Pt(t,Oe()),null}function Cf(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(hs=Oe()+500,Ic&&Br())}}function ci(t){hr!==null&&hr.tag===0&&!(pe&6)&&es();var e=pe;pe|=1;var n=Gt.transition,r=ye;try{if(Gt.transition=null,ye=1,t)return t()}finally{ye=r,Gt.transition=n,pe=e,!(pe&6)&&Br()}}function If(){Ot=Gi.current,Te(Gi)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eS(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fl();break;case 3:us(),Te(jt),Te(yt),mf();break;case 5:pf(r);break;case 4:us();break;case 13:Te(ke);break;case 19:Te(ke);break;case 10:uf(r.type._context);break;case 22:case 23:If()}n=n.return}if(He=t,Me=t=Er(t.current,null),Ze=Ot=e,Be=0,Ho=null,Tf=Ac=li=0,Nt=_o=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xr=null}return t}function D0(t,e){do{var n=Me;try{if(cf(),hl.current=Kl,Gl){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gl=!1}if(ai=0,qe=Ue=Re=null,yo=!1,$o=0,Ef.current=null,n===null||n.return===null){Be=1,Ho=e,Me=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=Ze,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var I=Eg(o);if(I!==null){I.flags&=-257,Tg(I,o,c,s,e),I.mode&1&&wg(s,d,e),e=I,u=d;var C=e.updateQueue;if(C===null){var A=new Set;A.add(u),e.updateQueue=A}else C.add(u);break e}else{if(!(e&1)){wg(s,d,e),kf();break e}u=Error(F(426))}}else if(Se&&c.mode&1){var b=Eg(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Tg(b,o,c,s,e),af(ds(u,c));break e}}s=u=ds(u,c),Be!==4&&(Be=2),_o===null?_o=[s]:_o.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=y0(s,u,e);pg(s,T);break e;case 1:c=u;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(xr===null||!xr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=v0(s,c,e);pg(s,j);break e}}s=s.return}while(s!==null)}V0(n)}catch(D){e=D,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function O0(){var t=Ql.current;return Ql.current=Kl,t===null?Kl:t}function kf(){(Be===0||Be===3||Be===2)&&(Be=4),He===null||!(li&268435455)&&!(Ac&268435455)||or(He,Ze)}function Xl(t,e){var n=pe;pe|=2;var r=O0();(He!==t||Ze!==e)&&(Nn=null,ti(t,e));do try{CS();break}catch(i){D0(t,i)}while(1);if(cf(),pe=n,Ql.current=r,Me!==null)throw Error(F(261));return He=null,Ze=0,Be}function CS(){for(;Me!==null;)L0(Me)}function IS(){for(;Me!==null&&!YE();)L0(Me)}function L0(t){var e=F0(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?V0(t):Me=e,Ef.current=null}function V0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_S(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Me=null;return}}else if(n=vS(n,e,Ot),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Be===0&&(Be=5)}function Qr(t,e,n){var r=ye,i=Gt.transition;try{Gt.transition=null,ye=1,kS(t,e,n,r)}finally{Gt.transition=i,ye=r}return null}function kS(t,e,n,r){do es();while(hr!==null);if(pe&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aT(t,s),t===He&&(Me=He=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,U0(Pl,function(){return es(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var o=ye;ye=1;var c=pe;pe|=4,Ef.current=null,wS(t,n),j0(n,t),GT(Vd),Ol=!!Ld,Vd=Ld=null,t.current=n,ES(n),XE(),pe=c,ye=o,Gt.transition=s}else t.current=n;if(Ga&&(Ga=!1,hr=t,Yl=i),s=t.pendingLanes,s===0&&(xr=null),tT(n.stateNode),Pt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jl)throw Jl=!1,t=rh,rh=null,t;return Yl&1&&t.tag!==0&&es(),s=t.pendingLanes,s&1?t===ih?xo++:(xo=0,ih=t):xo=0,Br(),null}function es(){if(hr!==null){var t=g_(Yl),e=Gt.transition,n=ye;try{if(Gt.transition=null,ye=16>t?16:t,hr===null)var r=!1;else{if(t=hr,hr=null,Yl=0,pe&6)throw Error(F(331));var i=pe;for(pe|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(H=d;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:vo(8,f,s)}var g=f.child;if(g!==null)g.return=f,H=g;else for(;H!==null;){f=H;var m=f.sibling,I=f.return;if(R0(f),f===d){H=null;break}if(m!==null){m.return=I,H=m;break}H=I}}}var C=s.alternate;if(C!==null){var A=C.child;if(A!==null){C.child=null;do{var b=A.sibling;A.sibling=null,A=b}while(A!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vo(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,H=T;break e}H=s.return}}var x=t.current;for(H=x;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=x;H!==null;){if(c=H,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Nc(9,c)}}catch(D){Pe(c,c.return,D)}if(c===o){H=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,H=j;break e}H=c.return}}if(pe=i,Br(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(wc,t)}catch{}r=!0}return r}finally{ye=n,Gt.transition=e}}return!1}function Lg(t,e,n){e=ds(n,e),e=y0(t,e,1),t=_r(t,e,1),e=Tt(),t!==null&&(na(t,1,e),Pt(t,e))}function Pe(t,e,n){if(t.tag===3)Lg(t,t,n);else for(;e!==null;){if(e.tag===3){Lg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){t=ds(n,t),t=v0(e,t,1),e=_r(e,t,1),t=Tt(),e!==null&&(na(e,1,t),Pt(e,t));break}}e=e.return}}function RS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Ze&n)===n&&(Be===4||Be===3&&(Ze&130023424)===Ze&&500>Oe()-Sf?ti(t,0):Tf|=n),Pt(t,e)}function M0(t,e){e===0&&(t.mode&1?(e=Va,Va<<=1,!(Va&130023424)&&(Va=4194304)):e=1);var n=Tt();t=Fn(t,e),t!==null&&(na(t,e,n),Pt(t,n))}function NS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M0(t,n)}function AS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),M0(t,n)}var F0;F0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,yS(t,e,n);At=!!(t.flags&131072)}else At=!1,Se&&e.flags&1048576&&$_(e,$l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pl(t,e),t=e.pendingProps;var i=as(e,yt.current);Zi(e,n),i=yf(null,e,r,t,i,n);var s=vf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(s=!0,Ul(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hf(e),i.updater=kc,e.stateNode=i,i._reactInternals=e,Wd(e,r,t,n),e=Qd(null,e,r,!0,s,n)):(e.tag=0,Se&&s&&sf(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bS(r),t=en(r,t),i){case 0:e=Kd(null,e,r,t,n);break e;case 1:e=Ig(null,e,r,t,n);break e;case 11:e=Sg(null,e,r,t,n);break e;case 14:e=Cg(null,e,r,en(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:en(r,i),Kd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:en(r,i),Ig(t,e,r,i,n);case 3:e:{if(E0(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,W_(t,e),Hl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ds(Error(F(423)),e),e=kg(t,e,r,n,i);break e}else if(r!==i){i=ds(Error(F(424)),e),e=kg(t,e,r,n,i);break e}else for(Lt=vr(e.stateNode.containerInfo.firstChild),Mt=e,Se=!0,nn=null,n=J_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===i){e=Un(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return Y_(e),t===null&&zd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Md(r,i)?o=null:s!==null&&Md(r,s)&&(e.flags|=32),w0(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&zd(e),null;case 13:return T0(t,e,n);case 4:return ff(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cs(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:en(r,i),Sg(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(zl,r._currentValue),r._currentValue=o,s!==null)if(an(s.value,o)){if(s.children===i.children&&!jt.current){e=Un(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=On(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),qd(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),qd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zi(e,n),i=Kt(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=en(r,e.pendingProps),i=en(r.type,i),Cg(t,e,r,i,n);case 15:return _0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:en(r,i),pl(t,e),e.tag=1,bt(r)?(t=!0,Ul(e)):t=!1,Zi(e,n),K_(e,r,i),Wd(e,r,i,n),Qd(null,e,r,!0,t,n);case 19:return S0(t,e,n);case 22:return x0(t,e,n)}throw Error(F(156,e.tag))};function U0(t,e){return h_(t,e)}function jS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new jS(t,e,n,r)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bS(t){if(typeof t=="function")return Rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wh)return 11;if(t===Gh)return 14}return 2}function Er(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vi:return ni(n.children,i,s,e);case Hh:o=8,i|=8;break;case gd:return t=Wt(12,n,e,i|2),t.elementType=gd,t.lanes=s,t;case yd:return t=Wt(13,n,e,i),t.elementType=yd,t.lanes=s,t;case vd:return t=Wt(19,n,e,i),t.elementType=vd,t.lanes=s,t;case Qv:return jc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gv:o=10;break e;case Kv:o=9;break e;case Wh:o=11;break e;case Gh:o=14;break e;case nr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ni(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function jc(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=Qv,t.lanes=n,t.stateNode={isHidden:!1},t}function Yu(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function Xu(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nf(t,e,n,r,i,s,o,c,u){return t=new PS(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(s),t}function DS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function B0(t){if(!t)return Ar;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(bt(n))return U_(t,n,e)}return e}function $0(t,e,n,r,i,s,o,c,u){return t=Nf(n,r,!0,t,i,s,o,c,u),t.context=B0(null),n=t.current,r=Tt(),i=wr(n),s=On(r,i),s.callback=e??null,_r(n,s,i),t.current.lanes=i,na(t,i,r),Pt(t,r),t}function bc(t,e,n,r){var i=e.current,s=Tt(),o=wr(i);return n=B0(n),e.context===null?e.context=n:e.pendingContext=n,e=On(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_r(i,e,o),t!==null&&(on(t,i,o,s),dl(t,i,o)),o}function Zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Af(t,e){Vg(t,e),(t=t.alternate)&&Vg(t,e)}function OS(){return null}var z0=typeof reportError=="function"?reportError:function(t){console.error(t)};function jf(t){this._internalRoot=t}Pc.prototype.render=jf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));bc(t,e,null,null)};Pc.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){bc(null,t,null,null)}),e[Mn]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=__();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&w_(t)}};function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mg(){}function LS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Zl(o);s.call(d)}}var o=$0(e,r,t,0,null,!1,!1,"",Mg);return t._reactRootContainer=o,t[Mn]=o.current,Vo(t.nodeType===8?t.parentNode:t),ci(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Zl(u);c.call(d)}}var u=Nf(t,0,!1,null,null,!1,!1,"",Mg);return t._reactRootContainer=u,t[Mn]=u.current,Vo(t.nodeType===8?t.parentNode:t),ci(function(){bc(e,u,n,r)}),u}function Oc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=Zl(o);c.call(u)}}bc(e,o,t,i)}else o=LS(n,e,t,i,r);return Zl(o)}y_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(Jh(e,n|1),Pt(e,Oe()),!(pe&6)&&(hs=Oe()+500,Br()))}break;case 13:ci(function(){var r=Fn(t,1);if(r!==null){var i=Tt();on(r,t,1,i)}}),Af(t,1)}};Yh=function(t){if(t.tag===13){var e=Fn(t,134217728);if(e!==null){var n=Tt();on(e,t,134217728,n)}Af(t,134217728)}};v_=function(t){if(t.tag===13){var e=wr(t),n=Fn(t,e);if(n!==null){var r=Tt();on(n,t,e,r)}Af(t,e)}};__=function(){return ye};x_=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Rd=function(t,e,n){switch(e){case"input":if(wd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cc(r);if(!i)throw Error(F(90));Yv(r),wd(r,i)}}}break;case"textarea":Zv(t,n);break;case"select":e=n.value,e!=null&&Qi(t,!!n.multiple,e,!1)}};o_=Cf;a_=ci;var VS={usingClientEntryPoint:!1,Events:[ia,Bi,Cc,i_,s_,Cf]},Zs={findFiberByHostInstance:Yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},MS={bundleType:Zs.bundleType,version:Zs.version,rendererPackageName:Zs.rendererPackageName,rendererConfig:Zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u_(t),t===null?null:t.stateNode},findFiberByHostInstance:Zs.findFiberByHostInstance||OS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{wc=Ka.inject(MS),gn=Ka}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VS;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(F(200));return DS(t,e,null,n)};Bt.createRoot=function(t,e){if(!bf(t))throw Error(F(299));var n=!1,r="",i=z0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nf(t,1,!1,null,null,n,!1,r,i),t[Mn]=e.current,Vo(t.nodeType===8?t.parentNode:t),new jf(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=u_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return ci(t)};Bt.hydrate=function(t,e,n){if(!Dc(e))throw Error(F(200));return Oc(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!bf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=z0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$0(e,null,t,1,n??null,i,!1,s,o),t[Mn]=e.current,Vo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pc(e)};Bt.render=function(t,e,n){if(!Dc(e))throw Error(F(200));return Oc(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Dc(t))throw Error(F(40));return t._reactRootContainer?(ci(function(){Oc(null,null,t,!1,function(){t._reactRootContainer=null,t[Mn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Cf;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Oc(t,e,n,!1,r)};Bt.version="18.2.0-next-9e3b772b8-20220608";function q0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q0)}catch(t){console.error(t)}}q0(),$v.exports=Bt;var FS=$v.exports,Fg=FS;pd.createRoot=Fg.createRoot,pd.hydrateRoot=Fg.hydrateRoot;const US="modulepreload",BS=function(t){return"/"+t},Ug={},$S=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=BS(s),s in Ug)return;Ug[s]=!0;const o=s.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const g=i[f];if(g.href===s&&(!o||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":US,o||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),o)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.parse=QS;Pf.serialize=JS;const zS=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,qS=/^[\u0021-\u003A\u003C-\u007E]*$/,HS=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,WS=/^[\u0020-\u003A\u003D-\u007E]*$/,GS=Object.prototype.toString,KS=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function QS(t,e){const n=new KS,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||YS;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const c=t.indexOf(";",s),u=c===-1?r:c;if(o>u){s=t.lastIndexOf(";",o-1)+1;continue}const d=Bg(t,s,o),f=$g(t,o,d),g=t.slice(d,f);if(n[g]===void 0){let m=Bg(t,o+1,u),I=$g(t,u,m);const C=i(t.slice(m,I));n[g]=C}s=u+1}while(s<r);return n}function Bg(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function $g(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function JS(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!zS.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!qS.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!HS.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!WS.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!XS(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function YS(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function XS(t){return GS.call(t)==="[object Date]"}var zg="popstate";function ZS(t={}){function e(i,s){let{pathname:o="/",search:c="",hash:u=""}=yi(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ah("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof s=="string"?s:Wo(s))}function r(i,s){Jt(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return tC(e,n,r,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eC(){return Math.random().toString(36).substring(2,10)}function qg(t,e){return{usr:t.state,key:t.key,idx:e}}function ah(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yi(e):e,state:n,key:e&&e.key||r||eC()}}function Wo({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function tC(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function g(){c="POP";let b=f(),T=b==null?null:b-d;d=b,u&&u({action:c,location:A.location,delta:T})}function m(b,T){c="PUSH";let x=ah(A.location,b,T);n&&n(x,b),d=f()+1;let S=qg(x,d),j=A.createHref(x);try{o.pushState(S,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(j)}s&&u&&u({action:c,location:A.location,delta:1})}function I(b,T){c="REPLACE";let x=ah(A.location,b,T);n&&n(x,b),d=f();let S=qg(x,d),j=A.createHref(x);o.replaceState(S,"",j),s&&u&&u({action:c,location:A.location,delta:0})}function C(b){return nC(b)}let A={get action(){return c},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(zg,g),u=b,()=>{i.removeEventListener(zg,g),u=null}},createHref(b){return e(i,b)},createURL:C,encodeLocation(b){let T=C(b);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:I,go(b){return o.go(b)}};return A}function nC(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ce(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Wo(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function H0(t,e,n="/"){return rC(t,e,n,!1)}function rC(t,e,n,r){let i=typeof e=="string"?yi(e):e,s=Bn(i.pathname||"/",n);if(s==null)return null;let o=W0(t);iC(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=mC(s);c=fC(o[u],d,r)}return c}function W0(t,e=[],n=[],r=""){let i=(s,o,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ce(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Ln([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(Ce(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),W0(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:dC(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let u of G0(s.path))i(s,o,u)}),e}function G0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=G0(r.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function iC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var sC=/^:[\w-]+$/,oC=3,aC=2,lC=1,cC=10,uC=-2,Hg=t=>t==="*";function dC(t,e){let n=t.split("/"),r=n.length;return n.some(Hg)&&(r+=uC),e&&(r+=aC),n.filter(i=>!Hg(i)).reduce((i,s)=>i+(sC.test(s)?oC:s===""?lC:cC),r)}function hC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function fC(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",g=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Ln([s,g.pathname]),pathnameBase:_C(Ln([s,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(s=Ln([s,g.pathnameBase]))}return o}function ec(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:g},m)=>{if(f==="*"){let C=c[m]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const I=c[m];return g&&!I?d[f]=void 0:d[f]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function pC(t,e=!1,n=!0){Jt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Bn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gC(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yi(t):t;return{pathname:n?n.startsWith("/")?n:yC(n,e):e,search:xC(r),hash:wC(i)}}function yC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zu(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Df(t){let e=vC(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Of(t,e,n,r=!1){let i;typeof t=="string"?i=yi(t):(i={...t},Ce(!i.pathname||!i.pathname.includes("?"),Zu("?","pathname","search",i)),Ce(!i.pathname||!i.pathname.includes("#"),Zu("#","pathname","hash",i)),Ce(!i.search||!i.search.includes("#"),Zu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=gC(i,c),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Ln=t=>t.join("/").replace(/\/\/+/g,"/"),_C=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function EC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var K0=["POST","PUT","PATCH","DELETE"];new Set(K0);var TC=["GET",...K0];new Set(TC);var Ss=N.createContext(null);Ss.displayName="DataRouter";var Lc=N.createContext(null);Lc.displayName="DataRouterState";var Q0=N.createContext({isTransitioning:!1});Q0.displayName="ViewTransition";var SC=N.createContext(new Map);SC.displayName="Fetchers";var CC=N.createContext(null);CC.displayName="Await";var cn=N.createContext(null);cn.displayName="Navigation";var oa=N.createContext(null);oa.displayName="Location";var Yt=N.createContext({outlet:null,matches:[],isDataRoute:!1});Yt.displayName="Route";var Lf=N.createContext(null);Lf.displayName="RouteError";function IC(t,{relative:e}={}){Ce(Cs(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(cn),{hash:i,pathname:s,search:o}=aa(t,{relative:e}),c=s;return n!=="/"&&(c=s==="/"?n:Ln([n,s])),r.createHref({pathname:c,search:o,hash:i})}function Cs(){return N.useContext(oa)!=null}function Gn(){return Ce(Cs(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(oa).location}var J0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y0(t){N.useContext(cn).static||N.useLayoutEffect(t)}function je(){let{isDataRoute:t}=N.useContext(Yt);return t?$C():kC()}function kC(){Ce(Cs(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Ss),{basename:e,navigator:n}=N.useContext(cn),{matches:r}=N.useContext(Yt),{pathname:i}=Gn(),s=JSON.stringify(Df(r)),o=N.useRef(!1);return Y0(()=>{o.current=!0}),N.useCallback((u,d={})=>{if(Jt(o.current,J0),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Of(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ln([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}var RC=N.createContext(null);function NC(t){let e=N.useContext(Yt).outlet;return e&&N.createElement(RC.Provider,{value:t},e)}function AC(){let{matches:t}=N.useContext(Yt),e=t[t.length-1];return e?e.params:{}}function aa(t,{relative:e}={}){let{matches:n}=N.useContext(Yt),{pathname:r}=Gn(),i=JSON.stringify(Df(n));return N.useMemo(()=>Of(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function jC(t,e){return X0(t,e)}function X0(t,e,n,r){var x;Ce(Cs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=N.useContext(cn),{matches:o}=N.useContext(Yt),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",g=c&&c.route;{let S=g&&g.path||"";Z0(d,!g||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let m=Gn(),I;if(e){let S=typeof e=="string"?yi(e):e;Ce(f==="/"||((x=S.pathname)==null?void 0:x.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),I=S}else I=m;let C=I.pathname||"/",A=C;if(f!=="/"){let S=f.replace(/^\//,"").split("/");A="/"+C.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=!s&&n&&n.matches&&n.matches.length>0?n.matches:H0(t,{pathname:A});Jt(g||b!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Jt(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=LC(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Ln([f,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:Ln([f,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return e&&T?N.createElement(oa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},T):T}function bC(){let t=BC(),e=EC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,o)}var PC=N.createElement(bC,null),DC=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(Yt.Provider,{value:this.props.routeContext},N.createElement(Lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OC({routeContext:t,match:e,children:n}){let r=N.useContext(Ss);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Yt.Provider,{value:t},n)}function LC(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Ce(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,c=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:g}=n,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,f)=>{let g,m=!1,I=null,C=null;n&&(g=s&&d.route.id?s[d.route.id]:void 0,I=d.route.errorElement||PC,o&&(c<0&&f===0?(Z0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,C=null):c===f&&(m=!0,C=d.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,f+1)),b=()=>{let T;return g?T=I:m?T=C:d.route.Component?T=N.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=u,N.createElement(OC,{match:d,routeContext:{outlet:u,matches:A,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?N.createElement(DC,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:b(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):b()},null)}function Vf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VC(t){let e=N.useContext(Ss);return Ce(e,Vf(t)),e}function MC(t){let e=N.useContext(Lc);return Ce(e,Vf(t)),e}function FC(t){let e=N.useContext(Yt);return Ce(e,Vf(t)),e}function Mf(t){let e=FC(t),n=e.matches[e.matches.length-1];return Ce(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function UC(){return Mf("useRouteId")}function BC(){var r;let t=N.useContext(Lf),e=MC("useRouteError"),n=Mf("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function $C(){let{router:t}=VC("useNavigate"),e=Mf("useNavigate"),n=N.useRef(!1);return Y0(()=>{n.current=!0}),N.useCallback(async(i,s={})=>{Jt(n.current,J0),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Wg={};function Z0(t,e,n){!e&&!Wg[t]&&(Wg[t]=!0,Jt(!1,n))}N.memo(zC);function zC({routes:t,future:e,state:n}){return X0(t,void 0,n,e)}function vl({to:t,replace:e,state:n,relative:r}){Ce(Cs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(cn);Jt(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=N.useContext(Yt),{pathname:o}=Gn(),c=je(),u=Of(t,Df(s),o,r==="path"),d=JSON.stringify(u);return N.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function qC(t){return NC(t.context)}function ge(t){Ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HC({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ce(!Cs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=yi(n));let{pathname:u="/",search:d="",hash:f="",state:g=null,key:m="default"}=n,I=N.useMemo(()=>{let C=Bn(u,o);return C==null?null:{location:{pathname:C,search:d,hash:f,state:g,key:m},navigationType:r}},[o,u,d,f,g,m,r]);return Jt(I!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:N.createElement(cn.Provider,{value:c},N.createElement(oa.Provider,{children:e,value:I}))}function WC({children:t,location:e}){return jC(lh(t),e)}function lh(t,e=[]){let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,lh(r.props.children,s));return}Ce(r.type===ge,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ce(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lh(r.props.children,s)),n.push(o)}),n}var _l="get",xl="application/x-www-form-urlencoded";function Vc(t){return t!=null&&typeof t.tagName=="string"}function GC(t){return Vc(t)&&t.tagName.toLowerCase()==="button"}function KC(t){return Vc(t)&&t.tagName.toLowerCase()==="form"}function QC(t){return Vc(t)&&t.tagName.toLowerCase()==="input"}function JC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YC(t,e){return t.button===0&&(!e||e==="_self")&&!JC(t)}var Qa=null;function XC(){if(Qa===null)try{new FormData(document.createElement("form"),0),Qa=!1}catch{Qa=!0}return Qa}var ZC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ed(t){return t!=null&&!ZC.has(t)?(Jt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xl}"`),null):t}function eI(t,e){let n,r,i,s,o;if(KC(t)){let c=t.getAttribute("action");r=c?Bn(c,e):null,n=t.getAttribute("method")||_l,i=ed(t.getAttribute("enctype"))||xl,s=new FormData(t)}else if(GC(t)||QC(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Bn(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||_l,i=ed(t.getAttribute("formenctype"))||ed(c.getAttribute("enctype"))||xl,s=new FormData(c,t),!XC()){let{name:d,type:f,value:g}=t;if(f==="image"){let m=d?`${d}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else d&&s.append(d,g)}}else{if(Vc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_l,r=null,i=xl,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Ff(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function tI(t,e){if(t.id in e)return e[t.id];try{let n=await $S(()=>import(t.module),__vite__mapDeps([]));return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nI(t){return t!=null&&typeof t.page=="string"}function rI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function iI(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await tI(s,n);return o.links?o.links():[]}return[]}));return lI(r.flat(1).filter(rI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Gg(t,e,n,r,i,s){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):s==="data"?e.filter((u,d)=>{var g;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function sI(t,e,{includeHydrateFallback:n}={}){return oI(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function oI(t){return[...new Set(t)]}function aI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function lI(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!nI(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let c=JSON.stringify(aI(s));return n.has(c)||(n.add(c),i.push({key:c,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cI=new Set([100,101,204,205]);function uI(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Bn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function ex(){let t=N.useContext(Ss);return Ff(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dI(){let t=N.useContext(Lc);return Ff(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Uf=N.createContext(void 0);Uf.displayName="FrameworkContext";function tx(){let t=N.useContext(Uf);return Ff(t,"You must render this element inside a <HydratedRouter> element"),t}function hI(t,e){let n=N.useContext(Uf),[r,i]=N.useState(!1),[s,o]=N.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:g}=e,m=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=T=>{T.forEach(x=>{o(x.isIntersecting)})},b=new IntersectionObserver(A,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[t]),N.useEffect(()=>{if(r){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[r]);let I=()=>{i(!0)},C=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:eo(c,I),onBlur:eo(u,C),onMouseEnter:eo(d,I),onMouseLeave:eo(f,C),onTouchStart:eo(g,I)}]:[!1,m,{}]}function eo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function fI({page:t,...e}){let{router:n}=ex(),r=N.useMemo(()=>H0(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(mI,{page:t,matches:r,...e}):null}function pI(t){let{manifest:e,routeModules:n}=tx(),[r,i]=N.useState([]);return N.useEffect(()=>{let s=!1;return iI(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function mI({page:t,matches:e,...n}){let r=Gn(),{manifest:i,routeModules:s}=tx(),{basename:o}=ex(),{loaderData:c,matches:u}=dI(),d=N.useMemo(()=>Gg(t,e,u,i,r,"data"),[t,e,u,i,r]),f=N.useMemo(()=>Gg(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let C=new Set,A=!1;if(e.forEach(T=>{var S;let x=i.routes[T.route.id];!x||!x.hasLoader||(!d.some(j=>j.route.id===T.route.id)&&T.route.id in c&&((S=s[T.route.id])!=null&&S.shouldRevalidate)||x.hasClientLoader?A=!0:C.add(T.route.id))}),C.size===0)return[];let b=uI(t,o);return A&&C.size>0&&b.searchParams.set("_routes",e.filter(T=>C.has(T.route.id)).map(T=>T.route.id).join(",")),[b.pathname+b.search]},[o,c,r,i,d,e,t,s]),m=N.useMemo(()=>sI(f,i),[f,i]),I=pI(f);return N.createElement(N.Fragment,null,g.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),m.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),I.map(({key:C,link:A})=>N.createElement("link",{key:C,...A})))}function gI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nx&&(window.__reactRouterVersion="7.6.0")}catch{}function yI({basename:t,children:e,window:n}){let r=N.useRef();r.current==null&&(r.current=ZS({window:n,v5Compat:!0}));let i=r.current,[s,o]=N.useState({action:i.action,location:i.location}),c=N.useCallback(u=>{N.startTransition(()=>o(u))},[o]);return N.useLayoutEffect(()=>i.listen(c),[i,c]),N.createElement(HC,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ht=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:g,...m},I){let{basename:C}=N.useContext(cn),A=typeof d=="string"&&rx.test(d),b,T=!1;if(typeof d=="string"&&A&&(b=d,nx))try{let _=new URL(window.location.href),k=d.startsWith("//")?new URL(_.protocol+d):new URL(d),E=Bn(k.pathname,C);k.origin===_.origin&&E!=null?d=E+k.search+k.hash:T=!0}catch{Jt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=IC(d,{relative:i}),[S,j,D]=hI(r,m),O=wI(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:g});function v(_){e&&e(_),_.defaultPrevented||O(_)}let y=N.createElement("a",{...m,...D,href:b||x,onClick:T||s?e:v,ref:gI(I,j),target:u,"data-discover":!A&&n==="render"?"true":void 0});return S&&!A?N.createElement(N.Fragment,null,y,N.createElement(fI,{page:x})):y});ht.displayName="Link";var vI=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:c,children:u,...d},f){let g=aa(o,{relative:d.relative}),m=Gn(),I=N.useContext(Lc),{navigator:C,basename:A}=N.useContext(cn),b=I!=null&&II(g)&&c===!0,T=C.encodeLocation?C.encodeLocation(g).pathname:g.pathname,x=m.pathname,S=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(x=x.toLowerCase(),S=S?S.toLowerCase():null,T=T.toLowerCase()),S&&A&&(S=Bn(S,A)||S);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let D=x===T||!i&&x.startsWith(T)&&x.charAt(j)==="/",O=S!=null&&(S===T||!i&&S.startsWith(T)&&S.charAt(T.length)==="/"),v={isActive:D,isPending:O,isTransitioning:b},y=D?e:void 0,_;typeof r=="function"?_=r(v):_=[r,D?"active":null,O?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(v):s;return N.createElement(ht,{...d,"aria-current":y,className:_,ref:f,style:k,to:o,viewTransition:c},typeof u=="function"?u(v):u)});vI.displayName="NavLink";var _I=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=_l,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:g,...m},I)=>{let C=SI(),A=CI(c,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&rx.test(c),x=S=>{if(u&&u(S),S.defaultPrevented)return;S.preventDefault();let j=S.nativeEvent.submitter,D=(j==null?void 0:j.getAttribute("formmethod"))||o;C(j||S.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:g})};return N.createElement("form",{ref:I,method:b,action:A,onSubmit:r?u:x,...m,"data-discover":!T&&t==="render"?"true":void 0})});_I.displayName="Form";function xI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ix(t){let e=N.useContext(Ss);return Ce(e,xI(t)),e}function wI(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let c=je(),u=Gn(),d=aa(t,{relative:s});return N.useCallback(f=>{if(YC(f,e)){f.preventDefault();let g=n!==void 0?n:Wo(u)===Wo(d);c(t,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,c,d,n,r,e,t,i,s,o])}var EI=0,TI=()=>`__${String(++EI)}__`;function SI(){let{router:t}=ix("useSubmit"),{basename:e}=N.useContext(cn),n=UC();return N.useCallback(async(r,i={})=>{let{action:s,method:o,encType:c,formData:u,body:d}=eI(r,e);if(i.navigate===!1){let f=i.fetcherKey||TI();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function CI(t,{relative:e}={}){let{basename:n}=N.useContext(cn),r=N.useContext(Yt);Ce(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...aa(t||".",{relative:e})},o=Gn();if(t==null){s.search=o.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let f=c.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ln([n,s.pathname])),Wo(s)}function II(t,e={}){let n=N.useContext(Q0);Ce(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ix("useViewTransitionState"),i=aa(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Bn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Bn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ec(i.pathname,o)!=null||ec(i.pathname,s)!=null}[...cI];const Kg={documents:{total:4,completed:0,items:[{id:"doc1",title:"就業規則",completed:!1,completedAt:null},{id:"doc2",title:"リモートワーク規定",completed:!1,completedAt:null},{id:"doc3",title:"秘密保持契約書",completed:!1,completedAt:null},{id:"doc4",title:"個人情報の取り扱いに関する同意書",completed:!1,completedAt:null}]},items:{total:9,completed:0,items:[{id:"item1",title:"健康診断個人票",completed:!1,completedAt:null},{id:"item2",title:"健康診断の領収書",completed:!1,completedAt:null},{id:"item3",title:"パスポート・在留カード",completed:!1,completedAt:null},{id:"item4",title:"年金手帳",completed:!1,completedAt:null},{id:"item5",title:"雇用保険被保険者証",completed:!1,completedAt:null},{id:"item6",title:"扶養控除等申請書",completed:!1,completedAt:null},{id:"item7",title:"源泉徴収票",completed:!1,completedAt:null},{id:"item8",title:"住民税の特別徴収にかかる異動届",completed:!1,completedAt:null},{id:"item9",title:"その他必要書類",completed:!1,completedAt:null}]},messages:{total:3,completed:0,items:[{id:"msg1",title:"原田 一郎からのメッセージ",completed:!1,completedAt:null},{id:"msg2",title:"野村 育子からのメッセージ",completed:!1,completedAt:null},{id:"msg3",title:"小林 美樹からのメッセージ",completed:!1,completedAt:null}]}},Qg="onboarding_progress",sx=N.createContext(),kI=({children:t})=>{const[e,n]=N.useState(()=>{const c=localStorage.getItem(Qg);return c?JSON.parse(c):Kg});N.useEffect(()=>{localStorage.setItem(Qg,JSON.stringify(e))},[e]);const r=(c,u)=>{const d=new Date,f=d.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),g=d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),m=`${f} ${g}`;n(I=>{const C=I[c].items.map(b=>b.id===u?{...b,completed:!0,completedAt:m}:b),A=C.filter(b=>b.completed).length;return{...I,[c]:{...I[c],items:C,completed:A}}})},i=c=>{const u=new Date,d=u.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),f=u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),g=`${d} ${f}`;n(m=>{const I=m[c].items.map(C=>C.completed?C:{...C,completed:!0,completedAt:g});return{...m,[c]:{...m[c],items:I,completed:m[c].total}}})},s=()=>{n(Kg)},o=()=>{const c=Object.values(e).reduce((d,f)=>d+f.total,0),u=Object.values(e).reduce((d,f)=>d+f.completed,0);return c>0?Math.round(u/c*100):0};return a.jsx(sx.Provider,{value:{progress:e,markItemCompleted:r,markCategoryCompleted:i,resetProgress:s,calculateTotalProgress:o},children:t})},Mc=()=>{const t=N.useContext(sx);if(!t)throw new Error("useProgress must be used within a ProgressProvider");return t},RI=()=>{};var Jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},NI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ax={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4;let m=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(m=64)),r.push(n[f],n[g],n[m],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ox(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new AI;const m=s<<2|c>>4;if(r.push(m),d!==64){const I=c<<4&240|d>>2;if(r.push(I),g!==64){const C=d<<6&192|g;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jI=function(t){const e=ox(t);return ax.encodeByteArray(e,!0)},tc=function(t){return jI(t).replace(/\./g,"")},lx=function(t){try{return ax.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=()=>bI().__FIREBASE_DEFAULTS__,DI=()=>{if(typeof process>"u"||typeof Jg>"u")return;const t=Jg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lx(t[1]);return e&&JSON.parse(e)},Fc=()=>{try{return RI()||PI()||DI()||OI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cx=t=>{var e,n;return(n=(e=Fc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ux=t=>{const e=cx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dx=()=>{var t;return(t=Fc())===null||t===void 0?void 0:t.config},hx=t=>{var e;return(e=Fc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){return t.endsWith(".cloudworkstations.dev")}async function Bf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[tc(JSON.stringify(n)),tc(JSON.stringify(o)),c].join(".")}const wo={};function VI(){const t={prod:[],emulator:[]};for(const e of Object.keys(wo))wo[e]?t.emulator.push(e):t.prod.push(e);return t}function MI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yg=!1;function $f(t,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||wo[t]===e||wo[t]||Yg)return;wo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=VI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,I){m.setAttribute("width","24"),m.setAttribute("id",I),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Yg=!0,o()},m}function f(m,I){m.setAttribute("id",I),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=MI(r),I=n("text"),C=document.getElementById(I)||document.createElement("span"),A=n("learnmore"),b=document.getElementById(A)||document.createElement("a"),T=n("preprendIcon"),x=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;c(S),f(b,A);const j=d();u(x,T),S.append(x,C,b,j),document.body.appendChild(S)}s?(C.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function UI(){var t;const e=(t=Fc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $I(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qI(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HI(){return!UI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WI(){try{return typeof indexedDB=="object"}catch{return!1}}function GI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="FirebaseError";class Tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KI,Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,la.prototype.create)}}class la{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QI(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Tn(i,c,r)}}function QI(t,e){return t.replace(JI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JI=/\{\$([^}]+)}/g;function YI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ui(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Xg(s)&&Xg(o)){if(!ui(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Xg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function XI(t,e){const n=new ZI(t,e);return n.subscribe.bind(n)}class ZI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ek(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=td),i.error===void 0&&(i.error=td),i.complete===void 0&&(i.complete=td);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ek(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function td(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rk(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nk(t){return t===Jr?void 0:t}function rk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const sk={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},ok=ae.INFO,ak={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},lk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ak[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zf{constructor(e){this.name=e,this._logLevel=ok,this._logHandler=lk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const ck=(t,e)=>e.some(n=>t instanceof n);let Zg,ey;function uk(){return Zg||(Zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dk(){return ey||(ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const px=new WeakMap,ch=new WeakMap,mx=new WeakMap,nd=new WeakMap,qf=new WeakMap;function hk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Tr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&px.set(n,t)}).catch(()=>{}),qf.set(e,t),e}function fk(t){if(ch.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ch.set(t,e)}let uh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pk(t){uh=t(uh)}function mk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rd(this),e,...n);return mx.set(r,e.sort?e.sort():[e]),Tr(r)}:dk().includes(t)?function(...e){return t.apply(rd(this),e),Tr(px.get(this))}:function(...e){return Tr(t.apply(rd(this),e))}}function gk(t){return typeof t=="function"?mk(t):(t instanceof IDBTransaction&&fk(t),ck(t,uk())?new Proxy(t,uh):t)}function Tr(t){if(t instanceof IDBRequest)return hk(t);if(nd.has(t))return nd.get(t);const e=gk(t);return e!==t&&(nd.set(t,e),qf.set(e,t)),e}const rd=t=>qf.get(t);function yk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=Tr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Tr(o.result),u.oldVersion,u.newVersion,Tr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const vk=["get","getKey","getAll","getAllKeys","count"],_k=["put","add","delete","clear"],id=new Map;function ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(id.get(e))return id.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_k.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vk.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return id.set(e,s),s}pk(t=>({...t,get:(e,n,r)=>ty(e,n)||t.get(e,n,r),has:(e,n)=>!!ty(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dh="@firebase/app",ny="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new zf("@firebase/app"),Ek="@firebase/app-compat",Tk="@firebase/analytics-compat",Sk="@firebase/analytics",Ck="@firebase/app-check-compat",Ik="@firebase/app-check",kk="@firebase/auth",Rk="@firebase/auth-compat",Nk="@firebase/database",Ak="@firebase/data-connect",jk="@firebase/database-compat",bk="@firebase/functions",Pk="@firebase/functions-compat",Dk="@firebase/installations",Ok="@firebase/installations-compat",Lk="@firebase/messaging",Vk="@firebase/messaging-compat",Mk="@firebase/performance",Fk="@firebase/performance-compat",Uk="@firebase/remote-config",Bk="@firebase/remote-config-compat",$k="@firebase/storage",zk="@firebase/storage-compat",qk="@firebase/firestore",Hk="@firebase/ai",Wk="@firebase/firestore-compat",Gk="firebase",Kk="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="[DEFAULT]",Qk={[dh]:"fire-core",[Ek]:"fire-core-compat",[Sk]:"fire-analytics",[Tk]:"fire-analytics-compat",[Ik]:"fire-app-check",[Ck]:"fire-app-check-compat",[kk]:"fire-auth",[Rk]:"fire-auth-compat",[Nk]:"fire-rtdb",[Ak]:"fire-data-connect",[jk]:"fire-rtdb-compat",[bk]:"fire-fn",[Pk]:"fire-fn-compat",[Dk]:"fire-iid",[Ok]:"fire-iid-compat",[Lk]:"fire-fcm",[Vk]:"fire-fcm-compat",[Mk]:"fire-perf",[Fk]:"fire-perf-compat",[Uk]:"fire-rc",[Bk]:"fire-rc-compat",[$k]:"fire-gcs",[zk]:"fire-gcs-compat",[qk]:"fire-fst",[Wk]:"fire-fst-compat",[Hk]:"fire-vertex","fire-js":"fire-js",[Gk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,Jk=new Map,fh=new Map;function ry(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function di(t){const e=t.name;if(fh.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;fh.set(e,t);for(const n of nc.values())ry(n,t);for(const n of Jk.values())ry(n,t);return!0}function Uc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ht(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new la("app","Firebase",Yk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=Kk;function ph(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(n||(n=dx()),!n)throw Sr.create("no-options");const s=nc.get(i);if(s){if(ui(n,s.options)&&ui(r,s.config))return s;throw Sr.create("duplicate-app",{appName:i})}const o=new ik(i);for(const u of fh.values())o.addComponent(u);const c=new Xk(n,r,o);return nc.set(i,c),c}function Hf(t=hh){const e=nc.get(t);if(!e&&t===hh&&dx())return ph();if(!e)throw Sr.create("no-app",{appName:t});return e}function vn(t,e,n){var r;let i=(r=Qk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(c.join(" "));return}di(new jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="firebase-heartbeat-database",eR=1,Go="firebase-heartbeat-store";let sd=null;function gx(){return sd||(sd=yk(Zk,eR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Go)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),sd}async function tR(t){try{const n=(await gx()).transaction(Go),r=await n.objectStore(Go).get(yx(t));return await n.done,r}catch(e){if(e instanceof Tn)$n.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$n.warn(n.message)}}}async function iy(t,e){try{const r=(await gx()).transaction(Go,"readwrite");await r.objectStore(Go).put(e,yx(t)),await r.done}catch(n){if(n instanceof Tn)$n.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$n.warn(r.message)}}}function yx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=1024,rR=30;class iR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>rR){const o=aR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$n.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sy(),{heartbeatsToSend:r,unsentEntries:i}=sR(this._heartbeatsCache.heartbeats),s=tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $n.warn(n),""}}}function sy(){return new Date().toISOString().substring(0,10)}function sR(t,e=nR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),oy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WI()?GI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function oy(t){return tc(JSON.stringify({version:2,heartbeats:t})).length}function aR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){di(new jr("platform-logger",e=>new xk(e),"PRIVATE")),di(new jr("heartbeat",e=>new iR(e),"PRIVATE")),vn(dh,ny,t),vn(dh,ny,"esm2017"),vn("fire-js","")}lR("");var ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,vx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function _(){}_.prototype=y.prototype,v.D=y.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(k,E,P){for(var R=Array(arguments.length-2),G=2;G<arguments.length;G++)R[G-2]=arguments[G];return y.prototype[E].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,y,_){_||(_=0);var k=Array(16);if(typeof y=="string")for(var E=0;16>E;++E)k[E]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(E=0;16>E;++E)k[E]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=v.g[0],_=v.g[1],E=v.g[2];var P=v.g[3],R=y+(P^_&(E^P))+k[0]+3614090360&4294967295;y=_+(R<<7&4294967295|R>>>25),R=P+(E^y&(_^E))+k[1]+3905402710&4294967295,P=y+(R<<12&4294967295|R>>>20),R=E+(_^P&(y^_))+k[2]+606105819&4294967295,E=P+(R<<17&4294967295|R>>>15),R=_+(y^E&(P^y))+k[3]+3250441966&4294967295,_=E+(R<<22&4294967295|R>>>10),R=y+(P^_&(E^P))+k[4]+4118548399&4294967295,y=_+(R<<7&4294967295|R>>>25),R=P+(E^y&(_^E))+k[5]+1200080426&4294967295,P=y+(R<<12&4294967295|R>>>20),R=E+(_^P&(y^_))+k[6]+2821735955&4294967295,E=P+(R<<17&4294967295|R>>>15),R=_+(y^E&(P^y))+k[7]+4249261313&4294967295,_=E+(R<<22&4294967295|R>>>10),R=y+(P^_&(E^P))+k[8]+1770035416&4294967295,y=_+(R<<7&4294967295|R>>>25),R=P+(E^y&(_^E))+k[9]+2336552879&4294967295,P=y+(R<<12&4294967295|R>>>20),R=E+(_^P&(y^_))+k[10]+4294925233&4294967295,E=P+(R<<17&4294967295|R>>>15),R=_+(y^E&(P^y))+k[11]+2304563134&4294967295,_=E+(R<<22&4294967295|R>>>10),R=y+(P^_&(E^P))+k[12]+1804603682&4294967295,y=_+(R<<7&4294967295|R>>>25),R=P+(E^y&(_^E))+k[13]+4254626195&4294967295,P=y+(R<<12&4294967295|R>>>20),R=E+(_^P&(y^_))+k[14]+2792965006&4294967295,E=P+(R<<17&4294967295|R>>>15),R=_+(y^E&(P^y))+k[15]+1236535329&4294967295,_=E+(R<<22&4294967295|R>>>10),R=y+(E^P&(_^E))+k[1]+4129170786&4294967295,y=_+(R<<5&4294967295|R>>>27),R=P+(_^E&(y^_))+k[6]+3225465664&4294967295,P=y+(R<<9&4294967295|R>>>23),R=E+(y^_&(P^y))+k[11]+643717713&4294967295,E=P+(R<<14&4294967295|R>>>18),R=_+(P^y&(E^P))+k[0]+3921069994&4294967295,_=E+(R<<20&4294967295|R>>>12),R=y+(E^P&(_^E))+k[5]+3593408605&4294967295,y=_+(R<<5&4294967295|R>>>27),R=P+(_^E&(y^_))+k[10]+38016083&4294967295,P=y+(R<<9&4294967295|R>>>23),R=E+(y^_&(P^y))+k[15]+3634488961&4294967295,E=P+(R<<14&4294967295|R>>>18),R=_+(P^y&(E^P))+k[4]+3889429448&4294967295,_=E+(R<<20&4294967295|R>>>12),R=y+(E^P&(_^E))+k[9]+568446438&4294967295,y=_+(R<<5&4294967295|R>>>27),R=P+(_^E&(y^_))+k[14]+3275163606&4294967295,P=y+(R<<9&4294967295|R>>>23),R=E+(y^_&(P^y))+k[3]+4107603335&4294967295,E=P+(R<<14&4294967295|R>>>18),R=_+(P^y&(E^P))+k[8]+1163531501&4294967295,_=E+(R<<20&4294967295|R>>>12),R=y+(E^P&(_^E))+k[13]+2850285829&4294967295,y=_+(R<<5&4294967295|R>>>27),R=P+(_^E&(y^_))+k[2]+4243563512&4294967295,P=y+(R<<9&4294967295|R>>>23),R=E+(y^_&(P^y))+k[7]+1735328473&4294967295,E=P+(R<<14&4294967295|R>>>18),R=_+(P^y&(E^P))+k[12]+2368359562&4294967295,_=E+(R<<20&4294967295|R>>>12),R=y+(_^E^P)+k[5]+4294588738&4294967295,y=_+(R<<4&4294967295|R>>>28),R=P+(y^_^E)+k[8]+2272392833&4294967295,P=y+(R<<11&4294967295|R>>>21),R=E+(P^y^_)+k[11]+1839030562&4294967295,E=P+(R<<16&4294967295|R>>>16),R=_+(E^P^y)+k[14]+4259657740&4294967295,_=E+(R<<23&4294967295|R>>>9),R=y+(_^E^P)+k[1]+2763975236&4294967295,y=_+(R<<4&4294967295|R>>>28),R=P+(y^_^E)+k[4]+1272893353&4294967295,P=y+(R<<11&4294967295|R>>>21),R=E+(P^y^_)+k[7]+4139469664&4294967295,E=P+(R<<16&4294967295|R>>>16),R=_+(E^P^y)+k[10]+3200236656&4294967295,_=E+(R<<23&4294967295|R>>>9),R=y+(_^E^P)+k[13]+681279174&4294967295,y=_+(R<<4&4294967295|R>>>28),R=P+(y^_^E)+k[0]+3936430074&4294967295,P=y+(R<<11&4294967295|R>>>21),R=E+(P^y^_)+k[3]+3572445317&4294967295,E=P+(R<<16&4294967295|R>>>16),R=_+(E^P^y)+k[6]+76029189&4294967295,_=E+(R<<23&4294967295|R>>>9),R=y+(_^E^P)+k[9]+3654602809&4294967295,y=_+(R<<4&4294967295|R>>>28),R=P+(y^_^E)+k[12]+3873151461&4294967295,P=y+(R<<11&4294967295|R>>>21),R=E+(P^y^_)+k[15]+530742520&4294967295,E=P+(R<<16&4294967295|R>>>16),R=_+(E^P^y)+k[2]+3299628645&4294967295,_=E+(R<<23&4294967295|R>>>9),R=y+(E^(_|~P))+k[0]+4096336452&4294967295,y=_+(R<<6&4294967295|R>>>26),R=P+(_^(y|~E))+k[7]+1126891415&4294967295,P=y+(R<<10&4294967295|R>>>22),R=E+(y^(P|~_))+k[14]+2878612391&4294967295,E=P+(R<<15&4294967295|R>>>17),R=_+(P^(E|~y))+k[5]+4237533241&4294967295,_=E+(R<<21&4294967295|R>>>11),R=y+(E^(_|~P))+k[12]+1700485571&4294967295,y=_+(R<<6&4294967295|R>>>26),R=P+(_^(y|~E))+k[3]+2399980690&4294967295,P=y+(R<<10&4294967295|R>>>22),R=E+(y^(P|~_))+k[10]+4293915773&4294967295,E=P+(R<<15&4294967295|R>>>17),R=_+(P^(E|~y))+k[1]+2240044497&4294967295,_=E+(R<<21&4294967295|R>>>11),R=y+(E^(_|~P))+k[8]+1873313359&4294967295,y=_+(R<<6&4294967295|R>>>26),R=P+(_^(y|~E))+k[15]+4264355552&4294967295,P=y+(R<<10&4294967295|R>>>22),R=E+(y^(P|~_))+k[6]+2734768916&4294967295,E=P+(R<<15&4294967295|R>>>17),R=_+(P^(E|~y))+k[13]+1309151649&4294967295,_=E+(R<<21&4294967295|R>>>11),R=y+(E^(_|~P))+k[4]+4149444226&4294967295,y=_+(R<<6&4294967295|R>>>26),R=P+(_^(y|~E))+k[11]+3174756917&4294967295,P=y+(R<<10&4294967295|R>>>22),R=E+(y^(P|~_))+k[2]+718787259&4294967295,E=P+(R<<15&4294967295|R>>>17),R=_+(P^(E|~y))+k[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(E+(R<<21&4294967295|R>>>11))&4294967295,v.g[2]=v.g[2]+E&4294967295,v.g[3]=v.g[3]+P&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var _=y-this.blockSize,k=this.B,E=this.h,P=0;P<y;){if(E==0)for(;P<=_;)i(this,v,P),P+=this.blockSize;if(typeof v=="string"){for(;P<y;)if(k[E++]=v.charCodeAt(P++),E==this.blockSize){i(this,k),E=0;break}}else for(;P<y;)if(k[E++]=v[P++],E==this.blockSize){i(this,k),E=0;break}}this.h=E,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var _=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=_&255,_/=256;for(this.u(v),v=Array(16),y=_=0;4>y;++y)for(var k=0;32>k;k+=8)v[_++]=this.g[y]>>>k&255;return v};function s(v,y){var _=c;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=y(v)}function o(v,y){this.h=y;for(var _=[],k=!0,E=v.length-1;0<=E;E--){var P=v[E]|0;k&&P==y||(_[E]=P,k=!1)}this.g=_}var c={};function u(v){return-128<=v&&128>v?s(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return g;if(0>v)return b(d(-v));for(var y=[],_=1,k=0;v>=_;k++)y[k]=v/_|0,_*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return b(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(y,8)),k=g,E=0;E<v.length;E+=8){var P=Math.min(8,v.length-E),R=parseInt(v.substring(E,E+P),y);8>P?(P=d(Math.pow(y,P)),k=k.j(P).add(d(R))):(k=k.j(_),k=k.add(d(R)))}return k}var g=u(0),m=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-b(this).m();for(var v=0,y=1,_=0;_<this.g.length;_++){var k=this.i(_);v+=(0<=k?k:4294967296+k)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C(this))return"0";if(A(this))return"-"+b(this).toString(v);for(var y=d(Math.pow(v,6)),_=this,k="";;){var E=j(_,y).g;_=T(_,E.j(y));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=E,C(_))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function C(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function A(v){return v.h==-1}t.l=function(v){return v=T(this,v),A(v)?-1:C(v)?0:1};function b(v){for(var y=v.g.length,_=[],k=0;k<y;k++)_[k]=~v.g[k];return new o(_,~v.h).add(m)}t.abs=function(){return A(this)?b(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],k=0,E=0;E<=y;E++){var P=k+(this.i(E)&65535)+(v.i(E)&65535),R=(P>>>16)+(this.i(E)>>>16)+(v.i(E)>>>16);k=R>>>16,P&=65535,R&=65535,_[E]=R<<16|P}return new o(_,_[_.length-1]&-2147483648?-1:0)};function T(v,y){return v.add(b(y))}t.j=function(v){if(C(this)||C(v))return g;if(A(this))return A(v)?b(this).j(b(v)):b(b(this).j(v));if(A(v))return b(this.j(b(v)));if(0>this.l(I)&&0>v.l(I))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,_=[],k=0;k<2*y;k++)_[k]=0;for(k=0;k<this.g.length;k++)for(var E=0;E<v.g.length;E++){var P=this.i(k)>>>16,R=this.i(k)&65535,G=v.i(E)>>>16,Ie=v.i(E)&65535;_[2*k+2*E]+=R*Ie,x(_,2*k+2*E),_[2*k+2*E+1]+=P*Ie,x(_,2*k+2*E+1),_[2*k+2*E+1]+=R*G,x(_,2*k+2*E+1),_[2*k+2*E+2]+=P*G,x(_,2*k+2*E+2)}for(k=0;k<y;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=y;k<2*y;k++)_[k]=0;return new o(_,0)};function x(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function S(v,y){this.g=v,this.h=y}function j(v,y){if(C(y))throw Error("division by zero");if(C(v))return new S(g,g);if(A(v))return y=j(b(v),y),new S(b(y.g),b(y.h));if(A(y))return y=j(v,b(y)),new S(b(y.g),y.h);if(30<v.g.length){if(A(v)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,k=y;0>=k.l(v);)_=D(_),k=D(k);var E=O(_,1),P=O(k,1);for(k=O(k,2),_=O(_,2);!C(k);){var R=P.add(k);0>=R.l(v)&&(E=E.add(_),P=R),k=O(k,1),_=O(_,1)}return y=T(v,E.j(y)),new S(E,y)}for(E=g;0<=v.l(y);){for(_=Math.max(1,Math.floor(v.m()/y.m())),k=Math.ceil(Math.log(_)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=d(_),R=P.j(y);A(R)||0<R.l(v);)_-=k,P=d(_),R=P.j(y);C(P)&&(P=m),E=E.add(P),v=T(v,R)}return new S(E,v)}t.A=function(v){return j(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],k=0;k<y;k++)_[k]=this.i(k)&v.i(k);return new o(_,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],k=0;k<y;k++)_[k]=this.i(k)|v.i(k);return new o(_,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],k=0;k<y;k++)_[k]=this.i(k)^v.i(k);return new o(_,this.h^v.h)};function D(v){for(var y=v.g.length+1,_=[],k=0;k<y;k++)_[k]=v.i(k)<<1|v.i(k-1)>>>31;return new o(_,v.h)}function O(v,y){var _=y>>5;y%=32;for(var k=v.g.length-_,E=[],P=0;P<k;P++)E[P]=0<y?v.i(P+_)>>>y|v.i(P+_+1)<<32-y:v.i(P+_);return new o(E,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Cr=o}).apply(typeof ay<"u"?ay:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _x,ao,xx,wl,mh,wx,Ex,Tx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var L=l[w];if(!(L in p))break e;p=p[L]}l=l[l.length-1],w=p[l],h=h(w),h!=w&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,w=!1,L={next:function(){if(!w&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function g(l,h,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function I(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function C(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,L,V){for(var $=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)$[ve-2]=arguments[ve];return h.prototype[L].apply(w,$)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let w=0;w<h;w++)p[w]=l[w];return p}return[]}function b(l,h){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const L=l.length||0,V=w.length||0;l.length=L+V;for(let $=0;$<V;$++)l[L+$]=w[$]}else l.push(w)}}class T{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(l,h,p){for(const w in l)h.call(p,l[w],w,l)}function v(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,h){let p,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(p in w)l[p]=w[p];for(let V=0;V<_.length;V++)p=_[V],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function E(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){c.setTimeout(()=>{throw l},0)}function R(){var l=Y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class G{constructor(){this.h=this.g=null}add(h,p){const w=Ie.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var Ie=new T(()=>new Qe,l=>l.reset());class Qe{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,B=!1,Y=new G,Z=()=>{const l=c.Promise.resolve(void 0);ue=()=>{l.then(se)}};var se=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(p){P(p)}var h=Ie;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function nt(l,h){if(ie.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{j(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:rt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&nt.aa.h.call(this)}}C(nt,ie);var rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.h=function(){nt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),ou=0;function bs(l,h,p,w,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=L,this.key=++ou,this.da=this.fa=!1}function Sn(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function $r(l){this.src=l,this.g={},this.h=0}$r.prototype.add=function(l,h,p,w,L){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var $=Qn(l,h,w,L);return-1<$?(h=l[$],p||(h.fa=!1)):(h=new bs(h,this.src,V,!!w,L),h.fa=p,l.push(h)),h};function Kn(l,h){var p=h.type;if(p in l.g){var w=l.g[p],L=Array.prototype.indexOf.call(w,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(w,L,1),V&&(Sn(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Qn(l,h,p,w){for(var L=0;L<l.length;++L){var V=l[L];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==w)return L}return-1}var Jn="closure_lm_"+(1e6*Math.random()|0),zr={};function jp(l,h,p,w,L){if(w&&w.once)return Pp(l,h,p,w,L);if(Array.isArray(h)){for(var V=0;V<h.length;V++)jp(l,h[V],p,w,L);return null}return p=uu(p),l&&l[kt]?l.K(h,p,d(w)?!!w.capture:!!w,L):bp(l,h,p,!1,w,L)}function bp(l,h,p,w,L,V){if(!h)throw Error("Invalid event type");var $=d(L)?!!L.capture:!!L,ve=lu(l);if(ve||(l[Jn]=ve=new $r(l)),p=ve.add(h,p,w,$,V),p.proxy)return p;if(w=F1(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)ce||(L=$),L===void 0&&(L=!1),l.addEventListener(h.toString(),w,L);else if(l.attachEvent)l.attachEvent(Op(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function F1(){function l(p){return h.call(l.src,l.listener,p)}const h=U1;return l}function Pp(l,h,p,w,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Pp(l,h[V],p,w,L);return null}return p=uu(p),l&&l[kt]?l.L(h,p,d(w)?!!w.capture:!!w,L):bp(l,h,p,!0,w,L)}function Dp(l,h,p,w,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)Dp(l,h[V],p,w,L);else w=d(w)?!!w.capture:!!w,p=uu(p),l&&l[kt]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=Qn(V,p,w,L),-1<p&&(Sn(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=lu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Qn(h,p,w,L)),(p=-1<l?h[l]:null)&&au(p))}function au(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[kt])Kn(h.i,l);else{var p=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(p,w,l.capture):h.detachEvent?h.detachEvent(Op(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=lu(h))?(Kn(p,l),p.h==0&&(p.src=null,h[Jn]=null)):Sn(l)}}}function Op(l){return l in zr?zr[l]:zr[l]="on"+l}function U1(l,h){if(l.da)l=!0;else{h=new nt(h,this);var p=l.listener,w=l.ha||l.src;l.fa&&au(l),l=p.call(w,h)}return l}function lu(l){return l=l[Jn],l instanceof $r?l:null}var cu="__closure_events_fn_"+(1e9*Math.random()>>>0);function uu(l){return typeof l=="function"?l:(l[cu]||(l[cu]=function(h){return l.handleEvent(h)}),l[cu])}function it(){te.call(this),this.i=new $r(this),this.M=this,this.F=null}C(it,te),it.prototype[kt]=!0,it.prototype.removeEventListener=function(l,h,p,w){Dp(this,l,h,p,w)};function _t(l,h){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new ie(h,l);else if(h instanceof ie)h.target=h.target||l;else{var L=h;h=new ie(w,l),k(h,L)}if(L=!0,p)for(var V=p.length-1;0<=V;V--){var $=h.g=p[V];L=ga($,w,!0,h)&&L}if($=h.g=l,L=ga($,w,!0,h)&&L,L=ga($,w,!1,h)&&L,p)for(V=0;V<p.length;V++)$=h.g=p[V],L=ga($,w,!1,h)&&L}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],w=0;w<p.length;w++)Sn(p[w]);delete l.g[h],l.h--}}this.F=null},it.prototype.K=function(l,h,p,w){return this.i.add(String(l),h,!1,p,w)},it.prototype.L=function(l,h,p,w){return this.i.add(String(l),h,!0,p,w)};function ga(l,h,p,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var $=h[V];if($&&!$.da&&$.capture==p){var ve=$.listener,Je=$.ha||$.src;$.fa&&Kn(l.i,$),L=ve.call(Je,w)!==!1&&L}}return L&&!w.defaultPrevented}function Lp(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Vp(l){l.g=Lp(()=>{l.g=null,l.i&&(l.i=!1,Vp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class B1 extends te{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Vp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(l){te.call(this),this.h=l,this.g={}}C(Ps,te);var Mp=[];function Fp(l){O(l.g,function(h,p){this.g.hasOwnProperty(p)&&au(h)},l),l.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),Fp(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var du=c.JSON.stringify,$1=c.JSON.parse,z1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function hu(){}hu.prototype.h=null;function Up(l){return l.h||(l.h=l.i())}function Bp(){}var Ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fu(){ie.call(this,"d")}C(fu,ie);function pu(){ie.call(this,"c")}C(pu,ie);var qr={},$p=null;function ya(){return $p=$p||new it}qr.La="serverreachability";function zp(l){ie.call(this,qr.La,l)}C(zp,ie);function Os(l){const h=ya();_t(h,new zp(h))}qr.STAT_EVENT="statevent";function qp(l,h){ie.call(this,qr.STAT_EVENT,l),this.stat=h}C(qp,ie);function xt(l){const h=ya();_t(h,new qp(h,l))}qr.Ma="timingevent";function Hp(l,h){ie.call(this,qr.Ma,l),this.size=h}C(Hp,ie);function Ls(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Vs(){this.g=!0}Vs.prototype.xa=function(){this.g=!1};function q1(l,h,p,w,L,V){l.info(function(){if(l.g)if(V)for(var $="",ve=V.split("&"),Je=0;Je<ve.length;Je++){var me=ve[Je].split("=");if(1<me.length){var st=me[0];me=me[1];var ot=st.split("_");$=2<=ot.length&&ot[1]=="type"?$+(st+"="+me+"&"):$+(st+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+h+`
`+p+`
`+$})}function H1(l,h,p,w,L,V,$){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+h+`
`+p+`
`+V+" "+$})}function Ei(l,h,p,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+G1(l,p)+(w?" "+w:"")})}function W1(l,h){l.info(function(){return"TIMEOUT: "+h})}Vs.prototype.info=function(){};function G1(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<L.length;$++)L[$]=""}}}}return du(p)}catch{return h}}var va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mu;function _a(){}C(_a,hu),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},mu=new _a;function Yn(l,h,p,w){this.j=l,this.i=h,this.l=p,this.R=w||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gp}function Gp(){this.i=null,this.g="",this.h=!1}var Kp={},gu={};function yu(l,h,p){l.L=1,l.v=Ta(Cn(h)),l.m=p,l.P=!0,Qp(l,null)}function Qp(l,h){l.F=Date.now(),xa(l),l.A=Cn(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),cm(p.i,"t",w),l.C=0,p=l.j.J,l.h=new Gp,l.g=km(l.j,p?h:null,!l.m),0<l.O&&(l.M=new B1(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,w=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Mp[0]=L.toString()),L=Mp);for(var V=0;V<L.length;V++){var $=jp(p,L[V],w||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Os(),q1(l.i,l.u,l.A,l.l,l.R,l.m)}Yn.prototype.ca=function(l){l=l.target;const h=this.M;h&&In(l)==3?h.j():this.Y(l)},Yn.prototype.Y=function(l){try{if(l==this.g)e:{const ot=In(this.g);var h=this.g.Ba();const Ci=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||gm(this.g)))){this.J||ot!=4||h==7||(h==8||0>=Ci?Os(3):Os(2)),vu(this);var p=this.g.Z();this.X=p;t:if(Jp(this)){var w=gm(this.g);l="";var L=w.length,V=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Ms(this);var $="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(w[h],{stream:!(V&&h==L-1)});w.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,H1(this.i,this.u,this.A,this.l,this.R,ot,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Je=this.g;if((ve=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ve)){var me=ve;break t}}me=null}if(p=me)Ei(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_u(this,p);else{this.o=!1,this.s=3,xt(12),Hr(this),Ms(this);break e}}if(this.P){p=!0;let Xt;for(;!this.J&&this.C<$.length;)if(Xt=K1(this,$),Xt==gu){ot==4&&(this.s=4,xt(14),p=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Kp){this.s=4,xt(15),Ei(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Ei(this.i,this.l,Xt,null),_u(this,Xt);if(Jp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||$.length!=0||this.h.h||(this.s=1,xt(16),p=!1),this.o=this.o&&p,!p)Ei(this.i,this.l,$,"[Invalid Chunked Response]"),Hr(this),Ms(this);else if(0<$.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Cu(st),st.M=!0,xt(11))}}else Ei(this.i,this.l,$,null),_u(this,$);ot==4&&Hr(this),this.o&&!this.J&&(ot==4?Tm(this.j,this):(this.o=!1,xa(this)))}else dE(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Hr(this),Ms(this)}}}catch{}finally{}};function Jp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function K1(l,h){var p=l.C,w=h.indexOf(`
`,p);return w==-1?gu:(p=Number(h.substring(p,w)),isNaN(p)?Kp:(w+=1,w+p>h.length?gu:(h=h.slice(w,w+p),l.C=w+p,h)))}Yn.prototype.cancel=function(){this.J=!0,Hr(this)};function xa(l){l.S=Date.now()+l.I,Yp(l,l.I)}function Yp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ls(m(l.ba,l),h)}function vu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Yn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(W1(this.i,this.A),this.L!=2&&(Os(),xt(17)),Hr(this),this.s=2,Ms(this)):Yp(this,this.S-l)};function Ms(l){l.j.G==0||l.J||Tm(l.j,l)}function Hr(l){vu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Fp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function _u(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||xu(p.h,l))){if(!l.K&&xu(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Na(p),ka(p);else break e;Su(p),xt(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ls(m(p.Za,p),6e3));if(1>=em(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Gr(p,11)}else if((l.K||p.g==l)&&Na(p),!x(h))for(L=p.Da.g.parse(h),h=0;h<L.length;h++){let me=L[h];if(p.T=me[0],me=me[1],p.G==2)if(me[0]=="c"){p.K=me[1],p.ia=me[2];const st=me[3];st!=null&&(p.la=st,p.j.info("VER="+p.la));const ot=me[4];ot!=null&&(p.Aa=ot,p.j.info("SVER="+p.Aa));const Ci=me[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(w=1.5*Ci,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const Xt=l.g;if(Xt){const ja=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var V=w.h;V.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(wu(V,V.h),V.h=null))}if(w.D){const Iu=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Iu&&(w.ya=Iu,xe(w.I,w.D,Iu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var $=l;if(w.qa=Im(w,w.J?w.ia:null,w.W),$.K){tm(w.h,$);var ve=$,Je=w.L;Je&&(ve.I=Je),ve.B&&(vu(ve),xa(ve)),w.g=$}else wm(w);0<p.i.length&&Ra(p)}else me[0]!="stop"&&me[0]!="close"||Gr(p,7);else p.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Gr(p,7):Tu(p):me[0]!="noop"&&p.l&&p.l.ta(me),p.v=0)}}Os(4)}catch{}}var Q1=class{constructor(l,h){this.g=l,this.map=h}};function Xp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function em(l){return l.h?1:l.g?l.g.size:0}function xu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function wu(l,h){l.g?l.g.add(h):l.h=h}function tm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Xp.prototype.cancel=function(){if(this.i=nm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function nm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function J1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,w=0;w<p;w++)h.push(l[w]);return h}h=[],p=0;for(w in l)h[p++]=l[w];return h}function Y1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const w in l)h[p++]=w;return h}}}function rm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Y1(l),w=J1(l),L=w.length,V=0;V<L;V++)h.call(void 0,w[V],p&&p[V],l)}var im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X1(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),L=null;if(0<=w){var V=l[p].substring(0,w);L=l[p].substring(w+1)}else V=l[p];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Wr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Wr){this.h=l.h,wa(this,l.j),this.o=l.o,this.g=l.g,Ea(this,l.s),this.l=l.l;var h=l.i,p=new Bs;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),sm(this,p),this.m=l.m}else l&&(h=String(l).match(im))?(this.h=!1,wa(this,h[1]||"",!0),this.o=Fs(h[2]||""),this.g=Fs(h[3]||"",!0),Ea(this,h[4]),this.l=Fs(h[5]||"",!0),sm(this,h[6]||"",!0),this.m=Fs(h[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}Wr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Us(h,om,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Us(h,om,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Us(p,p.charAt(0)=="/"?tE:eE,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Us(p,rE)),l.join("")};function Cn(l){return new Wr(l)}function wa(l,h,p){l.j=p?Fs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ea(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function sm(l,h,p){h instanceof Bs?(l.i=h,iE(l.i,l.h)):(p||(h=Us(h,nE)),l.i=new Bs(h,l.h))}function xe(l,h,p){l.i.set(h,p)}function Ta(l){return xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Fs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Us(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,Z1),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Z1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var om=/[#\/\?@]/g,eE=/[#\?:]/g,tE=/[#\?]/g,nE=/[#\?@]/g,rE=/#/g;function Bs(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Xn(l){l.g||(l.g=new Map,l.h=0,l.i&&X1(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Bs.prototype,t.add=function(l,h){Xn(this),this.i=null,l=Ti(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function am(l,h){Xn(l),h=Ti(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function lm(l,h){return Xn(l),h=Ti(l,h),l.g.has(h)}t.forEach=function(l,h){Xn(this),this.g.forEach(function(p,w){p.forEach(function(L){l.call(h,L,w,this)},this)},this)},t.na=function(){Xn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){const L=l[w];for(let V=0;V<L.length;V++)p.push(h[w])}return p},t.V=function(l){Xn(this);let h=[];if(typeof l=="string")lm(this,l)&&(h=h.concat(this.g.get(Ti(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Xn(this),this.i=null,l=Ti(this,l),lm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function cm(l,h,p){am(l,h),0<p.length&&(l.i=null,l.g.set(Ti(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];const V=encodeURIComponent(String(w)),$=this.V(w);for(w=0;w<$.length;w++){var L=V;$[w]!==""&&(L+="="+encodeURIComponent(String($[w]))),l.push(L)}}return this.i=l.join("&")};function Ti(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function iE(l,h){h&&!l.j&&(Xn(l),l.i=null,l.g.forEach(function(p,w){var L=w.toLowerCase();w!=L&&(am(this,w),cm(this,L,p))},l)),l.j=h}function sE(l,h){const p=new Vs;if(c.Image){const w=new Image;w.onload=I(Zn,p,"TestLoadImage: loaded",!0,h,w),w.onerror=I(Zn,p,"TestLoadImage: error",!1,h,w),w.onabort=I(Zn,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=I(Zn,p,"TestLoadImage: timeout",!1,h,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function oE(l,h){const p=new Vs,w=new AbortController,L=setTimeout(()=>{w.abort(),Zn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(V=>{clearTimeout(L),V.ok?Zn(p,"TestPingServer: ok",!0,h):Zn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Zn(p,"TestPingServer: error",!1,h)})}function Zn(l,h,p,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(p)}catch{}}function aE(){this.g=new z1}function lE(l,h,p){const w=p||"";try{rm(l,function(L,V){let $=L;d(L)&&($=du(L)),h.push(w+V+"="+encodeURIComponent($))})}catch(L){throw h.push(w+"type="+encodeURIComponent("_badmap")),L}}function Sa(l){this.l=l.Ub||null,this.j=l.eb||!1}C(Sa,hu),Sa.prototype.g=function(){return new Ca(this.l,this.j)},Sa.prototype.i=function(l){return function(){return l}}({});function Ca(l,h){it.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ca,it),t=Ca.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,zs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;um(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function um(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?$s(this):zs(this),this.readyState==3&&um(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,$s(this))},t.Qa=function(l){this.g&&(this.response=l,$s(this))},t.ga=function(){this.g&&$s(this)};function $s(l){l.readyState=4,l.l=null,l.j=null,l.v=null,zs(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function zs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function dm(l){let h="";return O(l,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function Eu(l,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=dm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):xe(l,h,p))}function be(l){it.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(be,it);var cE=/^https?$/i,uE=["POST","PUT"];t=be.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mu.g(),this.v=this.o?Up(this.o):Up(mu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){hm(this,V);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)p.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const V of w.keys())p.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(uE,h,void 0))||w||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of p)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mm(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){hm(this,V)}};function hm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,fm(l),Ia(l)}function fm(l){l.A||(l.A=!0,_t(l,"complete"),_t(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_t(this,"complete"),_t(this,"abort"),Ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pm(this):this.bb())},t.bb=function(){pm(this)};function pm(l){if(l.h&&typeof o<"u"&&(!l.v[1]||In(l)!=4||l.Z()!=2)){if(l.u&&In(l)==4)Lp(l.Ea,0,l);else if(_t(l,"readystatechange"),In(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=$===0){var L=String(l.D).match(im)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),w=!cE.test(L?L.toLowerCase():"")}p=w}if(p)_t(l,"complete"),_t(l,"success");else{l.m=6;try{var V=2<In(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",fm(l)}}finally{Ia(l)}}}}function Ia(l,h){if(l.g){mm(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||_t(l,"ready");try{p.onreadystatechange=w}catch{}}}function mm(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function In(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),$1(h)}};function gm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function dE(l){const h={};l=(l.g&&2<=In(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(x(l[w]))continue;var p=E(l[w]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[L]||[];h[L]=V,V.push(p)}v(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function ym(l){this.Aa=0,this.i=[],this.j=new Vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,l),this.cb=qs("retryDelaySeedMs",1e4,l),this.Wa=qs("forwardChannelMaxRetries",2,l),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Xp(l&&l.concurrentRequestLimit),this.Da=new aE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ym.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,w){xt(0),this.W=l,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=Im(this,null,this.W),Ra(this)};function Tu(l){if(vm(l),l.G==3){var h=l.U++,p=Cn(l.I);if(xe(p,"SID",l.K),xe(p,"RID",h),xe(p,"TYPE","terminate"),Hs(l,p),h=new Yn(l,l.j,h),h.L=2,h.v=Ta(Cn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=km(h.j,null),h.g.ea(h.v)),h.F=Date.now(),xa(h)}Cm(l)}function ka(l){l.g&&(Cu(l),l.g.cancel(),l.g=null)}function vm(l){ka(l),l.u&&(c.clearTimeout(l.u),l.u=null),Na(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ra(l){if(!Zp(l.h)&&!l.s){l.s=!0;var h=l.Ga;ue||Z(),B||(ue(),B=!0),Y.add(h,l),l.B=0}}function hE(l,h){return em(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ls(m(l.Ga,l,h),Sm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Yn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=y(V),k(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=xm(this,L,h),p=Cn(this.I),xe(p,"RID",l),xe(p,"CVER",22),this.D&&xe(p,"X-HTTP-Session-Id",this.D),Hs(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(dm(V)))+"&"+h:this.m&&Eu(p,this.m,V)),wu(this.h,L),this.Ua&&xe(p,"TYPE","init"),this.P?(xe(p,"$req",h),xe(p,"SID","null"),L.T=!0,yu(L,p,null)):yu(L,p,h),this.G=2}}else this.G==3&&(l?_m(this,l):this.i.length==0||Zp(this.h)||_m(this))};function _m(l,h){var p;h?p=h.l:p=l.U++;const w=Cn(l.I);xe(w,"SID",l.K),xe(w,"RID",p),xe(w,"AID",l.T),Hs(l,w),l.m&&l.o&&Eu(w,l.m,l.o),p=new Yn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=xm(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wu(l.h,p),yu(p,w,h)}function Hs(l,h){l.H&&O(l.H,function(p,w){xe(h,w,p)}),l.l&&rm({},function(p,w){xe(h,w,p)})}function xm(l,h,p){p=Math.min(l.i.length,p);var w=l.l?m(l.l.Na,l.l,l):null;e:{var L=l.i;let V=-1;for(;;){const $=["count="+p];V==-1?0<p?(V=L[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let ve=!0;for(let Je=0;Je<p;Je++){let me=L[Je].g;const st=L[Je].map;if(me-=V,0>me)V=Math.max(0,L[Je].g-100),ve=!1;else try{lE(st,$,"req"+me+"_")}catch{w&&w(st)}}if(ve){w=$.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,w}function wm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ue||Z(),B||(ue(),B=!0),Y.add(h,l),l.v=0}}function Su(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ls(m(l.Fa,l),Sm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Em(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ls(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),ka(this),Em(this))};function Cu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Em(l){l.g=new Yn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Cn(l.qa);xe(h,"RID","rpc"),xe(h,"SID",l.K),xe(h,"AID",l.T),xe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&xe(h,"TO",l.ja),xe(h,"TYPE","xmlhttp"),Hs(l,h),l.m&&l.o&&Eu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Ta(Cn(h)),p.m=null,p.P=!0,Qp(p,l)}t.Za=function(){this.C!=null&&(this.C=null,ka(this),Su(this),xt(19))};function Na(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Tm(l,h){var p=null;if(l.g==h){Na(l),Cu(l),l.g=null;var w=2}else if(xu(l.h,h))p=h.D,tm(l.h,h),w=1;else return;if(l.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;w=ya(),_t(w,new Hp(w,p)),Ra(l)}else wm(l);else if(L=h.s,L==3||L==0&&0<h.X||!(w==1&&hE(l,h)||w==2&&Su(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),L){case 1:Gr(l,5);break;case 4:Gr(l,10);break;case 3:Gr(l,6);break;default:Gr(l,2)}}}function Sm(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Gr(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),w=l.Xa;const L=!w;w=new Wr(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wa(w,"https"),Ta(w),L?sE(w.toString(),p):oE(w.toString(),p)}else xt(2);l.G=0,l.l&&l.l.sa(h),Cm(l),vm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Cm(l){if(l.G=0,l.ka=[],l.l){const h=nm(l.h);(h.length!=0||l.i.length!=0)&&(b(l.ka,h),b(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function Im(l,h,p){var w=p instanceof Wr?Cn(p):new Wr(p);if(w.g!="")h&&(w.g=h+"."+w.g),Ea(w,w.s);else{var L=c.location;w=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new Wr(null);w&&wa(V,w),h&&(V.g=h),L&&Ea(V,L),p&&(V.l=p),w=V}return p=l.D,h=l.ya,p&&h&&xe(w,p,h),xe(w,"VER",l.la),Hs(l,w),w}function km(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new be(new Sa({eb:p})):new be(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rm(){}t=Rm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Aa(){}Aa.prototype.g=function(l,h){return new Dt(l,h)};function Dt(l,h){it.call(this),this.g=new ym(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!x(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Si(this)}C(Dt,it),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Tu(this.g)},Dt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=du(l),l=p);h.i.push(new Q1(h.Ya++,l)),h.G==3&&Ra(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Tu(this.g),delete this.g,Dt.aa.N.call(this)};function Nm(l){fu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(Nm,fu);function Am(){pu.call(this),this.status=1}C(Am,pu);function Si(l){this.g=l}C(Si,Rm),Si.prototype.ua=function(){_t(this.g,"a")},Si.prototype.ta=function(l){_t(this.g,new Nm(l))},Si.prototype.sa=function(l){_t(this.g,new Am)},Si.prototype.ra=function(){_t(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Tx=function(){return new Aa},Ex=function(){return ya()},wx=qr,mh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,wl=va,Wp.COMPLETE="complete",xx=Wp,Bp.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",it.prototype.listen=it.prototype.K,ao=Bp,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,_x=be}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const ly="@firebase/firestore",cy="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new zf("@firebase/firestore");function bi(){return hi.logLevel}function q(t,...e){if(hi.logLevel<=ae.DEBUG){const n=e.map(Wf);hi.debug(`Firestore (${Is}): ${t}`,...n)}}function zn(t,...e){if(hi.logLevel<=ae.ERROR){const n=e.map(Wf);hi.error(`Firestore (${Is}): ${t}`,...n)}}function fs(t,...e){if(hi.logLevel<=ae.WARN){const n=e.map(Wf);hi.warn(`Firestore (${Is}): ${t}`,...n)}}function Wf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Sx(t,r,n)}function Sx(t,e,n){let r=`FIRESTORE (${Is}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zn(r),new Error(r)}function Ne(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Sx(e,i,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class uR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dR{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ir,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new Cx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class hR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ht(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=mR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function gh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{const s=Ix(),o=gR(s.encode(dy(t,n)),s.encode(dy(e,n)));return o!==0?o:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function dy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function gR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function ps(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-62135596800,fy=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fy);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hy)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fy}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new We(0,0))}static max(){return new ne(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="__name__";class hn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=hn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return oe(e.length,n.length)}static compareSegments(e,n){const r=hn.isNumericId(e),i=hn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?hn.extractNumericId(e).compare(hn.extractNumericId(n)):gh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class Ee extends hn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const yR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends hn{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return yR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new gt([py])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new W(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new W(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ee.fromString(e))}static fromName(e){return new X(Ee.fromString(e).popFirst(5))}static empty(){return new X(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;function vR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new br(i,X.empty(),e)}function _R(t){return new br(t.readTime,t.key,Ko)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(ne.min(),X.empty(),Ko)}static max(){return new br(ne.max(),X.empty(),Ko)}}function xR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ER{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==wR)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function TR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ks(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}$c.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=-1;function zc(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="";function IR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=my(e)),e=kR(t.get(n),e);return my(e)}function kR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Rx:n+="";break;default:n+=s}}return n}function my(t){return t+Rx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}}class Ya{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=i??Xe.EMPTY,this.right=s??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Xe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yy(this.data.getIterator())}getIteratorFrom(e){return new yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $e(this.comparator);return n.data=e,n}}class yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new fr([])}unionWith(e){let n=new $e(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ps(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ax("Invalid base64 string: "+s):s}}(e);return new tt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=RR.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="server_timestamp",bx="__type__",Px="__previous_value__",Dx="__local_write_time__";function Gf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[bx])===null||n===void 0?void 0:n.stringValue)===jx}function qc(t){const e=t.mapValue.fields[Px];return Gf(e)?qc(e):e}function Qo(t){const e=Pr(t.mapValue.fields[Dx].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i,s,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const ic="(default)";class Jo{constructor(e,n){this.projectId=e,this.database=n||ic}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database===ic}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="__type__",Lx="__max__",Xa={mapValue:{fields:{__type__:{stringValue:Lx}}}},Vx="__vector__",sc="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:jR(t)?9007199254740991:AR(t)?10:11:re(28295,{value:t})}function En(t,e){if(t===e)return!0;const n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qo(t).isEqual(Qo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Pr(i.timestampValue),c=Pr(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Dr(i.bytesValue).isEqual(Dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),c=De(s.doubleValue);return o===c?rc(o)===rc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(gy(o)!==gy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!En(o[u],c[u])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Yo(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function ms(t,e){if(t===e)return 0;const n=Or(t),r=Or(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return vy(t.timestampValue,e.timestampValue);case 4:return vy(Qo(t),Qo(e));case 5:return gh(t.stringValue,e.stringValue);case 6:return function(s,o){const c=Dr(s),u=Dr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=oe(c[d],u[d]);if(f!==0)return f}return oe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=oe(De(s.latitude),De(o.latitude));return c!==0?c:oe(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _y(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;const g=s.fields||{},m=o.fields||{},I=(c=g[sc])===null||c===void 0?void 0:c.arrayValue,C=(u=m[sc])===null||u===void 0?void 0:u.arrayValue,A=oe(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:_y(I,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Xa.mapValue&&o===Xa.mapValue)return 0;if(s===Xa.mapValue)return 1;if(o===Xa.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const m=gh(u[g],f[g]);if(m!==0)return m;const I=ms(c[u[g]],d[f[g]]);if(I!==0)return I}return oe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw re(23264,{Pe:n})}}function vy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Pr(t),r=Pr(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function _y(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ms(n[i],r[i]);if(s)return s}return oe(n.length,r.length)}function gs(t){return yh(t)}function yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=yh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${yh(n.fields[o])}`;return i+"}"}(t.mapValue):re(61005,{value:t})}function El(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qc(t);return e?16+El(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+El(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Rs(r.fields,(s,o)=>{i+=s.length+El(o)}),i}(t.mapValue);default:throw re(13486,{value:t})}}function xy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vh(t){return!!t&&"integerValue"in t}function Kf(t){return!!t&&"arrayValue"in t}function wy(t){return!!t&&"nullValue"in t}function Ey(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function od(t){return!!t&&"mapValue"in t}function AR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ox])===null||n===void 0?void 0:n.stringValue)===Vx}function Eo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Lx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eo(n)}setAll(e){let n=gt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Eo(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mn(Eo(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new mt(e,0,ne.min(),ne.min(),ne.min(),mn.empty(),0)}static newFoundDocument(e,n,r,i){return new mt(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new mt(e,2,n,ne.min(),ne.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ne.min(),ne.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.position=e,this.inclusive=n}}function Ty(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=ms(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n="asc"){this.field=e,this.dir=n}}function bR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{}class Fe extends Mx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DR(e,n,r):n==="array-contains"?new VR(e,r):n==="in"?new MR(e,r):n==="not-in"?new FR(e,r):n==="array-contains-any"?new UR(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OR(e,r):new LR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ms(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends Mx{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ln(e,n)}matches(e){return Fx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Fx(t){return t.op==="and"}function Ux(t){return PR(t)&&Fx(t)}function PR(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function _h(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+gs(t.value);if(Ux(t))return t.filters.map(e=>_h(e)).join(",");{const e=t.filters.map(n=>_h(n)).join(",");return`${t.op}(${e})`}}function Bx(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)}(t,e):t instanceof ln?function(r,i){return i instanceof ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&Bx(o,i.filters[c]),!0):!1}(t,e):void re(19439)}function $x(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${gs(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map($x).join(" ,")+"}"}(t):"Filter"}class DR extends Fe{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class OR extends Fe{constructor(e,n){super(e,"in",n),this.keys=zx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LR extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=zx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class VR extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kf(n)&&Yo(n.arrayValue,this.value)}}class MR extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yo(this.value.arrayValue,n)}}class FR extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yo(this.value.arrayValue,n)}}class UR extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Ie=null}}function Cy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new BR(t,e,n,r,i,s,o)}function Qf(t){const e=he(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_h(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gs(r)).join(",")),e.Ie=n}return e.Ie}function Jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sy(t.startAt,e.startAt)&&Sy(t.endAt,e.endAt)}function xh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function $R(t,e,n,r,i,s,o,c){return new Ns(t,e,n,r,i,s,o,c)}function Yf(t){return new Ns(t)}function Iy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qx(t){return t.collectionGroup!==null}function To(t){const e=he(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new $e(gt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Xo(s,r))}),n.has(gt.keyField().canonicalString())||e.Ee.push(new Xo(gt.keyField(),r))}return e.Ee}function _n(t){const e=he(t);return e.de||(e.de=zR(e,To(t))),e.de}function zR(t,e){if(t.limitType==="F")return Cy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xo(i.field,s)});const n=t.endAt?new oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new oc(t.startAt.position,t.startAt.inclusive):null;return Cy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wh(t,e){const n=t.filters.concat([e]);return new Ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Eh(t,e,n){return new Ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hc(t,e){return Jf(_n(t),_n(e))&&t.limitType===e.limitType}function Hx(t){return`${Qf(_n(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$x(i)).join(", ")}]`),zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gs(i)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function Wc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of To(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const d=Ty(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,To(r),i)||r.endAt&&!function(o,c,u){const d=Ty(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,To(r),i))}(t,e)}function qR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wx(t){return(e,n)=>{let r=!1;for(const i of To(t)){const s=HR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HR(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?ms(u,d):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Nx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new Le(X.comparator);function Lr(){return WR}const Gx=new Le(X.comparator);function lo(...t){let e=Gx;for(const n of t)e=e.insert(n.key,n);return e}function GR(t){let e=Gx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return So()}function Kx(){return So()}function So(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const KR=new $e(X.comparator);function fe(...t){let e=KR;for(const n of t)e=e.add(n);return e}const QR=new $e(oe);function JR(){return QR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function Qx(t){return{integerValue:""+t}}function YR(t,e){return CR(e)?Qx(e):Xf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function XR(t,e,n){return t instanceof Th?function(i,s){const o={fields:{[bx]:{stringValue:jx},[Dx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gf(s)&&(s=qc(s)),s&&(o.fields[Px]=s),{mapValue:o}}(n,e):t instanceof ac?Jx(t,e):t instanceof lc?Yx(t,e):function(i,s){const o=eN(i,s),c=ky(o)+ky(i.Re);return vh(o)&&vh(i.Re)?Qx(c):Xf(i.serializer,c)}(t,e)}function ZR(t,e,n){return t instanceof ac?Jx(t,e):t instanceof lc?Yx(t,e):n}function eN(t,e){return t instanceof Sh?function(r){return vh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Th extends Gc{}class ac extends Gc{constructor(e){super(),this.elements=e}}function Jx(t,e){const n=Xx(e);for(const r of t.elements)n.some(i=>En(i,r))||n.push(r);return{arrayValue:{values:n}}}class lc extends Gc{constructor(e){super(),this.elements=e}}function Yx(t,e){let n=Xx(e);for(const r of t.elements)n=n.filter(i=>!En(i,r));return{arrayValue:{values:n}}}class Sh extends Gc{constructor(e,n){super(),this.serializer=e,this.Re=n}}function ky(t){return De(t.integerValue||t.doubleValue)}function Xx(t){return Kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ac&&i instanceof ac||r instanceof lc&&i instanceof lc?ps(r.elements,i.elements,En):r instanceof Sh&&i instanceof Sh?En(r.Re,i.Re):r instanceof Th&&i instanceof Th}(t.transform,e.transform)}class ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zf{}function Zx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rN(t.key,ri.none()):new ep(t.key,t.data,ri.none());{const n=t.data,r=mn.empty();let i=new $e(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Kc(t.key,r,new fr(i.toArray()),ri.none())}}function nN(t,e,n){t instanceof ep?function(i,s,o){const c=i.value.clone(),u=Ny(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Kc?function(i,s,o){if(!Tl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Ny(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ew(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Co(t,e,n,r){return t instanceof ep?function(s,o,c,u){if(!Tl(s.precondition,o))return c;const d=s.value.clone(),f=Ay(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kc?function(s,o,c,u){if(!Tl(s.precondition,o))return c;const d=Ay(s.fieldTransforms,u,o),f=o.data;return f.setAll(ew(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,c){return Tl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function Ry(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ps(r,i,(s,o)=>tN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ep extends Zf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kc extends Zf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ew(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ny(t,e,n){const r=new Map;Ne(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,ZR(o,c,n[i]))}return r}function Ay(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,XR(s,o,e))}return r}class rN extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nN(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Kx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=Zx(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ps(this.mutations,e.mutations,(n,r)=>Ry(n,r))&&ps(this.baseMutations,e.baseMutations,(n,r)=>Ry(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,de;function tw(t){if(t===void 0)return zn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ve.OK:return U.OK;case Ve.CANCELLED:return U.CANCELLED;case Ve.UNKNOWN:return U.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return U.INTERNAL;case Ve.UNAVAILABLE:return U.UNAVAILABLE;case Ve.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ve.NOT_FOUND:return U.NOT_FOUND;case Ve.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ve.ABORTED:return U.ABORTED;case Ve.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ve.DATA_LOSS:return U.DATA_LOSS;default:return re(39323,{code:t})}}(de=Ve||(Ve={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Cr([4294967295,4294967295],0);function jy(t){const e=Ix().encode(t),n=new vx;return n.update(e),new Uint8Array(n.digest())}function by(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cr([n,r],0),new Cr([i,s],0)]}class tp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new co(`Invalid padding: ${n}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new co(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Cr.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Cr.fromNumber(r)));return i.compare(aN)===1&&(i=new Cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=jy(e),[r,i]=by(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.Se(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tp(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.pe===0)return;const n=jy(e),[r,i]=by(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qc(ne.min(),i,new Le(oe),Lr(),fe())}}class ua{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ua(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class nw{constructor(e,n){this.targetId=e,this.Ce=n}}class rw{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Py{constructor(){this.Fe=0,this.Me=Dy(),this.xe=tt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=fe(),n=fe(),r=fe();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re(38017,{changeType:s})}}),new ua(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Dy()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class lN{constructor(e){this.ze=e,this.je=new Map,this.He=Lr(),this.Je=Za(),this.Ye=Za(),this.Ze=new Le(oe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const s=i.target;if(xh(s))if(r===0){const o=new X(s.path);this.tt(n,o,mt.newNoDocument(o,ne.min()))}else Ne(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const c=this.ct(e),u=c?this.lt(c,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=Dr(r).toUint8Array()}catch(u){if(u instanceof Ax)return fs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new tp(o,i,s)}catch(u){return fs(u instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,s,null),i++)}),i}It(e){const n=new Map;this.je.forEach((s,o)=>{const c=this._t(o);if(c){if(s.current&&xh(c.target)){const u=new X(c.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,mt.newNoDocument(u,e))}s.Le&&(n.set(o,s.qe()),s.Qe())}});let r=fe();this.Ye.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new Qc(e,n,this.Ze,this.He,r);return this.He=Lr(),this.Je=Za(),this.Ye=Za(),this.Ze=new Le(oe),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Py,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new $e(oe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new $e(oe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Py),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Za(){return new Le(X.comparator)}function Dy(){return new Le(X.comparator)}const cN=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),uN=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),dN=(()=>({and:"AND",or:"OR"}))();class hN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ch(t,e){return t.useProto3Json||zc(e)?e:{value:e}}function Ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ts(t){return Ne(!!t,49232),ne.fromTimestamp(function(n){const r=Pr(n);return new We(r.seconds,r.nanos)}(t))}function sw(t,e){return kh(t,e).canonicalString()}function kh(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ow(t){const e=Ee.fromString(t);return Ne(dw(e),10190,{key:e.toString()}),e}function ad(t,e){const n=ow(e);if(n.get(1)!==t.databaseId.projectId)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(lw(n))}function aw(t,e){return sw(t.databaseId,e)}function fN(t){const e=ow(t);return e.length===4?Ee.emptyPath():lw(e)}function Oy(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lw(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Ne(f===void 0||typeof f=="string",58123),tt.fromBase64String(f||"")):(Ne(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?U.UNKNOWN:tw(d.code);return new W(f,d.message||"")}(o);n=new rw(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ad(t,r.document.name),s=ts(r.document.updateTime),o=r.document.createTime?ts(r.document.createTime):ne.min(),c=new mn({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Sl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ad(t,r.document),s=r.readTime?ts(r.readTime):ne.min(),o=mt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Sl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ad(t,r.document),s=r.removedTargetIds||[];n=new Sl([],s,i,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new oN(i,s),c=r.targetId;n=new nw(c,o)}}return n}function mN(t,e){return{documents:[aw(t,e.path)]}}function gN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aw(t,i);const s=function(d){if(d.length!==0)return uw(ln.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Di(m.field),direction:_N(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Ch(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:i}}function yN(t){let e=fN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ne(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const m=cw(g);return m instanceof ln&&Ux(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(C){return new Xo(Oi(C.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(g){let m;return m=typeof g=="object"?g.value:g,zc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,I=g.values||[];return new oc(I,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,I=g.values||[];return new oc(I,m)}(n.endAt)),$R(e,i,o,s,c,"F",u,d)}function vN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Oi(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oi(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oi(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Oi(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Oi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(r=>cw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function _N(t){return cN[t]}function xN(t){return uN[t]}function wN(t){return dN[t]}function Di(t){return{fieldPath:t.canonicalString()}}function Oi(t){return gt.fromServerFormat(t.fieldPath)}function uw(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Ey(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NAN"}};if(wy(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ey(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NAN"}};if(wy(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(n.field),op:xN(n.op),value:n.value}}}(t):t instanceof ln?function(n){const r=n.getFilters().map(i=>uw(i));return r.length===1?r[0]:{compositeFilter:{op:wN(n.op),filters:r}}}(t):re(54877,{filter:t})}function dw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r,i,s=ne.min(),o=ne.min(),c=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.wt=e}}function TN(t){const e=yN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Eh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.Cn=new CN}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(br.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class CN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $e(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hw=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(hw,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ys(0)}static lr(){return new ys(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="LruGarbageCollector",IN=1048576;function My([t,e],[n,r]){const i=oe(t,n);return i===0?oe(e,r):i}class kN{constructor(e){this.Er=e,this.buffer=new $e(My),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();My(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(Vy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ks(n)?q(Vy,"Ignoring IndexedDB error during garbage collection: ",n):await Bc(n)}await this.mr(3e5)})}}class NN{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve($c.le);const r=new kN(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Ly)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ly):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,s,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),bi()<=ae.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function AN(t,e){return new NN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Co(r.mutation,i,fr.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=lo();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Lr();const o=So(),c=function(){return So()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Kc)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Co(f.mutation,d,f.mutation.getFieldMask(),We.now())):o.set(d.key,fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return c.set(d,new bN(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=So();let i=new Le((o,c)=>o-c),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||fr.empty();f=c.applyToLocalView(d,f),r.set(u,f);const g=(i.get(c.batchId)||fe()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,g=Kx();f.forEach(m=>{if(!s.has(m)){const I=Zx(n.get(m),r.get(m));I!==null&&g.set(m,I),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(ei());let c=Ko,u=s;return o.next(d=>M.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,fe())).next(f=>({batchId:c,changes:GR(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=lo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=lo();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,u=>{const d=function(g,m){return new Ns(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,mt.newInvalidDocument(f)))});let c=lo();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&Co(f.mutation,d,fr.empty(),We.now()),Wc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return M.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ts(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:TN(i.bundledQuery),readTime:ts(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.overlays=new Le(X.comparator),this.Qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ei();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=ei(),s=n.length+1,o=new X(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=ei(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ei(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sN(n,r));let s=this.Qr.get(n);s===void 0&&(s=fe(),this.Qr.set(n,s)),this.Qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.$r=new $e(ze.Ur),this.Kr=new $e(ze.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new ze(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new ze(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new X(new Ee([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new X(new Ee([])),r=new ze(n,e),i=new ze(n,e+1);let s=fe();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ze(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return X.comparator(e.key,n.key)||oe(e.Zr,n.Zr)}static Wr(e,n){return oe(e.Zr,n.Zr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(ze.Ur)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iN(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Xr=this.Xr.add(new ze(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?SR:this.nr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{const c=this.ei(o.Zr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $e(oe);return n.forEach(i=>{const s=new ze(i,0),o=new ze(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],c=>{r=r.add(c.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const o=new ze(new X(s),0);let c=new $e(oe);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Zr)),!0)},o),M.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(n.mutations,i=>{const s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new ze(n,0),i=this.Xr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.ii=e,this.docs=function(){return new Le(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Lr();const o=n.path,c=new X(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||xR(_R(f),r)<=0||(i.has(f.key)||Wc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re(9500)}si(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FN(this)}getSize(e){return M.resolve(this.size)}}class FN extends jN{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.persistence=e,this.oi=new xi(n=>Qf(n),Jf),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this._i=0,this.ai=new np,this.targetCount=0,this.ui=ys.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),M.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ys(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Tr(n),M.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.oi.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.ci={},this.overlays={},this.li=new $c(0),this.hi=!1,this.hi=!0,this.Pi=new LN,this.referenceDelegate=e(this),this.Ti=new UN(this),this.indexManager=new SN,this.remoteDocumentCache=function(i){return new MN(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new EN(n),this.Ei=new DN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ON,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new VN(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new BN(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,n){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class BN extends ER{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Vi=new np,this.mi=null}static fi(e){return new rp(e)}get gi(){if(this.mi)return this.mi;throw re(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{const i=X.fromPath(r);return this.pi(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return M.or([()=>M.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class cc{constructor(e,n){this.persistence=e,this.yi=new xi(r=>IR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=AN(this,n)}static fi(e,n){return new cc(e,n)}di(){}Ai(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return M.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,n).next(c=>{c||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),M.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=El(e.data.value)),n}Dr(e,n,r){return M.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ip(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return HI()?8:TR(vt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ws(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ss(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $N;return this.bs(e,n,o).next(c=>{if(s.result=c,this.fs)return this.Ds(e,n,o,c.size)})}).next(()=>s.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(bi()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(bi()<=ae.DEBUG&&q("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(bi()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):M.resolve())}ws(e,n){if(Iy(n))return M.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Eh(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=fe(...s);return this.ys.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,c);return this.Cs(n,d,o,u.readTime)?this.ws(e,Eh(n,null,"F")):this.Fs(e,d,n,u)}))})))}Ss(e,n,r,i){return Iy(n)||i.isEqual(ne.min())?M.resolve(null):this.ys.getDocuments(e,r).next(s=>{const o=this.vs(n,s);return this.Cs(n,o,r,i)?M.resolve(null):(bi()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pi(n)),this.Fs(e,o,n,vR(i,Ko)).next(c=>c))})}vs(e,n){let r=new $e(Wx(e));return n.forEach((i,s)=>{Wc(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}bs(e,n,r){return bi()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.ys.getDocumentsMatchingQuery(e,n,br.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",qN=3e8;class HN{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Le(oe),this.Os=new xi(s=>Qf(s),Jf),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PN(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function WN(t,e,n,r){return new HN(t,e,n,r)}async function pw(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=fe();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:c}))})})}function mw(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function GN(t,e){const n=he(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const c=[];e.targetChanges.forEach((f,g)=>{const m=i.get(g);if(!m)return;c.push(n.Ti.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Ti.addMatchingKeys(s,f.addedDocuments,g)));let I=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(tt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(g,I),function(A,b,T){return A.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=qN?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,I,f)&&c.push(n.Ti.updateTargetData(s,I))});let u=Lr(),d=fe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(KN(s,o,e.documentUpdates).next(f=>{u=f.qs,d=f.Qs})),!r.isEqual(ne.min())){const f=n.Ti.getLastRemoteSnapshotVersion(s).next(g=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.xs=i,s))}function KN(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Lr();return n.forEach((c,u)=>{const d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):q(sp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:i}})}function QN(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ti.allocateTargetId(r).next(o=>(i=new pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Rh(t,e,n){const r=he(t),i=r.xs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ks(o))throw o;q(sp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function Fy(t,e,n){const r=he(t);let i=ne.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=he(u),m=g.Os.get(f);return m!==void 0?M.resolve(g.xs.get(m)):g.Ti.getTargetData(d,f)}(r,o,_n(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:fe())).next(c=>(JN(r,qR(e),c),{documents:c,$s:s})))}function JN(t,e,n){let r=t.Ns.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ns.set(e,r)}class Uy{constructor(){this.activeTargetIds=JR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YN{constructor(){this.xo=new Uy,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Uy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="ConnectivityMonitor";class $y{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(By,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(By,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=null;function Nh(){return el===null?el=function(){return 268435456+Math.round(2147483648*Math.random())}():el++,"0x"+el.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="RestConnection",ZN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eA{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===ic?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,s){const o=Nh(),c=this.jo(e,n.toUriEncodedString());q(ld,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,s);const{host:d}=new URL(c),f=vi(d);return this.Jo(e,c,u,r,f).then(g=>(q(ld,`Received RPC '${e}' ${o}: `,g),g),g=>{throw fs(ld,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g})}Yo(e,n,r,i,s,o){return this.zo(e,n,r,i,s)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Is}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,n){const r=ZN[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class nA extends eA{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Nh();return new Promise((c,u)=>{const d=new _x;d.setWithCredentials(!0),d.listenOnce(xx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wl.NO_ERROR:const g=d.getResponseJson();q(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case wl.TIMEOUT:q(ct,`RPC '${e}' ${o} timed out`),u(new W(U.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const m=d.getStatus();if(q(ct,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I==null?void 0:I.error;if(C&&C.status&&C.message){const A=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(x)>=0?x:U.UNKNOWN}(C.status);u(new W(A,C.message))}else u(new W(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(U.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{q(ct,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);q(ct,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",f,r,15)})}T_(e,n,r){const i=Nh(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Tx(),c=Ex(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");q(ct,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let m=!1,I=!1;const C=new tA({Zo:b=>{I?q(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(q(ct,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),q(ct,`RPC '${e}' stream ${i} sending:`,b),g.send(b))},Xo:()=>g.close()}),A=(b,T,x)=>{b.listen(T,S=>{try{x(S)}catch(j){setTimeout(()=>{throw j},0)}})};return A(g,ao.EventType.OPEN,()=>{I||(q(ct,`RPC '${e}' stream ${i} transport opened.`),C.__())}),A(g,ao.EventType.CLOSE,()=>{I||(I=!0,q(ct,`RPC '${e}' stream ${i} transport closed`),C.u_())}),A(g,ao.EventType.ERROR,b=>{I||(I=!0,fs(ct,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),C.u_(new W(U.UNAVAILABLE,"The operation could not be completed")))}),A(g,ao.EventType.MESSAGE,b=>{var T;if(!I){const x=b.data[0];Ne(!!x,16349);const S=x,j=(S==null?void 0:S.error)||((T=S[0])===null||T===void 0?void 0:T.error);if(j){q(ct,`RPC '${e}' stream ${i} received error:`,j);const D=j.status;let O=function(_){const k=Ve[_];if(k!==void 0)return tw(k)}(D),v=j.message;O===void 0&&(O=U.INTERNAL,v="Unknown error status: "+D+" with message "+j.message),I=!0,C.u_(new W(O,v)),g.close()}else q(ct,`RPC '${e}' stream ${i} received:`,x),C.c_(x)}}),A(c,wx.STAT_EVENT,b=>{b.stat===mh.PROXY?q(ct,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===mh.NOPROXY&&q(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}}function cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){return new hN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=i,this.d_=s,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="PersistentStream";class rA{constructor(e,n,r,i,s,o,c,u){this.xi=e,this.y_=r,this.w_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new gw(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===n&&this.K_(r,i)},r=>{e(()=>{const i=new W(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return q(zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(q(zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iA extends rA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=pN(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?ts(o.readTime):ne.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=Oy(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=xh(u)?{documents:mN(s,u)}:{query:gN(s,u).gt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=iw(s,o.resumeToken);const d=Ch(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){c.readTime=Ih(s,o.snapshotVersion.toTimestamp());const d=Ch(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=vN(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=Oy(this.serializer),n.removeTarget=e,this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{}class oA extends sA{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,kh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(U.UNKNOWN,s.toString())})}Yo(e,n,r,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Yo(e,kh(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(U.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class aA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(zn(n),this.oa=!1):q("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class lA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=s,this.Ea.No(o=>{r.enqueueAndForget(async()=>{ha(this)&&(q(vs,"Restarting streams for network reachability change."),await async function(u){const d=he(u);d.Ta.add(4),await da(d),d.da.set("Unknown"),d.Ta.delete(4),await Yc(d)}(this))})}),this.da=new aA(r,i)}}async function Yc(t){if(ha(t))for(const e of t.Ia)await e(!0)}async function da(t){for(const e of t.Ia)await e(!1)}function yw(t,e){const n=he(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),cp(n)?lp(n):As(n).M_()&&ap(n,e))}function op(t,e){const n=he(t),r=As(n);n.Pa.delete(e),r.M_()&&vw(n,e),n.Pa.size===0&&(r.M_()?r.N_():ha(n)&&n.da.set("Unknown"))}function ap(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}As(t).H_(e)}function vw(t,e){t.Aa.Ke(e),As(t).J_(e)}function lp(t){t.Aa=new lN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),As(t).start(),t.da._a()}function cp(t){return ha(t)&&!As(t).F_()&&t.Pa.size>0}function ha(t){return he(t).Ta.size===0}function _w(t){t.Aa=void 0}async function cA(t){t.da.set("Online")}async function uA(t){t.Pa.forEach((e,n)=>{ap(t,e)})}async function dA(t,e){_w(t),cp(t)?(t.da.ca(e),lp(t)):t.da.set("Unknown")}async function hA(t,e,n){if(t.da.set("Online"),e instanceof rw&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.Pa.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Pa.delete(c),i.Aa.removeTarget(c))}(t,e)}catch(r){q(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qy(t,r)}else if(e instanceof Sl?t.Aa.Xe(e):e instanceof nw?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(ne.min()))try{const r=await mw(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Aa.It(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.Pa.get(d);f&&s.Pa.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=s.Pa.get(u);if(!f)return;s.Pa.set(u,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),vw(s,u);const g=new pr(f.target,u,d,f.sequenceNumber);ap(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){q(vs,"Failed to raise snapshot:",r),await qy(t,r)}}async function qy(t,e,n){if(!ks(e))throw e;t.Ta.add(1),await da(t),t.da.set("Offline"),n||(n=()=>mw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(vs,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await Yc(t)})}async function Hy(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),q(vs,"RemoteStore received new credentials");const r=ha(n);n.Ta.add(3),await da(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Yc(n)}async function fA(t,e){const n=he(t);e?(n.Ta.delete(2),await Yc(n)):e||(n.Ta.add(2),await da(n),n.da.set("Unknown"))}function As(t){return t.Ra||(t.Ra=function(n,r,i){const s=he(n);return s.ra(),new iA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:cA.bind(null,t),n_:uA.bind(null,t),i_:dA.bind(null,t),j_:hA.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),cp(t)?lp(t):t.da.set("Unknown")):(await t.Ra.stop(),_w(t))})),t.Ra}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new up(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xw(t,e){if(zn("AsyncQueue",`${e}: ${t}`),ks(t))return new W(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{static emptySet(e){return new ns(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=lo(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ns;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.ma=new Le(X.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class _s{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new _s(e,n,ns.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class mA{constructor(){this.queries=Gy(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=Gy(),s.forEach((o,c)=>{for(const u of c.ya)u.onError(r)})})(this,new W(U.ABORTED,"Firestore shutting down"))}}function Gy(){return new xi(t=>Hx(t),Hc)}async function ww(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.wa()&&e.Sa()&&(r=2):(s=new pA,r=e.Sa()?0:1);try{switch(r){case 0:s.pa=await n.onListen(i,!0);break;case 1:s.pa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=xw(o,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.ya.push(e),e.Da(n.onlineState),s.pa&&e.va(s.pa)&&dp(n)}async function Ew(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ya.indexOf(e);o>=0&&(s.ya.splice(o,1),s.ya.length===0?i=e.Sa()?0:1:!s.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gA(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.ya)c.va(i)&&(r=!0);o.pa=i}}r&&dp(n)}function yA(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.ya)s.onError(n);r.queries.delete(e)}function dp(t){t.ba.forEach(e=>{e.next()})}var Ah,Ky;(Ky=Ah||(Ah={})).Ca="default",Ky.Cache="cache";class Tw{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new _s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=_s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Ah.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class vA{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=fe(),this.mutatedKeys=fe(),this.Ha=Wx(e),this.Ja=new ns(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new Wy,i=n?n.Ja:this.Ja;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const m=i.get(f),I=Wc(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),A=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let b=!1;m&&I?m.data.isEqual(I.data)?C!==A&&(r.track({type:3,doc:I}),b=!0):this.eu(m,I)||(r.track({type:2,doc:I}),b=!0,(u&&this.Ha(I,u)>0||d&&this.Ha(I,d)<0)&&(c=!0)):!m&&I?(r.track({type:0,doc:I}),b=!0):m&&!I&&(r.track({type:1,doc:m}),b=!0,(u||d)&&(c=!0)),b&&(I?(o=o.add(I),s=A?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ja:o,Xa:r,Cs:c,mutatedKeys:s}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((f,g)=>function(I,C){const A=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:b})}};return A(I)-A(C)}(f.type,g.type)||this.Ha(f.doc,g.doc)),this.tu(r),i=i!=null&&i;const c=n&&!i?this.nu():[],u=this.ja.size===0&&this.current&&!i?1:0,d=u!==this.za;return this.za=u,o.length!==0||d?{snapshot:new _s(this.query,e.Ja,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:c}:{ru:c}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Wy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=fe(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new Cw(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new Sw(r))}),n}su(e){this.Ga=e.$s,this.ja=fe();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return _s.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const hp="SyncEngine";class _A{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xA{constructor(e){this.key=e,this._u=!1}}class wA{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new xi(c=>Hx(c),Hc),this.cu=new Map,this.lu=new Set,this.hu=new Le(X.comparator),this.Pu=new Map,this.Tu=new np,this.Iu={},this.Eu=new Map,this.du=ys.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function EA(t,e,n=!0){const r=Aw(t);let i;const s=r.uu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await Iw(r,e,n,!0),i}async function TA(t,e){const n=Aw(t);await Iw(n,e,!0,!1)}async function Iw(t,e,n,r){const i=await QN(t.localStore,_n(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await SA(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&yw(t.remoteStore,i),c}async function SA(t,e,n,r,i){t.Ru=(g,m,I)=>async function(A,b,T,x){let S=b.view.Za(T);S.Cs&&(S=await Fy(A.localStore,b.query,!1).then(({documents:v})=>b.view.Za(v,S)));const j=x&&x.targetChanges.get(b.targetId),D=x&&x.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(S,A.isPrimaryClient,j,D);return Jy(A,b.targetId,O.ru),O.snapshot}(t,g,m,I);const s=await Fy(t.localStore,e,!0),o=new vA(e,s.$s),c=o.Za(s.documents),u=ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);Jy(t,n,d.ru);const f=new _A(e,n,o);return t.uu.set(e,f),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),d.snapshot}async function CA(t,e,n){const r=he(t),i=r.uu.get(e),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter(o=>!Hc(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&op(r.remoteStore,i.targetId),jh(r,i.targetId)}).catch(Bc)):(jh(r,i.targetId),await Rh(r.localStore,i.targetId,!0))}async function IA(t,e){const n=he(t),r=n.uu.get(e),i=n.cu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),op(n.remoteStore,r.targetId))}async function kw(t,e){const n=he(t);try{const r=await GN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Pu.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o._u=!0:i.modifiedDocuments.size>0?Ne(o._u,14607):i.removedDocuments.size>0&&(Ne(o._u,42227),o._u=!1))}),await Nw(n,r,e)}catch(r){await Bc(r)}}function Qy(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.uu.forEach((s,o)=>{const c=o.view.Da(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=he(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(const m of g.ya)m.Da(c)&&(d=!0)}),d&&dp(u)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kA(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Pu.get(e),s=i&&i.key;if(s){let o=new Le(X.comparator);o=o.insert(s,mt.newNoDocument(s,ne.min()));const c=fe().add(s),u=new Qc(ne.min(),new Map,new Le(oe),o,c);await kw(r,u),r.hu=r.hu.remove(s),r.Pu.delete(e),fp(r)}else await Rh(r.localStore,e,!1).then(()=>jh(r,e,n)).catch(Bc)}function jh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||Rw(t,r)})}function Rw(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(op(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),fp(t))}function Jy(t,e,n){for(const r of n)r instanceof Sw?(t.Tu.addReference(r.key,e),RA(t,r)):r instanceof Cw?(q(hp,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||Rw(t,r.key)):re(19791,{mu:r})}function RA(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(q(hp,"New document in limbo: "+n),t.lu.add(r),fp(t))}function fp(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new X(Ee.fromString(e)),r=t.du.next();t.Pu.set(r,new xA(n)),t.hu=t.hu.insert(n,r),yw(t.remoteStore,new pr(_n(Yf(n.path)),r,"TargetPurposeLimboResolution",$c.le))}}async function Nw(t,e,n){const r=he(t),i=[],s=[],o=[];r.uu.isEmpty()||(r.uu.forEach((c,u)=>{o.push(r.Ru(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=ip.Rs(u.targetId,d);s.push(g)}}))}),await Promise.all(o),r.au.j_(i),await async function(u,d){const f=he(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,m=>M.forEach(m.ds,I=>f.persistence.referenceDelegate.addReference(g,m.targetId,I)).next(()=>M.forEach(m.As,I=>f.persistence.referenceDelegate.removeReference(g,m.targetId,I)))))}catch(g){if(!ks(g))throw g;q(sp,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const I=f.xs.get(m),C=I.snapshotVersion,A=I.withLastLimboFreeSnapshotVersion(C);f.xs=f.xs.insert(m,A)}}}(r.localStore,s))}async function NA(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){q(hp,"User change. New user:",e.toKey());const r=await pw(n.localStore,e);n.currentUser=e,function(s,o){s.Eu.forEach(c=>{c.forEach(u=>{u.reject(new W(U.CANCELLED,o))})}),s.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nw(n,r.ks)}}function AA(t,e){const n=he(t),r=n.Pu.get(e);if(r&&r._u)return fe().add(r.key);{let i=fe();const s=n.cu.get(e);if(!s)return i;for(const o of s){const c=n.uu.get(o);i=i.unionWith(c.view.Ya)}return i}}function Aw(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kA.bind(null,e),e.au.j_=gA.bind(null,e.eventManager),e.au.Vu=yA.bind(null,e.eventManager),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return WN(this.persistence,new zN,e.initialUser,this.serializer)}yu(e){return new fw(rp.fi,this.serializer)}pu(e){return new YN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class jA extends uc{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Ne(this.persistence.referenceDelegate instanceof cc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RN(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new fw(r=>cc.fi(r,n),this.serializer)}}class bh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NA.bind(null,this.syncEngine),await fA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mA}()}createDatastore(e){const n=Jc(e.databaseInfo.databaseId),r=function(s){return new nA(s)}(e.databaseInfo);return function(s,o,c,u){return new oA(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new lA(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Qy(this.syncEngine,n,0),function(){return $y.C()?new $y:new XN}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){const g=new wA(i,s,o,c,u,d);return f&&(g.Au=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);q(vs,"RemoteStore shutting down."),s.Ta.add(5),await da(s),s.Ea.shutdown(),s.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bh.provider={build:()=>new bh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class bA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=kx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(Vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(Vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ud(t,e){t.asyncQueue.verifyOperationInProgress(),q(Vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PA(t);q(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Hy(e.remoteStore,i)),t._onlineComponents=e}async function PA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Vr,"Using user provided OfflineComponentProvider");try{await ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await ud(t,new uc)}}else q(Vr,"Using default OfflineComponentProvider"),await ud(t,new jA(void 0));return t._offlineComponents}async function DA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Vr,"Using user provided OnlineComponentProvider"),await Yy(t,t._uninitializedComponentsProvider._online)):(q(Vr,"Using default OnlineComponentProvider"),await Yy(t,new bh))),t._onlineComponents}async function bw(t){const e=await DA(t),n=e.eventManager;return n.onListen=EA.bind(null,e.syncEngine),n.onUnlisten=CA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IA.bind(null,e.syncEngine),n}function OA(t,e,n={}){const r=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new jw({next:m=>{f.Cu(),o.enqueueAndForget(()=>Ew(s,g));const I=m.docs.has(c);!I&&m.fromCache?d.reject(new W(U.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&m.fromCache&&u&&u.source==="server"?d.reject(new W(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new Tw(Yf(c.path),f,{includeMetadataChanges:!0,La:!0});return ww(s,g)}(await bw(t),t.asyncQueue,e,n,r)),r.promise}function LA(t,e,n={}){const r=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,d){const f=new jw({next:m=>{f.Cu(),o.enqueueAndForget(()=>Ew(s,g)),m.fromCache&&u.source==="server"?d.reject(new W(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new Tw(c,f,{includeMetadataChanges:!0,La:!0});return ww(s,g)}(await bw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e,n){if(!n)throw new W(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VA(t,e,n,r){if(e===!0&&r===!0)throw new W(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zy(t){if(!X.isDocumentKey(t))throw new W(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ev(t){if(X.isDocumentKey(t))throw new W(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Zo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xc(t);throw new W(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="firestore.googleapis.com",tv=!0;class nv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ow,this.ssl=tv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:tv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IN)throw new W(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cR;switch(r.type){case"firstParty":return new fR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xy.get(n);r&&(q("ComponentProvider","Removing Datastore"),Xy.delete(n),r.terminate())}(this),Promise.resolve()}}function MA(t,e,n,r={}){var i;t=Zo(t,Zc);const s=vi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Bf(`https://${u}`),$f("Firestore",!0)),o.host!==Ow&&o.host!==u&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!ui(d,c)&&(t._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=ft.MOCK_USER;else{f=fx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ft(m)}t._authCredentials=new uR(new Cx(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class kr extends wi{constructor(e,n,r){super(e,n,Yf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new X(e))}withConverter(e){return new kr(this.firestore,e,this._path)}}function dc(t,e,...n){if(t=St(t),Dw("collection","path",e),t instanceof Zc){const r=Ee.fromString(e,...n);return ev(r),new kr(t,null,r)}{if(!(t instanceof Ft||t instanceof kr))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return ev(r),new kr(t.firestore,null,r)}}function ki(t,e,...n){if(t=St(t),arguments.length===1&&(e=kx.newId()),Dw("doc","path",e),t instanceof Zc){const r=Ee.fromString(e,...n);return Zy(r),new Ft(t,null,new X(r))}{if(!(t instanceof Ft||t instanceof kr))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Zy(r),new Ft(t.firestore,t instanceof kr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="AsyncQueue";class iv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new gw(this,"async_queue_retry"),this.ec=()=>{const r=cd();r&&q(rv,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=cd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=cd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new Ir;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!ks(e))throw e;q(rv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,zn("INTERNAL UNHANDLED ERROR: ",sv(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const i=up.createAndSchedule(this,e,n,r,s=>this.oc(s));return this.Hu.push(i),i}nc(){this.Ju&&re(47125,{_c:sv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function sv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class pp extends Zc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new iv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iv(e),this._firestoreClient=void 0,await e}}}function ov(t,e){const n=typeof t=="object"?t:Hf(),r=typeof t=="string"?t:e||ic,i=Uc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ux("firestore");s&&MA(i,...s)}return i}function Lw(t){if(t._terminated)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FA(t),t._firestoreClient}function FA(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,d,f){return new NR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Pw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new bA(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(tt.fromBase64String(e))}catch(n){throw new W(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xs(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=/^__.*__$/;function Fw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{hc:t})}}class yp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Ph(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(Fw(this.hc)&&UA.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class BA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jc(e)}gc(e,n,r,i=!1){return new yp({hc:e,methodName:n,fc:r,path:gt.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $A(t){const e=t._freezeSettings(),n=Jc(t._databaseId);return new BA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zA(t,e,n,r=!1){return vp(n,t.gc(r?4:3,e))}function vp(t,e){if(Uw(t=St(t)))return HA("Unsupported field value:",e,t),qA(t,e);if(t instanceof Mw)return function(r,i){if(!Fw(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=vp(c,i.Rc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:Ih(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ih(i.serializer,s)}}if(r instanceof mp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xs)return{bytesValue:iw(i.serializer,r._byteString)};if(r instanceof Ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gp)return function(o,c){return{mapValue:{fields:{[Ox]:{stringValue:Vx},[sc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Vc("VectorValues must only contain numeric values.");return Xf(c.serializer,d)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Xc(r)}`)}(t,e)}function qA(t,e){const n={};return Nx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(r,i)=>{const s=vp(i,e.Ic(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Uw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof mp||t instanceof xs||t instanceof Ft||t instanceof Mw||t instanceof gp)}function HA(t,e,n){if(!Uw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Xc(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}const WA=new RegExp("[~\\*/\\[\\]]");function GA(t,e,n){if(e.search(WA)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vw(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ph(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new W(U.INVALID_ARGUMENT,c+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KA extends Bw{data(){return super.data()}}function eu(t,e){return typeof e=="string"?GA(t,e):e instanceof Vw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _p{}class $w extends _p{}function zw(t,e,...n){let r=[];e instanceof _p&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof xp).length,c=s.filter(u=>u instanceof tu).length;if(o>1||o>0&&c>0)throw new W(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class tu extends $w{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tu(e,n,r)}_apply(e){const n=this._parse(e);return Ww(e._query,n),new wi(e.firestore,e.converter,wh(e._query,n))}_parse(e){const n=$A(e.firestore);return function(s,o,c,u,d,f,g){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){lv(g,f);const C=[];for(const A of g)C.push(av(u,s,A));m={arrayValue:{values:C}}}else m=av(u,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||lv(g,f),m=zA(c,o,g,f==="in"||f==="not-in");return Fe.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qw(t,e,n){const r=e,i=eu("where",t);return tu._create(i,r,n)}class xp extends _p{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)Ww(o,u),o=wh(o,u)}(e._query,n),new wi(e.firestore,e.converter,wh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wp extends $w{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xo(s,o)}(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ns(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Hw(t,e="asc"){const n=e,r=eu("orderBy",t);return wp._create(r,n)}function av(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new W(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qx(e)&&n.indexOf("/")!==-1)throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!X.isDocumentKey(r))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xy(t,new X(r))}if(n instanceof Ft)return xy(t,n._key);throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xc(n)}.`)}function lv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ww(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JA{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[sc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>De(o.doubleValue));return new gp(s)}convertGeoPoint(e){return new mp(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qo(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);Ne(dw(r),9688,{name:e});const i=new Jo(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||zn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gw extends Bw{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(eu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cl extends Gw{data(e={}){return super.data(e)}}class YA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cl(this._firestore,this._userDataWriter,r.key,r,new uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new Cl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new Cl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:XA(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function XA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){t=Zo(t,Ft);const e=Zo(t.firestore,pp);return OA(Lw(e),t._key).then(n=>ZA(e,t,n))}class Kw extends JA{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function hc(t){t=Zo(t,wi);const e=Zo(t.firestore,pp),n=Lw(e),r=new Kw(e);return QA(t._query),LA(n,t._query).then(i=>new YA(e,r,t,i))}function ZA(t,e,n){const r=n.docs.get(e._key),i=new Kw(t);return new Gw(t,i,e._key,r,new uo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Is=i})(_i),di(new jr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new pp(new dR(r.getProvider("auth-internal")),new pR(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),vn(ly,cy,e),vn(ly,cy,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="firebasestorage.googleapis.com",Jw="storageBucket",ej=2*60*1e3,tj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends Tn{constructor(e,n,r=0){super(dd(e),`Firebase Storage: ${n} (${dd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ke.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ge;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ge||(Ge={}));function dd(t){return"storage/"+t}function Yw(){const t="An unknown error occurred, please check the error payload for server response.";return new Ke(Ge.UNKNOWN,t)}function nj(t){return new Ke(Ge.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function rj(t){return new Ke(Ge.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ij(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(Ge.UNAUTHENTICATED,t)}function sj(){return new Ke(Ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oj(t){return new Ke(Ge.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function aj(){return new Ke(Ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lj(){return new Ke(Ge.CANCELED,"User canceled the upload/download.")}function cj(t){return new Ke(Ge.INVALID_URL,"Invalid URL '"+t+"'.")}function uj(t){return new Ke(Ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dj(){return new Ke(Ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jw+"' property when initializing the app?")}function hj(){return new Ke(Ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Dh(t){return new Ke(Ge.INVALID_ARGUMENT,t)}function Xw(){return new Ke(Ge.APP_DELETED,"The Firebase app was deleted.")}function fj(t){return new Ke(Ge.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function to(t){throw new Ke(Ge.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vt.makeFromUrl(e,n)}catch{return new Vt(e,"")}if(r.path==="")return r;throw uj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",I=new RegExp(`^https?://${g}/${f}/b/${i}/o${m}`,"i"),C={bucket:1,path:3},A=n===Qw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",T=new RegExp(`^https?://${A}/${i}/${b}`,"i"),S=[{regex:c,indices:u,postModify:s},{regex:I,indices:C,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<S.length;j++){const D=S[j],O=D.regex.exec(e);if(O){const v=O[D.indices.bucket];let y=O[D.indices.path];y||(y=""),r=new Vt(v,y),D.postModify(r);break}}if(r==null)throw cj(e);return r}}class pj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...b){d||(d=!0,e.apply(null,b))}function g(b){i=setTimeout(()=>{i=null,t(I,u())},b)}function m(){s&&clearTimeout(s)}function I(b,...T){if(d){m();return}if(b){m(),f.call(null,b,...T);return}if(u()||o){m(),f.call(null,b,...T);return}r<64&&(r*=2);let S;c===1?(c=2,S=0):S=(r+Math.random())*1e3,g(S)}let C=!1;function A(b){C||(C=!0,m(),!d&&(i!==null?(b||(c=2),clearTimeout(i),g(0)):b||(c=1)))}return g(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function gj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){return t!==void 0}function vj(t){return typeof t=="object"&&!Array.isArray(t)}function Zw(t){return typeof t=="string"||t instanceof String}function cv(t,e,n,r){if(r<e)throw Dh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function t1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ii;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ii||(ii={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n,r,i,s,o,c,u,d,f,g,m=!0,I=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=m,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new tl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===ii.NO_ERROR,u=s.getStatus();if(!c||_j(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===ii.ABORT;r(!1,new tl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new tl(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());yj(u)?s(u):s()}catch(u){o(u)}else if(c!==null){const u=Yw();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Xw():lj();o(u)}else{const u=aj();o(u)}};this.canceled_?n(!1,new tl(!1,null,!0)):this.backoffId_=mj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function wj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ej(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Cj(t,e,n,r,i,s,o=!0,c=!1){const u=t1(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return Tj(f,e),wj(f,n),Ej(f,s),Sj(f,r),new xj(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){let e;try{e=JSON.parse(t)}catch{return null}return vj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function r1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){return e}class wt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Rj}}let nl=null;function Nj(t){return!Zw(t)||t.length<2?t:r1(t)}function Aj(){if(nl)return nl;const t=[];t.push(new wt("bucket")),t.push(new wt("generation")),t.push(new wt("metageneration")),t.push(new wt("name","fullPath",!0));function e(s,o){return Nj(o)}const n=new wt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new wt("size");return i.xform=r,t.push(i),t.push(new wt("timeCreated")),t.push(new wt("updated")),t.push(new wt("md5Hash",null,!0)),t.push(new wt("cacheControl",null,!0)),t.push(new wt("contentDisposition",null,!0)),t.push(new wt("contentEncoding",null,!0)),t.push(new wt("contentLanguage",null,!0)),t.push(new wt("contentType",null,!0)),t.push(new wt("metadata","customMetadata",!0)),nl=t,nl}function jj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Vt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function bj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return jj(r,t),r}function Pj(t,e,n){const r=n1(e);return r===null?null:bj(t,r,n)}function Dj(t,e,n,r){const i=n1(e);if(i===null||!Zw(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,g=t.fullPath,m="/b/"+o(f)+"/o/"+o(g),I=e1(m,n,r),C=t1({alt:"media",token:d});return I+C})[0]}class Oj{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){if(!t)throw Yw()}function Vj(t,e){function n(r,i){const s=Pj(t,i,e);return Lj(s!==null),Dj(s,i,t.host,t._protocol)}return n}function Mj(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=sj():i=ij():n.getStatus()===402?i=rj(t.bucket):n.getStatus()===403?i=oj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Fj(t){const e=Mj(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=nj(t.path)),s.serverResponse=i.serverResponse,s}return n}function Uj(t,e,n){const r=e.fullServerUrl(),i=e1(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new Oj(i,s,Vj(t,n),o);return c.errorHandler=Fj(e),c}class Bj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ii.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ii.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ii.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw to("cannot .send() more than once");if(vi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw to("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw to("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw to("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw to("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $j extends Bj{initXhr(){this.xhr_.responseType="text"}}function zj(){return new $j}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){this._service=e,n instanceof Vt?this._location=n:this._location=Vt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fi(e,n)}get root(){const e=new Vt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r1(this._location.path)}get storage(){return this._service}get parent(){const e=Ij(this._location.path);if(e===null)return null;const n=new Vt(this._location.bucket,e);return new fi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fj(e)}}function qj(t){t._throwIfRoot("getDownloadURL");const e=Uj(t.storage,t._location,Aj());return t.storage.makeRequestWithTokens(e,zj).then(n=>{if(n===null)throw hj();return n})}function Hj(t,e){const n=kj(t._location.path,e),r=new Vt(t._location.bucket,n);return new fi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){return/^[A-Za-z]+:\/\//.test(t)}function Gj(t,e){return new fi(t,e)}function i1(t,e){if(t instanceof Ep){const n=t;if(n._bucket==null)throw dj();const r=new fi(n,n._bucket);return e!=null?i1(r,e):r}else return e!==void 0?Hj(t,e):t}function Kj(t,e){if(e&&Wj(e)){if(t instanceof Ep)return Gj(t,e);throw Dh("To use ref(service, url), the first argument must be a Storage instance.")}else return i1(t,e)}function uv(t,e){const n=e==null?void 0:e[Jw];return n==null?null:Vt.makeFromBucketSpec(n,t)}function Qj(t,e,n,r={}){t.host=`${e}:${n}`;const i=vi(e);i&&(Bf(`https://${t.host}`),$f("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:fx(s,t.app.options.projectId))}class Ep{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Qw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ej,this._maxUploadRetryTime=tj,this._requests=new Set,i!=null?this._bucket=Vt.makeFromBucketSpec(i,this._host):this._bucket=uv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vt.makeFromBucketSpec(this._url,e):this._bucket=uv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fi(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new pj(Xw());{const o=Cj(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const dv="@firebase/storage",hv="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="storage";function Io(t){return t=St(t),qj(t)}function ko(t,e){return t=St(t),Kj(t,e)}function fv(t=Hf(),e){t=St(t);const r=Uc(t,s1).getImmediate({identifier:e}),i=ux("storage");return i&&Jj(r,...i),r}function Jj(t,e,n,r={}){Qj(t,e,n,r)}function Yj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ep(n,r,i,e,_i)}function Xj(){di(new jr(s1,Yj,"PUBLIC").setMultipleInstances(!0)),vn(dv,hv,""),vn(dv,hv,"esm2017")}Xj();var Zj="firebase",eb="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn(Zj,eb,"app");function Tp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tb=o1,a1=new la("auth","Firebase",o1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new zf("@firebase/auth");function nb(t,...e){fc.logLevel<=ae.WARN&&fc.warn(`Auth (${_i}): ${t}`,...e)}function Il(t,...e){fc.logLevel<=ae.ERROR&&fc.error(`Auth (${_i}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw Sp(t,...e)}function xn(t,...e){return Sp(t,...e)}function l1(t,e,n){const r=Object.assign(Object.assign({},tb()),{[e]:n});return new la("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return l1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return a1.create(t,...e)}function ee(t,e,...n){if(!t)throw Sp(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Il(e),new Error(e)}function Hn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rb(){return pv()==="http:"||pv()==="https:"}function pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rb()||$I()||"connection"in navigator)?navigator.onLine:!0}function sb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hn(n>e,"Short delay should be less than long delay!"),this.isMobile=FI()||zI()}get(){return ib()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t,e){Hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lb=new fa(3e4,6e4);function nu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function js(t,e,n,r,i={}){return u1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=ca(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},s);return BI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&vi(t.emulatorConfig.host)&&(d.credentials="include"),c1.fetch()(await h1(t,t.config.apiHost,n,c),d)})}async function u1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ob),e);try{const i=new cb(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw rl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw l1(t,f,d);qn(t,f)}}catch(i){if(i instanceof Tn)throw i;qn(t,"network-request-failed",{message:String(i)})}}async function d1(t,e,n,r,i={}){const s=await js(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function h1(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Cp(t.config,i):`${t.config.apiScheme}://${i}`;return ab.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class cb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),lb.get())})}}function rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(t,e){return js(t,"POST","/v1/accounts:delete",e)}async function pc(t,e){return js(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function db(t,e=!1){const n=St(t),r=await n.getIdToken(e),i=Ip(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ro(hd(i.auth_time)),issuedAtTime:Ro(hd(i.iat)),expirationTime:Ro(hd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hd(t){return Number(t)*1e3}function Ip(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Il("JWT malformed, contained fewer than 3 sections"),null;try{const i=lx(n);return i?JSON.parse(i):(Il("Failed to decode base64 JWT payload"),null)}catch(i){return Il("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mv(t){const e=Ip(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tn&&hb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ro(this.lastLoginAt),this.creationTime=Ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ea(t,pc(n,{idToken:r}));ee(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?f1(s.providerUserInfo):[],c=mb(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Lh(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function pb(t){const e=St(t);await mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mb(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function f1(t){return t.map(e=>{var{providerId:n}=e,r=Tp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(t,e){const n=await u1(t,{},async()=>{const r=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await h1(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",c1.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yb(t,e){return js(t,"POST","/v2/accounts:revokeToken",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gb(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rs;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rs,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Tp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ea(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return db(this,e)}reload(){return pb(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ht(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await ea(this,ub(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(c=n.tenantId)!==null&&c!==void 0?c:void 0,b=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:j,isAnonymous:D,providerData:O,stsTokenManager:v}=n;ee(S&&v,e,"internal-error");const y=rs.fromJSON(this.name,v);ee(typeof S=="string",e,"internal-error"),tr(g,e.name),tr(m,e.name),ee(typeof j=="boolean",e,"internal-error"),ee(typeof D=="boolean",e,"internal-error"),tr(I,e.name),tr(C,e.name),tr(A,e.name),tr(b,e.name),tr(T,e.name),tr(x,e.name);const _=new rn({uid:S,auth:e,email:m,emailVerified:j,displayName:g,isAnonymous:D,photoURL:C,phoneNumber:I,tenantId:A,stsTokenManager:y,createdAt:T,lastLoginAt:x});return O&&Array.isArray(O)&&(_.providerData=O.map(k=>Object.assign({},k))),b&&(_._redirectEventId=b),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new rs;i.updateFromServerResponse(n);const s=new rn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?f1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new rs;c.updateFromIdToken(r);const u=new rn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Lh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function Dn(t){Hn(t instanceof Function,"Expected a class definition");let e=gv.get(t);return e?(Hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}p1.type="NONE";const yv=p1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e,n){return`firebase:${t}:${e}:${n}`}class is{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=kl(this.userKey,i.apiKey,s),this.fullPersistenceKey=kl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pc(this.auth,{idToken:e}).catch(()=>{});return n?rn._fromGetAccountInfoResponse(this.auth,n,e):null}return rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new is(Dn(yv),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Dn(yv);const o=kl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let g;if(typeof f=="string"){const m=await pc(e,{idToken:f}).catch(()=>{});if(!m)break;g=await rn._fromGetAccountInfoResponse(e,m,f)}else g=rn._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new is(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new is(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x1(e))return"Blackberry";if(w1(e))return"Webos";if(g1(e))return"Safari";if((e.includes("chrome/")||y1(e))&&!e.includes("edge/"))return"Chrome";if(_1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function m1(t=vt()){return/firefox\//i.test(t)}function g1(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y1(t=vt()){return/crios\//i.test(t)}function v1(t=vt()){return/iemobile/i.test(t)}function _1(t=vt()){return/android/i.test(t)}function x1(t=vt()){return/blackberry/i.test(t)}function w1(t=vt()){return/webos/i.test(t)}function kp(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vb(t=vt()){var e;return kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _b(){return qI()&&document.documentMode===10}function E1(t=vt()){return kp(t)||_1(t)||w1(t)||x1(t)||/windows phone/i.test(t)||v1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e=[]){let n;switch(t){case"Browser":n=vv(vt());break;case"Worker":n=`${vv(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_i}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e={}){return js(t,"GET","/v2/passwordPolicy",nu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=6;class Tb{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Eb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new xb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await is.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pc(this,{idToken:e}),r=await rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ht(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ht(this.app))return Promise.reject(Rr(this));const n=e?St(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ht(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ht(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wb(this),n=new Tb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new la("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await is.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ru(t){return St(t)}class _v{constructor(e){this.auth=e,this.observer=null,this.addObserver=XI(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cb(t){Rp=t}function Ib(t){return Rp.loadJS(t)}function kb(){return Rp.gapiScript}function Rb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t,e){const n=Uc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ui(s,e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}function Ab(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jb(t,e,n){const r=ru(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=S1(e),{host:o,port:c}=bb(e),u=c===null?"":`:${c}`,d={url:`${s}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(ui(d,r.config.emulator)&&ui(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vi(o)?(Bf(`${s}//${o}${u}`),$f("Auth",!0)):i||Pb()}function S1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bb(t){const e=S1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:xv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:xv(o)}}}function xv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Pb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t,e){return d1(t,"POST","/v1/accounts:signInWithIdp",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="http://localhost";class pi extends C1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Tp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new pi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ss(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ss(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ss(e,n)}buildRequest(){const e={requestUri:Db,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends I1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends pa{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends pa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pi._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends pa{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends pa{constructor(){super("twitter.com")}static credential(e,n){return pi._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(t,e){return d1(t,"POST","/v1/accounts:signUp",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await rn._fromIdTokenResponse(e,r,i),o=wv(r);return new Mr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=wv(r);return new Mr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function wv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(t){var e;if(Ht(t.app))return Promise.reject(Rr(t));const n=ru(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Mr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Ob(n,{returnSecureToken:!0}),i=await Mr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Tn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gc(e,n,r,i)}}function k1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(t,s,e,r):s})}async function Vb(t,e,n=!1){const r=await ea(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,e,n=!1){const{auth:r}=t;if(Ht(r.app))return Promise.reject(Rr(r));const i="reauthenticate";try{const s=await ea(t,k1(r,i,e,t),n);ee(s.idToken,r,"internal-error");const o=Ip(s.idToken);ee(o,r,"internal-error");const{sub:c}=o;return ee(t.uid===c,r,"user-mismatch"),Mr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(t,e,n=!1){if(Ht(t.app))return Promise.reject(Rr(t));const r="signIn",i=await k1(t,r,e),s=await Mr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Ub(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function Bb(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function $b(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}const yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yc,"1"),this.storage.removeItem(yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=1e3,qb=10;class N1 extends R1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);_b()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qb):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N1.type="LOCAL";const Hb=N1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends R1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}A1.type="SESSION";const j1=A1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),u=await Wb(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const d=Np("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function Kb(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function Qb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Yb(){return b1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebaseLocalStorageDb",Xb=1,vc="firebaseLocalStorage",D1="fbase_key";class ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function su(t,e){return t.transaction([vc],e?"readwrite":"readonly").objectStore(vc)}function Zb(){const t=indexedDB.deleteDatabase(P1);return new ma(t).toPromise()}function Vh(){const t=indexedDB.open(P1,Xb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vc,{keyPath:D1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vc)?e(r):(r.close(),await Zb(),e(await Vh()))})})}async function Ev(t,e,n){const r=su(t,!0).put({[D1]:e,value:n});return new ma(r).toPromise()}async function eP(t,e){const n=su(t,!1).get(e),r=await new ma(n).toPromise();return r===void 0?null:r.value}function Tv(t,e){const n=su(t,!0).delete(e);return new ma(n).toPromise()}const tP=800,nP=3;class O1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return b1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iu._getInstance(Yb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Qb(),!this.activeServiceWorker)return;this.sender=new Gb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vh();return await Ev(e,yc,"1"),await Tv(e,yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ev(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=su(i,!1).getAll();return new ma(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O1.type="LOCAL";const rP=O1;new fa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t,e){return e?Dn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends C1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ss(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ss(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sP(t){return Fb(t.auth,new Ap(t),t.bypassAuthState)}function oP(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),Mb(n,new Ap(t),t.bypassAuthState)}async function aP(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),Vb(n,new Ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sP;case"linkViaPopup":case"linkViaRedirect":return aP;case"reauthViaPopup":case"reauthViaRedirect":return oP;default:qn(this.auth,"internal-error")}}resolve(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new fa(2e3,1e4);class Ki extends L1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ki.currentPopupAction&&Ki.currentPopupAction.cancel(),Ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Hn(this.filter.length===1,"Popup operations only handle one event");const e=Np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lP.get())};e()}}Ki.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="pendingRedirect",Rl=new Map;class uP extends L1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rl.get(this.auth._key());if(!e){try{const r=await dP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rl.set(this.auth._key(),e)}return this.bypassAuthState||Rl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dP(t,e){const n=pP(e),r=fP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function hP(t,e){Rl.set(t._key(),e)}function fP(t){return Dn(t._redirectPersistence)}function pP(t){return kl(cP,t.config.apiKey,t.name)}async function mP(t,e,n=!1){if(Ht(t.app))return Promise.reject(Rr(t));const r=ru(t),i=iP(r,e),o=await new uP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=10*60*1e3;class yP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!V1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(e))}saveEventToCache(e){this.cachedEventUids.add(Sv(e)),this.lastProcessedEventTime=Date.now()}}function Sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function V1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(t,e={}){return js(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wP=/^https?/;async function EP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _P(t);for(const n of e)try{if(TP(n))return}catch{}qn(t,"unauthorized-domain")}function TP(t){const e=Oh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wP.test(n))return!1;if(xP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new fa(3e4,6e4);function Cv(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CP(t){return new Promise((e,n)=>{var r,i,s;function o(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),n(xn(t,"network-request-failed"))},timeout:SP.get()})}if(!((i=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=wn().gapi)===null||s===void 0)&&s.load)o();else{const c=Rb("iframefcb");return wn()[c]=()=>{gapi.load?o():n(xn(t,"network-request-failed"))},Ib(`${kb()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Nl=null,e})}let Nl=null;function IP(t){return Nl=Nl||CP(t),Nl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=new fa(5e3,15e3),RP="__/auth/iframe",NP="emulator/auth/iframe",AP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bP(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cp(e,NP):`https://${t.config.authDomain}/${RP}`,r={apiKey:e.apiKey,appName:t.name,v:_i},i=jP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ca(r).slice(1)}`}async function PP(t){const e=await IP(t),n=wn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:bP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),c=wn().setTimeout(()=>{s(o)},kP.get());function u(){wn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OP=500,LP=600,VP="_blank",MP="http://localhost";class Iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FP(t,e,n,r=OP,i=LP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},DP),{width:r.toString(),height:i.toString(),top:s,left:o}),d=vt().toLowerCase();n&&(c=y1(d)?VP:n),m1(d)&&(e=e||MP,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[I,C])=>`${m}${I}=${C},`,"");if(vb(d)&&c!=="_self")return UP(e||"",c),new Iv(null);const g=window.open(e||"",c,f);ee(g,t,"popup-blocked");try{g.focus()}catch{}return new Iv(g)}function UP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="__/auth/handler",$P="emulator/auth/handler",zP=encodeURIComponent("fac");async function kv(t,e,n,r,i,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_i,eventId:i};if(e instanceof I1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof pa){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${zP}=${encodeURIComponent(u)}`:"";return`${qP(t)}?${ca(c).slice(1)}${d}`}function qP({config:t}){return t.emulator?Cp(t,$P):`https://${t.authDomain}/${BP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="webStorageSupport";class HP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j1,this._completeRedirectFn=mP,this._overrideRedirectResult=hP}async _openPopup(e,n,r,i){var s;Hn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await kv(e,n,r,Oh(),i);return FP(e,o,Np())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await kv(e,n,r,Oh(),i);return Kb(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PP(e),r=new yP(e);return n.register("authEvent",i=>(ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fd,{type:fd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fd];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return E1()||g1()||kp()}}const WP=HP;var Rv="@firebase/auth",Nv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QP(t){di(new jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T1(t)},d=new Sb(r,i,s,u);return Ab(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),di(new jr("auth-internal",e=>{const n=ru(e.getProvider("auth").getImmediate());return(r=>new GP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vn(Rv,Nv,KP(t)),vn(Rv,Nv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=5*60,YP=hx("authIdTokenMaxAge")||JP;let Av=null;const XP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YP)return;const i=n==null?void 0:n.token;Av!==i&&(Av=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jv(t=Hf()){const e=Uc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Nb(t,{popupRedirectResolver:WP,persistence:[rP,Hb,j1]}),r=hx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=XP(s.toString());Bb(n,o,()=>o(n.currentUser)),Ub(n,c=>o(c))}}const i=cx("auth");return i&&jb(n,`http://${i}`),n}function ZP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Cb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=xn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ZP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QP("Browser");const _c={apiKey:"AIzaSyDnW41I_neRyhZpON7BATvRMtBPSQmA9ds",authDomain:"iiwata-onboarding-demo01.firebaseapp.com",projectId:"iiwata-onboarding-demo01",storageBucket:"iiwata-onboarding-demo01.firebasestorage.app",messagingSenderId:"904336590646",appId:"1:904336590646:web:4ebc30b2e3efeb85da1597",measurementId:"G-BR5RKSR8TH"},M1=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("172.31.");let no,il,sl,Ni;const e2=()=>{try{return no=ph(_c),console.log("Firebaseアプリ初期化成功"),Ni=jv(no),console.log("匿名認証を試みます"),Lb(Ni).then(()=>{console.log("匿名認証に成功しました")}).catch(t=>{console.error("匿名認証に失敗しました:",t)}),$b(Ni,t=>{t?console.log("認証状態: ログイン済み",t.uid):console.log("認証状態: 未ログイン")}),il=ov(no),sl=fv(no),{firebaseApp:no,firebaseAuth:Ni,firestoreDB:il,firebaseStorage:sl}}catch(t){if(t.code==="app/duplicate-app"){console.log("Firebaseはすでに初期化されています");try{const e=ph(_c,"secondary");return Ni=jv(e),il=ov(e),sl=fv(e),{firebaseApp:e,firebaseAuth:Ni,firestoreDB:il,firebaseStorage:sl}}catch(e){throw console.error("Secondary Firebase初期化エラー:",e),e}}else throw console.error("Firebase初期化エラー:",t),t}},{firebaseApp:L2,firebaseAuth:V2,firestoreDB:fn,firebaseStorage:ir}=e2();console.log(`Firebase環境: ${M1?"開発環境":"本番環境"}`);console.log(`FirebaseプロジェクトID: ${_c.projectId}`);console.log(`Firebaseストレージバケット: ${_c.storageBucket}`);const t2=({userName:t,daysUntilJoining:e})=>{const[n,r]=N.useState([]),[i,s]=N.useState(!0),[o,c]=N.useState(null),u=new Date,d=180*24*60*60*1e3;N.useEffect(()=>{(async()=>{try{s(!0);const I=dc(fn,"employees"),C=zw(I,qw("status","==","active"),Hw("join_date","desc")),A=await hc(C),b=[];for(const T of A.docs){const x=T.data(),S=T.id;if(x.join_date){const j=new Date(x.join_date),D=u-j;if(D>=0&&D<=d){let O=null;try{const v=ko(ir,`employee-photos/${S}.png`);O=await Io(v)}catch(v){console.log(`社員 ${S} の写真が見つかりません:`,v),O="/images/default_emp_icon.png"}b.push({empNo:S,full_name_local:x.full_name_local,join_date:x.join_date,division_code:x.division_code,days_since_joining:Math.floor(D/864e5),photoURL:O})}}}b.sort((T,x)=>new Date(x.join_date)-new Date(T.join_date)),r(b),s(!1)}catch(I){console.error("新入社員データの取得エラー:",I),c("新入社員データの取得に失敗しました。"),s(!1)}})()},[]);const f=m=>{const I={COR:"コーポレート本部",ENG:"エンジニアリング部門",PRJ:"プロジェクト部門",SLS:"セールス部門",BRD:"取締役会"},C=m==null?void 0:m.split("-")[0];return I[C]||m},g=m=>new Date(m).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"});return a.jsxs("div",{className:"welcome-container",children:[a.jsx("header",{className:"welcome-header",children:a.jsxs("h1",{children:["ようこそ、",t,"さん！"]})}),a.jsxs("main",{className:"welcome-main",children:[a.jsxs("div",{className:"card welcome-card",children:[a.jsx("img",{src:"/images/welcome-team.png",alt:"ウェルカムイメージ",className:"welcome-img"}),a.jsx("h2",{children:"あなたの入社を心待ちにしています！"}),a.jsx("p",{children:"一緒に準備を進めましょう。"}),a.jsx(ht,{to:"/dashboard",children:a.jsx("button",{className:"welcome-button",children:"はじめる"})})]}),a.jsxs("div",{className:"card new-employees-card",children:[a.jsx("h2",{children:"最近入社した新しい仲間たち"}),i?a.jsx("p",{children:"読み込み中..."}):o?a.jsx("p",{className:"error-message",children:o}):a.jsx("div",{className:"new-employees-grid",children:n.map(m=>a.jsxs("div",{className:"employee-card",children:[a.jsx("img",{src:m.photoURL,alt:`${m.full_name_local}の写真`,className:"employee-photo",onError:I=>{I.target.src="/images/default_emp_icon.png"}}),a.jsxs("div",{className:"employee-info",children:[a.jsx("h3",{children:m.full_name_local}),a.jsx("p",{className:"employee-division",children:f(m.division_code)}),a.jsxs("p",{className:"employee-join-date",children:["入社日: ",g(m.join_date)]}),a.jsxs("p",{className:"employee-days",children:[m.days_since_joining,"日前に入社"]})]})]},m.empNo))})]})]}),a.jsxs("footer",{className:"welcome-footer",children:["入社日まであと ",a.jsx("strong",{children:e})," 日です！"]})]})},n2=`
  .welcome-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .welcome-header {
    text-align: center;
    margin-bottom: 30px;
  }
  
  .welcome-main {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }
  
  .card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
  }
  
  .welcome-card {
    text-align: center;
  }
  
  .welcome-img {
    max-width: 100%;
    height: auto;
    margin-bottom: 20px;
    border-radius: 8px;
  }
  
  .welcome-button {
    background: #4285F4;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 15px;
  }
  
  .welcome-button:hover {
    background: #3367D6;
  }
  
  .new-employees-card h2 {
    margin-bottom: 20px;
    text-align: center;
  }
  
  .new-employees-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
  }
  
  .employee-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    border-radius: 8px;
    background: #f9f9f9;
    transition: transform 0.2s;
  }
  
  .employee-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }
  
  .employee-photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 15px;
    border: 3px solid white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }
  
  .employee-info {
    text-align: center;
    width: 100%;
  }
  
  .employee-info h3 {
    margin: 0 0 5px;
    font-size: 16px;
  }
  
  .employee-division {
    color: #666;
    font-size: 14px;
    margin: 5px 0;
    background: #e9f0fe;
    padding: 3px 8px;
    border-radius: 12px;
    display: inline-block;
  }
  
  .employee-join-date {
    font-size: 12px;
    color: #666;
    margin: 5px 0;
  }
  
  .employee-days {
    font-size: 12px;
    color: #4285F4;
    font-weight: bold;
    margin: 5px 0;
  }
  
  .welcome-footer {
    text-align: center;
    margin-top: 30px;
    padding: 15px;
    background: #f5f5f5;
    border-radius: 8px;
  }
  
  .error-message {
    color: #F44336;
    text-align: center;
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.innerHTML=n2,document.head.appendChild(t)}const r2=({daysUntilJoining:t,toggleJoiningStatus:e})=>{const{progress:n,calculateTotalProgress:r,resetProgress:i}=Mc(),s=r(),[o,c]=N.useState(!1);N.useEffect(()=>{c(t<=0)},[t]);const u=()=>{window.confirm("進捗状況をリセットしますか？この操作は元に戻せません。")&&i()};return a.jsxs("div",{children:[a.jsx("header",{children:a.jsx("h1",{children:o?"オンボーディングダッシュボード":"入社準備ダッシュボード"})}),a.jsx("main",{children:o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"デイリーチェックイン・チェックアウト"}),a.jsx("p",{children:"毎日の気分や状況を共有しましょう。"}),a.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"15px"},children:[a.jsx(ht,{to:"/morning-checkin",children:a.jsx("button",{style:{backgroundColor:"#4285f4"},children:"朝のチェックイン"})}),a.jsx(ht,{to:"/evening-checkout",children:a.jsx("button",{style:{backgroundColor:"#34a853"},children:"夕方のチェックアウト"})})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"週次サーベイ"}),a.jsx("p",{children:"週に一度、オンボーディングに関するフィードバックをお願いします。"}),a.jsx(ht,{to:"/weekly-survey",children:a.jsx("button",{style:{backgroundColor:"#673ab7"},children:"サーベイに回答する"})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"人事への質問・お問い合わせ"}),a.jsx("p",{children:"気になることはお気軽にご質問ください。"}),a.jsx(ht,{to:"/question",children:a.jsx("button",{children:"質問する"})})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card progress-overview",children:[a.jsx("h3",{children:"入社準備の進捗"}),a.jsx("div",{className:"progress-bar-container",children:a.jsx("div",{className:"progress-bar",style:{width:`${s}%`}})}),a.jsxs("div",{className:"progress-text",children:[s,"% 完了"]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"入社までにご確認頂くこと"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsxs("span",{children:["規定・書類の確認（",n.documents.completed,"/",n.documents.total,"件）"]}),a.jsx(ht,{to:"/documents",children:a.jsx("button",{className:"float-right",children:"＞"})})]}),a.jsxs("li",{children:[a.jsx("span",{children:"入社日に持参するもの"}),a.jsx(ht,{to:"/items",children:a.jsx("button",{className:"float-right",children:"＞"})})]}),a.jsxs("li",{children:[a.jsx("span",{children:"社員からのメッセージ"}),a.jsx(ht,{to:"/messages",children:a.jsx("button",{className:"float-right",children:"＞"})})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"人事への質問・お問い合わせ"}),a.jsx("p",{children:"気になることはお気軽にご質問ください。"}),a.jsx(ht,{to:"/question",children:a.jsx("button",{children:"質問する"})})]})]})}),a.jsxs("footer",{children:[o?a.jsx(a.Fragment,{children:"入社おめでとうございます！"}):a.jsxs(a.Fragment,{children:["入社日まであと ",a.jsx("strong",{children:t})," 日です！",s>0&&a.jsx("button",{className:"reset-button",onClick:u,title:"進捗状況をリセットします",children:"進捗をリセット"})]}),a.jsx("div",{style:{marginTop:"5px",textAlign:"right",paddingRight:"10px"},children:a.jsx("button",{onClick:e,style:{padding:"2px 4px",backgroundColor:"transparent",border:"1px solid rgba(221, 221, 221, 0.3)",borderRadius:"2px",cursor:"pointer",fontSize:"8px",color:"rgba(153, 153, 153, 0.5)",opacity:.5,boxShadow:"none",outline:"none"},children:"切替"})})]})]})},i2=({daysUntilJoining:t})=>{const[e,n]=N.useState(1),r=4,i=je(),{progress:s,markItemCompleted:o,markCategoryCompleted:c}=Mc(),u=s.documents.items[e-1],d=u&&u.completed,f=[{title:"就業規則",content:"この会社で勤務するにあたっての基本的なルールや働き方のガイドラインについて記載されています。よく確認してください。",pdfUrl:"/documents/rule_general.pdf"},{title:"リモートワーク規定",content:"リモートワークに関するルールや実施方法について記載されています。よく確認してください。",pdfUrl:"/documents/rule_remotework.pdf"},{title:"秘密保持契約書",content:"会社の機密情報の取り扱いについて定めています。内容をよく理解した上で入社時に署名していただきます。",pdfUrl:"/documents/nda.pdf"},{title:"個人情報の取り扱いに関する同意書",content:"当社が収集する個人情報の種類、利用目的、管理方法などについて記載されています。内容をよく確認してください。",pdfUrl:"/documents/personalinfo_agreement.pdf"}],g=()=>{e<r?n(e+1):i("/dashboard")},m=()=>{e>1?n(e-1):i("/dashboard")};return a.jsxs("div",{children:[a.jsx("header",{children:a.jsxs("h1",{children:["規定・書類の確認 (",e,"/",r,")"]})}),a.jsxs("main",{children:[a.jsxs("div",{className:"nav",children:[a.jsx("button",{onClick:m,children:"戻る"}),a.jsx("button",{onClick:g,children:"次へ"})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:f[e-1].title}),a.jsx("p",{children:f[e-1].content}),a.jsx("div",{className:"pdf-viewer",children:a.jsx("object",{data:f[e-1].pdfUrl,type:"application/pdf",width:"100%",height:"500px",children:a.jsxs("p",{children:["PDFを表示できません。 ",a.jsx("a",{href:f[e-1].pdfUrl,target:"_blank",rel:"noopener noreferrer",children:"こちら"}),"から開いてください。"]})})})]}),d?a.jsxs("div",{className:"completed-status",children:[u.completedAt," に確認済み"]}):a.jsx("button",{className:"full-width",onClick:()=>{o("documents",`doc${e}`),g()},children:"確認しました"})]}),a.jsxs("footer",{children:["入社日まであと ",a.jsx("strong",{children:t})," 日です！"]})]})},s2=({daysUntilJoining:t})=>{const{progress:e,markCategoryCompleted:n}=Mc(),r=e.items.completed===e.items.total,i=r?e.items.items.find(o=>o.completed):null,s=[{title:"人事関係",items:["健康診断個人票","健康診断の領収書","パスポート・在留カード（外国人むけ）"]},{title:"給与関係",items:["年金手帳","雇用（失業保険）保険被保険者証","扶養控除等申請書","源泉徴収票","住民税の特別徴収にかかる異動届"]}];return a.jsxs("div",{children:[a.jsx("header",{children:a.jsx("h1",{children:"入社日に持参するもの"})}),a.jsxs("main",{children:[a.jsx("div",{className:"nav",children:a.jsx(ht,{to:"/dashboard",children:a.jsx("button",{children:"戻る"})})}),s.map((o,c)=>a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:o.title}),a.jsx("ol",{className:"items-list",children:o.items.map((u,d)=>a.jsx("li",{children:u},d))})]},c)),a.jsx("div",{className:"card",children:a.jsxs("p",{className:"note",children:[a.jsx("strong",{children:"注意事項："})," 上記の書類は入社日当日に必要となります。 忘れずに持参してください。書類に不備がある場合、手続きが遅れる可能性があります。"]})}),r?a.jsxs("div",{className:"completed-status",children:[i&&i.completedAt," に確認済み",a.jsx(ht,{to:"/dashboard",children:a.jsx("button",{className:"secondary-button mt-10",children:"ダッシュボードに戻る"})})]}):a.jsx(ht,{to:"/dashboard",children:a.jsx("button",{className:"full-width",onClick:()=>n("items"),children:"確認しました"})})]}),a.jsxs("footer",{children:["入社日まであと ",a.jsx("strong",{children:t})," 日です！"]})]})},o2=({daysUntilJoining:t})=>{const{progress:e,markItemCompleted:n,markCategoryCompleted:r}=Mc(),[i,s]=N.useState({}),[o,c]=N.useState({}),[u,d]=N.useState(null),f=[{name:"吉村 和夫",position:"第二技術三課 マネージャー",preview:"渡辺さん、いよいよですね。チーム全員で入社をお待ちしています！",full:"渡辺さん、いよいよですね。チーム全員で入社をお待ちしています！",image:"/images/1056.png",short:!0},{name:"西尾 道夫",position:"第二技術部 部長",preview:"渡辺さん、ご入社まで後少しですね。いかがお過ごしですか？...",full:"渡辺さん、ご入社まで後少しですね。いかがお過ごしですか？<br>面接で伺った、技術への興味を、ご入社後も持ち続けて頂いて、より幅広いエンジニアとして活躍して頂けることを楽しみにしています。<br>第二技術部全体で、ご入社を歓迎します！",image:"/images/1019.png",short:!1},{name:"鈴木 清",position:"エンジニアリング本部 本部長",preview:"渡辺さん、初めまして、鈴木と申します。...",full:"渡辺さん、初めまして、鈴木と申します。<br>エンジニアリング本部のメンバーとしてJoinいただけるのを心待ちにしています。<br>普段はフロアをうろうろしていますので、見かけたら気軽にお声かけくださいね！<br>私も、お見かけしたらお声かけしますので、逃げないでくださいね（笑）。<br><br>元気にご入社頂けるのを、楽しみにしています！",image:"/images/1032.png",short:!1}];N.useEffect(()=>{const T={};f.forEach((x,S)=>{T[S]={icon:"👍",text:"いいね！",active:!1}}),c(T)},[]);const g=T=>{s(x=>({...x,[T]:!x[T]})),n("messages",`msg${T+1}`)},m=(T,x)=>{x&&d(T)},I=()=>{d(null)},C=(T,x,S)=>{c(j=>({...j,[T]:{icon:x,text:S,active:!0}})),d(null),n("messages",`msg${T+1}`)},A=T=>{c(x=>({...x,[T]:{...x[T],active:!x[T].active}})),n("messages",`msg${T+1}`)},b=()=>{window.history.back()};return a.jsxs("div",{className:"messages-page",children:[a.jsx("div",{className:"header",children:"社員からのメッセージ"}),a.jsxs("div",{className:"content",children:[f.map((T,x)=>{var S,j,D;return a.jsxs("div",{className:`message-container ${i[x]?"expanded":""} ${T.short?"message-short":""}`,children:[a.jsxs("div",{className:"profile-section",children:[a.jsx("img",{src:T.image,alt:`${T.name}の写真`,className:"profile-image",onError:O=>{O.target.onerror=null,O.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Ccircle cx='30' cy='30' r='30' fill='%23ddd'/%3E%3Ccircle cx='30' cy='25' r='8' fill='%23999'/%3E%3Cpath d='M15 45c0-8 7-12 15-12s15 4 15 12' fill='%23999'/%3E%3C/svg%3E"}}),a.jsxs("div",{className:"profile-info",children:[a.jsx("div",{className:"name",children:T.name}),a.jsx("div",{className:"position",children:T.position}),a.jsxs("div",{className:"message-content",onClick:()=>g(x),children:[a.jsx("div",{className:"message-preview",style:{display:i[x]?"none":"block"},children:T.preview}),a.jsx("div",{className:"message-full",style:{display:i[x]?"block":"none"},dangerouslySetInnerHTML:{__html:T.full}})]}),a.jsxs("div",{className:"reaction-container",style:{display:i[x]||T.short?"block":"none"},children:[a.jsxs("button",{className:`like-button ${(S=o[x])!=null&&S.active?"liked":""}`,onClick:()=>A(x),onMouseEnter:()=>m(x,!0),onMouseLeave:()=>m(x,!1),children:[a.jsx("span",{className:"reaction-icon",children:(j=o[x])==null?void 0:j.icon}),a.jsx("span",{className:"reaction-text",children:(D=o[x])==null?void 0:D.text})]}),a.jsxs("div",{className:`reaction-popup ${u===x?"show":""}`,onMouseEnter:()=>d(x),onMouseLeave:I,children:[a.jsx("button",{className:"reaction-option",onClick:()=>C(x,"👍","いいね！"),title:"いいね",children:"👍"}),a.jsx("button",{className:"reaction-option",onClick:()=>C(x,"❤️","超いいね！"),title:"超いいね",children:"❤️"}),a.jsx("button",{className:"reaction-option",onClick:()=>C(x,"😊","うれしいね"),title:"うれしいね",children:"😊"}),a.jsx("button",{className:"reaction-option",onClick:()=>C(x,"😮","すごいね"),title:"すごいね",children:"😮"}),a.jsx("button",{className:"reaction-option",onClick:()=>C(x,"👏","おめでとう"),title:"おめでとう",children:"👏"})]})]})]})]}),a.jsx("div",{className:"expand-icon",onClick:()=>g(x),children:"＞"})]},x)}),a.jsx("button",{className:"back-button",onClick:b,children:"戻る"})]}),a.jsxs("div",{className:"footer",children:["入社日まであと ",a.jsx("strong",{children:t})," 日です！"]})]})},a2=({daysUntilJoining:t})=>{const[e,n]=N.useState(""),[r,i]=N.useState("form");je();const s=[{name:"原田 一郎",position:"第一営業二課 マネージャー",image:"/images/1085.png"},{name:"野村 育子",position:"第一営業部 部長",image:"/images/1012.png"},{name:"小林 美樹",position:"営業本部 本部長",image:"/images/1057.png"}],o=g=>{g.preventDefault(),i("confirm")},c=()=>{i("complete")},u=()=>a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"感謝のメッセージを送る"}),a.jsx("p",{className:"note",children:"以下の方々全員にメッセージが送信されます："}),a.jsx("div",{className:"recipients-list",children:s.map((g,m)=>a.jsxs("div",{className:"recipient-item",children:[a.jsx("img",{src:g.image,alt:g.name,className:"recipient-avatar"}),a.jsxs("div",{children:[a.jsx("div",{className:"recipient-name",children:g.name}),a.jsx("div",{className:"recipient-position",children:g.position})]})]},m))}),a.jsxs("form",{onSubmit:o,children:[a.jsx("label",{htmlFor:"message",children:"メッセージ"}),a.jsx("textarea",{id:"message",rows:"5",placeholder:"感謝のメッセージを入力してください",value:e,onChange:g=>n(g.target.value),required:!0}),a.jsx("button",{type:"submit",className:"full-width",children:"確認する"})]})]}),d=()=>a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"メッセージの確認"}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("strong",{children:"宛先："}),a.jsxs("p",{children:[s.map(g=>g.name).join("、")," 宛"]})]}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("strong",{children:"メッセージ内容："}),a.jsx("p",{style:{whiteSpace:"pre-wrap"},children:e})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{onClick:()=>i("form"),className:"secondary-button",children:"戻る"}),a.jsx("button",{onClick:c,className:"primary-button",children:"送信する"})]})]}),f=()=>a.jsxs("div",{className:"card completion-card",children:[a.jsx("div",{className:"checkmark",children:"✓"}),a.jsx("h3",{children:"メッセージを送信しました"}),a.jsx("p",{children:"あなたの感謝の気持ちが伝わりました。"}),a.jsx(ht,{to:"/completion",children:a.jsx("button",{className:"full-width",children:"入社準備を完了する"})})]});return a.jsxs("div",{children:[a.jsx("header",{children:a.jsx("h1",{children:"感謝の返信"})}),a.jsxs("main",{children:[r==="form"&&u(),r==="confirm"&&d(),r==="complete"&&f()]}),a.jsxs("footer",{children:["入社日まであと ",a.jsx("strong",{children:t})," 日です！"]})]})},l2=({daysUntilJoining:t})=>{const[e,n]=N.useState(""),[r,i]=N.useState(""),[s,o]=N.useState("form"),c=je(),u=C=>{C.preventDefault(),o("confirm")},d=()=>{o("complete")},f=()=>{c("/dashboard")},g=()=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card faq",children:[a.jsx("h4",{children:"よくある質問"}),a.jsxs("div",{className:"faq-item",children:[a.jsx("strong",{children:"Q."})," 服装はどのようなものが望ましいですか？",a.jsx("br",{}),a.jsx("strong",{children:"A."})," ビジネスカジュアルでお願いします。"]}),a.jsxs("div",{className:"faq-item",children:[a.jsx("strong",{children:"Q."})," 出社初日の持ち物はありますか？",a.jsx("br",{}),a.jsx("strong",{children:"A."})," 身分証明書と銀行口座情報をお持ちください。"]})]}),a.jsxs("form",{onSubmit:u,className:"card",children:[a.jsx("h4",{children:"質問フォーム"}),a.jsx("label",{htmlFor:"subject",children:"件名"}),a.jsx("input",{type:"text",id:"subject",placeholder:"件名を入力",value:e,onChange:C=>n(C.target.value),required:!0}),a.jsx("label",{htmlFor:"content",children:"質問内容"}),a.jsx("textarea",{id:"content",rows:"5",placeholder:"質問内容を入力",value:r,onChange:C=>i(C.target.value),required:!0}),a.jsx("button",{type:"submit",className:"full-width",children:"送信する"})]})]}),m=()=>a.jsxs("div",{className:"card",children:[a.jsx("h4",{children:"入力内容の確認"}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("strong",{children:"件名："}),a.jsx("p",{children:e})]}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("strong",{children:"質問内容："}),a.jsx("p",{style:{whiteSpace:"pre-wrap"},children:r})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{onClick:()=>o("form"),className:"secondary-button",children:"戻る"}),a.jsx("button",{onClick:d,className:"primary-button",children:"送信"})]})]}),I=()=>a.jsxs("div",{className:"card completion-card",children:[a.jsx("div",{className:"checkmark",children:"✓"}),a.jsx("h3",{children:"送信しました"}),a.jsx("p",{children:"質問を受け付けました。回答をお待ちください。"}),a.jsx("button",{onClick:f,className:"full-width",children:"ホームへ戻る"})]});return a.jsxs("div",{children:[a.jsx("header",{children:a.jsx("h1",{children:"人事への質問・お問い合わせ"})}),a.jsxs("main",{children:[s==="form"&&g(),s==="confirm"&&m(),s==="complete"&&I()]}),a.jsxs("footer",{children:["入社日まであと ",a.jsx("strong",{children:t})," 日です！"]})]})},c2=({daysUntilJoining:t})=>a.jsxs("div",{children:[a.jsx("header",{children:a.jsx("h1",{children:"入社準備完了！"})}),a.jsx("main",{children:a.jsxs("div",{className:"card completion-card",children:[a.jsx("div",{className:"checkmark",children:"✔︎"}),a.jsx("h2",{children:"全ての準備が整いました！"}),a.jsxs("p",{children:["入社日まであと",a.jsx("strong",{children:t}),"日です！",a.jsx("br",{}),"私たちも楽しみに待っています！"]}),a.jsx(ht,{to:"/dashboard",children:a.jsx("button",{className:"welcome-button",children:"ホームに戻る"})})]})}),a.jsx("footer",{children:"ご不明点はお気軽に人事までご連絡ください。"})]}),u2=()=>{const t=je(),[e,n]=N.useState(1),[r,i]=N.useState(""),[s,o]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState(""),[g,m]=N.useState(0);N.useEffect(()=>{if(g>0){const j=setTimeout(()=>m(g-1),1e3);return()=>clearTimeout(j)}},[g]);const I=j=>String(j).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),C=()=>"987654",A=(j,D)=>(console.log(`送信先: ${j}, OTP: ${D}`),!0),b=j=>{if(j.preventDefault(),f(""),!I(r)){f("正しいメールアドレスを入力してください"),i("");return}if(r.toLowerCase()!=="iiwata@gmail.com"){f("登録されていないメールアドレスです"),i("");return}const D=C();u(D),A(r,D),n(2),m(300)},T=j=>{j.preventDefault(),f(""),s===c?t("/welcome"):f("OTPが正しくありません。もう一度お試しください。")},x=()=>{if(g>0)return;const j=C();u(j),A(r,j),m(300),f("")},S=()=>{const j=Math.floor(g/60),D=g%60;return`${j}:${D<10?"0":""}${D}`};return a.jsx("div",{className:"container",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h2",{children:"WellCo オンボーディング"})}),a.jsx("div",{className:"card-body",children:e===1?a.jsxs("form",{onSubmit:b,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("h3",{children:"メールアドレスを入力してください"}),a.jsx("p",{children:"登録されているメールアドレスにワンタイムパスワードを送信します。"}),a.jsx("input",{type:"email",value:r,onChange:j=>i(j.target.value),placeholder:"メールアドレス",required:!0,className:"form-control"})]}),d&&a.jsx("div",{className:"error-message",children:d}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"ワンタイムパスワードを送信"})]}):a.jsxs("form",{onSubmit:T,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("h3",{children:"ワンタイムパスワードを入力してください"}),a.jsxs("p",{children:[r," に6桁のワンタイムパスワードを送信しました。",a.jsx("br",{}),"メールに記載されたコードを入力してください。"]}),a.jsxs("p",{className:"demo-note",children:[a.jsx("strong",{children:"デモ用注意:"})," ワンタイムパスワードは ",a.jsx("strong",{children:"987654"})," です。"]}),a.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"6桁のコード",maxLength:6,required:!0,className:"form-control otp-input"}),a.jsx("div",{className:"countdown",children:g>0?a.jsxs("span",{children:["有効期限: ",S()]}):a.jsx("span",{className:"expired",children:"有効期限が切れました"})})]}),d&&a.jsx("div",{className:"error-message",children:d}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",onClick:()=>n(1),className:"btn btn-secondary",children:"戻る"}),a.jsx("button",{type:"button",onClick:x,className:`btn btn-outline ${g>0?"disabled":""}`,disabled:g>0,children:"再送信"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g===0,children:"確認"})]})]})}),a.jsx("div",{className:"card-footer",children:a.jsx("p",{children:"© 2025 WellCo. All rights reserved."})})]})})},d2=()=>{const[t,e]=N.useState(null),[n,r]=N.useState(null),[i,s]=N.useState(""),o=je(),c=f=>{e(f)},u=f=>{r(f)},d=()=>{if(!t||!n){s("回答されていません");return}s("");const f={type:"morning_checkin",mood:t,feeling:n,timestamp:new Date().toISOString()};console.log("朝のチェックインデータ:",f),localStorage.setItem("morningCheckin",JSON.stringify(f)),o("/morning-thanks")};return a.jsx("div",{className:"container",style:ut.container,children:a.jsxs("div",{className:"card",style:ut.card,children:[a.jsx("div",{className:"card-header",style:ut.cardHeader,children:"朝のチェックイン"}),a.jsxs("div",{className:"card-body",style:ut.cardBody,children:[a.jsx("div",{className:"question",style:ut.question,children:"今朝の気分は？"}),a.jsx("div",{className:"emoji-buttons",style:ut.emojiButtons,children:["😄","😊","😐","🙁","😣"].map(f=>a.jsx("button",{className:`emoji-button ${t===f?"selected":""}`,style:{...ut.emojiButton,...t===f?ut.selectedEmojiButton:{}},onClick:()=>c(f),children:f},f))}),a.jsx("div",{className:"question",style:ut.question,children:"今日最も当てはまるものは？"}),a.jsx("div",{className:"option-buttons",style:ut.optionButtons,children:["新しいことを学ぶことに期待している","同僚との交流を楽しみにしている","業務について少し不安がある"].map(f=>a.jsxs("button",{className:`option-button ${n===f?"selected":""}`,style:{...ut.optionButton,...n===f?ut.selectedOptionButton:{}},onClick:()=>u(f),children:[n===f?"☑️ ":"",a.jsx("span",{style:{fontWeight:n===f?"bold":"normal"},children:f})]},f))}),i&&a.jsx("div",{style:ut.errorMessage,children:i}),a.jsx("button",{className:"submit-button",style:ut.submitButton,onClick:d,children:"送信"})]}),a.jsx("div",{className:"footer",style:ut.footer,children:a.jsx("a",{href:"#",className:"nav-link",style:ut.navLink,onClick:f=>{f.preventDefault(),o("/evening-checkout")},children:"夕方のチェックアウトへ →"})})]})})},ut={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"30px"},question:{marginBottom:"25px",color:"#202124",fontSize:"18px",fontWeight:"500"},emojiButtons:{display:"flex",justifyContent:"space-between",marginBottom:"40px"},emojiButton:{width:"55px",height:"55px",borderRadius:"50%",border:"2px solid #4285f4",backgroundColor:"white",fontSize:"28px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",transition:"transform 0.2s, background-color 0.2s"},selectedEmojiButton:{backgroundColor:"#e8f0fe",transform:"scale(1.05)",borderWidth:"3px"},optionButtons:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"30px"},optionButton:{padding:"14px 16px",borderRadius:"20px",border:"1px solid #4285f4",textAlign:"left",cursor:"pointer",fontSize:"16px",color:"#4285f4",backgroundColor:"#f0f0f0",transition:"all 0.2s"},selectedOptionButton:{borderWidth:"3px"},submitButton:{display:"block",width:"160px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"18px",margin:"30px auto 0",cursor:"pointer",transition:"background-color 0.2s"},footer:{marginTop:"20px",textAlign:"center",paddingBottom:"20px"},navLink:{color:"#4285f4",textDecoration:"none",fontSize:"14px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},h2=()=>{const[t,e]=N.useState(5),[n,r]=N.useState(null),[i,s]=N.useState(""),o=je();N.useEffect(()=>{try{const f=JSON.parse(localStorage.getItem("morningCheckin"));f&&f.mood&&console.log("今朝の気分:",f.mood)}catch(f){console.error("朝のデータの読み込みエラー:",f)}},[]);const c=f=>{e(f.target.value)},u=f=>{r(f)},d=()=>{if(!n){s("回答されていません");return}s("");const f={type:"evening_checkout",satisfaction:t,experience:n,timestamp:new Date().toISOString()};console.log("夕方のチェックアウトデータ:",f),localStorage.setItem("eveningCheckout",JSON.stringify(f)),o("/evening-thanks")};return a.jsx("div",{className:"container",style:dt.container,children:a.jsxs("div",{className:"card",style:dt.card,children:[a.jsx("div",{className:"card-header",style:dt.cardHeader,children:"夕方のチェックアウト"}),a.jsxs("div",{className:"card-body",style:dt.cardBody,children:[a.jsx("div",{className:"question",style:dt.question,children:"今日の充実度は？"}),a.jsxs("div",{className:"slider-container",style:dt.sliderContainer,children:[a.jsx("input",{type:"range",min:"1",max:"10",value:t,className:"slider",id:"satisfaction-slider",style:dt.slider,onChange:c}),a.jsxs("div",{className:"slider-labels",style:dt.sliderLabels,children:[a.jsx("span",{children:"あまり充実していなかった"}),a.jsx("span",{children:"非常に充実していた"})]})]}),a.jsx("div",{className:"question",style:dt.question,children:"今日最も当てはまることは？"}),a.jsx("div",{className:"option-buttons",style:dt.optionButtons,children:["新しいことを学べた","チームの一員と感じられた","サポートが必要だと感じた"].map(f=>a.jsxs("button",{className:`option-button ${n===f?"selected":""}`,style:{...dt.optionButton,...n===f?dt.selectedOptionButton:{}},onClick:()=>u(f),children:[n===f?"☑️ ":"",a.jsx("span",{style:{fontWeight:n===f?"bold":"normal"},children:f})]},f))}),i&&a.jsx("div",{style:dt.errorMessage,children:i}),a.jsx("button",{className:"submit-button",style:dt.submitButton,onClick:d,children:"送信"})]}),a.jsx("div",{className:"footer",style:dt.footer,children:a.jsx("a",{href:"#",className:"nav-link",style:dt.navLink,onClick:f=>{f.preventDefault(),o("/morning-checkin")},children:"← 朝のチェックインへ"})})]})})},dt={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"30px"},question:{marginBottom:"25px",color:"#202124",fontSize:"18px",fontWeight:"500"},sliderContainer:{marginBottom:"40px"},slider:{WebkitAppearance:"none",width:"100%",height:"8px",borderRadius:"4px",background:"#e0e0e0",outline:"none",marginBottom:"15px"},sliderLabels:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#5f6368"},optionButtons:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"30px"},optionButton:{padding:"14px 16px",borderRadius:"20px",border:"1px solid #34a853",textAlign:"left",cursor:"pointer",fontSize:"16px",color:"#34a853",backgroundColor:"#f0f0f0",transition:"all 0.2s"},selectedOptionButton:{borderWidth:"3px"},submitButton:{display:"block",width:"160px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"18px",margin:"30px auto 0",cursor:"pointer",transition:"background-color 0.2s"},footer:{marginTop:"20px",textAlign:"center",paddingBottom:"20px"},navLink:{color:"#34a853",textDecoration:"none",fontSize:"14px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},f2=()=>{const t=je();return a.jsx("div",{className:"container",style:Ai.container,children:a.jsxs("div",{className:"card",style:Ai.card,children:[a.jsx("div",{className:"card-header",style:Ai.cardHeader,children:"朝のチェックイン"}),a.jsxs("div",{className:"card-body",style:Ai.cardBody,children:[a.jsxs("div",{className:"thank-you-message",style:Ai.thankYouMessage,children:["回答ありがとうございます。",a.jsx("br",{}),"今日も良い１日にしていきましょう！"]}),a.jsx("button",{className:"close-button",style:Ai.backButton,onClick:()=>t("/dashboard"),children:"閉じる"})]})]})})},Ai={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"40px 30px",display:"flex",flexDirection:"column",alignItems:"center"},thankYouMessage:{fontSize:"20px",fontWeight:"500",color:"#4285f4",textAlign:"center",marginBottom:"40px",lineHeight:"1.6"},backButton:{display:"block",width:"200px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#4285f4",color:"white",textAlign:"center",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},p2=()=>{const t=je();return a.jsx("div",{className:"container",style:ji.container,children:a.jsxs("div",{className:"card",style:ji.card,children:[a.jsx("div",{className:"card-header",style:ji.cardHeader,children:"夕方のチェックアウト"}),a.jsxs("div",{className:"card-body",style:ji.cardBody,children:[a.jsxs("div",{className:"thank-you-message",style:ji.thankYouMessage,children:["回答ありがとうございます。",a.jsx("br",{}),"今日もお疲れ様でした！"]}),a.jsx("button",{className:"close-button",style:ji.backButton,onClick:()=>t("/dashboard"),children:"閉じる"})]})]})})},ji={container:{display:"flex",justifyContent:"center",width:"100%",maxWidth:"500px",margin:"0 auto",padding:"20px"},card:{width:"100%",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden"},cardHeader:{padding:"20px",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"22px",fontWeight:"500"},cardBody:{padding:"40px 30px",display:"flex",flexDirection:"column",alignItems:"center"},thankYouMessage:{fontSize:"20px",fontWeight:"500",color:"#34a853",textAlign:"center",marginBottom:"40px",lineHeight:"1.6"},backButton:{display:"block",width:"200px",padding:"14px",borderRadius:"24px",border:"none",backgroundColor:"#34a853",color:"white",textAlign:"center",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},m2=()=>{const t=je(),[e,n]=N.useState(1),r=8,[i,s]=N.useState(null),[o,c]=N.useState(null),[u,d]=N.useState(null),[f,g]=N.useState(null),[m,I]=N.useState(""),[C,A]=N.useState(null),[b,T]=N.useState(null),[x,S]=N.useState(""),[j,D]=N.useState(""),[O,v]=N.useState(""),y=Math.round(e/r*100),_=()=>{if(e===1&&i===null){v("回答を選択してください");return}if(e===2&&o===null){v("回答を選択してください");return}if(e===3&&u===null){v("回答を選択してください");return}if(e===4&&f===null){v("回答を選択してください");return}if(e===4&&f==="yes"&&m===""){v("学びの種類を選択してください");return}if(e===5&&C===null){v("回答を選択してください");return}if(e===6&&b===null){v("回答を選択してください");return}v(""),e<r&&n(e+1)},k=()=>{e>1&&(n(e-1),v(""))},E=()=>{const G={overallSatisfaction:i,taskClarity:o,managerSupport:u,newLearning:f,learningType:f==="yes"?m:null,concernLevel:C,selfPerformance:b,memorableEvent:x,otherComments:j,timestamp:new Date().toISOString(),weekNumber:P()};console.log("Weekly Survey Data:",G);const Ie=JSON.parse(localStorage.getItem("weeklySurveys")||"[]");Ie.push(G),localStorage.setItem("weeklySurveys",JSON.stringify(Ie)),t("/weekly-survey-thanks")},P=()=>{const G=new Date,Ie=new Date(G.getFullYear(),0,1);return Math.ceil(((G.getTime()-Ie.getTime())/864e5+Ie.getDay()+1)/7)},R=()=>{switch(e){case 1:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"今週のオンボーディング全体の満足度を教えてください"}),a.jsx("div",{style:z.likertContainer,children:[1,2,3,4,5].map(G=>a.jsxs("div",{style:{...z.likertOption,...i===G?z.selectedLikertOption:{}},onClick:()=>s(G),children:[a.jsx("div",{style:z.likertNumber,children:G}),a.jsx("div",{style:z.likertLabel,children:G===1?"非常に不満":G===2?"不満":G===3?"どちらともいえない":G===4?"満足":"非常に満足"})]},G))})]});case 2:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"今週取り組んだ業務内容は明確でしたか？"}),a.jsx("div",{style:z.likertContainer,children:[1,2,3,4,5].map(G=>a.jsxs("div",{style:{...z.likertOption,...o===G?z.selectedLikertOption:{}},onClick:()=>c(G),children:[a.jsx("div",{style:z.likertNumber,children:G}),a.jsx("div",{style:z.likertLabel,children:G===1?"全く不明確":G===2?"不明確":G===3?"どちらともいえない":G===4?"明確":"非常に明確"})]},G))})]});case 3:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"マネージャー／メンターからのサポートを実感できましたか？"}),a.jsx("div",{style:z.likertContainer,children:[1,2,3,4,5].map(G=>a.jsxs("div",{style:{...z.likertOption,...u===G?z.selectedLikertOption:{}},onClick:()=>d(G),children:[a.jsx("div",{style:z.likertNumber,children:G}),a.jsx("div",{style:z.likertLabel,children:G===1?"全く感じない":G===2?"あまり感じない":G===3?"どちらともいえない":G===4?"感じる":"非常に感じる"})]},G))})]});case 4:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"今週、新しく学んだこと・得た気づきはありますか？"}),a.jsxs("div",{style:z.binaryOptions,children:[a.jsx("div",{style:{...z.binaryOption,...f==="yes"?z.selectedBinaryOption:{}},onClick:()=>g("yes"),children:"有"}),a.jsx("div",{style:{...z.binaryOption,...f==="no"?z.selectedBinaryOption:{}},onClick:()=>g("no"),children:"無"})]}),f==="yes"&&a.jsxs("div",{style:z.dropdownContainer,children:[a.jsx("label",{style:z.dropdownLabel,children:"どのような学びでしたか？"}),a.jsxs("select",{style:z.dropdown,value:m,onChange:G=>I(G.target.value),children:[a.jsx("option",{value:"",children:"選択してください"}),a.jsx("option",{value:"knowledge",children:"知識"}),a.jsx("option",{value:"skill",children:"スキル"}),a.jsx("option",{value:"organization",children:"組織理解"}),a.jsx("option",{value:"other",children:"その他"})]})]})]});case 5:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"今週の業務や職場環境に対して、どの程度不安やモヤモヤを感じましたか？"}),a.jsxs("div",{style:z.emojiContainer,children:[a.jsxs("div",{style:{...z.emojiOption,...C==="none"?z.selectedEmojiOption:{}},onClick:()=>A("none"),children:[a.jsx("div",{style:z.emoji,children:"😃"}),a.jsx("div",{style:z.emojiLabel,children:"問題なし"})]}),a.jsxs("div",{style:{...z.emojiOption,...C==="slight"?z.selectedEmojiOption:{}},onClick:()=>A("slight"),children:[a.jsx("div",{style:z.emoji,children:"😐"}),a.jsx("div",{style:z.emojiLabel,children:"やや気になる"})]}),a.jsxs("div",{style:{...z.emojiOption,...C==="moderate"?z.selectedEmojiOption:{}},onClick:()=>A("moderate"),children:[a.jsx("div",{style:z.emoji,children:"😟"}),a.jsx("div",{style:z.emojiLabel,children:"かなり気になる"})]}),a.jsxs("div",{style:{...z.emojiOption,...C==="severe"?z.selectedEmojiOption:{}},onClick:()=>A("severe"),children:[a.jsx("div",{style:z.emoji,children:"😰"}),a.jsx("div",{style:z.emojiLabel,children:"非常に不安"})]}),a.jsxs("div",{style:{...z.emojiOption,...C==="unknown"?z.selectedEmojiOption:{}},onClick:()=>A("unknown"),children:[a.jsx("div",{style:z.emoji,children:"❓"}),a.jsx("div",{style:z.emojiLabel,children:"どちらともいえない・その他"})]})]})]});case 6:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"あなた自身の1週間のパフォーマンスを自己評価してください"}),a.jsx("div",{style:z.likertContainer,children:[1,2,3,4,5].map(G=>a.jsxs("div",{style:{...z.likertOption,...b===G?z.selectedLikertOption:{}},onClick:()=>T(G),children:[a.jsx("div",{style:z.likertNumber,children:G}),a.jsx("div",{style:z.likertLabel,children:G===1?"全く発揮できなかった":G===2?"あまり発揮できなかった":G===3?"どちらともいえない":G===4?"発揮できた":"十分に発揮できた"})]},G))})]});case 7:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"今週、最も印象に残った出来事や課題は何ですか？（任意）"}),a.jsx("textarea",{style:z.textArea,value:x,onChange:G=>S(G.target.value),placeholder:"自由に記入してください",rows:5})]});case 8:return a.jsxs("div",{style:z.questionContainer,children:[a.jsx("h3",{style:z.questionTitle,children:"その他ご意見・ご要望、相談したいことがあればご記入ください。（任意）"}),a.jsx("textarea",{style:z.textArea,value:j,onChange:G=>D(G.target.value),placeholder:"自由に記入してください",rows:5})]});default:return null}};return a.jsx("div",{style:z.container,children:a.jsxs("div",{style:z.card,children:[a.jsxs("div",{style:z.header,children:[a.jsx("h2",{style:z.title,children:"週次サーベイ"}),a.jsxs("div",{style:z.weekInfo,children:["第",P(),"週"]})]}),a.jsxs("div",{style:z.progressContainer,children:[a.jsxs("div",{style:z.progressText,children:["質問 ",e," / ",r]}),a.jsx("div",{style:z.progressBarContainer,children:a.jsx("div",{style:{...z.progressBar,width:`${y}%`}})})]}),R(),O&&a.jsx("div",{style:z.errorMessage,children:O}),a.jsxs("div",{style:z.buttonContainer,children:[e>1&&a.jsx("button",{style:z.prevButton,onClick:k,children:"前へ"}),e<r?a.jsx("button",{style:z.nextButton,onClick:_,children:"次へ"}):a.jsx("button",{style:z.submitButton,onClick:E,children:"送信"})]})]})})},z={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"600px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},weekInfo:{fontSize:"16px",color:"#666",fontWeight:"500"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},binaryOptions:{display:"flex",justifyContent:"center",gap:"20px",marginBottom:"20px"},binaryOption:{padding:"15px 40px",backgroundColor:"#f0f0f0",borderRadius:"8px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease"},selectedBinaryOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},dropdownContainer:{marginTop:"20px"},dropdownLabel:{display:"block",marginBottom:"10px",fontSize:"16px",color:"#333"},dropdown:{width:"100%",padding:"12px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"#fff"},emojiContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},emojiOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedEmojiOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},emoji:{fontSize:"24px",marginBottom:"8px"},emojiLabel:{fontSize:"12px",color:"#666"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"space-between",marginTop:"30px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",marginLeft:"auto"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",marginLeft:"auto"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},g2=()=>{const t=je();return a.jsx("div",{style:kn.container,children:a.jsxs("div",{style:kn.card,children:[a.jsx("div",{style:kn.header,children:a.jsx("h2",{style:kn.title,children:"週次サーベイ"})}),a.jsxs("div",{style:kn.thankYouContainer,children:[a.jsx("div",{style:kn.checkmark,children:"✓"}),a.jsx("h3",{style:kn.thankYouTitle,children:"回答ありがとうございました"}),a.jsxs("p",{style:kn.thankYouMessage,children:["いただいたフィードバックは、より良いオンボーディング体験のために活用させていただきます。",a.jsx("br",{}),"何か質問や懸念事項がある場合は、いつでもマネージャーやHR担当者にお問い合わせください。"]}),a.jsx("button",{style:kn.closeButton,onClick:()=>t("/dashboard"),children:"閉じる"})]})]})})},kn={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"600px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},thankYouContainer:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},checkmark:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#34a853",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"36px",marginBottom:"20px"},thankYouTitle:{fontSize:"22px",fontWeight:"500",color:"#333",marginBottom:"15px"},thankYouMessage:{fontSize:"16px",color:"#666",textAlign:"center",lineHeight:"1.6",marginBottom:"30px"},closeButton:{padding:"12px 40px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},y2=()=>{const t=je(),[e,n]=N.useState(1),r=7,[i,s]=N.useState(null),[o,c]=N.useState(null),[u,d]=N.useState(null),[f,g]=N.useState(""),[m,I]=N.useState(""),[C,A]=N.useState(""),[b,T]=N.useState(""),[x,S]=N.useState(null),[j,D]=N.useState(""),O=Math.round(e/r*100),v=()=>{if(e===1&&i===null){D("回答を選択してください");return}if(e===2&&o===null){D("回答を選択してください");return}if(e===3&&u===null){D("回答を選択してください");return}if(e===5&&m===""){D("回答を選択してください");return}if(e===5&&m==="期待以下"&&C===""){D("具体的なギャップについて記入してください");return}if(e===7&&x===null){D("回答を選択してください");return}D(""),e<r&&n(e+1)},y=()=>{e>1&&(n(e-1),D(""))},_=()=>{const E={autonomy:i,relatedness:o,competence:u,managerFeedback:f,companyImpression:m,companyImpressionDetail:m==="期待以下"?C:"",onboardingFeedback:b,overallSatisfaction:x,timestamp:new Date().toISOString(),surveyType:"入社後1か月マンスリーサーベイ"};console.log("Monthly Survey Data (30 days):",E);const P=JSON.parse(localStorage.getItem("monthlySurveys")||"[]");P.push(E),localStorage.setItem("monthlySurveys",JSON.stringify(P)),t("/monthly-survey-thanks")},k=()=>{switch(e){case 1:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-1. 今の業務で、自分の判断で進められる範囲は十分だと感じますか？"}),a.jsx("div",{style:Q.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...Q.likertOption,...i===E?Q.selectedLikertOption:{}},onClick:()=>s(E),children:[a.jsx("div",{style:Q.likertNumber,children:E}),a.jsxs("div",{style:Q.likertLabel,children:[E===1&&"まったく感じない",E===2&&"あまり感じない",E===3&&"どちらともいえない",E===4&&"やや感じる",E===5&&"十分感じる"]})]},E))})]});case 2:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-2. チームメンバーや先輩との関係・協力体制に満足していますか？"}),a.jsx("div",{style:Q.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...Q.likertOption,...o===E?Q.selectedLikertOption:{}},onClick:()=>c(E),children:[a.jsx("div",{style:Q.likertNumber,children:E}),a.jsxs("div",{style:Q.likertLabel,children:[E===1&&"まったく満足していない",E===2&&"あまり満足していない",E===3&&"どちらともいえない",E===4&&"やや満足",E===5&&"非常に満足"]})]},E))})]});case 3:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-3. 必要なスキルや知識は、現状十分習得できていると感じますか？"}),a.jsx("div",{style:Q.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...Q.likertOption,...u===E?Q.selectedLikertOption:{}},onClick:()=>d(E),children:[a.jsx("div",{style:Q.likertNumber,children:E}),a.jsxs("div",{style:Q.likertLabel,children:[E===1&&"全く自信がない",E===2&&"あまり自信がない",E===3&&"どちらともいえない",E===4&&"やや自信がある",E===5&&"自信を持っている"]})]},E))})]});case 4:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-4. 直属のマネージャーまたはメンターへのフィードバック（改善点や感謝したい点）があればご記入ください。"}),a.jsx("textarea",{style:Q.textArea,placeholder:"自由にご記入ください（任意）",value:f,onChange:E=>g(E.target.value),rows:5})]});case 5:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-5. 入社前に抱いていた期待と、実際の会社・業務とのギャップはありますか？"}),a.jsx("div",{style:Q.optionsContainer,children:["期待以上","期待通り","期待以下","わからない"].map(E=>a.jsx("div",{style:{...Q.radioOption,...m===E?Q.selectedRadioOption:{}},onClick:()=>I(E),children:E},E))}),m==="期待以下"&&a.jsxs("div",{style:Q.conditionalInput,children:[a.jsx("label",{style:Q.conditionalLabel,children:"具体的なギャップについて教えてください："}),a.jsx("textarea",{style:Q.textArea,placeholder:"具体的に記入してください",value:C,onChange:E=>A(E.target.value),rows:4})]})]});case 6:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-6. 入社時のオリエンテーションや研修で、特に改善してほしいポイントはありますか？"}),a.jsx("textarea",{style:Q.textArea,placeholder:"自由にご記入ください（任意）",value:b,onChange:E=>T(E.target.value),rows:5})]});case 7:return a.jsxs("div",{style:Q.questionContainer,children:[a.jsx("h3",{style:Q.questionTitle,children:"Q1-7. 1か月間を通じて、当社で働くことにどの程度満足していますか？"}),a.jsx("div",{style:Q.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...Q.likertOption,...x===E?Q.selectedLikertOption:{}},onClick:()=>S(E),children:[a.jsx("div",{style:Q.likertNumber,children:E}),a.jsxs("div",{style:Q.likertLabel,children:[E===1&&"非常に不満",E===2&&"やや不満",E===3&&"どちらともいえない",E===4&&"やや満足",E===5&&"非常に満足"]})]},E))})]});default:return null}};return a.jsx("div",{style:Q.container,children:a.jsxs("div",{style:Q.card,children:[a.jsxs("div",{style:Q.header,children:[a.jsx("h2",{style:Q.title,children:"入社後1か月マンスリーサーベイ"}),a.jsx("p",{style:Q.surveyInfo,children:"所要時間：5～7分"})]}),a.jsxs("div",{style:Q.progressContainer,children:[a.jsxs("div",{style:Q.progressText,children:["進捗状況: ",O,"%"]}),a.jsx("div",{style:Q.progressBarContainer,children:a.jsx("div",{style:{...Q.progressBar,width:`${O}%`}})})]}),j&&a.jsx("div",{style:Q.errorMessage,children:j}),k(),a.jsx("div",{style:Q.buttonContainer,children:a.jsxs("div",{style:Q.buttonWrapper,children:[e>1&&a.jsx("button",{style:Q.prevButton,onClick:y,children:"前へ"}),e<r?a.jsx("button",{style:Q.nextButton,onClick:v,children:"次へ"}):a.jsx("button",{style:Q.submitButton,onClick:_,children:"送信"})]})})]})})},Q={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"800px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},surveyInfo:{fontSize:"16px",color:"#666",fontWeight:"500",marginTop:"8px"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},optionsContainer:{display:"flex",flexWrap:"wrap",gap:"15px",marginBottom:"20px"},radioOption:{flex:"1 0 45%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedRadioOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},conditionalInput:{marginTop:"20px",padding:"15px",backgroundColor:"#f9f9f9",borderRadius:"8px",borderLeft:"4px solid #4285f4"},conditionalLabel:{display:"block",marginBottom:"10px",fontWeight:"500",color:"#333"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"30px"},buttonWrapper:{display:"flex",justifyContent:"center",gap:"20px",width:"100%",maxWidth:"400px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},v2=()=>{const t=je(),[e,n]=N.useState(1),r=7,[i,s]=N.useState(null),[o,c]=N.useState(null),[u,d]=N.useState(null),[f,g]=N.useState(null),[m,I]=N.useState(""),[C,A]=N.useState(null),[b,T]=N.useState(""),[x,S]=N.useState(""),j=Math.round(e/r*100),D=()=>{if(e===1&&i===null){S("回答を選択してください");return}if(e===2&&o===null){S("回答を選択してください");return}if(e===3&&u===null){S("回答を選択してください");return}if(e===4&&f===null){S("回答を選択してください");return}if(e===6&&C===null){S("回答を選択してください");return}S(""),e<r&&n(e+1)},O=()=>{e>1&&(n(e-1),S(""))},v=()=>{const _={autonomy:i,relatedness:o,competence:u,learningDevelopment:f,managerFeedback:m,companyImpression:C,onboardingFeedback:b,timestamp:new Date().toISOString(),surveyType:"入社後2か月マンスリーサーベイ"};console.log("Monthly Survey Data (60 days):",_);const k=JSON.parse(localStorage.getItem("monthlySurveys")||"[]");k.push(_),localStorage.setItem("monthlySurveys",JSON.stringify(k)),t("/monthly-survey-thanks")},y=()=>{switch(e){case 1:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-1. 業務において、自分で意思決定できる余地が明確に示されていますか？"}),a.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(_=>a.jsxs("div",{style:{...J.likertOption,...i===_?J.selectedLikertOption:{}},onClick:()=>s(_),children:[a.jsx("div",{style:J.likertNumber,children:_}),a.jsxs("div",{style:J.likertLabel,children:[_===1&&"まったく示されていない",_===2&&"あまり示されていない",_===3&&"どちらともいえない",_===4&&"ある程度示されている",_===5&&"明確に示されている"]})]},_))})]});case 2:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-2. チーム外の他部署や関連部門とも適切にコミュニケーションがとれていますか？"}),a.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(_=>a.jsxs("div",{style:{...J.likertOption,...o===_?J.selectedLikertOption:{}},onClick:()=>c(_),children:[a.jsx("div",{style:J.likertNumber,children:_}),a.jsxs("div",{style:J.likertLabel,children:[_===1&&"まったくとれていない",_===2&&"あまりとれていない",_===3&&"どちらともいえない",_===4&&"ある程度とれている",_===5&&"十分とれている"]})]},_))})]});case 3:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-3. この1か月で担当業務に対する自信はどの程度向上しましたか？"}),a.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(_=>a.jsxs("div",{style:{...J.likertOption,...u===_?J.selectedLikertOption:{}},onClick:()=>d(_),children:[a.jsx("div",{style:J.likertNumber,children:_}),a.jsxs("div",{style:J.likertLabel,children:[_===1&&"まったく向上していない",_===2&&"あまり向上していない",_===3&&"どちらともいえない",_===4&&"やや向上した",_===5&&"大きく向上した"]})]},_))})]});case 4:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-4. 新たに受けた研修・トレーニングの効果はいかがでしたか？"}),a.jsx("div",{style:J.optionsContainer,children:["非常に効果あり","効果あり","どちらともいえない","あまり効果なし","全く効果なし"].map(_=>a.jsx("div",{style:{...J.radioOption,...f===_?J.selectedRadioOption:{}},onClick:()=>g(_),children:_},_))})]});case 5:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-5. 最近の1on1やフィードバック機会で、特に良かった点・改善してほしい点は？"}),a.jsx("textarea",{style:J.textArea,placeholder:"自由にご記入ください",value:m,onChange:_=>I(_.target.value),rows:5})]});case 6:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-6. 当社の文化・バリューは、自身の価値観に合っていると感じますか？"}),a.jsx("div",{style:J.likertContainer,children:[1,2,3,4,5].map(_=>a.jsxs("div",{style:{...J.likertOption,...C===_?J.selectedLikertOption:{}},onClick:()=>A(_),children:[a.jsx("div",{style:J.likertNumber,children:_}),a.jsxs("div",{style:J.likertLabel,children:[_===1&&"まったく合っていない",_===2&&"あまり合っていない",_===3&&"どちらともいえない",_===4&&"やや合っている",_===5&&"非常に合っている"]})]},_))})]});case 7:return a.jsxs("div",{style:J.questionContainer,children:[a.jsx("h3",{style:J.questionTitle,children:"Q2-7. オンボーディング期間（1～2か月目）で、特に改善が必要だと思うポイントを教えてください。"}),a.jsx("textarea",{style:J.textArea,placeholder:"自由にご記入ください（任意）",value:b,onChange:_=>T(_.target.value),rows:5})]});default:return null}};return a.jsx("div",{style:J.container,children:a.jsxs("div",{style:J.card,children:[a.jsxs("div",{style:J.header,children:[a.jsx("h2",{style:J.title,children:"入社後2か月マンスリーサーベイ"}),a.jsx("p",{style:J.surveyInfo,children:"所要時間：5～8分"})]}),a.jsxs("div",{style:J.progressContainer,children:[a.jsxs("div",{style:J.progressText,children:["進捗状況: ",j,"%"]}),a.jsx("div",{style:J.progressBarContainer,children:a.jsx("div",{style:{...J.progressBar,width:`${j}%`}})})]}),x&&a.jsx("div",{style:J.errorMessage,children:x}),y(),a.jsx("div",{style:J.buttonContainer,children:a.jsxs("div",{style:J.buttonWrapper,children:[e>1&&a.jsx("button",{style:J.prevButton,onClick:O,children:"前へ"}),e<r?a.jsx("button",{style:J.nextButton,onClick:D,children:"次へ"}):a.jsx("button",{style:J.submitButton,onClick:v,children:"送信"})]})})]})})},J={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"800px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},surveyInfo:{fontSize:"16px",color:"#666",fontWeight:"500",marginTop:"8px"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},optionsContainer:{display:"flex",flexDirection:"column",gap:"15px",marginBottom:"20px"},radioOption:{backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedRadioOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.02)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"30px"},buttonWrapper:{display:"flex",justifyContent:"center",gap:"20px",width:"100%",maxWidth:"400px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},_2=()=>{const t=je(),[e,n]=N.useState(1),r=7,[i,s]=N.useState(null),[o,c]=N.useState(null),[u,d]=N.useState(null),[f,g]=N.useState(""),[m,I]=N.useState(""),[C,A]=N.useState(""),[b,T]=N.useState(null),[x,S]=N.useState(""),[j,D]=N.useState(""),O=Math.round(e/r*100),v=()=>{if(e===1&&i===null){D("回答を選択してください");return}if(e===2&&o===null){D("回答を選択してください");return}if(e===3&&u===null){D("回答を選択してください");return}if(e===4&&f===""){D("回答を選択してください");return}if(e===4&&f==="はい"&&m===""){D("詳細を記入してください");return}if(e===6&&b===null){D("回答を選択してください");return}D(""),e<r&&n(e+1)},y=()=>{e>1&&(n(e-1),D(""))},_=()=>{const E={autonomy:i,relatedness:o,competence:u,careerGrowth:f,careerGrowthDetail:f==="はい"?m:"",managerFeedback:C,companyImpression:b,onboardingFeedback:x,timestamp:new Date().toISOString(),surveyType:"入社後3か月マンスリーサーベイ"};console.log("Monthly Survey Data (90 days):",E);const P=JSON.parse(localStorage.getItem("monthlySurveys")||"[]");P.push(E),localStorage.setItem("monthlySurveys",JSON.stringify(P)),t("/monthly-survey-thanks")},k=()=>{switch(e){case 1:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-1. 自分の仕事に対して責任感を持ち、自律的に動けていると感じますか？"}),a.jsx("div",{style:K.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...K.likertOption,...i===E?K.selectedLikertOption:{}},onClick:()=>s(E),children:[a.jsx("div",{style:K.likertNumber,children:E}),a.jsxs("div",{style:K.likertLabel,children:[E===1&&"まったく感じない",E===2&&"あまり感じない",E===3&&"どちらともいえない",E===4&&"やや感じる",E===5&&"強く感じる"]})]},E))})]});case 2:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-2. 会社全体や他部署とのつながりを感じられていますか？"}),a.jsx("div",{style:K.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...K.likertOption,...o===E?K.selectedLikertOption:{}},onClick:()=>c(E),children:[a.jsx("div",{style:K.likertNumber,children:E}),a.jsxs("div",{style:K.likertLabel,children:[E===1&&"まったく感じない",E===2&&"あまり感じない",E===3&&"どちらともいえない",E===4&&"やや感じる",E===5&&"強く感じる"]})]},E))})]});case 3:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-3. これまでの1～3か月で、自身の成長や成果に自信を持てていますか？"}),a.jsx("div",{style:K.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...K.likertOption,...u===E?K.selectedLikertOption:{}},onClick:()=>d(E),children:[a.jsx("div",{style:K.likertNumber,children:E}),a.jsxs("div",{style:K.likertLabel,children:[E===1&&"まったく自信がない",E===2&&"あまり自信がない",E===3&&"どちらともいえない",E===4&&"やや自信がある",E===5&&"強く自信がある"]})]},E))})]});case 4:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-4. 今後のキャリア（1年後、3年後）について、マネージャーと具体的に話しましたか？"}),a.jsxs("div",{style:K.binaryOptions,children:[a.jsx("div",{style:{...K.binaryOption,...f==="はい"?K.selectedBinaryOption:{}},onClick:()=>g("はい"),children:"はい"}),a.jsx("div",{style:{...K.binaryOption,...f==="いいえ"?K.selectedBinaryOption:{}},onClick:()=>g("いいえ"),children:"いいえ"})]}),f==="はい"&&a.jsxs("div",{style:K.conditionalInput,children:[a.jsx("label",{style:K.conditionalLabel,children:"話し合った内容を簡単に要約してください："}),a.jsx("textarea",{style:K.textArea,placeholder:"キャリアについて話し合った内容を簡潔に記入してください",value:m,onChange:E=>I(E.target.value),rows:4})]})]});case 5:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-5. マネージャー／メンターのサポートで、特に有効だった点と、今後期待したい点を教えてください。"}),a.jsx("textarea",{style:K.textArea,placeholder:"自由にご記入ください",value:C,onChange:E=>A(E.target.value),rows:5})]});case 6:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-6. 当社で今後長く働きたいと思えますか？"}),a.jsx("div",{style:K.likertContainer,children:[1,2,3,4,5].map(E=>a.jsxs("div",{style:{...K.likertOption,...b===E?K.selectedLikertOption:{}},onClick:()=>T(E),children:[a.jsx("div",{style:K.likertNumber,children:E}),a.jsxs("div",{style:K.likertLabel,children:[E===1&&"全く思わない",E===2&&"あまり思わない",E===3&&"どちらともいえない",E===4&&"やや思う",E===5&&"強く思う"]})]},E))})]});case 7:return a.jsxs("div",{style:K.questionContainer,children:[a.jsx("h3",{style:K.questionTitle,children:"Q3-7. 入社時～3か月のオンボーディング体験全体を振り返り、最も改善してほしい点を教えてください。"}),a.jsx("textarea",{style:K.textArea,placeholder:"自由にご記入ください（任意）",value:x,onChange:E=>S(E.target.value),rows:5})]});default:return null}};return a.jsx("div",{style:K.container,children:a.jsxs("div",{style:K.card,children:[a.jsxs("div",{style:K.header,children:[a.jsx("h2",{style:K.title,children:"入社後3か月マンスリーサーベイ"}),a.jsx("p",{style:K.surveyInfo,children:"所要時間：6～8分"})]}),a.jsxs("div",{style:K.progressContainer,children:[a.jsxs("div",{style:K.progressText,children:["進捗状況: ",O,"%"]}),a.jsx("div",{style:K.progressBarContainer,children:a.jsx("div",{style:{...K.progressBar,width:`${O}%`}})})]}),j&&a.jsx("div",{style:K.errorMessage,children:j}),k(),a.jsx("div",{style:K.buttonContainer,children:a.jsxs("div",{style:K.buttonWrapper,children:[e>1&&a.jsx("button",{style:K.prevButton,onClick:y,children:"前へ"}),e<r?a.jsx("button",{style:K.nextButton,onClick:v,children:"次へ"}):a.jsx("button",{style:K.submitButton,onClick:_,children:"送信"})]})})]})})},K={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"800px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},surveyInfo:{fontSize:"16px",color:"#666",fontWeight:"500",marginTop:"8px"},progressContainer:{marginBottom:"30px"},progressText:{fontSize:"14px",color:"#666",marginBottom:"8px"},progressBarContainer:{height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden"},progressBar:{height:"100%",backgroundColor:"#4285f4",borderRadius:"4px",transition:"width 0.3s ease"},questionContainer:{marginBottom:"30px"},questionTitle:{fontSize:"18px",fontWeight:"500",marginBottom:"20px",color:"#333"},likertContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},likertOption:{flex:"1 0 18%",backgroundColor:"#f0f0f0",borderRadius:"8px",padding:"15px 10px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},selectedLikertOption:{backgroundColor:"#e3f2fd",borderColor:"#4285f4",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},likertNumber:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#4285f4"},likertLabel:{fontSize:"12px",color:"#666"},binaryOptions:{display:"flex",justifyContent:"center",gap:"20px",marginBottom:"20px"},binaryOption:{padding:"15px 40px",backgroundColor:"#f0f0f0",borderRadius:"8px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease"},selectedBinaryOption:{backgroundColor:"#e3f2fd",color:"#4285f4",fontWeight:"bold",transform:"scale(1.05)",boxShadow:"0 2px 5px rgba(66, 133, 244, 0.2)"},conditionalInput:{marginTop:"20px",padding:"15px",backgroundColor:"#f9f9f9",borderRadius:"8px",borderLeft:"4px solid #4285f4"},conditionalLabel:{display:"block",marginBottom:"10px",fontWeight:"500",color:"#333"},textArea:{width:"100%",padding:"15px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ddd",resize:"vertical"},buttonContainer:{display:"flex",justifyContent:"center",marginTop:"30px"},buttonWrapper:{display:"flex",justifyContent:"center",gap:"20px",width:"100%",maxWidth:"400px"},prevButton:{padding:"12px 25px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},nextButton:{padding:"12px 25px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},submitButton:{padding:"12px 25px",backgroundColor:"#34a853",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"120px"},errorMessage:{color:"red",textAlign:"center",marginBottom:"15px",fontWeight:"500"}},x2=()=>{const t=je();return a.jsx("div",{style:Rn.container,children:a.jsxs("div",{style:Rn.card,children:[a.jsx("div",{style:Rn.header,children:a.jsx("h2",{style:Rn.title,children:"マンスリーサーベイ"})}),a.jsxs("div",{style:Rn.thankYouContainer,children:[a.jsx("div",{style:Rn.checkmark,children:"✓"}),a.jsx("h3",{style:Rn.thankYouTitle,children:"回答ありがとうございました"}),a.jsxs("p",{style:Rn.thankYouMessage,children:["いただいたフィードバックは、より良いオンボーディング体験と職場環境の改善のために活用させていただきます。",a.jsx("br",{}),"何か質問や懸念事項がある場合は、いつでもマネージャーやHR担当者にお問い合わせください。"]}),a.jsx("button",{style:Rn.closeButton,onClick:()=>t("/dashboard"),children:"ダッシュボードに戻る"})]})]})})},Rn={container:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",minHeight:"100vh",backgroundColor:"#f8f9fa"},card:{width:"100%",maxWidth:"600px",backgroundColor:"white",borderRadius:"15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"30px"},header:{marginBottom:"25px",textAlign:"center"},title:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},thankYouContainer:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},checkmark:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#34a853",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"36px",marginBottom:"20px"},thankYouTitle:{fontSize:"22px",fontWeight:"500",color:"#333",marginBottom:"15px"},thankYouMessage:{fontSize:"16px",color:"#666",textAlign:"center",lineHeight:"1.6",marginBottom:"30px"},closeButton:{padding:"12px 40px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s"}},w2=()=>{const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,s]=N.useState(""),o=je(),c=u=>{u.preventDefault(),t==="admin@example.com"&&n==="P@ssword1805"?(localStorage.setItem("adminLoggedIn","true"),o("/admin/dashboard")):s("メールアドレスまたはパスワードが正しくありません。")};return a.jsx("div",{className:"admin-container",children:a.jsxs("div",{className:"admin-login-card",children:[a.jsx("h2",{children:"人事管理システム"}),a.jsx("h3",{children:"ログイン"}),i&&a.jsx("div",{className:"admin-error",children:i}),a.jsxs("form",{onSubmit:c,children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"email",children:"メールアドレス"}),a.jsx("input",{type:"email",id:"email",value:t,onChange:u=>e(u.target.value),required:!0,placeholder:"例: admin@example.com"})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"password",children:"パスワード"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0,placeholder:"パスワードを入力"})]}),a.jsx("button",{type:"submit",className:"admin-button",children:"ログイン"})]})]})})},E2=()=>localStorage.getItem("adminLoggedIn")==="true",T2=()=>{const t=je(),e=Gn();if(!E2())return a.jsx(vl,{to:"/admin/login",replace:!0});const n=()=>{localStorage.removeItem("adminLoggedIn"),t("/admin/login")},r=i=>e.pathname===i;return a.jsxs("div",{className:"admin-container",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsx("div",{className:"admin-sidebar-header",children:a.jsx("h2",{children:"WellCo オンボーディング"})}),a.jsxs("ul",{className:"admin-menu",children:[a.jsxs("li",{className:`admin-menu-item ${r("/admin/dashboard")?"active":""}`,onClick:()=>t("/admin/dashboard"),children:[a.jsx("i",{className:"fas fa-home"})," ダッシュボード"]}),a.jsxs("li",{className:`admin-menu-item ${r("/admin/employees")?"active":""}`,onClick:()=>t("/admin/employees"),children:[a.jsx("i",{className:"fas fa-users"})," 新入社員"]}),a.jsxs("li",{className:`admin-menu-item ${r("/admin/journeys")?"active":""}`,onClick:()=>t("/admin/journeys"),children:[a.jsx("i",{className:"fas fa-road"})," オンボーディングジャーニー"]})]})]}),a.jsxs("div",{className:"admin-content",children:[a.jsxs("div",{className:"admin-header",children:[a.jsxs("div",{className:"admin-header-title",children:[e.pathname==="/admin/dashboard"&&"ダッシュボード",e.pathname==="/admin/employees"&&"新入社員管理",e.pathname==="/admin/journeys"&&"オンボーディングジャーニー"]}),a.jsxs("div",{className:"admin-user-info",children:[a.jsx("span",{className:"admin-user-name",children:"管理者"}),a.jsx("button",{className:"admin-logout-button",onClick:n,children:"ログアウト"})]})]}),a.jsx(qC,{})]})]})},S2=()=>{const t=je(),e={totalEmployees:12,completedOnboarding:5,inProgressOnboarding:7,upcomingJoiners:3},n=[{id:1,employee:"山田 太郎",action:"書類確認完了",date:"2025/05/19 08:30"},{id:2,employee:"佐藤 花子",action:"メッセージ返信",date:"2025/05/18 15:45"},{id:3,employee:"鈴木 一郎",action:"質問送信",date:"2025/05/18 10:20"},{id:4,employee:"田中 美咲",action:"アカウント作成",date:"2025/05/17 14:10"}],r=[{id:1632,name:"渡辺 悠希",department:"エンジニアリング部",riskScore:75,triggers:[{type:"日次",detail:"朝のネガティブ連続: emojiスコア ≤2 が連続3日"},{type:"週次",detail:"低評価設問: 全設問のうち3問が1～2評価"},{type:"月次",detail:"SDT低評価: 自律性で1評価"}],joinDate:"2025/02/01"},{id:1633,name:"中村 太陽",department:"エンジニアリング部",riskScore:55,triggers:[{type:"日次",detail:"不安／サポート必要選択: 「業務について不安がある」を3回/週"},{type:"週次",detail:"急激な低下: 前週平均スコアから△1.8点低下"}],joinDate:"2025/03/01"},{id:1634,name:"大原 孝之",department:"エンジニアリング部",riskScore:45,triggers:[{type:"週次",detail:"自由記述ネガティブ度: ネガティブキーワード出現率35%"},{type:"月次",detail:"定着意向低評価: 「長く働きたいと思わない」評価2"}],joinDate:"2025/04/01"}];return a.jsxs("div",{children:[a.jsxs("div",{className:"admin-dashboard-summary",children:[a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"新入社員数"}),a.jsx("div",{className:"admin-summary-number",children:e.totalEmployees})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"準備完了"}),a.jsx("div",{className:"admin-summary-number",children:e.completedOnboarding})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"準備中"}),a.jsx("div",{className:"admin-summary-number",children:e.inProgressOnboarding})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"入社予定者"}),a.jsx("div",{className:"admin-summary-number",children:e.upcomingJoiners})]})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{className:"admin-card-title",children:"最近の活動"}),a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"社員名"}),a.jsx("th",{children:"アクション"}),a.jsx("th",{children:"日時"})]})}),a.jsx("tbody",{children:n.map(i=>a.jsxs("tr",{children:[a.jsx("td",{children:i.employee}),a.jsx("td",{children:i.action}),a.jsx("td",{children:i.date})]},i.id))})]})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{className:"admin-card-title",children:"サーベイアラート"}),a.jsx("div",{className:"care-needed-container",children:r.map(i=>a.jsxs("div",{className:`care-needed-card risk-${i.riskScore>=60?"high":i.riskScore>=40?"medium":"low"}`,children:[a.jsxs("div",{className:"care-needed-header",children:[a.jsx("div",{className:"care-needed-photo",children:a.jsx("img",{src:`/onboarding-demo01/images/${i.id}.png`,alt:i.name})}),a.jsxs("div",{className:"care-needed-info",children:[a.jsx("div",{className:"care-needed-name",children:i.name}),a.jsx("div",{className:"care-needed-department",children:i.department}),a.jsxs("div",{className:"care-needed-join-date",children:["入社日: ",i.joinDate]})]})]}),a.jsxs("div",{className:"care-needed-risk",children:[a.jsx("div",{className:"care-needed-risk-label",children:"リスクスコア"}),a.jsx("div",{className:"care-needed-risk-score",children:i.riskScore})]}),a.jsxs("div",{className:"care-needed-triggers",children:[a.jsx("div",{className:"care-needed-triggers-label",children:"トリガー"}),a.jsx("ul",{className:"care-needed-triggers-list",children:i.triggers.map((s,o)=>a.jsxs("li",{children:[a.jsx("span",{className:`trigger-type ${s.type}`,children:s.type}),a.jsx("span",{className:"trigger-detail",children:s.detail})]},o))})]}),a.jsxs("div",{className:"care-needed-actions",children:[a.jsx("button",{className:"care-action-button",onClick:()=>t(`/admin/employees/${i.id}`),children:"詳細"}),a.jsx("button",{className:"care-action-button",children:"連絡"}),a.jsx("button",{className:"care-action-button",children:"メモ"})]})]},i.id))})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{className:"admin-card-title",children:"クイックアクション"}),a.jsxs("div",{className:"admin-quick-actions",children:[a.jsx("button",{className:"admin-button",children:"新入社員を追加"}),a.jsx("button",{className:"admin-button",children:"メッセージを送信"}),a.jsx("button",{className:"admin-button",children:"書類テンプレートを編集"})]})]})]})},C2=()=>{const t=je(),[e,n]=N.useState([]),[r,i]=N.useState(!0),[s,o]=N.useState(null),[c,u]=N.useState(""),[d,f]=N.useState("all"),[g,m]=N.useState({});`${ir.app.options.storageBucket}`;const I=new Date,C=180*24*60*60*1e3,A=[{id:"E001",name:"渡辺 悠希",email:"y.watanabe@example.com",joiningDate:"2025/02/01",department:"エンジニアリング部",progress:75,status:"in-progress",days_since_joining:114},{id:"E002",name:"中村 太陽",email:"t.nakamura@example.com",joiningDate:"2025/03/01",department:"エンジニアリング部",progress:100,status:"completed",days_since_joining:85},{id:"E003",name:"大原 孝之",email:"t.ohara@example.com",joiningDate:"2025/04/01",department:"エンジニアリング部",progress:50,status:"in-progress",days_since_joining:54},{id:"E004",name:"藤田 健太",email:"k.fujita@example.com",joiningDate:"2025/04/01",department:"プロジェクト部",progress:25,status:"in-progress",days_since_joining:54},{id:"E005",name:"尾形 香織",email:"k.ogata@example.com",joiningDate:"2025/04/15",department:"営業部",progress:0,status:"not-started",days_since_joining:40},{id:"E006",name:"高橋 美咲",email:"m.takahashi@example.com",joiningDate:"2025/05/01",department:"コーポレート本部",progress:0,status:"not-started",days_since_joining:24},{id:"E007",name:"伊藤 光幸",email:"m.ito@example.com",joiningDate:"2025/05/15",department:"エンジニアリング部",progress:0,status:"not-started",days_since_joining:10}],b={E001:"/images/default_emp_icon.png",E002:"/images/default_emp_icon.png",E003:"/images/default_emp_icon.png",E004:"/images/default_emp_icon.png",E005:"/images/default_emp_icon.png",E006:"/images/default_emp_icon.png",E007:"/images/default_emp_icon.png"},T=async()=>{try{i(!0),o(null);const O=new Date(I.getTime()-C),v=O.toISOString().split("T")[0];console.log(`180日前の日付: ${v}`);try{console.log("ローカルJSONファイルからデータを読み込みます");const Qe=await fetch("/temp/firestore-data.json");if(!Qe.ok)throw new Error(`JSONファイルの読み込みに失敗しました: ${Qe.status}`);const ue=await Qe.json();console.log("JSONファイルの読み込みに成功しました");const B={};ue&&ue.organizations&&(Object.keys(ue.organizations).forEach(se=>{const te=ue.organizations[se];B[te.division_code]=te.division_name_local}),console.log(`${Object.keys(B).length}件の組織データを読み込みました`));const Y=[],Z={};if(ue&&ue.employees){const se=Object.values(ue.employees);console.log(`${se.length}件の従業員データを読み込みました`);const te=se.filter(ie=>ie.join_date?new Date(ie.join_date)>=O&&ie.status==="active":!1);console.log(`${te.length}人の新入社員が見つかりました`),te.sort((ie,ce)=>new Date(ce.join_date)-new Date(ie.join_date));for(const ie of te){const ce=ie.emp_no,nt=new Date(ie.join_date),rt=Math.floor((I-nt)/(1e3*60*60*24)),kt=Math.min(100,Math.round(rt/180*100)),ou=nt.toISOString().split("T")[0].replace(/-/g,"/");let bs="not-started";if(kt>=100?bs="completed":kt>0&&(bs="in-progress"),Y.push({id:ce,name:ie.full_name_local,email:S(ie.full_name_alphabet),joiningDate:ou,department:x(ie.division_code,B),progress:kt,status:bs,days_since_joining:rt,division_code:ie.division_code}),window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"))Z[ce]=`/images/${ce}.png`;else try{const Sn=`${ce}.png`;console.log(`画像ファイル名: ${Sn}`);const $r=ko(ir,Sn);console.log("画像参照を作成:",$r),Io($r).then(Kn=>{console.log(`画像取得成功: ${ce}, URL: ${Kn}`),m(Qn=>({...Qn,[ce]:Kn}))}).catch(Kn=>{console.warn(`直接ファイル名での画像取得失敗: ${ce}`,Kn);const Qn=ko(ir,`employee-photos/${ce}.png`);console.log("代替パスで画像参照を作成:",Qn),Io(Qn).then(Jn=>{console.log(`代替パスで画像取得成功: ${ce}, URL: ${Jn}`),m(zr=>({...zr,[ce]:Jn}))}).catch(Jn=>{console.warn(`代替パスでも失敗: ${ce}`,Jn),m(zr=>({...zr,[ce]:"/images/default_emp_icon.png"}))})})}catch(Sn){console.warn(`社員ID ${ce} の写真取得エラー:`,Sn),Z[ce]="/images/default_emp_icon.png"}}}n(Y),m(Z),i(!1);return}catch(Qe){console.error("JSONファイルからのデータ読み込みエラー:",Qe),console.log("Firestoreからのデータ取得を試みます...")}const y=dc(fn,"employees"),_=zw(y,qw("join_date",">=",v),Hw("join_date","desc")),k=await hc(_);if(k.empty){console.log("該当する新入社員が見つかりません"),n([]),i(!1);return}console.log(`Firestoreから${k.size}人の新入社員が見つかりました`);const E=dc(fn,"organizations"),P=await hc(E),R={};P.forEach(Qe=>{const ue=Qe.data();R[ue.division_code]=ue.division_name_local});const G=[],Ie={};for(const Qe of k.docs){const ue=Qe.data(),B=ue.emp_no,Y=new Date(ue.join_date),Z=Math.floor((I-Y)/(1e3*60*60*24)),se=Math.min(100,Math.round(Z/180*100)),te=Y.toISOString().split("T")[0].replace(/-/g,"/");let ie="not-started";if(se>=100?ie="completed":se>0&&(ie="in-progress"),G.push({id:B,name:ue.full_name_local,email:S(ue.full_name_alphabet),joiningDate:te,department:x(ue.division_code,R),progress:se,status:ie,days_since_joining:Z,division_code:ue.division_code}),window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1"))Ie[B]=`/images/${B}.png`;else try{if(ue.photo_url){const ce=ko(ir,ue.photo_url);Io(ce).then(nt=>{m(rt=>({...rt,[B]:nt}))}).catch(nt=>{console.warn(`社員ID ${B} の写真取得エラー:`,nt),m(rt=>({...rt,[B]:"/images/default_emp_icon.png"}))})}else Ie[B]="/images/default_emp_icon.png"}catch(ce){console.warn(`社員ID ${B} の写真取得エラー:`,ce),Ie[B]="/images/default_emp_icon.png"}}n(G),m(Ie),i(!1)}catch(O){console.error("Firestoreからのデータ取得エラー:",O),console.log("エラーが発生したため、モックデータを使用します"),n(A),m(b),o("Firestoreからのデータ取得に失敗しました。モックデータを表示しています。"),i(!1)}};N.useEffect(()=>{console.log("Firebase Storageバケット:",ir.app.options.storageBucket),console.log("FirebaseプロジェクトID:",ir.app.options.projectId),T()},[]);const x=(O,v)=>{if(!O)return"部門不明";if(v&&v[O])return v[O];const y={COR:"コーポレート本部",ENG:"エンジニアリング部",PRJ:"プロジェクト部",SLS:"営業部",BRD:"取締役会"},_=O.split("-")[0];return y[_]||O},S=O=>{if(!O)return"email@example.com";const v=O.split(" ");if(v.length>=2){const y=v[0].charAt(0).toLowerCase(),_=v[1].toLowerCase();return`${y}.${_}@example.com`}return`${O.toLowerCase().replace(/\s+/g,".")}@example.com`},j=e.filter(O=>{const v=O.name.toLowerCase().includes(c.toLowerCase())||O.email.toLowerCase().includes(c.toLowerCase())||O.department.toLowerCase().includes(c.toLowerCase()),y=d==="all"||O.status===d;return v&&y}),D=O=>{switch(O){case"completed":return"完了";case"in-progress":return"進行中";case"not-started":return"未開始";default:return O}};return a.jsxs("div",{children:[a.jsxs("div",{className:"admin-toolbar",children:[a.jsx("div",{className:"admin-search",children:a.jsx("input",{type:"text",placeholder:"名前、メール、部署で検索...",value:c,onChange:O=>u(O.target.value)})}),a.jsx("div",{className:"admin-filter",children:a.jsxs("select",{value:d,onChange:O=>f(O.target.value),children:[a.jsx("option",{value:"all",children:"すべてのステータス"}),a.jsx("option",{value:"completed",children:"完了"}),a.jsx("option",{value:"in-progress",children:"進行中"}),a.jsx("option",{value:"not-started",children:"未開始"})]})}),a.jsx("button",{className:"admin-button",onClick:()=>t("/admin/add-employee"),children:"新入社員を追加"})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{className:"admin-card-title",children:"新入社員一覧 (入社後180日以内)"}),r?a.jsx("div",{className:"admin-loading",children:"データを読み込み中..."}):s?a.jsx("div",{className:"admin-error",children:s}):j.length===0?a.jsx("div",{className:"admin-empty",children:"該当する新入社員が見つかりません"}):a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"名前"}),a.jsx("th",{children:"メールアドレス"}),a.jsx("th",{children:"入社日"}),a.jsx("th",{children:"部署"}),a.jsx("th",{children:"進捗"}),a.jsx("th",{children:"ステータス"}),a.jsx("th",{children:"アクション"})]})}),a.jsx("tbody",{children:j.map(O=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"employee-list-item",children:[a.jsx("div",{className:"employee-list-photo",children:a.jsx("img",{src:g[O.id]||"/images/default_emp_icon.png",alt:O.name,onLoad:v=>{console.log(`画像読み込み成功: ${O.id}`),console.log("読み込まれた画像ソース:",v.target.src)},onError:v=>{console.error(`画像読み込みエラー: ${O.id}`,v),console.log("元のソース:",v.target.src),v.target.src="/images/default_emp_icon.png",console.log("デフォルト画像に切り替え")},style:{width:"100%",height:"100%",objectFit:"cover"}})}),a.jsx("span",{children:O.name})]})}),a.jsx("td",{children:O.email}),a.jsx("td",{children:O.joiningDate}),a.jsx("td",{children:O.department}),a.jsx("td",{children:a.jsxs("div",{className:"admin-progress-bar-container",children:[a.jsx("div",{className:"admin-progress-bar",style:{width:`${O.progress}%`}}),a.jsxs("span",{children:[O.progress,"%"]})]})}),a.jsx("td",{children:a.jsx("span",{className:`status ${O.status}`,children:D(O.status)})}),a.jsx("td",{children:a.jsxs("div",{className:"admin-actions",children:[a.jsx("button",{className:"admin-action-button",onClick:()=>t(`/admin/employees/${O.id}`),children:"詳細"}),a.jsx("button",{className:"admin-action-button",children:"編集"})]})})]},O.id))})]})]})]})},I2=()=>{const t=je(),[e,n]=N.useState({lastName:"",firstName:"",localLastName:"",localFirstName:"",email:"",preferredLanguage:"ja",country:"Japan",timezone:"GMT+9 (Tokyo)",joiningDate:"",department:"Sales Department",team:"",sendWelcomeMessages:{manager:!0,director:!0,honbucho:!0}}),r=o=>{const{name:c,value:u,type:d,checked:f}=o.target;n(d==="checkbox"?{...e,sendWelcomeMessages:{...e.sendWelcomeMessages,[c]:f}}:{...e,[c]:u})},i=o=>{o.preventDefault(),console.log("送信されたデータ:",e),alert("新入社員の情報が登録されました"),t("/admin/employees")},s=()=>{alert("履歴書からデータを読み込んでいます..."),setTimeout(()=>{n({...e,lastName:"Tanaka",firstName:"Yuki",localLastName:"田中",localFirstName:"有希",email:"tanaka.yuki@example.com"}),alert("データの読み込みが完了しました")},1e3)};return a.jsxs("div",{className:"admin-add-employee",children:[a.jsx("h2",{className:"admin-page-title",children:"新入社員セットアップ（Global対応）"}),a.jsxs("form",{onSubmit:i,children:[a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"🌏 基本情報"}),a.jsx("button",{type:"button",className:"admin-button",onClick:s,style:{marginBottom:"15px"},children:"履歴書をアップロードしてAIで自動入力"}),a.jsxs("div",{className:"admin-form-row",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"lastName",children:"氏名（ローマ字）"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",placeholder:"姓",value:e.lastName,onChange:r,required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"firstName",children:" "}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",placeholder:"名",value:e.firstName,onChange:r,required:!0})]})]}),a.jsxs("div",{className:"admin-form-row",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"localLastName",children:"氏名（現地表記・任意）"}),a.jsx("input",{type:"text",id:"localLastName",name:"localLastName",placeholder:"姓（現地表記）",value:e.localLastName,onChange:r})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"localFirstName",children:" "}),a.jsx("input",{type:"text",id:"localFirstName",name:"localFirstName",placeholder:"名（現地表記）",value:e.localFirstName,onChange:r})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"email",children:"メールアドレス"}),a.jsx("input",{type:"email",id:"email",name:"email",placeholder:"example@domain.com",value:e.email,onChange:r,required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"preferredLanguage",children:"希望言語"}),a.jsxs("select",{id:"preferredLanguage",name:"preferredLanguage",value:e.preferredLanguage,onChange:r,children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"ja",children:"日本語"}),a.jsx("option",{value:"zh",children:"中文"})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"country",children:"勤務国"}),a.jsxs("select",{id:"country",name:"country",value:e.country,onChange:r,children:[a.jsx("option",{value:"Japan",children:"Japan"}),a.jsx("option",{value:"United States",children:"United States"}),a.jsx("option",{value:"China",children:"China"})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"timezone",children:"タイムゾーン"}),a.jsxs("select",{id:"timezone",name:"timezone",value:e.timezone,onChange:r,children:[a.jsx("option",{value:"GMT+9 (Tokyo)",children:"GMT+9 (Tokyo)"}),a.jsx("option",{value:"GMT-5 (New York)",children:"GMT-5 (New York)"}),a.jsx("option",{value:"GMT+8 (Beijing)",children:"GMT+8 (Beijing)"})]})]})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"📅 入社情報"}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"joiningDate",children:"入社予定日"}),a.jsx("input",{type:"date",id:"joiningDate",name:"joiningDate",value:e.joiningDate,onChange:r,required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"department",children:"配属部署"}),a.jsxs("select",{id:"department",name:"department",value:e.department,onChange:r,children:[a.jsx("option",{value:"Sales Department",children:"Sales Department"}),a.jsx("option",{value:"Marketing Department",children:"Marketing Department"}),a.jsx("option",{value:"Engineering Department",children:"Engineering Department"}),a.jsx("option",{value:"Human Resources",children:"Human Resources"})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{htmlFor:"team",children:"配属チーム（任意）"}),a.jsx("input",{type:"text",id:"team",name:"team",placeholder:"Team Name",value:e.team,onChange:r})]})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("h3",{children:"✉ ウェルカムメッセージ設定"}),a.jsxs("div",{className:"admin-checkbox-group",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"200px"},children:[a.jsx("label",{htmlFor:"manager",style:{whiteSpace:"nowrap"},children:"マネージャー"}),a.jsx("input",{type:"checkbox",id:"manager",name:"manager",checked:e.sendWelcomeMessages.manager,onChange:r})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"200px"},children:[a.jsx("label",{htmlFor:"director",style:{whiteSpace:"nowrap"},children:"部長"}),a.jsx("input",{type:"checkbox",id:"director",name:"director",checked:e.sendWelcomeMessages.director,onChange:r})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"200px"},children:[a.jsx("label",{htmlFor:"honbucho",style:{whiteSpace:"nowrap"},children:"本部長"}),a.jsx("input",{type:"checkbox",id:"honbucho",name:"honbucho",checked:e.sendWelcomeMessages.honbucho,onChange:r})]})]})]}),a.jsxs("div",{className:"admin-form-actions",children:[a.jsx("button",{type:"button",className:"admin-button-secondary",onClick:()=>t("/admin/employees"),style:{height:"40px",flex:"0 0 30%"},children:"キャンセル"}),a.jsx("button",{type:"submit",className:"admin-button",style:{height:"40px",flex:"0 0 70%"},children:"セットアップ完了＆通知を送信する"})]})]})]})},k2=()=>{const[t,e]=N.useState(!0),[n,r]=N.useState(null),[i,s]=N.useState(null),[o,c]=N.useState({}),[u,d]=N.useState(null),[f,g]=N.useState("/images/default_emp_icon.png"),[m,I]=N.useState("basic"),C=je(),{id:A}=AC(),b=async()=>{try{const D={};return(await hc(dc(fn,"organizations"))).forEach(v=>{const y=v.data();D[v.id]=y.division_name_local}),console.log("組織データを取得しました:",D),c(D),D}catch(D){return console.error("組織データの取得に失敗しました:",D),{}}},T=async D=>{const O=["employee_profiles","employee-profiles","employeeProfiles","profiles","employees"];for(const v of O)try{console.log(`コレクションを試行: ${v}`);const y=await Ri(ki(fn,v,D));if(y.exists()){const _=y.data();return console.log(`従業員プロフィールを取得しました (${v}):`,_),_}else console.log(`${v}にプロフィールが存在しません`)}catch(y){console.warn(`コレクション ${v} からのプロフィール取得に失敗:`,y.message)}return console.error("すべてのコレクションで従業員プロフィールの取得に失敗しました"),null},x=async D=>{const O=[`${D}.png`,`${D}.jpg`,`employee-photos/${D}.png`,`employee-photos/${D}.jpg`,`employee_photos/${D}.png`,`employee_photos/${D}.jpg`];for(const v of O)try{console.log(`写真パスを試行: ${v}`);const y=ko(ir,v),_=await Io(y);return console.log("従業員写真のURLを取得しました:",_),_}catch(y){console.warn(`パス ${v} での写真取得に失敗:`,y.message)}return console.error("すべてのパスで従業員写真の取得に失敗しました"),"/images/default_emp_icon.png"},S=async(D,O={})=>{try{const v=[];let y=D;const _=5;let k=0;for(v.unshift("株式会社Example");y&&k<_;){const E=await Ri(ki(fn,"employees",y));if(E.exists()){const P=E.data(),R=P.division_code;R&&O[R]&&(v.includes(O[R])||v.splice(1,0,O[R])),y=P.supervisor_emp_id}else break;k++}return v}catch(v){return console.error("組織構造の取得に失敗しました:",v),["株式会社Example"]}},j=async D=>{try{e(!0),r(null),console.log("従業員データを取得します。ID:",D);const O=await b(),v=await Ri(ki(fn,"employees",D));if(v.exists()){const y=v.data();console.log("従業員データを取得しました:",y);let _=null,k="/images/default_emp_icon.png";if(y.supervisor_emp_id){const se=await Ri(ki(fn,"employees",y.supervisor_emp_id));if(se.exists()){_=se.data(),console.log("上司データを取得しました:",_);try{k=await x(y.supervisor_emp_id)}catch(te){console.warn("上司の写真取得エラー:",te)}}}let E=null,P="/images/default_emp_icon.png",R=null;try{const se=["new_hire"];for(const te of se){const ie=await Ri(ki(fn,te,D));if(ie.exists()){const ce=ie.data();if(console.log(`${te}コレクションから新入社員データを取得:`,ce),ce.mentor_emp_no){R=ce.mentor_emp_no;break}}}if(R){const te=await Ri(ki(fn,"employees",R));if(te.exists()){E=te.data(),console.log("メンターデータを取得しました:",E);try{P=await x(R)}catch(ie){console.warn("メンターの写真取得エラー:",ie)}}}}catch(se){console.warn("メンター情報の取得エラー:",se)}const G=await S(D,O),Ie=y.join_date?new Date(y.join_date.seconds*1e3):null,Qe=Ie?`${Ie.getFullYear()}年${Ie.getMonth()+1}月${Ie.getDate()}日`:"不明",ue=await T(D);d(ue);const B=await x(D);g(B);const Y=y.email||(y.full_name_alphabet?`${y.full_name_alphabet.toLowerCase().replace(" ",".")}@example.com`:`${D}@example.com`),Z={id:D,name:y.full_name_local||`${y.last_name_local} ${y.first_name_local}`,nameKana:y.last_name_kana&&y.first_name_kana?`${y.last_name_kana} ${y.first_name_kana}`:"",nameAlphabet:y.full_name_alphabet||(y.first_name_alphabet&&y.last_name_alphabet?`${y.first_name_alphabet} ${y.last_name_alphabet}`:""),email:Y,title:y.position||"社員",department:O[y.division_code]||y.division_code||"部署不明",joinDate:Qe,manager:_?_.full_name_local||`${_.last_name_local} ${_.first_name_local}`:"上司不明",managerPhotoURL:k,managerData:_,mentor:E?E.full_name_local||`${E.last_name_local} ${E.first_name_local}`:"",mentorPhotoURL:P,mentorData:E,organization:G,comment:ue&&ue.self_introduction?ue.self_introduction:""};console.log("処理済み従業員データ:",Z),s(Z)}else console.log("従業員データが見つかりません"),r("従業員データが見つかりませんでした。")}catch(O){console.error("従業員データの取得に失敗しました:",O),r("データの取得に失敗しました。")}finally{e(!1)}};return N.useEffect(()=>(console.log("EmployeeDetailNew: コンポーネントがマウントされました。ID:",A),A?j(A):(r("従業員IDが指定されていません。"),e(!1)),()=>{console.log("EmployeeDetailNew: コンポーネントがアンマウントされました")}),[A]),a.jsxs("div",{className:"admin-container",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsx("div",{className:"admin-sidebar-header",children:a.jsx("h2",{children:"WellCo オンボーディング"})}),a.jsxs("ul",{className:"admin-menu",children:[a.jsxs("li",{className:"admin-menu-item",onClick:()=>C("/admin/dashboard"),children:[a.jsx("i",{className:"fas fa-home"})," ダッシュボード"]}),a.jsxs("li",{className:"admin-menu-item active",onClick:()=>C("/admin/employees"),children:[a.jsx("i",{className:"fas fa-users"})," 新入社員"]}),a.jsxs("li",{className:"admin-menu-item",onClick:()=>C("/admin/journeys"),children:[a.jsx("i",{className:"fas fa-road"})," オンボーディングジャーニー"]})]})]}),a.jsxs("div",{className:"admin-content",children:[console.log("employeeData:",i),console.log("profileData:",u),console.log("loading:",t,"error:",n),t&&a.jsx("div",{className:"admin-loading",children:"データを読み込み中..."}),n&&a.jsx("div",{className:"admin-error-message",children:n}),!t&&!i&&!n&&a.jsx("div",{className:"admin-empty",children:"従業員データが取得できませんでした（employeeData is null/undefined）"}),!t&&i&&a.jsxs("div",{className:"newhire-detail",children:[a.jsxs("div",{className:"newhire-detail-sidebar",children:[a.jsx("div",{className:"back-button-container",children:a.jsxs("button",{className:"back-button",onClick:()=>C("/admin/employees"),children:[a.jsx("i",{className:"fas fa-arrow-left"})," 戻る"]})}),a.jsxs("div",{className:"employee-profile-summary",children:[a.jsx("div",{className:"employee-photo",children:a.jsx("img",{src:f,alt:i.name,onError:D=>{D.target.src="/images/default_emp_icon.png"}})}),a.jsx("h2",{className:"employee-name",children:i.name}),a.jsx("p",{className:"employee-name-alphabet",children:i.nameAlphabet}),a.jsx("p",{className:"employee-title",children:i.title}),a.jsx("p",{className:"employee-department",children:i.department})]}),a.jsxs("div",{className:"detail-tabs",children:[a.jsxs("div",{className:`detail-tab ${m==="basic"?"active":""}`,onClick:()=>I("basic"),children:[a.jsx("i",{className:"fas fa-user"})," 基本情報"]}),a.jsxs("div",{className:`detail-tab ${m==="survey"?"active":""}`,onClick:()=>I("survey"),children:[a.jsx("i",{className:"fas fa-clipboard-list"})," サーベイ"]}),a.jsxs("div",{className:`detail-tab ${m==="meetings"?"active":""}`,onClick:()=>I("meetings"),children:[a.jsx("i",{className:"fas fa-comments"})," 1on1ミーティング"]})]})]}),a.jsxs("div",{className:"newhire-detail-content",children:[m==="basic"&&a.jsxs("div",{className:"tab-content",children:[a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"基本情報"}),a.jsx("table",{className:"detail-table",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{children:"氏名"}),a.jsx("td",{children:i.name})]}),i.nameKana&&a.jsxs("tr",{children:[a.jsx("th",{children:"氏名（カナ）"}),a.jsx("td",{children:i.nameKana})]}),i.nameAlphabet&&a.jsxs("tr",{children:[a.jsx("th",{children:"氏名（アルファベット）"}),a.jsx("td",{children:i.nameAlphabet})]}),i.email&&a.jsxs("tr",{children:[a.jsx("th",{children:"メールアドレス"}),a.jsx("td",{children:i.email})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"入社日"}),a.jsx("td",{children:i.joinDate})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"部署名"}),a.jsx("td",{children:i.department})]})]})})]}),a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"上司情報"}),a.jsxs("div",{className:"employee-card",children:[a.jsx("div",{className:"employee-card-photo",children:a.jsx("img",{src:i.managerPhotoURL||"/images/default_emp_icon.png",alt:i.manager,onError:D=>{D.target.src="/images/default_emp_icon.png"}})}),a.jsxs("div",{className:"employee-card-info",children:[a.jsx("h4",{children:i.manager}),i.managerData&&i.managerData.position&&a.jsx("p",{className:"employee-card-position",children:i.managerData.position}),i.managerData&&i.managerData.division_code&&a.jsx("p",{className:"employee-card-department",children:i.managerData.division_code})]})]})]}),i.mentor&&a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"メンター情報"}),a.jsxs("div",{className:"employee-card",children:[a.jsx("div",{className:"employee-card-photo",children:a.jsx("img",{src:i.mentorPhotoURL||"/images/default_emp_icon.png",alt:i.mentor,onError:D=>{D.target.src="/images/default_emp_icon.png"}})}),a.jsxs("div",{className:"employee-card-info",children:[a.jsx("h4",{children:i.mentor}),i.mentorData&&i.mentorData.position&&a.jsx("p",{className:"employee-card-position",children:i.mentorData.position}),i.mentorData&&i.mentorData.division_code&&a.jsx("p",{className:"employee-card-department",children:i.mentorData.division_code})]})]})]}),a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"所属組織"}),a.jsx("div",{className:"organization-structure",children:i.organization.map((D,O)=>a.jsxs("div",{className:"organization-item",children:[O>0&&a.jsx("span",{className:"organization-separator",children:"›"}),a.jsx("span",{className:"organization-name",children:D})]},O))})]}),(i.comment||u&&u.self_introduction)&&a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"コメント"}),a.jsx("div",{className:"profile-text",children:a.jsx("p",{children:i.comment||u&&u.self_introduction})})]})]}),m==="survey"&&a.jsx("div",{className:"tab-content",children:a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"サーベイ結果"}),a.jsx("p",{children:"現在、サーベイデータはありません。"})]})}),m==="meetings"&&a.jsx("div",{className:"tab-content",children:a.jsxs("div",{className:"content-section",children:[a.jsx("h3",{children:"1on1ミーティング履歴"}),a.jsx("p",{children:"現在、ミーティング履歴はありません。"})]})})]})]})]})]})},R2=({journeyData:t,updateJourneyData:e,onNext:n,onCancel:r})=>{const[i,s]=N.useState({title:t.title||"",description:t.description||"",department:t.department||"",duration:t.duration||"",status:t.status||"draft"}),[o,c]=N.useState({}),u=g=>{const{name:m,value:I}=g.target;s({...i,[m]:I})},d=()=>{const g={};return i.title.trim()||(g.title="タイトルは必須です"),i.description.trim()||(g.description="説明は必須です"),i.department.trim()||(g.department="対象部門は必須です"),i.duration.trim()||(g.duration="期間は必須です"),c(g),Object.keys(g).length===0},f=()=>{d()&&(e(i),n())};return a.jsxs("div",{className:"step-content",children:[a.jsx("h3",{children:"基本情報"}),a.jsx("p",{className:"step-description",children:"オンボーディングジャーニーの基本情報を入力してください。"}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"title",children:["タイトル ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:u,className:`form-control ${o.title?"is-invalid":""}`,placeholder:"例: 新入社員基本オンボーディング"}),o.title&&a.jsx("div",{className:"error-message",children:o.title})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"description",children:["説明 ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:u,className:`form-control ${o.description?"is-invalid":""}`,placeholder:"このジャーニーの目的や概要を記入してください"}),o.description&&a.jsx("div",{className:"error-message",children:o.description})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"department",children:["対象部門 ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"department",name:"department",value:i.department,onChange:u,className:`form-control ${o.department?"is-invalid":""}`,placeholder:"例: 全部門、エンジニアリング部"}),o.department&&a.jsx("div",{className:"error-message",children:o.department})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"duration",children:["期間 ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"duration",name:"duration",value:i.duration,onChange:u,className:`form-control ${o.duration?"is-invalid":""}`,placeholder:"例: 90日"}),o.duration&&a.jsx("div",{className:"error-message",children:o.duration})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"status",children:"ステータス"}),a.jsxs("select",{id:"status",name:"status",value:i.status,onChange:u,className:"form-control",children:[a.jsx("option",{value:"draft",children:"下書き"}),a.jsx("option",{value:"active",children:"有効"}),a.jsx("option",{value:"inactive",children:"無効"})]})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"キャンセル"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:f,children:"次へ"})]})]})},N2=({journeyData:t,updateJourneyData:e,onNext:n,onBack:r})=>{const[i,s]=N.useState(t.tasks||[]),[o,c]=N.useState(!1),[u,d]=N.useState(null),[f,g]=N.useState({name:"",description:"",dueDate:"",status:"pending"}),[m,I]=N.useState({}),C=()=>{if(j()){if(u!==null){const v=[...i];v[u]={...v[u],...f},s(v)}else s([...i,{id:Date.now(),...f}]);c(!1),x()}},A=v=>{const y=[...i];y.splice(v,1),s(y)},b=v=>{const y=i[v];d(v),g({name:y.name||"",description:y.description||"",dueDate:y.dueDate||"",status:y.status||"pending"}),c(!0)},T=()=>{d(null),x(),c(!0)},x=()=>{g({name:"",description:"",dueDate:"",status:"pending"}),I({})},S=v=>{const{name:y,value:_}=v.target;g({...f,[y]:_})},j=()=>{const v={};return f.name.trim()||(v.name="タスク名は必須です"),f.dueDate.trim()||(v.dueDate="期日は必須です"),I(v),Object.keys(v).length===0},D=()=>{e({tasks:i}),n()},O=v=>{switch(v){case"completed":return{label:"完了",className:"status-completed"};case"in-progress":return{label:"進行中",className:"status-in-progress"};case"pending":default:return{label:"未開始",className:"status-pending"}}};return a.jsxs("div",{className:"step-content",children:[a.jsx("h3",{children:"タスク設定"}),a.jsx("p",{className:"step-description",children:"オンボーディングジャーニーに含めるタスクを追加してください。"}),a.jsxs("div",{className:"task-list",children:[i.length===0?a.jsx("div",{className:"no-tasks",children:a.jsx("p",{children:"タスクがまだ追加されていません。「タスクを追加」ボタンをクリックして、最初のタスクを追加してください。"})}):i.map((v,y)=>{const _=O(v.status);return a.jsxs("div",{className:"task-item",children:[a.jsxs("div",{className:"task-content",children:[a.jsx("div",{className:"task-name",children:v.name}),v.description&&a.jsx("div",{className:"task-description",children:v.description}),a.jsxs("div",{className:"task-due-date",children:["期日: ",v.dueDate]}),a.jsx("div",{className:`task-status ${_.className}`,children:_.label})]}),a.jsxs("div",{className:"task-actions",children:[a.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>b(y),children:"編集"}),a.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>A(y),children:"削除"})]})]},v.id||y)}),a.jsxs("button",{className:"add-task-btn",onClick:T,children:[a.jsx("i",{className:"fas fa-plus"})," タスクを追加"]})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"戻る"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:D,children:"次へ"})]}),o&&a.jsxs("div",{className:"task-detail-modal",children:[a.jsxs("div",{className:"task-detail-header",children:[a.jsx("h3",{children:u!==null?"タスクを編集":"タスクを追加"}),a.jsx("button",{className:"task-detail-close",onClick:()=>c(!1),children:"×"})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"taskName",children:["タスク名 ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"taskName",name:"name",value:f.name,onChange:S,className:`form-control ${m.name?"is-invalid":""}`,placeholder:"例: 入社書類の提出"}),m.name&&a.jsx("div",{className:"error-message",children:m.name})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"taskDescription",children:"説明"}),a.jsx("textarea",{id:"taskDescription",name:"description",value:f.description,onChange:S,className:"form-control",placeholder:"タスクの詳細説明"})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"taskDueDate",children:["期日 ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"taskDueDate",name:"dueDate",value:f.dueDate,onChange:S,className:`form-control ${m.dueDate?"is-invalid":""}`,placeholder:"例: 入社7日前、入社日、入社後30日"}),m.dueDate&&a.jsx("div",{className:"error-message",children:m.dueDate})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"taskStatus",children:"ステータス"}),a.jsxs("select",{id:"taskStatus",name:"status",value:f.status,onChange:S,className:"form-control",children:[a.jsx("option",{value:"pending",children:"未開始"}),a.jsx("option",{value:"in-progress",children:"進行中"}),a.jsx("option",{value:"completed",children:"完了"})]})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"キャンセル"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:C,children:u!==null?"更新":"追加"})]})]})]})},A2=({journeyData:t,updateJourneyData:e,onNext:n,onBack:r})=>{const[i,s]=N.useState(t.resources||[]),[o,c]=N.useState(!1),[u,d]=N.useState(null),[f,g]=N.useState({title:"",type:"document",url:"",description:""}),[m,I]=N.useState({}),C=()=>{if(j()){if(u!==null){const v=[...i];v[u]={...v[u],...f},s(v)}else s([...i,{id:Date.now(),...f}]);c(!1),x()}},A=v=>{const y=[...i];y.splice(v,1),s(y)},b=v=>{const y=i[v];d(v),g({title:y.title||"",type:y.type||"document",url:y.url||"",description:y.description||""}),c(!0)},T=()=>{d(null),x(),c(!0)},x=()=>{g({title:"",type:"document",url:"",description:""}),I({})},S=v=>{const{name:y,value:_}=v.target;g({...f,[y]:_})},j=()=>{const v={};return f.title.trim()||(v.title="タイトルは必須です"),f.url.trim()||(v.url="URLまたはファイルパスは必須です"),I(v),Object.keys(v).length===0},D=()=>{e({resources:i}),n()},O=v=>{switch(v){case"video":return{icon:"fas fa-video",label:"動画"};case"link":return{icon:"fas fa-link",label:"リンク"};case"image":return{icon:"fas fa-image",label:"画像"};case"document":default:return{icon:"fas fa-file-alt",label:"文書"}}};return a.jsxs("div",{className:"step-content",children:[a.jsx("h3",{children:"リソース設定"}),a.jsx("p",{className:"step-description",children:"オンボーディングジャーニーに含めるリソースを追加してください。文書、動画、リンクなどを追加できます。"}),a.jsxs("div",{className:"resource-list",children:[i.length===0?a.jsx("div",{className:"no-resources",children:a.jsx("p",{children:"リソースがまだ追加されていません。「リソースを追加」ボタンをクリックして、最初のリソースを追加してください。"})}):i.map((v,y)=>{const _=O(v.type);return a.jsxs("div",{className:"resource-item",children:[a.jsx("div",{className:"resource-icon",children:a.jsx("i",{className:_.icon})}),a.jsxs("div",{className:"resource-content",children:[a.jsx("div",{className:"resource-title",children:v.title}),v.description&&a.jsx("div",{className:"resource-description",children:v.description}),a.jsx("div",{className:"resource-type",children:_.label})]}),a.jsxs("div",{className:"resource-actions",children:[a.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>b(y),children:"編集"}),a.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>A(y),children:"削除"})]})]},v.id||y)}),a.jsxs("button",{className:"add-resource-btn",onClick:T,children:[a.jsx("i",{className:"fas fa-plus"})," リソースを追加"]})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"戻る"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:D,children:"次へ"})]}),o&&a.jsxs("div",{className:"resource-detail-modal",children:[a.jsxs("div",{className:"resource-detail-header",children:[a.jsx("h3",{children:u!==null?"リソースを編集":"リソースを追加"}),a.jsx("button",{className:"resource-detail-close",onClick:()=>c(!1),children:"×"})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"resourceTitle",children:["タイトル ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"resourceTitle",name:"title",value:f.title,onChange:S,className:`form-control ${m.title?"is-invalid":""}`,placeholder:"例: 就業規則"}),m.title&&a.jsx("div",{className:"error-message",children:m.title})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"resourceType",children:"タイプ"}),a.jsxs("select",{id:"resourceType",name:"type",value:f.type,onChange:S,className:"form-control",children:[a.jsx("option",{value:"document",children:"文書"}),a.jsx("option",{value:"video",children:"動画"}),a.jsx("option",{value:"link",children:"リンク"}),a.jsx("option",{value:"image",children:"画像"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{htmlFor:"resourceUrl",children:["URLまたはファイルパス ",a.jsx("span",{className:"required",children:"*"})]}),a.jsx("input",{type:"text",id:"resourceUrl",name:"url",value:f.url,onChange:S,className:`form-control ${m.url?"is-invalid":""}`,placeholder:"例: https://example.com/document.pdf"}),m.url&&a.jsx("div",{className:"error-message",children:m.url})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"resourceDescription",children:"説明"}),a.jsx("textarea",{id:"resourceDescription",name:"description",value:f.description,onChange:S,className:"form-control",placeholder:"リソースの説明"})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"キャンセル"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:C,children:u!==null?"更新":"追加"})]})]})]})},j2=({journeyData:t,onSave:e,onBack:n})=>{const r=c=>{switch(c){case"active":return{label:"有効",className:"status-active"};case"inactive":return{label:"無効",className:"status-inactive"};case"draft":default:return{label:"下書き",className:"status-draft"}}},i=c=>{switch(c){case"video":return"動画";case"link":return"リンク";case"image":return"画像";case"document":default:return"文書"}},s=c=>{switch(c){case"completed":return"完了";case"in-progress":return"進行中";case"pending":default:return"未開始"}},o=r(t.status);return a.jsxs("div",{className:"step-content",children:[a.jsx("h3",{children:"確認"}),a.jsx("p",{className:"step-description",children:"以下の内容でオンボーディングジャーニーを作成します。内容を確認してください。"}),a.jsxs("div",{className:"confirm-section",children:[a.jsx("h3",{children:"基本情報"}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("div",{className:"confirm-label",children:"タイトル"}),a.jsx("div",{className:"confirm-value",children:t.title})]}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("div",{className:"confirm-label",children:"説明"}),a.jsx("div",{className:"confirm-value",children:t.description})]}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("div",{className:"confirm-label",children:"対象部門"}),a.jsx("div",{className:"confirm-value",children:t.department})]}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("div",{className:"confirm-label",children:"期間"}),a.jsx("div",{className:"confirm-value",children:t.duration})]}),a.jsxs("div",{className:"confirm-item",children:[a.jsx("div",{className:"confirm-label",children:"ステータス"}),a.jsx("div",{className:`confirm-value ${o.className}`,children:o.label})]})]}),a.jsxs("div",{className:"confirm-section",children:[a.jsx("h3",{children:"タスク"}),t.tasks&&t.tasks.length>0?a.jsx("div",{className:"confirm-tasks",children:t.tasks.map((c,u)=>a.jsxs("div",{className:"confirm-task-item",children:[a.jsxs("div",{className:"confirm-task-name",children:[u+1,". ",c.name]}),c.description&&a.jsx("div",{className:"confirm-task-description",children:c.description}),a.jsxs("div",{className:"confirm-task-details",children:[a.jsxs("span",{className:"confirm-task-due-date",children:["期日: ",c.dueDate]}),a.jsxs("span",{className:"confirm-task-status",children:["ステータス: ",s(c.status)]})]})]},c.id||u))}):a.jsx("div",{className:"confirm-no-items",children:"タスクが追加されていません"})]}),a.jsxs("div",{className:"confirm-section",children:[a.jsx("h3",{children:"リソース"}),t.resources&&t.resources.length>0?a.jsx("div",{className:"confirm-resources",children:t.resources.map((c,u)=>a.jsxs("div",{className:"confirm-resource-item",children:[a.jsxs("div",{className:"confirm-resource-name",children:[u+1,". ",c.title," (",i(c.type),")"]}),c.description&&a.jsx("div",{className:"confirm-resource-description",children:c.description}),a.jsxs("div",{className:"confirm-resource-url",children:["URL: ",c.url]})]},c.id||u))}):a.jsx("div",{className:"confirm-no-items",children:"リソースが追加されていません"})]}),a.jsxs("div",{className:"button-group",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"戻る"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:e,children:"作成する"})]})]})},b2=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=N.useState(1),[s,o]=N.useState({title:"",description:"",department:"",duration:"",status:"draft",tasks:[],resources:[]}),c=g=>{o(m=>({...m,...g}))},u=()=>{r<4?i(r+1):(n(s),e())},d=()=>{r>1?i(r-1):e()};if(!t)return null;const f=()=>{switch(r){case 1:return a.jsx(R2,{journeyData:s,updateJourneyData:c,onNext:u,onCancel:e});case 2:return a.jsx(N2,{journeyData:s,updateJourneyData:c,onNext:u,onBack:d});case 3:return a.jsx(A2,{journeyData:s,updateJourneyData:c,onNext:u,onBack:d});case 4:return a.jsx(j2,{journeyData:s,onSave:u,onBack:d});default:return null}};return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-container",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"オンボーディングジャーニー作成"}),a.jsxs("div",{className:"step-indicator",children:[a.jsx("div",{className:`step-circle ${r>=1?"active":""}`,children:"1"}),a.jsx("div",{className:`step-line ${r>=2?"active":""}`}),a.jsx("div",{className:`step-circle ${r>=2?"active":""}`,children:"2"}),a.jsx("div",{className:`step-line ${r>=3?"active":""}`}),a.jsx("div",{className:`step-circle ${r>=3?"active":""}`,children:"3"}),a.jsx("div",{className:`step-line ${r>=4?"active":""}`}),a.jsx("div",{className:`step-circle ${r>=4?"active":""}`,children:"4"})]}),a.jsx("button",{className:"modal-close-btn",onClick:e,children:"×"})]}),a.jsx("div",{className:"modal-content",children:f()})]})})},P2=()=>{je();const[t,e]=N.useState(""),[n,r]=N.useState(null),[i,s]=N.useState(!1),c=[{id:1,title:"新入社員基本オンボーディング",description:"新入社員向けの基本的なオンボーディングプロセス。入社前の準備から入社後90日までのステップを含みます。",duration:"90日",department:"全部門",status:"active",tasks:[{id:1,name:"入社書類の提出",dueDate:"入社7日前",status:"completed"},{id:2,name:"社内システムアカウント作成",dueDate:"入社3日前",status:"completed"},{id:3,name:"入社日オリエンテーション",dueDate:"入社日",status:"in-progress"},{id:4,name:"部門紹介ミーティング",dueDate:"入社3日目",status:"pending"},{id:5,name:"初回1on1面談",dueDate:"入社7日目",status:"pending"},{id:6,name:"30日レビュー",dueDate:"入社30日目",status:"pending"}],completionRate:35},{id:2,title:"エンジニア専門オンボーディング",description:"エンジニア部門向けの専門的なオンボーディングプロセス。技術スタックの習得や開発環境のセットアップなど、エンジニア特有のステップを含みます。",duration:"60日",department:"エンジニアリング部",status:"active",tasks:[{id:1,name:"開発環境セットアップ",dueDate:"入社1日目",status:"completed"},{id:2,name:"GitHubアクセス権限設定",dueDate:"入社1日目",status:"completed"},{id:3,name:"コーディング規約レビュー",dueDate:"入社3日目",status:"in-progress"},{id:4,name:"最初のコミット",dueDate:"入社5日目",status:"pending"},{id:5,name:"チームプロジェクト参加",dueDate:"入社14日目",status:"pending"}],completionRate:42},{id:3,title:"営業部門オンボーディング",description:"営業部門向けのオンボーディングプロセス。商品知識の習得や顧客対応スキルの向上など、営業活動に必要なステップを含みます。",duration:"45日",department:"営業部",status:"active",tasks:[{id:1,name:"製品研修",dueDate:"入社2日目",status:"completed"},{id:2,name:"CRMシステム研修",dueDate:"入社3日目",status:"completed"},{id:3,name:"営業ロールプレイング",dueDate:"入社5日目",status:"in-progress"},{id:4,name:"顧客訪問同行",dueDate:"入社10日目",status:"pending"}],completionRate:58},{id:4,title:"リモートワーカー向けオンボーディング",description:"リモートワーク社員向けのオンボーディングプロセス。オンラインコミュニケーションツールの活用やリモートワークのベストプラクティスを学びます。",duration:"30日",department:"全部門",status:"draft",tasks:[{id:1,name:"リモートワークポリシー確認",dueDate:"入社1日目",status:"pending"},{id:2,name:"コミュニケーションツール設定",dueDate:"入社1日目",status:"pending"},{id:3,name:"バーチャルチームミーティング",dueDate:"入社2日目",status:"pending"}],completionRate:0},{id:5,title:"管理職向けオンボーディング",description:"新任管理職向けのオンボーディングプロセス。リーダーシップスキルやチームマネジメントの基本を学びます。",duration:"60日",department:"全部門",status:"inactive",tasks:[{id:1,name:"リーダーシップ研修",dueDate:"就任1週目",status:"pending"},{id:2,name:"1on1ミーティング研修",dueDate:"就任2週目",status:"pending"},{id:3,name:"パフォーマンス評価研修",dueDate:"就任3週目",status:"pending"}],completionRate:0}].filter(C=>C.title.toLowerCase().includes(t.toLowerCase())||C.description.toLowerCase().includes(t.toLowerCase())||C.department.toLowerCase().includes(t.toLowerCase())),u=C=>{switch(C){case"active":return{label:"有効",className:"status-active"};case"draft":return{label:"下書き",className:"status-draft"};case"inactive":return{label:"無効",className:"status-inactive"};default:return{label:C,className:""}}},d=C=>{switch(C){case"completed":return{label:"完了",className:"task-status-completed"};case"in-progress":return{label:"進行中",className:"task-status-in-progress"};case"pending":return{label:"未着手",className:"task-status-pending"};default:return{label:C,className:""}}},f=C=>{r(C)},g=()=>{s(!0)},m=C=>{console.log("新規ジャーニー保存:",C),{...C,id:Date.now(),tasks:C.tasks.map(A=>({...A,id:A.id||Date.now()+Math.floor(Math.random()*1e3)})),resources:C.resources.map(A=>({...A,id:A.id||Date.now()+Math.floor(Math.random()*1e3)}))},s(!1),alert("オンボーディングジャーニーが作成されました")},I=()=>{console.log("新規タスク追加")};return a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"sidebar",children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h2",{className:"sidebar-title",children:"オンボーディングジャーニー"}),a.jsx("button",{className:"btn-new",onClick:g,children:"新規作成"})]}),a.jsx("div",{className:"search-container",children:a.jsx("input",{type:"text",placeholder:"ジャーニーを検索...",value:t,onChange:C=>e(C.target.value),className:"search-input"})}),a.jsx("ul",{className:"journey-list",children:c.length===0?a.jsx("div",{className:"no-results",children:a.jsx("p",{children:"検索条件に一致するジャーニーはありません"})}):c.map(C=>{const A=u(C.status),b=n&&n.id===C.id;return a.jsxs("li",{className:`journey-item ${b?"active":""}`,onClick:()=>f(C),children:[a.jsx("div",{className:"journey-name",children:C.title}),a.jsxs("div",{className:"journey-meta",children:[a.jsx("span",{className:`journey-status-badge ${A.className}`,children:A.label}),a.jsx("span",{className:"journey-department",children:C.department})]}),a.jsxs("div",{className:"journey-actions",children:[a.jsx("button",{className:"action-btn",title:"編集",children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"action-btn",title:"複製",children:a.jsx("i",{className:"fas fa-copy"})})]})]},C.id)})})]}),a.jsx("div",{className:"main-content",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"main-header",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"main-title",children:n.title}),a.jsx("p",{className:"main-description",children:n.description}),a.jsxs("div",{className:"journey-meta-details",children:[a.jsxs("div",{className:"meta-item",children:[a.jsx("span",{className:"meta-label",children:"期間:"}),a.jsx("span",{className:"meta-value",children:n.duration})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("span",{className:"meta-label",children:"部門:"}),a.jsx("span",{className:"meta-value",children:n.department})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("span",{className:"meta-label",children:"ステータス:"}),a.jsx("span",{className:`meta-value ${u(n.status).className}`,children:u(n.status).label})]})]})]}),a.jsxs("div",{className:"journey-actions-main",children:[a.jsx("button",{className:"btn-edit",children:"編集"}),a.jsx("button",{className:"btn-duplicate",children:"複製"}),a.jsx("button",{className:"btn-delete",children:"削除"})]})]}),a.jsxs("div",{className:"tasks-header",children:[a.jsx("h2",{className:"tasks-title",children:"タスク一覧"}),a.jsxs("button",{className:"btn-add-task",onClick:I,children:[a.jsx("i",{className:"fas fa-plus"})," タスク追加"]})]}),a.jsxs("table",{className:"task-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"タスク名"}),a.jsx("th",{children:"期限"}),a.jsx("th",{children:"ステータス"}),a.jsx("th",{children:"アクション"})]})}),a.jsx("tbody",{children:n.tasks.map(C=>{const A=d(C.status);return a.jsxs("tr",{children:[a.jsx("td",{children:C.name}),a.jsx("td",{children:C.dueDate}),a.jsx("td",{children:a.jsx("span",{className:`task-status ${A.className}`,children:A.label})}),a.jsxs("td",{className:"task-actions",children:[a.jsx("button",{className:"task-action-btn",title:"編集",children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"task-action-btn",title:"削除",children:a.jsx("i",{className:"fas fa-trash"})})]})]},C.id)})})]})]}):a.jsx("div",{className:"empty-state",children:a.jsxs("div",{className:"empty-state-content",children:[a.jsx("i",{className:"fas fa-road empty-icon"}),a.jsx("h2",{children:"ジャーニーを選択してください"}),a.jsx("p",{children:"左側のリストからジャーニーを選択すると、詳細が表示されます。"})]})})}),a.jsx(b2,{isOpen:i,onClose:()=>s(!1),onSave:m})]})};function D2(){const[t,e]=N.useState("渡辺 悠希"),[n,r]=N.useState(7),i=()=>{r(s=>s>0?-1:7)};return a.jsx(kI,{children:a.jsx(yI,{children:a.jsxs(WC,{children:[a.jsx(ge,{path:"/verify",element:a.jsx(u2,{})}),a.jsx(ge,{path:"/welcome",element:a.jsx(t2,{userName:t,daysUntilJoining:n})}),a.jsx(ge,{path:"/",element:a.jsx(vl,{to:"/admin/login",replace:!0})}),a.jsx(ge,{path:"/dashboard",element:a.jsx(r2,{daysUntilJoining:n,toggleJoiningStatus:i})}),a.jsx(ge,{path:"/documents",element:a.jsx(i2,{daysUntilJoining:n})}),a.jsx(ge,{path:"/items",element:a.jsx(s2,{daysUntilJoining:n})}),a.jsx(ge,{path:"/messages",element:a.jsx(o2,{daysUntilJoining:n})}),a.jsx(ge,{path:"/thank-you",element:a.jsx(a2,{daysUntilJoining:n})}),a.jsx(ge,{path:"/question",element:a.jsx(l2,{daysUntilJoining:n})}),a.jsx(ge,{path:"/completion",element:a.jsx(c2,{daysUntilJoining:n})}),a.jsx(ge,{path:"/morning-checkin",element:a.jsx(d2,{})}),a.jsx(ge,{path:"/evening-checkout",element:a.jsx(h2,{})}),a.jsx(ge,{path:"/morning-thanks",element:a.jsx(f2,{})}),a.jsx(ge,{path:"/evening-thanks",element:a.jsx(p2,{})}),a.jsx(ge,{path:"/weekly-survey",element:a.jsx(m2,{})}),a.jsx(ge,{path:"/weekly-survey-thanks",element:a.jsx(g2,{})}),a.jsx(ge,{path:"/monthly-survey-30",element:a.jsx(y2,{})}),a.jsx(ge,{path:"/monthly-survey-60",element:a.jsx(v2,{})}),a.jsx(ge,{path:"/monthly-survey-90",element:a.jsx(_2,{})}),a.jsx(ge,{path:"/monthly-survey-thanks",element:a.jsx(x2,{})}),a.jsx(ge,{path:"/admin/login",element:a.jsx(w2,{})}),a.jsxs(ge,{path:"/admin",element:a.jsx(T2,{}),children:[a.jsx(ge,{index:!0,element:a.jsx(vl,{to:"/admin/dashboard",replace:!0})}),a.jsx(ge,{path:"dashboard",element:a.jsx(S2,{})}),a.jsx(ge,{path:"employees",element:a.jsx(C2,{})}),a.jsx(ge,{path:"employees/:id",element:a.jsx(k2,{})}),a.jsx(ge,{path:"add-employee",element:a.jsx(I2,{})}),a.jsx(ge,{path:"journeys",element:a.jsx(P2,{})})]}),a.jsx(ge,{path:"*",element:a.jsx(vl,{to:"/admin/login",replace:!0})})]})})})}pd.createRoot(document.getElementById("root")).render(a.jsx(NE.StrictMode,{children:a.jsx(D2,{})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}